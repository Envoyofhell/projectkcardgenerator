(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))s(d);new MutationObserver(d=>{for(const v of d)if(v.type==="childList")for(const y of v.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&s(y)}).observe(document,{childList:!0,subtree:!0});function r(d){const v={};return d.integrity&&(v.integrity=d.integrity),d.referrerPolicy&&(v.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?v.credentials="include":d.crossOrigin==="anonymous"?v.credentials="omit":v.credentials="same-origin",v}function s(d){if(d.ep)return;d.ep=!0;const v=r(d);fetch(d.href,v)}})();const $g="modulepreload",qg=function(e){return"/"+e},Ju={},ih=function(t,r,s){if(!r||r.length===0)return t();const d=document.getElementsByTagName("link");return Promise.all(r.map(v=>{if(v=qg(v),v in Ju)return;Ju[v]=!0;const y=v.endsWith(".css"),u=y?'[rel="stylesheet"]':"";if(!!s)for(let h=d.length-1;h>=0;h--){const a=d[h];if(a.href===v&&(!y||a.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${v}"]${u}`))return;const f=document.createElement("link");if(f.rel=y?"stylesheet":$g,y||(f.as="script",f.crossOrigin=""),f.href=v,document.head.appendChild(f),y)return new Promise((h,a)=>{f.addEventListener("load",h),f.addEventListener("error",()=>a(new Error(`Unable to preload CSS for ${v}`)))})})).then(()=>t()).catch(v=>{const y=new Event("vite:preloadError",{cancelable:!0});if(y.payload=v,window.dispatchEvent(y),!y.defaultPrevented)throw v})};function ro(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Kg(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function s(){return this instanceof s?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(s){var d=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(r,s,d.get?d:{enumerable:!0,get:function(){return e[s]}})}),r}var ah={exports:{}},no={},oh={exports:{}},pe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oi=Symbol.for("react.element"),Qg=Symbol.for("react.portal"),Jg=Symbol.for("react.fragment"),Zg=Symbol.for("react.strict_mode"),ev=Symbol.for("react.profiler"),tv=Symbol.for("react.provider"),rv=Symbol.for("react.context"),nv=Symbol.for("react.forward_ref"),iv=Symbol.for("react.suspense"),av=Symbol.for("react.memo"),ov=Symbol.for("react.lazy"),Zu=Symbol.iterator;function sv(e){return e===null||typeof e!="object"?null:(e=Zu&&e[Zu]||e["@@iterator"],typeof e=="function"?e:null)}var sh={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},lh=Object.assign,uh={};function Tn(e,t,r){this.props=e,this.context=t,this.refs=uh,this.updater=r||sh}Tn.prototype.isReactComponent={};Tn.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Tn.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function ch(){}ch.prototype=Tn.prototype;function El(e,t,r){this.props=e,this.context=t,this.refs=uh,this.updater=r||sh}var Ol=El.prototype=new ch;Ol.constructor=El;lh(Ol,Tn.prototype);Ol.isPureReactComponent=!0;var ec=Array.isArray,fh=Object.prototype.hasOwnProperty,Pl={current:null},hh={key:!0,ref:!0,__self:!0,__source:!0};function dh(e,t,r){var s,d={},v=null,y=null;if(t!=null)for(s in t.ref!==void 0&&(y=t.ref),t.key!==void 0&&(v=""+t.key),t)fh.call(t,s)&&!hh.hasOwnProperty(s)&&(d[s]=t[s]);var u=arguments.length-2;if(u===1)d.children=r;else if(1<u){for(var n=Array(u),f=0;f<u;f++)n[f]=arguments[f+2];d.children=n}if(e&&e.defaultProps)for(s in u=e.defaultProps,u)d[s]===void 0&&(d[s]=u[s]);return{$$typeof:Oi,type:e,key:v,ref:y,props:d,_owner:Pl.current}}function lv(e,t){return{$$typeof:Oi,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Dl(e){return typeof e=="object"&&e!==null&&e.$$typeof===Oi}function uv(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var tc=/\/+/g;function zo(e,t){return typeof e=="object"&&e!==null&&e.key!=null?uv(""+e.key):t.toString(36)}function ca(e,t,r,s,d){var v=typeof e;(v==="undefined"||v==="boolean")&&(e=null);var y=!1;if(e===null)y=!0;else switch(v){case"string":case"number":y=!0;break;case"object":switch(e.$$typeof){case Oi:case Qg:y=!0}}if(y)return y=e,d=d(y),e=s===""?"."+zo(y,0):s,ec(d)?(r="",e!=null&&(r=e.replace(tc,"$&/")+"/"),ca(d,t,r,"",function(f){return f})):d!=null&&(Dl(d)&&(d=lv(d,r+(!d.key||y&&y.key===d.key?"":(""+d.key).replace(tc,"$&/")+"/")+e)),t.push(d)),1;if(y=0,s=s===""?".":s+":",ec(e))for(var u=0;u<e.length;u++){v=e[u];var n=s+zo(v,u);y+=ca(v,t,r,n,d)}else if(n=sv(e),typeof n=="function")for(e=n.call(e),u=0;!(v=e.next()).done;)v=v.value,n=s+zo(v,u++),y+=ca(v,t,r,n,d);else if(v==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return y}function Hi(e,t,r){if(e==null)return e;var s=[],d=0;return ca(e,s,"","",function(v){return t.call(r,v,d++)}),s}function cv(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var tt={current:null},fa={transition:null},fv={ReactCurrentDispatcher:tt,ReactCurrentBatchConfig:fa,ReactCurrentOwner:Pl};function ph(){throw Error("act(...) is not supported in production builds of React.")}pe.Children={map:Hi,forEach:function(e,t,r){Hi(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Hi(e,function(){t++}),t},toArray:function(e){return Hi(e,function(t){return t})||[]},only:function(e){if(!Dl(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};pe.Component=Tn;pe.Fragment=Jg;pe.Profiler=ev;pe.PureComponent=El;pe.StrictMode=Zg;pe.Suspense=iv;pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fv;pe.act=ph;pe.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=lh({},e.props),d=e.key,v=e.ref,y=e._owner;if(t!=null){if(t.ref!==void 0&&(v=t.ref,y=Pl.current),t.key!==void 0&&(d=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(n in t)fh.call(t,n)&&!hh.hasOwnProperty(n)&&(s[n]=t[n]===void 0&&u!==void 0?u[n]:t[n])}var n=arguments.length-2;if(n===1)s.children=r;else if(1<n){u=Array(n);for(var f=0;f<n;f++)u[f]=arguments[f+2];s.children=u}return{$$typeof:Oi,type:e.type,key:d,ref:v,props:s,_owner:y}};pe.createContext=function(e){return e={$$typeof:rv,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:tv,_context:e},e.Consumer=e};pe.createElement=dh;pe.createFactory=function(e){var t=dh.bind(null,e);return t.type=e,t};pe.createRef=function(){return{current:null}};pe.forwardRef=function(e){return{$$typeof:nv,render:e}};pe.isValidElement=Dl;pe.lazy=function(e){return{$$typeof:ov,_payload:{_status:-1,_result:e},_init:cv}};pe.memo=function(e,t){return{$$typeof:av,type:e,compare:t===void 0?null:t}};pe.startTransition=function(e){var t=fa.transition;fa.transition={};try{e()}finally{fa.transition=t}};pe.unstable_act=ph;pe.useCallback=function(e,t){return tt.current.useCallback(e,t)};pe.useContext=function(e){return tt.current.useContext(e)};pe.useDebugValue=function(){};pe.useDeferredValue=function(e){return tt.current.useDeferredValue(e)};pe.useEffect=function(e,t){return tt.current.useEffect(e,t)};pe.useId=function(){return tt.current.useId()};pe.useImperativeHandle=function(e,t,r){return tt.current.useImperativeHandle(e,t,r)};pe.useInsertionEffect=function(e,t){return tt.current.useInsertionEffect(e,t)};pe.useLayoutEffect=function(e,t){return tt.current.useLayoutEffect(e,t)};pe.useMemo=function(e,t){return tt.current.useMemo(e,t)};pe.useReducer=function(e,t,r){return tt.current.useReducer(e,t,r)};pe.useRef=function(e){return tt.current.useRef(e)};pe.useState=function(e){return tt.current.useState(e)};pe.useSyncExternalStore=function(e,t,r){return tt.current.useSyncExternalStore(e,t,r)};pe.useTransition=function(){return tt.current.useTransition()};pe.version="18.3.1";oh.exports=pe;var ae=oh.exports;const ge=ro(ae);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hv=ae,dv=Symbol.for("react.element"),pv=Symbol.for("react.fragment"),gv=Object.prototype.hasOwnProperty,vv=hv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,mv={key:!0,ref:!0,__self:!0,__source:!0};function gh(e,t,r){var s,d={},v=null,y=null;r!==void 0&&(v=""+r),t.key!==void 0&&(v=""+t.key),t.ref!==void 0&&(y=t.ref);for(s in t)gv.call(t,s)&&!mv.hasOwnProperty(s)&&(d[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)d[s]===void 0&&(d[s]=t[s]);return{$$typeof:dv,type:e,key:v,ref:y,props:d,_owner:vv.current}}no.Fragment=pv;no.jsx=gh;no.jsxs=gh;ah.exports=no;var R=ah.exports,vh={exports:{}},vt={},mh={exports:{}},yh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(U,b){var O=U.length;U.push(b);e:for(;0<O;){var k=O-1>>>1,D=U[k];if(0<d(D,b))U[k]=b,U[O]=D,O=k;else break e}}function r(U){return U.length===0?null:U[0]}function s(U){if(U.length===0)return null;var b=U[0],O=U.pop();if(O!==b){U[0]=O;e:for(var k=0,D=U.length,B=D>>>1;k<B;){var P=2*(k+1)-1,T=U[P],A=P+1,F=U[A];if(0>d(T,O))A<D&&0>d(F,T)?(U[k]=F,U[A]=O,k=A):(U[k]=T,U[P]=O,k=P);else if(A<D&&0>d(F,O))U[k]=F,U[A]=O,k=A;else break e}}return b}function d(U,b){var O=U.sortIndex-b.sortIndex;return O!==0?O:U.id-b.id}if(typeof performance=="object"&&typeof performance.now=="function"){var v=performance;e.unstable_now=function(){return v.now()}}else{var y=Date,u=y.now();e.unstable_now=function(){return y.now()-u}}var n=[],f=[],h=1,a=null,o=3,i=!1,l=!1,p=!1,c=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(U){for(var b=r(f);b!==null;){if(b.callback===null)s(f);else if(b.startTime<=U)s(f),b.sortIndex=b.expirationTime,t(n,b);else break;b=r(f)}}function S(U){if(p=!1,C(U),!l)if(r(n)!==null)l=!0,ie(x);else{var b=r(f);b!==null&&se(S,b.startTime-U)}}function x(U,b){l=!1,p&&(p=!1,g(E),E=-1),i=!0;var O=o;try{for(C(b),a=r(n);a!==null&&(!(a.expirationTime>b)||U&&!z());){var k=a.callback;if(typeof k=="function"){a.callback=null,o=a.priorityLevel;var D=k(a.expirationTime<=b);b=e.unstable_now(),typeof D=="function"?a.callback=D:a===r(n)&&s(n),C(b)}else s(n);a=r(n)}if(a!==null)var B=!0;else{var P=r(f);P!==null&&se(S,P.startTime-b),B=!1}return B}finally{a=null,o=O,i=!1}}var w=!1,_=null,E=-1,I=5,M=-1;function z(){return!(e.unstable_now()-M<I)}function Q(){if(_!==null){var U=e.unstable_now();M=U;var b=!0;try{b=_(!0,U)}finally{b?ee():(w=!1,_=null)}}else w=!1}var ee;if(typeof m=="function")ee=function(){m(Q)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,J=q.port2;q.port1.onmessage=Q,ee=function(){J.postMessage(null)}}else ee=function(){c(Q,0)};function ie(U){_=U,w||(w=!0,ee())}function se(U,b){E=c(function(){U(e.unstable_now())},b)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(U){U.callback=null},e.unstable_continueExecution=function(){l||i||(l=!0,ie(x))},e.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<U?Math.floor(1e3/U):5},e.unstable_getCurrentPriorityLevel=function(){return o},e.unstable_getFirstCallbackNode=function(){return r(n)},e.unstable_next=function(U){switch(o){case 1:case 2:case 3:var b=3;break;default:b=o}var O=o;o=b;try{return U()}finally{o=O}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(U,b){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var O=o;o=U;try{return b()}finally{o=O}},e.unstable_scheduleCallback=function(U,b,O){var k=e.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?k+O:k):O=k,U){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=O+D,U={id:h++,callback:b,priorityLevel:U,startTime:O,expirationTime:D,sortIndex:-1},O>k?(U.sortIndex=O,t(f,U),r(n)===null&&U===r(f)&&(p?(g(E),E=-1):p=!0,se(S,O-k))):(U.sortIndex=D,t(n,U),l||i||(l=!0,ie(x))),U},e.unstable_shouldYield=z,e.unstable_wrapCallback=function(U){var b=o;return function(){var O=o;o=b;try{return U.apply(this,arguments)}finally{o=O}}}})(yh);mh.exports=yh;var yv=mh.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cv=ae,gt=yv;function Z(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ch=new Set,ii={};function Gr(e,t){pn(e,t),pn(e+"Capture",t)}function pn(e,t){for(ii[e]=t,e=0;e<t.length;e++)Ch.add(t[e])}var qt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Os=Object.prototype.hasOwnProperty,Sv=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,rc={},nc={};function xv(e){return Os.call(nc,e)?!0:Os.call(rc,e)?!1:Sv.test(e)?nc[e]=!0:(rc[e]=!0,!1)}function wv(e,t,r,s){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function bv(e,t,r,s){if(t===null||typeof t>"u"||wv(e,t,r,s))return!0;if(s)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function rt(e,t,r,s,d,v,y){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=d,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=v,this.removeEmptyString=y}var Xe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Xe[e]=new rt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Xe[t]=new rt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Xe[e]=new rt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Xe[e]=new rt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Xe[e]=new rt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Xe[e]=new rt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Xe[e]=new rt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Xe[e]=new rt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Xe[e]=new rt(e,5,!1,e.toLowerCase(),null,!1,!1)});var kl=/[\-:]([a-z])/g;function Il(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(kl,Il);Xe[t]=new rt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(kl,Il);Xe[t]=new rt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(kl,Il);Xe[t]=new rt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Xe[e]=new rt(e,1,!1,e.toLowerCase(),null,!1,!1)});Xe.xlinkHref=new rt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Xe[e]=new rt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Al(e,t,r,s){var d=Xe.hasOwnProperty(t)?Xe[t]:null;(d!==null?d.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(bv(t,r,d,s)&&(r=null),s||d===null?xv(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):d.mustUseProperty?e[d.propertyName]=r===null?d.type===3?!1:"":r:(t=d.attributeName,s=d.attributeNamespace,r===null?e.removeAttribute(t):(d=d.type,r=d===3||d===4&&r===!0?"":""+r,s?e.setAttributeNS(s,t,r):e.setAttribute(t,r))))}var Zt=Cv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Gi=Symbol.for("react.element"),$r=Symbol.for("react.portal"),qr=Symbol.for("react.fragment"),Ml=Symbol.for("react.strict_mode"),Ps=Symbol.for("react.profiler"),Sh=Symbol.for("react.provider"),xh=Symbol.for("react.context"),Fl=Symbol.for("react.forward_ref"),Ds=Symbol.for("react.suspense"),ks=Symbol.for("react.suspense_list"),Ll=Symbol.for("react.memo"),tr=Symbol.for("react.lazy"),wh=Symbol.for("react.offscreen"),ic=Symbol.iterator;function An(e){return e===null||typeof e!="object"?null:(e=ic&&e[ic]||e["@@iterator"],typeof e=="function"?e:null)}var ke=Object.assign,Wo;function Hn(e){if(Wo===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Wo=t&&t[1]||""}return`
`+Wo+e}var Uo=!1;function Ho(e,t){if(!e||Uo)return"";Uo=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(f){var s=f}Reflect.construct(e,[],t)}else{try{t.call()}catch(f){s=f}e.call(t.prototype)}else{try{throw Error()}catch(f){s=f}e()}}catch(f){if(f&&s&&typeof f.stack=="string"){for(var d=f.stack.split(`
`),v=s.stack.split(`
`),y=d.length-1,u=v.length-1;1<=y&&0<=u&&d[y]!==v[u];)u--;for(;1<=y&&0<=u;y--,u--)if(d[y]!==v[u]){if(y!==1||u!==1)do if(y--,u--,0>u||d[y]!==v[u]){var n=`
`+d[y].replace(" at new "," at ");return e.displayName&&n.includes("<anonymous>")&&(n=n.replace("<anonymous>",e.displayName)),n}while(1<=y&&0<=u);break}}}finally{Uo=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Hn(e):""}function _v(e){switch(e.tag){case 5:return Hn(e.type);case 16:return Hn("Lazy");case 13:return Hn("Suspense");case 19:return Hn("SuspenseList");case 0:case 2:case 15:return e=Ho(e.type,!1),e;case 11:return e=Ho(e.type.render,!1),e;case 1:return e=Ho(e.type,!0),e;default:return""}}function Is(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case qr:return"Fragment";case $r:return"Portal";case Ps:return"Profiler";case Ml:return"StrictMode";case Ds:return"Suspense";case ks:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case xh:return(e.displayName||"Context")+".Consumer";case Sh:return(e._context.displayName||"Context")+".Provider";case Fl:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ll:return t=e.displayName||null,t!==null?t:Is(e.type)||"Memo";case tr:t=e._payload,e=e._init;try{return Is(e(t))}catch{}}return null}function Tv(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Is(t);case 8:return t===Ml?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Cr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function bh(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Ev(e){var t=bh(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var d=r.get,v=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return d.call(this)},set:function(y){s=""+y,v.call(this,y)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(y){s=""+y},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Vi(e){e._valueTracker||(e._valueTracker=Ev(e))}function _h(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),s="";return e&&(s=bh(e)?e.checked?"true":"false":e.value),e=s,e!==r?(t.setValue(e),!0):!1}function ba(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function As(e,t){var r=t.checked;return ke({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function ac(e,t){var r=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;r=Cr(t.value!=null?t.value:r),e._wrapperState={initialChecked:s,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Th(e,t){t=t.checked,t!=null&&Al(e,"checked",t,!1)}function Ms(e,t){Th(e,t);var r=Cr(t.value),s=t.type;if(r!=null)s==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Fs(e,t.type,r):t.hasOwnProperty("defaultValue")&&Fs(e,t.type,Cr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function oc(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Fs(e,t,r){(t!=="number"||ba(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Gn=Array.isArray;function sn(e,t,r,s){if(e=e.options,t){t={};for(var d=0;d<r.length;d++)t["$"+r[d]]=!0;for(r=0;r<e.length;r++)d=t.hasOwnProperty("$"+e[r].value),e[r].selected!==d&&(e[r].selected=d),d&&s&&(e[r].defaultSelected=!0)}else{for(r=""+Cr(r),t=null,d=0;d<e.length;d++){if(e[d].value===r){e[d].selected=!0,s&&(e[d].defaultSelected=!0);return}t!==null||e[d].disabled||(t=e[d])}t!==null&&(t.selected=!0)}}function Ls(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Z(91));return ke({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function sc(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Z(92));if(Gn(r)){if(1<r.length)throw Error(Z(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Cr(r)}}function Eh(e,t){var r=Cr(t.value),s=Cr(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),s!=null&&(e.defaultValue=""+s)}function lc(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Oh(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Rs(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Oh(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Xi,Ph=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,s,d){MSApp.execUnsafeLocalFunction(function(){return e(t,r,s,d)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Xi=Xi||document.createElement("div"),Xi.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Xi.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ai(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Yn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ov=["Webkit","ms","Moz","O"];Object.keys(Yn).forEach(function(e){Ov.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Yn[t]=Yn[e]})});function Dh(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Yn.hasOwnProperty(e)&&Yn[e]?(""+t).trim():t+"px"}function kh(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var s=r.indexOf("--")===0,d=Dh(r,t[r],s);r==="float"&&(r="cssFloat"),s?e.setProperty(r,d):e[r]=d}}var Pv=ke({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Bs(e,t){if(t){if(Pv[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Z(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Z(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Z(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Z(62))}}function Ns(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var js=null;function Rl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var zs=null,ln=null,un=null;function uc(e){if(e=ki(e)){if(typeof zs!="function")throw Error(Z(280));var t=e.stateNode;t&&(t=lo(t),zs(e.stateNode,e.type,t))}}function Ih(e){ln?un?un.push(e):un=[e]:ln=e}function Ah(){if(ln){var e=ln,t=un;if(un=ln=null,uc(e),t)for(e=0;e<t.length;e++)uc(t[e])}}function Mh(e,t){return e(t)}function Fh(){}var Go=!1;function Lh(e,t,r){if(Go)return e(t,r);Go=!0;try{return Mh(e,t,r)}finally{Go=!1,(ln!==null||un!==null)&&(Fh(),Ah())}}function oi(e,t){var r=e.stateNode;if(r===null)return null;var s=lo(r);if(s===null)return null;r=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(Z(231,t,typeof r));return r}var Ws=!1;if(qt)try{var Mn={};Object.defineProperty(Mn,"passive",{get:function(){Ws=!0}}),window.addEventListener("test",Mn,Mn),window.removeEventListener("test",Mn,Mn)}catch{Ws=!1}function Dv(e,t,r,s,d,v,y,u,n){var f=Array.prototype.slice.call(arguments,3);try{t.apply(r,f)}catch(h){this.onError(h)}}var $n=!1,_a=null,Ta=!1,Us=null,kv={onError:function(e){$n=!0,_a=e}};function Iv(e,t,r,s,d,v,y,u,n){$n=!1,_a=null,Dv.apply(kv,arguments)}function Av(e,t,r,s,d,v,y,u,n){if(Iv.apply(this,arguments),$n){if($n){var f=_a;$n=!1,_a=null}else throw Error(Z(198));Ta||(Ta=!0,Us=f)}}function Vr(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Rh(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function cc(e){if(Vr(e)!==e)throw Error(Z(188))}function Mv(e){var t=e.alternate;if(!t){if(t=Vr(e),t===null)throw Error(Z(188));return t!==e?null:e}for(var r=e,s=t;;){var d=r.return;if(d===null)break;var v=d.alternate;if(v===null){if(s=d.return,s!==null){r=s;continue}break}if(d.child===v.child){for(v=d.child;v;){if(v===r)return cc(d),e;if(v===s)return cc(d),t;v=v.sibling}throw Error(Z(188))}if(r.return!==s.return)r=d,s=v;else{for(var y=!1,u=d.child;u;){if(u===r){y=!0,r=d,s=v;break}if(u===s){y=!0,s=d,r=v;break}u=u.sibling}if(!y){for(u=v.child;u;){if(u===r){y=!0,r=v,s=d;break}if(u===s){y=!0,s=v,r=d;break}u=u.sibling}if(!y)throw Error(Z(189))}}if(r.alternate!==s)throw Error(Z(190))}if(r.tag!==3)throw Error(Z(188));return r.stateNode.current===r?e:t}function Bh(e){return e=Mv(e),e!==null?Nh(e):null}function Nh(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Nh(e);if(t!==null)return t;e=e.sibling}return null}var jh=gt.unstable_scheduleCallback,fc=gt.unstable_cancelCallback,Fv=gt.unstable_shouldYield,Lv=gt.unstable_requestPaint,Ae=gt.unstable_now,Rv=gt.unstable_getCurrentPriorityLevel,Bl=gt.unstable_ImmediatePriority,zh=gt.unstable_UserBlockingPriority,Ea=gt.unstable_NormalPriority,Bv=gt.unstable_LowPriority,Wh=gt.unstable_IdlePriority,io=null,Ut=null;function Nv(e){if(Ut&&typeof Ut.onCommitFiberRoot=="function")try{Ut.onCommitFiberRoot(io,e,void 0,(e.current.flags&128)===128)}catch{}}var Mt=Math.clz32?Math.clz32:Wv,jv=Math.log,zv=Math.LN2;function Wv(e){return e>>>=0,e===0?32:31-(jv(e)/zv|0)|0}var Yi=64,$i=4194304;function Vn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Oa(e,t){var r=e.pendingLanes;if(r===0)return 0;var s=0,d=e.suspendedLanes,v=e.pingedLanes,y=r&268435455;if(y!==0){var u=y&~d;u!==0?s=Vn(u):(v&=y,v!==0&&(s=Vn(v)))}else y=r&~d,y!==0?s=Vn(y):v!==0&&(s=Vn(v));if(s===0)return 0;if(t!==0&&t!==s&&!(t&d)&&(d=s&-s,v=t&-t,d>=v||d===16&&(v&4194240)!==0))return t;if(s&4&&(s|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)r=31-Mt(t),d=1<<r,s|=e[r],t&=~d;return s}function Uv(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Hv(e,t){for(var r=e.suspendedLanes,s=e.pingedLanes,d=e.expirationTimes,v=e.pendingLanes;0<v;){var y=31-Mt(v),u=1<<y,n=d[y];n===-1?(!(u&r)||u&s)&&(d[y]=Uv(u,t)):n<=t&&(e.expiredLanes|=u),v&=~u}}function Hs(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Uh(){var e=Yi;return Yi<<=1,!(Yi&4194240)&&(Yi=64),e}function Vo(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Pi(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Mt(t),e[t]=r}function Gv(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<r;){var d=31-Mt(r),v=1<<d;t[d]=0,s[d]=-1,e[d]=-1,r&=~v}}function Nl(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var s=31-Mt(r),d=1<<s;d&t|e[s]&t&&(e[s]|=t),r&=~d}}var Se=0;function Hh(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Gh,jl,Vh,Xh,Yh,Gs=!1,qi=[],sr=null,lr=null,ur=null,si=new Map,li=new Map,nr=[],Vv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function hc(e,t){switch(e){case"focusin":case"focusout":sr=null;break;case"dragenter":case"dragleave":lr=null;break;case"mouseover":case"mouseout":ur=null;break;case"pointerover":case"pointerout":si.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":li.delete(t.pointerId)}}function Fn(e,t,r,s,d,v){return e===null||e.nativeEvent!==v?(e={blockedOn:t,domEventName:r,eventSystemFlags:s,nativeEvent:v,targetContainers:[d]},t!==null&&(t=ki(t),t!==null&&jl(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,d!==null&&t.indexOf(d)===-1&&t.push(d),e)}function Xv(e,t,r,s,d){switch(t){case"focusin":return sr=Fn(sr,e,t,r,s,d),!0;case"dragenter":return lr=Fn(lr,e,t,r,s,d),!0;case"mouseover":return ur=Fn(ur,e,t,r,s,d),!0;case"pointerover":var v=d.pointerId;return si.set(v,Fn(si.get(v)||null,e,t,r,s,d)),!0;case"gotpointercapture":return v=d.pointerId,li.set(v,Fn(li.get(v)||null,e,t,r,s,d)),!0}return!1}function $h(e){var t=Mr(e.target);if(t!==null){var r=Vr(t);if(r!==null){if(t=r.tag,t===13){if(t=Rh(r),t!==null){e.blockedOn=t,Yh(e.priority,function(){Vh(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ha(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Vs(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var s=new r.constructor(r.type,r);js=s,r.target.dispatchEvent(s),js=null}else return t=ki(r),t!==null&&jl(t),e.blockedOn=r,!1;t.shift()}return!0}function dc(e,t,r){ha(e)&&r.delete(t)}function Yv(){Gs=!1,sr!==null&&ha(sr)&&(sr=null),lr!==null&&ha(lr)&&(lr=null),ur!==null&&ha(ur)&&(ur=null),si.forEach(dc),li.forEach(dc)}function Ln(e,t){e.blockedOn===t&&(e.blockedOn=null,Gs||(Gs=!0,gt.unstable_scheduleCallback(gt.unstable_NormalPriority,Yv)))}function ui(e){function t(d){return Ln(d,e)}if(0<qi.length){Ln(qi[0],e);for(var r=1;r<qi.length;r++){var s=qi[r];s.blockedOn===e&&(s.blockedOn=null)}}for(sr!==null&&Ln(sr,e),lr!==null&&Ln(lr,e),ur!==null&&Ln(ur,e),si.forEach(t),li.forEach(t),r=0;r<nr.length;r++)s=nr[r],s.blockedOn===e&&(s.blockedOn=null);for(;0<nr.length&&(r=nr[0],r.blockedOn===null);)$h(r),r.blockedOn===null&&nr.shift()}var cn=Zt.ReactCurrentBatchConfig,Pa=!0;function $v(e,t,r,s){var d=Se,v=cn.transition;cn.transition=null;try{Se=1,zl(e,t,r,s)}finally{Se=d,cn.transition=v}}function qv(e,t,r,s){var d=Se,v=cn.transition;cn.transition=null;try{Se=4,zl(e,t,r,s)}finally{Se=d,cn.transition=v}}function zl(e,t,r,s){if(Pa){var d=Vs(e,t,r,s);if(d===null)ts(e,t,s,Da,r),hc(e,s);else if(Xv(d,e,t,r,s))s.stopPropagation();else if(hc(e,s),t&4&&-1<Vv.indexOf(e)){for(;d!==null;){var v=ki(d);if(v!==null&&Gh(v),v=Vs(e,t,r,s),v===null&&ts(e,t,s,Da,r),v===d)break;d=v}d!==null&&s.stopPropagation()}else ts(e,t,s,null,r)}}var Da=null;function Vs(e,t,r,s){if(Da=null,e=Rl(s),e=Mr(e),e!==null)if(t=Vr(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Rh(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Da=e,null}function qh(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Rv()){case Bl:return 1;case zh:return 4;case Ea:case Bv:return 16;case Wh:return 536870912;default:return 16}default:return 16}}var ar=null,Wl=null,da=null;function Kh(){if(da)return da;var e,t=Wl,r=t.length,s,d="value"in ar?ar.value:ar.textContent,v=d.length;for(e=0;e<r&&t[e]===d[e];e++);var y=r-e;for(s=1;s<=y&&t[r-s]===d[v-s];s++);return da=d.slice(e,1<s?1-s:void 0)}function pa(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ki(){return!0}function pc(){return!1}function mt(e){function t(r,s,d,v,y){this._reactName=r,this._targetInst=d,this.type=s,this.nativeEvent=v,this.target=y,this.currentTarget=null;for(var u in e)e.hasOwnProperty(u)&&(r=e[u],this[u]=r?r(v):v[u]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Ki:pc,this.isPropagationStopped=pc,this}return ke(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ki)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ki)},persist:function(){},isPersistent:Ki}),t}var En={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ul=mt(En),Di=ke({},En,{view:0,detail:0}),Kv=mt(Di),Xo,Yo,Rn,ao=ke({},Di,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Rn&&(Rn&&e.type==="mousemove"?(Xo=e.screenX-Rn.screenX,Yo=e.screenY-Rn.screenY):Yo=Xo=0,Rn=e),Xo)},movementY:function(e){return"movementY"in e?e.movementY:Yo}}),gc=mt(ao),Qv=ke({},ao,{dataTransfer:0}),Jv=mt(Qv),Zv=ke({},Di,{relatedTarget:0}),$o=mt(Zv),em=ke({},En,{animationName:0,elapsedTime:0,pseudoElement:0}),tm=mt(em),rm=ke({},En,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),nm=mt(rm),im=ke({},En,{data:0}),vc=mt(im),am={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},om={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lm(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=sm[e])?!!t[e]:!1}function Hl(){return lm}var um=ke({},Di,{key:function(e){if(e.key){var t=am[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=pa(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?om[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hl,charCode:function(e){return e.type==="keypress"?pa(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?pa(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),cm=mt(um),fm=ke({},ao,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mc=mt(fm),hm=ke({},Di,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hl}),dm=mt(hm),pm=ke({},En,{propertyName:0,elapsedTime:0,pseudoElement:0}),gm=mt(pm),vm=ke({},ao,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),mm=mt(vm),ym=[9,13,27,32],Gl=qt&&"CompositionEvent"in window,qn=null;qt&&"documentMode"in document&&(qn=document.documentMode);var Cm=qt&&"TextEvent"in window&&!qn,Qh=qt&&(!Gl||qn&&8<qn&&11>=qn),yc=String.fromCharCode(32),Cc=!1;function Jh(e,t){switch(e){case"keyup":return ym.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zh(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Kr=!1;function Sm(e,t){switch(e){case"compositionend":return Zh(t);case"keypress":return t.which!==32?null:(Cc=!0,yc);case"textInput":return e=t.data,e===yc&&Cc?null:e;default:return null}}function xm(e,t){if(Kr)return e==="compositionend"||!Gl&&Jh(e,t)?(e=Kh(),da=Wl=ar=null,Kr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Qh&&t.locale!=="ko"?null:t.data;default:return null}}var wm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Sc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!wm[e.type]:t==="textarea"}function ed(e,t,r,s){Ih(s),t=ka(t,"onChange"),0<t.length&&(r=new Ul("onChange","change",null,r,s),e.push({event:r,listeners:t}))}var Kn=null,ci=null;function bm(e){fd(e,0)}function oo(e){var t=Zr(e);if(_h(t))return e}function _m(e,t){if(e==="change")return t}var td=!1;if(qt){var qo;if(qt){var Ko="oninput"in document;if(!Ko){var xc=document.createElement("div");xc.setAttribute("oninput","return;"),Ko=typeof xc.oninput=="function"}qo=Ko}else qo=!1;td=qo&&(!document.documentMode||9<document.documentMode)}function wc(){Kn&&(Kn.detachEvent("onpropertychange",rd),ci=Kn=null)}function rd(e){if(e.propertyName==="value"&&oo(ci)){var t=[];ed(t,ci,e,Rl(e)),Lh(bm,t)}}function Tm(e,t,r){e==="focusin"?(wc(),Kn=t,ci=r,Kn.attachEvent("onpropertychange",rd)):e==="focusout"&&wc()}function Em(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return oo(ci)}function Om(e,t){if(e==="click")return oo(t)}function Pm(e,t){if(e==="input"||e==="change")return oo(t)}function Dm(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Lt=typeof Object.is=="function"?Object.is:Dm;function fi(e,t){if(Lt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var d=r[s];if(!Os.call(t,d)||!Lt(e[d],t[d]))return!1}return!0}function bc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function _c(e,t){var r=bc(e);e=0;for(var s;r;){if(r.nodeType===3){if(s=e+r.textContent.length,e<=t&&s>=t)return{node:r,offset:t-e};e=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=bc(r)}}function nd(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?nd(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function id(){for(var e=window,t=ba();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=ba(e.document)}return t}function Vl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function km(e){var t=id(),r=e.focusedElem,s=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&nd(r.ownerDocument.documentElement,r)){if(s!==null&&Vl(r)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var d=r.textContent.length,v=Math.min(s.start,d);s=s.end===void 0?v:Math.min(s.end,d),!e.extend&&v>s&&(d=s,s=v,v=d),d=_c(r,v);var y=_c(r,s);d&&y&&(e.rangeCount!==1||e.anchorNode!==d.node||e.anchorOffset!==d.offset||e.focusNode!==y.node||e.focusOffset!==y.offset)&&(t=t.createRange(),t.setStart(d.node,d.offset),e.removeAllRanges(),v>s?(e.addRange(t),e.extend(y.node,y.offset)):(t.setEnd(y.node,y.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Im=qt&&"documentMode"in document&&11>=document.documentMode,Qr=null,Xs=null,Qn=null,Ys=!1;function Tc(e,t,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Ys||Qr==null||Qr!==ba(s)||(s=Qr,"selectionStart"in s&&Vl(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Qn&&fi(Qn,s)||(Qn=s,s=ka(Xs,"onSelect"),0<s.length&&(t=new Ul("onSelect","select",null,t,r),e.push({event:t,listeners:s}),t.target=Qr)))}function Qi(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Jr={animationend:Qi("Animation","AnimationEnd"),animationiteration:Qi("Animation","AnimationIteration"),animationstart:Qi("Animation","AnimationStart"),transitionend:Qi("Transition","TransitionEnd")},Qo={},ad={};qt&&(ad=document.createElement("div").style,"AnimationEvent"in window||(delete Jr.animationend.animation,delete Jr.animationiteration.animation,delete Jr.animationstart.animation),"TransitionEvent"in window||delete Jr.transitionend.transition);function so(e){if(Qo[e])return Qo[e];if(!Jr[e])return e;var t=Jr[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in ad)return Qo[e]=t[r];return e}var od=so("animationend"),sd=so("animationiteration"),ld=so("animationstart"),ud=so("transitionend"),cd=new Map,Ec="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function wr(e,t){cd.set(e,t),Gr(t,[e])}for(var Jo=0;Jo<Ec.length;Jo++){var Zo=Ec[Jo],Am=Zo.toLowerCase(),Mm=Zo[0].toUpperCase()+Zo.slice(1);wr(Am,"on"+Mm)}wr(od,"onAnimationEnd");wr(sd,"onAnimationIteration");wr(ld,"onAnimationStart");wr("dblclick","onDoubleClick");wr("focusin","onFocus");wr("focusout","onBlur");wr(ud,"onTransitionEnd");pn("onMouseEnter",["mouseout","mouseover"]);pn("onMouseLeave",["mouseout","mouseover"]);pn("onPointerEnter",["pointerout","pointerover"]);pn("onPointerLeave",["pointerout","pointerover"]);Gr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Gr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Gr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Gr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Gr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Gr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fm=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xn));function Oc(e,t,r){var s=e.type||"unknown-event";e.currentTarget=r,Av(s,t,void 0,e),e.currentTarget=null}function fd(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var s=e[r],d=s.event;s=s.listeners;e:{var v=void 0;if(t)for(var y=s.length-1;0<=y;y--){var u=s[y],n=u.instance,f=u.currentTarget;if(u=u.listener,n!==v&&d.isPropagationStopped())break e;Oc(d,u,f),v=n}else for(y=0;y<s.length;y++){if(u=s[y],n=u.instance,f=u.currentTarget,u=u.listener,n!==v&&d.isPropagationStopped())break e;Oc(d,u,f),v=n}}}if(Ta)throw e=Us,Ta=!1,Us=null,e}function _e(e,t){var r=t[Js];r===void 0&&(r=t[Js]=new Set);var s=e+"__bubble";r.has(s)||(hd(t,e,2,!1),r.add(s))}function es(e,t,r){var s=0;t&&(s|=4),hd(r,e,s,t)}var Ji="_reactListening"+Math.random().toString(36).slice(2);function hi(e){if(!e[Ji]){e[Ji]=!0,Ch.forEach(function(r){r!=="selectionchange"&&(Fm.has(r)||es(r,!1,e),es(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ji]||(t[Ji]=!0,es("selectionchange",!1,t))}}function hd(e,t,r,s){switch(qh(t)){case 1:var d=$v;break;case 4:d=qv;break;default:d=zl}r=d.bind(null,t,r,e),d=void 0,!Ws||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(d=!0),s?d!==void 0?e.addEventListener(t,r,{capture:!0,passive:d}):e.addEventListener(t,r,!0):d!==void 0?e.addEventListener(t,r,{passive:d}):e.addEventListener(t,r,!1)}function ts(e,t,r,s,d){var v=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var y=s.tag;if(y===3||y===4){var u=s.stateNode.containerInfo;if(u===d||u.nodeType===8&&u.parentNode===d)break;if(y===4)for(y=s.return;y!==null;){var n=y.tag;if((n===3||n===4)&&(n=y.stateNode.containerInfo,n===d||n.nodeType===8&&n.parentNode===d))return;y=y.return}for(;u!==null;){if(y=Mr(u),y===null)return;if(n=y.tag,n===5||n===6){s=v=y;continue e}u=u.parentNode}}s=s.return}Lh(function(){var f=v,h=Rl(r),a=[];e:{var o=cd.get(e);if(o!==void 0){var i=Ul,l=e;switch(e){case"keypress":if(pa(r)===0)break e;case"keydown":case"keyup":i=cm;break;case"focusin":l="focus",i=$o;break;case"focusout":l="blur",i=$o;break;case"beforeblur":case"afterblur":i=$o;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":i=gc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":i=Jv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":i=dm;break;case od:case sd:case ld:i=tm;break;case ud:i=gm;break;case"scroll":i=Kv;break;case"wheel":i=mm;break;case"copy":case"cut":case"paste":i=nm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":i=mc}var p=(t&4)!==0,c=!p&&e==="scroll",g=p?o!==null?o+"Capture":null:o;p=[];for(var m=f,C;m!==null;){C=m;var S=C.stateNode;if(C.tag===5&&S!==null&&(C=S,g!==null&&(S=oi(m,g),S!=null&&p.push(di(m,S,C)))),c)break;m=m.return}0<p.length&&(o=new i(o,l,null,r,h),a.push({event:o,listeners:p}))}}if(!(t&7)){e:{if(o=e==="mouseover"||e==="pointerover",i=e==="mouseout"||e==="pointerout",o&&r!==js&&(l=r.relatedTarget||r.fromElement)&&(Mr(l)||l[Kt]))break e;if((i||o)&&(o=h.window===h?h:(o=h.ownerDocument)?o.defaultView||o.parentWindow:window,i?(l=r.relatedTarget||r.toElement,i=f,l=l?Mr(l):null,l!==null&&(c=Vr(l),l!==c||l.tag!==5&&l.tag!==6)&&(l=null)):(i=null,l=f),i!==l)){if(p=gc,S="onMouseLeave",g="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(p=mc,S="onPointerLeave",g="onPointerEnter",m="pointer"),c=i==null?o:Zr(i),C=l==null?o:Zr(l),o=new p(S,m+"leave",i,r,h),o.target=c,o.relatedTarget=C,S=null,Mr(h)===f&&(p=new p(g,m+"enter",l,r,h),p.target=C,p.relatedTarget=c,S=p),c=S,i&&l)t:{for(p=i,g=l,m=0,C=p;C;C=Xr(C))m++;for(C=0,S=g;S;S=Xr(S))C++;for(;0<m-C;)p=Xr(p),m--;for(;0<C-m;)g=Xr(g),C--;for(;m--;){if(p===g||g!==null&&p===g.alternate)break t;p=Xr(p),g=Xr(g)}p=null}else p=null;i!==null&&Pc(a,o,i,p,!1),l!==null&&c!==null&&Pc(a,c,l,p,!0)}}e:{if(o=f?Zr(f):window,i=o.nodeName&&o.nodeName.toLowerCase(),i==="select"||i==="input"&&o.type==="file")var x=_m;else if(Sc(o))if(td)x=Pm;else{x=Em;var w=Tm}else(i=o.nodeName)&&i.toLowerCase()==="input"&&(o.type==="checkbox"||o.type==="radio")&&(x=Om);if(x&&(x=x(e,f))){ed(a,x,r,h);break e}w&&w(e,o,f),e==="focusout"&&(w=o._wrapperState)&&w.controlled&&o.type==="number"&&Fs(o,"number",o.value)}switch(w=f?Zr(f):window,e){case"focusin":(Sc(w)||w.contentEditable==="true")&&(Qr=w,Xs=f,Qn=null);break;case"focusout":Qn=Xs=Qr=null;break;case"mousedown":Ys=!0;break;case"contextmenu":case"mouseup":case"dragend":Ys=!1,Tc(a,r,h);break;case"selectionchange":if(Im)break;case"keydown":case"keyup":Tc(a,r,h)}var _;if(Gl)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Kr?Jh(e,r)&&(E="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(E="onCompositionStart");E&&(Qh&&r.locale!=="ko"&&(Kr||E!=="onCompositionStart"?E==="onCompositionEnd"&&Kr&&(_=Kh()):(ar=h,Wl="value"in ar?ar.value:ar.textContent,Kr=!0)),w=ka(f,E),0<w.length&&(E=new vc(E,e,null,r,h),a.push({event:E,listeners:w}),_?E.data=_:(_=Zh(r),_!==null&&(E.data=_)))),(_=Cm?Sm(e,r):xm(e,r))&&(f=ka(f,"onBeforeInput"),0<f.length&&(h=new vc("onBeforeInput","beforeinput",null,r,h),a.push({event:h,listeners:f}),h.data=_))}fd(a,t)})}function di(e,t,r){return{instance:e,listener:t,currentTarget:r}}function ka(e,t){for(var r=t+"Capture",s=[];e!==null;){var d=e,v=d.stateNode;d.tag===5&&v!==null&&(d=v,v=oi(e,r),v!=null&&s.unshift(di(e,v,d)),v=oi(e,t),v!=null&&s.push(di(e,v,d))),e=e.return}return s}function Xr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Pc(e,t,r,s,d){for(var v=t._reactName,y=[];r!==null&&r!==s;){var u=r,n=u.alternate,f=u.stateNode;if(n!==null&&n===s)break;u.tag===5&&f!==null&&(u=f,d?(n=oi(r,v),n!=null&&y.unshift(di(r,n,u))):d||(n=oi(r,v),n!=null&&y.push(di(r,n,u)))),r=r.return}y.length!==0&&e.push({event:t,listeners:y})}var Lm=/\r\n?/g,Rm=/\u0000|\uFFFD/g;function Dc(e){return(typeof e=="string"?e:""+e).replace(Lm,`
`).replace(Rm,"")}function Zi(e,t,r){if(t=Dc(t),Dc(e)!==t&&r)throw Error(Z(425))}function Ia(){}var $s=null,qs=null;function Ks(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Qs=typeof setTimeout=="function"?setTimeout:void 0,Bm=typeof clearTimeout=="function"?clearTimeout:void 0,kc=typeof Promise=="function"?Promise:void 0,Nm=typeof queueMicrotask=="function"?queueMicrotask:typeof kc<"u"?function(e){return kc.resolve(null).then(e).catch(jm)}:Qs;function jm(e){setTimeout(function(){throw e})}function rs(e,t){var r=t,s=0;do{var d=r.nextSibling;if(e.removeChild(r),d&&d.nodeType===8)if(r=d.data,r==="/$"){if(s===0){e.removeChild(d),ui(t);return}s--}else r!=="$"&&r!=="$?"&&r!=="$!"||s++;r=d}while(r);ui(t)}function cr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Ic(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var On=Math.random().toString(36).slice(2),Wt="__reactFiber$"+On,pi="__reactProps$"+On,Kt="__reactContainer$"+On,Js="__reactEvents$"+On,zm="__reactListeners$"+On,Wm="__reactHandles$"+On;function Mr(e){var t=e[Wt];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Kt]||r[Wt]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Ic(e);e!==null;){if(r=e[Wt])return r;e=Ic(e)}return t}e=r,r=e.parentNode}return null}function ki(e){return e=e[Wt]||e[Kt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Zr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Z(33))}function lo(e){return e[pi]||null}var Zs=[],en=-1;function br(e){return{current:e}}function Te(e){0>en||(e.current=Zs[en],Zs[en]=null,en--)}function be(e,t){en++,Zs[en]=e.current,e.current=t}var Sr={},Ke=br(Sr),ot=br(!1),Nr=Sr;function gn(e,t){var r=e.type.contextTypes;if(!r)return Sr;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var d={},v;for(v in r)d[v]=t[v];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=d),d}function st(e){return e=e.childContextTypes,e!=null}function Aa(){Te(ot),Te(Ke)}function Ac(e,t,r){if(Ke.current!==Sr)throw Error(Z(168));be(Ke,t),be(ot,r)}function dd(e,t,r){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return r;s=s.getChildContext();for(var d in s)if(!(d in t))throw Error(Z(108,Tv(e)||"Unknown",d));return ke({},r,s)}function Ma(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Sr,Nr=Ke.current,be(Ke,e),be(ot,ot.current),!0}function Mc(e,t,r){var s=e.stateNode;if(!s)throw Error(Z(169));r?(e=dd(e,t,Nr),s.__reactInternalMemoizedMergedChildContext=e,Te(ot),Te(Ke),be(Ke,e)):Te(ot),be(ot,r)}var Vt=null,uo=!1,ns=!1;function pd(e){Vt===null?Vt=[e]:Vt.push(e)}function Um(e){uo=!0,pd(e)}function _r(){if(!ns&&Vt!==null){ns=!0;var e=0,t=Se;try{var r=Vt;for(Se=1;e<r.length;e++){var s=r[e];do s=s(!0);while(s!==null)}Vt=null,uo=!1}catch(d){throw Vt!==null&&(Vt=Vt.slice(e+1)),jh(Bl,_r),d}finally{Se=t,ns=!1}}return null}var tn=[],rn=0,Fa=null,La=0,St=[],xt=0,jr=null,Xt=1,Yt="";function kr(e,t){tn[rn++]=La,tn[rn++]=Fa,Fa=e,La=t}function gd(e,t,r){St[xt++]=Xt,St[xt++]=Yt,St[xt++]=jr,jr=e;var s=Xt;e=Yt;var d=32-Mt(s)-1;s&=~(1<<d),r+=1;var v=32-Mt(t)+d;if(30<v){var y=d-d%5;v=(s&(1<<y)-1).toString(32),s>>=y,d-=y,Xt=1<<32-Mt(t)+d|r<<d|s,Yt=v+e}else Xt=1<<v|r<<d|s,Yt=e}function Xl(e){e.return!==null&&(kr(e,1),gd(e,1,0))}function Yl(e){for(;e===Fa;)Fa=tn[--rn],tn[rn]=null,La=tn[--rn],tn[rn]=null;for(;e===jr;)jr=St[--xt],St[xt]=null,Yt=St[--xt],St[xt]=null,Xt=St[--xt],St[xt]=null}var ht=null,ct=null,Oe=!1,It=null;function vd(e,t){var r=wt(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Fc(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ht=e,ct=cr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ht=e,ct=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=jr!==null?{id:Xt,overflow:Yt}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=wt(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,ht=e,ct=null,!0):!1;default:return!1}}function el(e){return(e.mode&1)!==0&&(e.flags&128)===0}function tl(e){if(Oe){var t=ct;if(t){var r=t;if(!Fc(e,t)){if(el(e))throw Error(Z(418));t=cr(r.nextSibling);var s=ht;t&&Fc(e,t)?vd(s,r):(e.flags=e.flags&-4097|2,Oe=!1,ht=e)}}else{if(el(e))throw Error(Z(418));e.flags=e.flags&-4097|2,Oe=!1,ht=e}}}function Lc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ht=e}function ea(e){if(e!==ht)return!1;if(!Oe)return Lc(e),Oe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ks(e.type,e.memoizedProps)),t&&(t=ct)){if(el(e))throw md(),Error(Z(418));for(;t;)vd(e,t),t=cr(t.nextSibling)}if(Lc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Z(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){ct=cr(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}ct=null}}else ct=ht?cr(e.stateNode.nextSibling):null;return!0}function md(){for(var e=ct;e;)e=cr(e.nextSibling)}function vn(){ct=ht=null,Oe=!1}function $l(e){It===null?It=[e]:It.push(e)}var Hm=Zt.ReactCurrentBatchConfig;function Bn(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Z(309));var s=r.stateNode}if(!s)throw Error(Z(147,e));var d=s,v=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===v?t.ref:(t=function(y){var u=d.refs;y===null?delete u[v]:u[v]=y},t._stringRef=v,t)}if(typeof e!="string")throw Error(Z(284));if(!r._owner)throw Error(Z(290,e))}return e}function ta(e,t){throw e=Object.prototype.toString.call(t),Error(Z(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Rc(e){var t=e._init;return t(e._payload)}function yd(e){function t(g,m){if(e){var C=g.deletions;C===null?(g.deletions=[m],g.flags|=16):C.push(m)}}function r(g,m){if(!e)return null;for(;m!==null;)t(g,m),m=m.sibling;return null}function s(g,m){for(g=new Map;m!==null;)m.key!==null?g.set(m.key,m):g.set(m.index,m),m=m.sibling;return g}function d(g,m){return g=pr(g,m),g.index=0,g.sibling=null,g}function v(g,m,C){return g.index=C,e?(C=g.alternate,C!==null?(C=C.index,C<m?(g.flags|=2,m):C):(g.flags|=2,m)):(g.flags|=1048576,m)}function y(g){return e&&g.alternate===null&&(g.flags|=2),g}function u(g,m,C,S){return m===null||m.tag!==6?(m=cs(C,g.mode,S),m.return=g,m):(m=d(m,C),m.return=g,m)}function n(g,m,C,S){var x=C.type;return x===qr?h(g,m,C.props.children,S,C.key):m!==null&&(m.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===tr&&Rc(x)===m.type)?(S=d(m,C.props),S.ref=Bn(g,m,C),S.return=g,S):(S=xa(C.type,C.key,C.props,null,g.mode,S),S.ref=Bn(g,m,C),S.return=g,S)}function f(g,m,C,S){return m===null||m.tag!==4||m.stateNode.containerInfo!==C.containerInfo||m.stateNode.implementation!==C.implementation?(m=fs(C,g.mode,S),m.return=g,m):(m=d(m,C.children||[]),m.return=g,m)}function h(g,m,C,S,x){return m===null||m.tag!==7?(m=Br(C,g.mode,S,x),m.return=g,m):(m=d(m,C),m.return=g,m)}function a(g,m,C){if(typeof m=="string"&&m!==""||typeof m=="number")return m=cs(""+m,g.mode,C),m.return=g,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Gi:return C=xa(m.type,m.key,m.props,null,g.mode,C),C.ref=Bn(g,null,m),C.return=g,C;case $r:return m=fs(m,g.mode,C),m.return=g,m;case tr:var S=m._init;return a(g,S(m._payload),C)}if(Gn(m)||An(m))return m=Br(m,g.mode,C,null),m.return=g,m;ta(g,m)}return null}function o(g,m,C,S){var x=m!==null?m.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return x!==null?null:u(g,m,""+C,S);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Gi:return C.key===x?n(g,m,C,S):null;case $r:return C.key===x?f(g,m,C,S):null;case tr:return x=C._init,o(g,m,x(C._payload),S)}if(Gn(C)||An(C))return x!==null?null:h(g,m,C,S,null);ta(g,C)}return null}function i(g,m,C,S,x){if(typeof S=="string"&&S!==""||typeof S=="number")return g=g.get(C)||null,u(m,g,""+S,x);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Gi:return g=g.get(S.key===null?C:S.key)||null,n(m,g,S,x);case $r:return g=g.get(S.key===null?C:S.key)||null,f(m,g,S,x);case tr:var w=S._init;return i(g,m,C,w(S._payload),x)}if(Gn(S)||An(S))return g=g.get(C)||null,h(m,g,S,x,null);ta(m,S)}return null}function l(g,m,C,S){for(var x=null,w=null,_=m,E=m=0,I=null;_!==null&&E<C.length;E++){_.index>E?(I=_,_=null):I=_.sibling;var M=o(g,_,C[E],S);if(M===null){_===null&&(_=I);break}e&&_&&M.alternate===null&&t(g,_),m=v(M,m,E),w===null?x=M:w.sibling=M,w=M,_=I}if(E===C.length)return r(g,_),Oe&&kr(g,E),x;if(_===null){for(;E<C.length;E++)_=a(g,C[E],S),_!==null&&(m=v(_,m,E),w===null?x=_:w.sibling=_,w=_);return Oe&&kr(g,E),x}for(_=s(g,_);E<C.length;E++)I=i(_,g,E,C[E],S),I!==null&&(e&&I.alternate!==null&&_.delete(I.key===null?E:I.key),m=v(I,m,E),w===null?x=I:w.sibling=I,w=I);return e&&_.forEach(function(z){return t(g,z)}),Oe&&kr(g,E),x}function p(g,m,C,S){var x=An(C);if(typeof x!="function")throw Error(Z(150));if(C=x.call(C),C==null)throw Error(Z(151));for(var w=x=null,_=m,E=m=0,I=null,M=C.next();_!==null&&!M.done;E++,M=C.next()){_.index>E?(I=_,_=null):I=_.sibling;var z=o(g,_,M.value,S);if(z===null){_===null&&(_=I);break}e&&_&&z.alternate===null&&t(g,_),m=v(z,m,E),w===null?x=z:w.sibling=z,w=z,_=I}if(M.done)return r(g,_),Oe&&kr(g,E),x;if(_===null){for(;!M.done;E++,M=C.next())M=a(g,M.value,S),M!==null&&(m=v(M,m,E),w===null?x=M:w.sibling=M,w=M);return Oe&&kr(g,E),x}for(_=s(g,_);!M.done;E++,M=C.next())M=i(_,g,E,M.value,S),M!==null&&(e&&M.alternate!==null&&_.delete(M.key===null?E:M.key),m=v(M,m,E),w===null?x=M:w.sibling=M,w=M);return e&&_.forEach(function(Q){return t(g,Q)}),Oe&&kr(g,E),x}function c(g,m,C,S){if(typeof C=="object"&&C!==null&&C.type===qr&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case Gi:e:{for(var x=C.key,w=m;w!==null;){if(w.key===x){if(x=C.type,x===qr){if(w.tag===7){r(g,w.sibling),m=d(w,C.props.children),m.return=g,g=m;break e}}else if(w.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===tr&&Rc(x)===w.type){r(g,w.sibling),m=d(w,C.props),m.ref=Bn(g,w,C),m.return=g,g=m;break e}r(g,w);break}else t(g,w);w=w.sibling}C.type===qr?(m=Br(C.props.children,g.mode,S,C.key),m.return=g,g=m):(S=xa(C.type,C.key,C.props,null,g.mode,S),S.ref=Bn(g,m,C),S.return=g,g=S)}return y(g);case $r:e:{for(w=C.key;m!==null;){if(m.key===w)if(m.tag===4&&m.stateNode.containerInfo===C.containerInfo&&m.stateNode.implementation===C.implementation){r(g,m.sibling),m=d(m,C.children||[]),m.return=g,g=m;break e}else{r(g,m);break}else t(g,m);m=m.sibling}m=fs(C,g.mode,S),m.return=g,g=m}return y(g);case tr:return w=C._init,c(g,m,w(C._payload),S)}if(Gn(C))return l(g,m,C,S);if(An(C))return p(g,m,C,S);ta(g,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,m!==null&&m.tag===6?(r(g,m.sibling),m=d(m,C),m.return=g,g=m):(r(g,m),m=cs(C,g.mode,S),m.return=g,g=m),y(g)):r(g,m)}return c}var mn=yd(!0),Cd=yd(!1),Ra=br(null),Ba=null,nn=null,ql=null;function Kl(){ql=nn=Ba=null}function Ql(e){var t=Ra.current;Te(Ra),e._currentValue=t}function rl(e,t,r){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===r)break;e=e.return}}function fn(e,t){Ba=e,ql=nn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(at=!0),e.firstContext=null)}function Et(e){var t=e._currentValue;if(ql!==e)if(e={context:e,memoizedValue:t,next:null},nn===null){if(Ba===null)throw Error(Z(308));nn=e,Ba.dependencies={lanes:0,firstContext:e}}else nn=nn.next=e;return t}var Fr=null;function Jl(e){Fr===null?Fr=[e]:Fr.push(e)}function Sd(e,t,r,s){var d=t.interleaved;return d===null?(r.next=r,Jl(t)):(r.next=d.next,d.next=r),t.interleaved=r,Qt(e,s)}function Qt(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var rr=!1;function Zl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xd(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function $t(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function fr(e,t,r){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,ye&2){var d=s.pending;return d===null?t.next=t:(t.next=d.next,d.next=t),s.pending=t,Qt(e,r)}return d=s.interleaved,d===null?(t.next=t,Jl(s)):(t.next=d.next,d.next=t),s.interleaved=t,Qt(e,r)}function ga(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,Nl(e,r)}}function Bc(e,t){var r=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var d=null,v=null;if(r=r.firstBaseUpdate,r!==null){do{var y={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};v===null?d=v=y:v=v.next=y,r=r.next}while(r!==null);v===null?d=v=t:v=v.next=t}else d=v=t;r={baseState:s.baseState,firstBaseUpdate:d,lastBaseUpdate:v,shared:s.shared,effects:s.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Na(e,t,r,s){var d=e.updateQueue;rr=!1;var v=d.firstBaseUpdate,y=d.lastBaseUpdate,u=d.shared.pending;if(u!==null){d.shared.pending=null;var n=u,f=n.next;n.next=null,y===null?v=f:y.next=f,y=n;var h=e.alternate;h!==null&&(h=h.updateQueue,u=h.lastBaseUpdate,u!==y&&(u===null?h.firstBaseUpdate=f:u.next=f,h.lastBaseUpdate=n))}if(v!==null){var a=d.baseState;y=0,h=f=n=null,u=v;do{var o=u.lane,i=u.eventTime;if((s&o)===o){h!==null&&(h=h.next={eventTime:i,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var l=e,p=u;switch(o=t,i=r,p.tag){case 1:if(l=p.payload,typeof l=="function"){a=l.call(i,a,o);break e}a=l;break e;case 3:l.flags=l.flags&-65537|128;case 0:if(l=p.payload,o=typeof l=="function"?l.call(i,a,o):l,o==null)break e;a=ke({},a,o);break e;case 2:rr=!0}}u.callback!==null&&u.lane!==0&&(e.flags|=64,o=d.effects,o===null?d.effects=[u]:o.push(u))}else i={eventTime:i,lane:o,tag:u.tag,payload:u.payload,callback:u.callback,next:null},h===null?(f=h=i,n=a):h=h.next=i,y|=o;if(u=u.next,u===null){if(u=d.shared.pending,u===null)break;o=u,u=o.next,o.next=null,d.lastBaseUpdate=o,d.shared.pending=null}}while(1);if(h===null&&(n=a),d.baseState=n,d.firstBaseUpdate=f,d.lastBaseUpdate=h,t=d.shared.interleaved,t!==null){d=t;do y|=d.lane,d=d.next;while(d!==t)}else v===null&&(d.shared.lanes=0);Wr|=y,e.lanes=y,e.memoizedState=a}}function Nc(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],d=s.callback;if(d!==null){if(s.callback=null,s=r,typeof d!="function")throw Error(Z(191,d));d.call(s)}}}var Ii={},Ht=br(Ii),gi=br(Ii),vi=br(Ii);function Lr(e){if(e===Ii)throw Error(Z(174));return e}function eu(e,t){switch(be(vi,t),be(gi,e),be(Ht,Ii),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Rs(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Rs(t,e)}Te(Ht),be(Ht,t)}function yn(){Te(Ht),Te(gi),Te(vi)}function wd(e){Lr(vi.current);var t=Lr(Ht.current),r=Rs(t,e.type);t!==r&&(be(gi,e),be(Ht,r))}function tu(e){gi.current===e&&(Te(Ht),Te(gi))}var Pe=br(0);function ja(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var is=[];function ru(){for(var e=0;e<is.length;e++)is[e]._workInProgressVersionPrimary=null;is.length=0}var va=Zt.ReactCurrentDispatcher,as=Zt.ReactCurrentBatchConfig,zr=0,De=null,Le=null,Be=null,za=!1,Jn=!1,mi=0,Gm=0;function Ye(){throw Error(Z(321))}function nu(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Lt(e[r],t[r]))return!1;return!0}function iu(e,t,r,s,d,v){if(zr=v,De=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,va.current=e===null||e.memoizedState===null?$m:qm,e=r(s,d),Jn){v=0;do{if(Jn=!1,mi=0,25<=v)throw Error(Z(301));v+=1,Be=Le=null,t.updateQueue=null,va.current=Km,e=r(s,d)}while(Jn)}if(va.current=Wa,t=Le!==null&&Le.next!==null,zr=0,Be=Le=De=null,za=!1,t)throw Error(Z(300));return e}function au(){var e=mi!==0;return mi=0,e}function zt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Be===null?De.memoizedState=Be=e:Be=Be.next=e,Be}function Ot(){if(Le===null){var e=De.alternate;e=e!==null?e.memoizedState:null}else e=Le.next;var t=Be===null?De.memoizedState:Be.next;if(t!==null)Be=t,Le=e;else{if(e===null)throw Error(Z(310));Le=e,e={memoizedState:Le.memoizedState,baseState:Le.baseState,baseQueue:Le.baseQueue,queue:Le.queue,next:null},Be===null?De.memoizedState=Be=e:Be=Be.next=e}return Be}function yi(e,t){return typeof t=="function"?t(e):t}function os(e){var t=Ot(),r=t.queue;if(r===null)throw Error(Z(311));r.lastRenderedReducer=e;var s=Le,d=s.baseQueue,v=r.pending;if(v!==null){if(d!==null){var y=d.next;d.next=v.next,v.next=y}s.baseQueue=d=v,r.pending=null}if(d!==null){v=d.next,s=s.baseState;var u=y=null,n=null,f=v;do{var h=f.lane;if((zr&h)===h)n!==null&&(n=n.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),s=f.hasEagerState?f.eagerState:e(s,f.action);else{var a={lane:h,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};n===null?(u=n=a,y=s):n=n.next=a,De.lanes|=h,Wr|=h}f=f.next}while(f!==null&&f!==v);n===null?y=s:n.next=u,Lt(s,t.memoizedState)||(at=!0),t.memoizedState=s,t.baseState=y,t.baseQueue=n,r.lastRenderedState=s}if(e=r.interleaved,e!==null){d=e;do v=d.lane,De.lanes|=v,Wr|=v,d=d.next;while(d!==e)}else d===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function ss(e){var t=Ot(),r=t.queue;if(r===null)throw Error(Z(311));r.lastRenderedReducer=e;var s=r.dispatch,d=r.pending,v=t.memoizedState;if(d!==null){r.pending=null;var y=d=d.next;do v=e(v,y.action),y=y.next;while(y!==d);Lt(v,t.memoizedState)||(at=!0),t.memoizedState=v,t.baseQueue===null&&(t.baseState=v),r.lastRenderedState=v}return[v,s]}function bd(){}function _d(e,t){var r=De,s=Ot(),d=t(),v=!Lt(s.memoizedState,d);if(v&&(s.memoizedState=d,at=!0),s=s.queue,ou(Od.bind(null,r,s,e),[e]),s.getSnapshot!==t||v||Be!==null&&Be.memoizedState.tag&1){if(r.flags|=2048,Ci(9,Ed.bind(null,r,s,d,t),void 0,null),Ne===null)throw Error(Z(349));zr&30||Td(r,t,d)}return d}function Td(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=De.updateQueue,t===null?(t={lastEffect:null,stores:null},De.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Ed(e,t,r,s){t.value=r,t.getSnapshot=s,Pd(t)&&Dd(e)}function Od(e,t,r){return r(function(){Pd(t)&&Dd(e)})}function Pd(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Lt(e,r)}catch{return!0}}function Dd(e){var t=Qt(e,1);t!==null&&Ft(t,e,1,-1)}function jc(e){var t=zt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:yi,lastRenderedState:e},t.queue=e,e=e.dispatch=Ym.bind(null,De,e),[t.memoizedState,e]}function Ci(e,t,r,s){return e={tag:e,create:t,destroy:r,deps:s,next:null},t=De.updateQueue,t===null?(t={lastEffect:null,stores:null},De.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(s=r.next,r.next=e,e.next=s,t.lastEffect=e)),e}function kd(){return Ot().memoizedState}function ma(e,t,r,s){var d=zt();De.flags|=e,d.memoizedState=Ci(1|t,r,void 0,s===void 0?null:s)}function co(e,t,r,s){var d=Ot();s=s===void 0?null:s;var v=void 0;if(Le!==null){var y=Le.memoizedState;if(v=y.destroy,s!==null&&nu(s,y.deps)){d.memoizedState=Ci(t,r,v,s);return}}De.flags|=e,d.memoizedState=Ci(1|t,r,v,s)}function zc(e,t){return ma(8390656,8,e,t)}function ou(e,t){return co(2048,8,e,t)}function Id(e,t){return co(4,2,e,t)}function Ad(e,t){return co(4,4,e,t)}function Md(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Fd(e,t,r){return r=r!=null?r.concat([e]):null,co(4,4,Md.bind(null,t,e),r)}function su(){}function Ld(e,t){var r=Ot();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&nu(t,s[1])?s[0]:(r.memoizedState=[e,t],e)}function Rd(e,t){var r=Ot();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&nu(t,s[1])?s[0]:(e=e(),r.memoizedState=[e,t],e)}function Bd(e,t,r){return zr&21?(Lt(r,t)||(r=Uh(),De.lanes|=r,Wr|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,at=!0),e.memoizedState=r)}function Vm(e,t){var r=Se;Se=r!==0&&4>r?r:4,e(!0);var s=as.transition;as.transition={};try{e(!1),t()}finally{Se=r,as.transition=s}}function Nd(){return Ot().memoizedState}function Xm(e,t,r){var s=dr(e);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},jd(e))zd(t,r);else if(r=Sd(e,t,r,s),r!==null){var d=et();Ft(r,e,s,d),Wd(r,t,s)}}function Ym(e,t,r){var s=dr(e),d={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(jd(e))zd(t,d);else{var v=e.alternate;if(e.lanes===0&&(v===null||v.lanes===0)&&(v=t.lastRenderedReducer,v!==null))try{var y=t.lastRenderedState,u=v(y,r);if(d.hasEagerState=!0,d.eagerState=u,Lt(u,y)){var n=t.interleaved;n===null?(d.next=d,Jl(t)):(d.next=n.next,n.next=d),t.interleaved=d;return}}catch{}finally{}r=Sd(e,t,d,s),r!==null&&(d=et(),Ft(r,e,s,d),Wd(r,t,s))}}function jd(e){var t=e.alternate;return e===De||t!==null&&t===De}function zd(e,t){Jn=za=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Wd(e,t,r){if(r&4194240){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,Nl(e,r)}}var Wa={readContext:Et,useCallback:Ye,useContext:Ye,useEffect:Ye,useImperativeHandle:Ye,useInsertionEffect:Ye,useLayoutEffect:Ye,useMemo:Ye,useReducer:Ye,useRef:Ye,useState:Ye,useDebugValue:Ye,useDeferredValue:Ye,useTransition:Ye,useMutableSource:Ye,useSyncExternalStore:Ye,useId:Ye,unstable_isNewReconciler:!1},$m={readContext:Et,useCallback:function(e,t){return zt().memoizedState=[e,t===void 0?null:t],e},useContext:Et,useEffect:zc,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,ma(4194308,4,Md.bind(null,t,e),r)},useLayoutEffect:function(e,t){return ma(4194308,4,e,t)},useInsertionEffect:function(e,t){return ma(4,2,e,t)},useMemo:function(e,t){var r=zt();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var s=zt();return t=r!==void 0?r(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=Xm.bind(null,De,e),[s.memoizedState,e]},useRef:function(e){var t=zt();return e={current:e},t.memoizedState=e},useState:jc,useDebugValue:su,useDeferredValue:function(e){return zt().memoizedState=e},useTransition:function(){var e=jc(!1),t=e[0];return e=Vm.bind(null,e[1]),zt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var s=De,d=zt();if(Oe){if(r===void 0)throw Error(Z(407));r=r()}else{if(r=t(),Ne===null)throw Error(Z(349));zr&30||Td(s,t,r)}d.memoizedState=r;var v={value:r,getSnapshot:t};return d.queue=v,zc(Od.bind(null,s,v,e),[e]),s.flags|=2048,Ci(9,Ed.bind(null,s,v,r,t),void 0,null),r},useId:function(){var e=zt(),t=Ne.identifierPrefix;if(Oe){var r=Yt,s=Xt;r=(s&~(1<<32-Mt(s)-1)).toString(32)+r,t=":"+t+"R"+r,r=mi++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=Gm++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},qm={readContext:Et,useCallback:Ld,useContext:Et,useEffect:ou,useImperativeHandle:Fd,useInsertionEffect:Id,useLayoutEffect:Ad,useMemo:Rd,useReducer:os,useRef:kd,useState:function(){return os(yi)},useDebugValue:su,useDeferredValue:function(e){var t=Ot();return Bd(t,Le.memoizedState,e)},useTransition:function(){var e=os(yi)[0],t=Ot().memoizedState;return[e,t]},useMutableSource:bd,useSyncExternalStore:_d,useId:Nd,unstable_isNewReconciler:!1},Km={readContext:Et,useCallback:Ld,useContext:Et,useEffect:ou,useImperativeHandle:Fd,useInsertionEffect:Id,useLayoutEffect:Ad,useMemo:Rd,useReducer:ss,useRef:kd,useState:function(){return ss(yi)},useDebugValue:su,useDeferredValue:function(e){var t=Ot();return Le===null?t.memoizedState=e:Bd(t,Le.memoizedState,e)},useTransition:function(){var e=ss(yi)[0],t=Ot().memoizedState;return[e,t]},useMutableSource:bd,useSyncExternalStore:_d,useId:Nd,unstable_isNewReconciler:!1};function Dt(e,t){if(e&&e.defaultProps){t=ke({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function nl(e,t,r,s){t=e.memoizedState,r=r(s,t),r=r==null?t:ke({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var fo={isMounted:function(e){return(e=e._reactInternals)?Vr(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var s=et(),d=dr(e),v=$t(s,d);v.payload=t,r!=null&&(v.callback=r),t=fr(e,v,d),t!==null&&(Ft(t,e,d,s),ga(t,e,d))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var s=et(),d=dr(e),v=$t(s,d);v.tag=1,v.payload=t,r!=null&&(v.callback=r),t=fr(e,v,d),t!==null&&(Ft(t,e,d,s),ga(t,e,d))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=et(),s=dr(e),d=$t(r,s);d.tag=2,t!=null&&(d.callback=t),t=fr(e,d,s),t!==null&&(Ft(t,e,s,r),ga(t,e,s))}};function Wc(e,t,r,s,d,v,y){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,v,y):t.prototype&&t.prototype.isPureReactComponent?!fi(r,s)||!fi(d,v):!0}function Ud(e,t,r){var s=!1,d=Sr,v=t.contextType;return typeof v=="object"&&v!==null?v=Et(v):(d=st(t)?Nr:Ke.current,s=t.contextTypes,v=(s=s!=null)?gn(e,d):Sr),t=new t(r,v),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=fo,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=d,e.__reactInternalMemoizedMaskedChildContext=v),t}function Uc(e,t,r,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,s),t.state!==e&&fo.enqueueReplaceState(t,t.state,null)}function il(e,t,r,s){var d=e.stateNode;d.props=r,d.state=e.memoizedState,d.refs={},Zl(e);var v=t.contextType;typeof v=="object"&&v!==null?d.context=Et(v):(v=st(t)?Nr:Ke.current,d.context=gn(e,v)),d.state=e.memoizedState,v=t.getDerivedStateFromProps,typeof v=="function"&&(nl(e,t,v,r),d.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(t=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),t!==d.state&&fo.enqueueReplaceState(d,d.state,null),Na(e,r,d,s),d.state=e.memoizedState),typeof d.componentDidMount=="function"&&(e.flags|=4194308)}function Cn(e,t){try{var r="",s=t;do r+=_v(s),s=s.return;while(s);var d=r}catch(v){d=`
Error generating stack: `+v.message+`
`+v.stack}return{value:e,source:t,stack:d,digest:null}}function ls(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function al(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Qm=typeof WeakMap=="function"?WeakMap:Map;function Hd(e,t,r){r=$t(-1,r),r.tag=3,r.payload={element:null};var s=t.value;return r.callback=function(){Ha||(Ha=!0,gl=s),al(e,t)},r}function Gd(e,t,r){r=$t(-1,r),r.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var d=t.value;r.payload=function(){return s(d)},r.callback=function(){al(e,t)}}var v=e.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(r.callback=function(){al(e,t),typeof s!="function"&&(hr===null?hr=new Set([this]):hr.add(this));var y=t.stack;this.componentDidCatch(t.value,{componentStack:y!==null?y:""})}),r}function Hc(e,t,r){var s=e.pingCache;if(s===null){s=e.pingCache=new Qm;var d=new Set;s.set(t,d)}else d=s.get(t),d===void 0&&(d=new Set,s.set(t,d));d.has(r)||(d.add(r),e=fy.bind(null,e,t,r),t.then(e,e))}function Gc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Vc(e,t,r,s,d){return e.mode&1?(e.flags|=65536,e.lanes=d,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=$t(-1,1),t.tag=2,fr(r,t,1))),r.lanes|=1),e)}var Jm=Zt.ReactCurrentOwner,at=!1;function Ze(e,t,r,s){t.child=e===null?Cd(t,null,r,s):mn(t,e.child,r,s)}function Xc(e,t,r,s,d){r=r.render;var v=t.ref;return fn(t,d),s=iu(e,t,r,s,v,d),r=au(),e!==null&&!at?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~d,Jt(e,t,d)):(Oe&&r&&Xl(t),t.flags|=1,Ze(e,t,s,d),t.child)}function Yc(e,t,r,s,d){if(e===null){var v=r.type;return typeof v=="function"&&!gu(v)&&v.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=v,Vd(e,t,v,s,d)):(e=xa(r.type,null,s,t,t.mode,d),e.ref=t.ref,e.return=t,t.child=e)}if(v=e.child,!(e.lanes&d)){var y=v.memoizedProps;if(r=r.compare,r=r!==null?r:fi,r(y,s)&&e.ref===t.ref)return Jt(e,t,d)}return t.flags|=1,e=pr(v,s),e.ref=t.ref,e.return=t,t.child=e}function Vd(e,t,r,s,d){if(e!==null){var v=e.memoizedProps;if(fi(v,s)&&e.ref===t.ref)if(at=!1,t.pendingProps=s=v,(e.lanes&d)!==0)e.flags&131072&&(at=!0);else return t.lanes=e.lanes,Jt(e,t,d)}return ol(e,t,r,s,d)}function Xd(e,t,r){var s=t.pendingProps,d=s.children,v=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},be(on,ut),ut|=r;else{if(!(r&1073741824))return e=v!==null?v.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,be(on,ut),ut|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=v!==null?v.baseLanes:r,be(on,ut),ut|=s}else v!==null?(s=v.baseLanes|r,t.memoizedState=null):s=r,be(on,ut),ut|=s;return Ze(e,t,d,r),t.child}function Yd(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function ol(e,t,r,s,d){var v=st(r)?Nr:Ke.current;return v=gn(t,v),fn(t,d),r=iu(e,t,r,s,v,d),s=au(),e!==null&&!at?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~d,Jt(e,t,d)):(Oe&&s&&Xl(t),t.flags|=1,Ze(e,t,r,d),t.child)}function $c(e,t,r,s,d){if(st(r)){var v=!0;Ma(t)}else v=!1;if(fn(t,d),t.stateNode===null)ya(e,t),Ud(t,r,s),il(t,r,s,d),s=!0;else if(e===null){var y=t.stateNode,u=t.memoizedProps;y.props=u;var n=y.context,f=r.contextType;typeof f=="object"&&f!==null?f=Et(f):(f=st(r)?Nr:Ke.current,f=gn(t,f));var h=r.getDerivedStateFromProps,a=typeof h=="function"||typeof y.getSnapshotBeforeUpdate=="function";a||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(u!==s||n!==f)&&Uc(t,y,s,f),rr=!1;var o=t.memoizedState;y.state=o,Na(t,s,y,d),n=t.memoizedState,u!==s||o!==n||ot.current||rr?(typeof h=="function"&&(nl(t,r,h,s),n=t.memoizedState),(u=rr||Wc(t,r,u,s,o,n,f))?(a||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(t.flags|=4194308)):(typeof y.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=n),y.props=s,y.state=n,y.context=f,s=u):(typeof y.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{y=t.stateNode,xd(e,t),u=t.memoizedProps,f=t.type===t.elementType?u:Dt(t.type,u),y.props=f,a=t.pendingProps,o=y.context,n=r.contextType,typeof n=="object"&&n!==null?n=Et(n):(n=st(r)?Nr:Ke.current,n=gn(t,n));var i=r.getDerivedStateFromProps;(h=typeof i=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(u!==a||o!==n)&&Uc(t,y,s,n),rr=!1,o=t.memoizedState,y.state=o,Na(t,s,y,d);var l=t.memoizedState;u!==a||o!==l||ot.current||rr?(typeof i=="function"&&(nl(t,r,i,s),l=t.memoizedState),(f=rr||Wc(t,r,f,s,o,l,n)||!1)?(h||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(s,l,n),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(s,l,n)),typeof y.componentDidUpdate=="function"&&(t.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof y.componentDidUpdate!="function"||u===e.memoizedProps&&o===e.memoizedState||(t.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&o===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=l),y.props=s,y.state=l,y.context=n,s=f):(typeof y.componentDidUpdate!="function"||u===e.memoizedProps&&o===e.memoizedState||(t.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&o===e.memoizedState||(t.flags|=1024),s=!1)}return sl(e,t,r,s,v,d)}function sl(e,t,r,s,d,v){Yd(e,t);var y=(t.flags&128)!==0;if(!s&&!y)return d&&Mc(t,r,!1),Jt(e,t,v);s=t.stateNode,Jm.current=t;var u=y&&typeof r.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&y?(t.child=mn(t,e.child,null,v),t.child=mn(t,null,u,v)):Ze(e,t,u,v),t.memoizedState=s.state,d&&Mc(t,r,!0),t.child}function $d(e){var t=e.stateNode;t.pendingContext?Ac(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Ac(e,t.context,!1),eu(e,t.containerInfo)}function qc(e,t,r,s,d){return vn(),$l(d),t.flags|=256,Ze(e,t,r,s),t.child}var ll={dehydrated:null,treeContext:null,retryLane:0};function ul(e){return{baseLanes:e,cachePool:null,transitions:null}}function qd(e,t,r){var s=t.pendingProps,d=Pe.current,v=!1,y=(t.flags&128)!==0,u;if((u=y)||(u=e!==null&&e.memoizedState===null?!1:(d&2)!==0),u?(v=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(d|=1),be(Pe,d&1),e===null)return tl(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(y=s.children,e=s.fallback,v?(s=t.mode,v=t.child,y={mode:"hidden",children:y},!(s&1)&&v!==null?(v.childLanes=0,v.pendingProps=y):v=go(y,s,0,null),e=Br(e,s,r,null),v.return=t,e.return=t,v.sibling=e,t.child=v,t.child.memoizedState=ul(r),t.memoizedState=ll,e):lu(t,y));if(d=e.memoizedState,d!==null&&(u=d.dehydrated,u!==null))return Zm(e,t,y,s,u,d,r);if(v){v=s.fallback,y=t.mode,d=e.child,u=d.sibling;var n={mode:"hidden",children:s.children};return!(y&1)&&t.child!==d?(s=t.child,s.childLanes=0,s.pendingProps=n,t.deletions=null):(s=pr(d,n),s.subtreeFlags=d.subtreeFlags&14680064),u!==null?v=pr(u,v):(v=Br(v,y,r,null),v.flags|=2),v.return=t,s.return=t,s.sibling=v,t.child=s,s=v,v=t.child,y=e.child.memoizedState,y=y===null?ul(r):{baseLanes:y.baseLanes|r,cachePool:null,transitions:y.transitions},v.memoizedState=y,v.childLanes=e.childLanes&~r,t.memoizedState=ll,s}return v=e.child,e=v.sibling,s=pr(v,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=r),s.return=t,s.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=s,t.memoizedState=null,s}function lu(e,t){return t=go({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ra(e,t,r,s){return s!==null&&$l(s),mn(t,e.child,null,r),e=lu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Zm(e,t,r,s,d,v,y){if(r)return t.flags&256?(t.flags&=-257,s=ls(Error(Z(422))),ra(e,t,y,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(v=s.fallback,d=t.mode,s=go({mode:"visible",children:s.children},d,0,null),v=Br(v,d,y,null),v.flags|=2,s.return=t,v.return=t,s.sibling=v,t.child=s,t.mode&1&&mn(t,e.child,null,y),t.child.memoizedState=ul(y),t.memoizedState=ll,v);if(!(t.mode&1))return ra(e,t,y,null);if(d.data==="$!"){if(s=d.nextSibling&&d.nextSibling.dataset,s)var u=s.dgst;return s=u,v=Error(Z(419)),s=ls(v,s,void 0),ra(e,t,y,s)}if(u=(y&e.childLanes)!==0,at||u){if(s=Ne,s!==null){switch(y&-y){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=d&(s.suspendedLanes|y)?0:d,d!==0&&d!==v.retryLane&&(v.retryLane=d,Qt(e,d),Ft(s,e,d,-1))}return pu(),s=ls(Error(Z(421))),ra(e,t,y,s)}return d.data==="$?"?(t.flags|=128,t.child=e.child,t=hy.bind(null,e),d._reactRetry=t,null):(e=v.treeContext,ct=cr(d.nextSibling),ht=t,Oe=!0,It=null,e!==null&&(St[xt++]=Xt,St[xt++]=Yt,St[xt++]=jr,Xt=e.id,Yt=e.overflow,jr=t),t=lu(t,s.children),t.flags|=4096,t)}function Kc(e,t,r){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),rl(e.return,t,r)}function us(e,t,r,s,d){var v=e.memoizedState;v===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:d}:(v.isBackwards=t,v.rendering=null,v.renderingStartTime=0,v.last=s,v.tail=r,v.tailMode=d)}function Kd(e,t,r){var s=t.pendingProps,d=s.revealOrder,v=s.tail;if(Ze(e,t,s.children,r),s=Pe.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Kc(e,r,t);else if(e.tag===19)Kc(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(be(Pe,s),!(t.mode&1))t.memoizedState=null;else switch(d){case"forwards":for(r=t.child,d=null;r!==null;)e=r.alternate,e!==null&&ja(e)===null&&(d=r),r=r.sibling;r=d,r===null?(d=t.child,t.child=null):(d=r.sibling,r.sibling=null),us(t,!1,d,r,v);break;case"backwards":for(r=null,d=t.child,t.child=null;d!==null;){if(e=d.alternate,e!==null&&ja(e)===null){t.child=d;break}e=d.sibling,d.sibling=r,r=d,d=e}us(t,!0,r,null,v);break;case"together":us(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ya(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Jt(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Wr|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Z(153));if(t.child!==null){for(e=t.child,r=pr(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=pr(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function ey(e,t,r){switch(t.tag){case 3:$d(t),vn();break;case 5:wd(t);break;case 1:st(t.type)&&Ma(t);break;case 4:eu(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,d=t.memoizedProps.value;be(Ra,s._currentValue),s._currentValue=d;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(be(Pe,Pe.current&1),t.flags|=128,null):r&t.child.childLanes?qd(e,t,r):(be(Pe,Pe.current&1),e=Jt(e,t,r),e!==null?e.sibling:null);be(Pe,Pe.current&1);break;case 19:if(s=(r&t.childLanes)!==0,e.flags&128){if(s)return Kd(e,t,r);t.flags|=128}if(d=t.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),be(Pe,Pe.current),s)break;return null;case 22:case 23:return t.lanes=0,Xd(e,t,r)}return Jt(e,t,r)}var Qd,cl,Jd,Zd;Qd=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};cl=function(){};Jd=function(e,t,r,s){var d=e.memoizedProps;if(d!==s){e=t.stateNode,Lr(Ht.current);var v=null;switch(r){case"input":d=As(e,d),s=As(e,s),v=[];break;case"select":d=ke({},d,{value:void 0}),s=ke({},s,{value:void 0}),v=[];break;case"textarea":d=Ls(e,d),s=Ls(e,s),v=[];break;default:typeof d.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=Ia)}Bs(r,s);var y;r=null;for(f in d)if(!s.hasOwnProperty(f)&&d.hasOwnProperty(f)&&d[f]!=null)if(f==="style"){var u=d[f];for(y in u)u.hasOwnProperty(y)&&(r||(r={}),r[y]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(ii.hasOwnProperty(f)?v||(v=[]):(v=v||[]).push(f,null));for(f in s){var n=s[f];if(u=d!=null?d[f]:void 0,s.hasOwnProperty(f)&&n!==u&&(n!=null||u!=null))if(f==="style")if(u){for(y in u)!u.hasOwnProperty(y)||n&&n.hasOwnProperty(y)||(r||(r={}),r[y]="");for(y in n)n.hasOwnProperty(y)&&u[y]!==n[y]&&(r||(r={}),r[y]=n[y])}else r||(v||(v=[]),v.push(f,r)),r=n;else f==="dangerouslySetInnerHTML"?(n=n?n.__html:void 0,u=u?u.__html:void 0,n!=null&&u!==n&&(v=v||[]).push(f,n)):f==="children"?typeof n!="string"&&typeof n!="number"||(v=v||[]).push(f,""+n):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(ii.hasOwnProperty(f)?(n!=null&&f==="onScroll"&&_e("scroll",e),v||u===n||(v=[])):(v=v||[]).push(f,n))}r&&(v=v||[]).push("style",r);var f=v;(t.updateQueue=f)&&(t.flags|=4)}};Zd=function(e,t,r,s){r!==s&&(t.flags|=4)};function Nn(e,t){if(!Oe)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function $e(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,s=0;if(t)for(var d=e.child;d!==null;)r|=d.lanes|d.childLanes,s|=d.subtreeFlags&14680064,s|=d.flags&14680064,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)r|=d.lanes|d.childLanes,s|=d.subtreeFlags,s|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=s,e.childLanes=r,t}function ty(e,t,r){var s=t.pendingProps;switch(Yl(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $e(t),null;case 1:return st(t.type)&&Aa(),$e(t),null;case 3:return s=t.stateNode,yn(),Te(ot),Te(Ke),ru(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(ea(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,It!==null&&(yl(It),It=null))),cl(e,t),$e(t),null;case 5:tu(t);var d=Lr(vi.current);if(r=t.type,e!==null&&t.stateNode!=null)Jd(e,t,r,s,d),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(Z(166));return $e(t),null}if(e=Lr(Ht.current),ea(t)){s=t.stateNode,r=t.type;var v=t.memoizedProps;switch(s[Wt]=t,s[pi]=v,e=(t.mode&1)!==0,r){case"dialog":_e("cancel",s),_e("close",s);break;case"iframe":case"object":case"embed":_e("load",s);break;case"video":case"audio":for(d=0;d<Xn.length;d++)_e(Xn[d],s);break;case"source":_e("error",s);break;case"img":case"image":case"link":_e("error",s),_e("load",s);break;case"details":_e("toggle",s);break;case"input":ac(s,v),_e("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!v.multiple},_e("invalid",s);break;case"textarea":sc(s,v),_e("invalid",s)}Bs(r,v),d=null;for(var y in v)if(v.hasOwnProperty(y)){var u=v[y];y==="children"?typeof u=="string"?s.textContent!==u&&(v.suppressHydrationWarning!==!0&&Zi(s.textContent,u,e),d=["children",u]):typeof u=="number"&&s.textContent!==""+u&&(v.suppressHydrationWarning!==!0&&Zi(s.textContent,u,e),d=["children",""+u]):ii.hasOwnProperty(y)&&u!=null&&y==="onScroll"&&_e("scroll",s)}switch(r){case"input":Vi(s),oc(s,v,!0);break;case"textarea":Vi(s),lc(s);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(s.onclick=Ia)}s=d,t.updateQueue=s,s!==null&&(t.flags|=4)}else{y=d.nodeType===9?d:d.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Oh(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=y.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=y.createElement(r,{is:s.is}):(e=y.createElement(r),r==="select"&&(y=e,s.multiple?y.multiple=!0:s.size&&(y.size=s.size))):e=y.createElementNS(e,r),e[Wt]=t,e[pi]=s,Qd(e,t,!1,!1),t.stateNode=e;e:{switch(y=Ns(r,s),r){case"dialog":_e("cancel",e),_e("close",e),d=s;break;case"iframe":case"object":case"embed":_e("load",e),d=s;break;case"video":case"audio":for(d=0;d<Xn.length;d++)_e(Xn[d],e);d=s;break;case"source":_e("error",e),d=s;break;case"img":case"image":case"link":_e("error",e),_e("load",e),d=s;break;case"details":_e("toggle",e),d=s;break;case"input":ac(e,s),d=As(e,s),_e("invalid",e);break;case"option":d=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},d=ke({},s,{value:void 0}),_e("invalid",e);break;case"textarea":sc(e,s),d=Ls(e,s),_e("invalid",e);break;default:d=s}Bs(r,d),u=d;for(v in u)if(u.hasOwnProperty(v)){var n=u[v];v==="style"?kh(e,n):v==="dangerouslySetInnerHTML"?(n=n?n.__html:void 0,n!=null&&Ph(e,n)):v==="children"?typeof n=="string"?(r!=="textarea"||n!=="")&&ai(e,n):typeof n=="number"&&ai(e,""+n):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(ii.hasOwnProperty(v)?n!=null&&v==="onScroll"&&_e("scroll",e):n!=null&&Al(e,v,n,y))}switch(r){case"input":Vi(e),oc(e,s,!1);break;case"textarea":Vi(e),lc(e);break;case"option":s.value!=null&&e.setAttribute("value",""+Cr(s.value));break;case"select":e.multiple=!!s.multiple,v=s.value,v!=null?sn(e,!!s.multiple,v,!1):s.defaultValue!=null&&sn(e,!!s.multiple,s.defaultValue,!0);break;default:typeof d.onClick=="function"&&(e.onclick=Ia)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return $e(t),null;case 6:if(e&&t.stateNode!=null)Zd(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(Z(166));if(r=Lr(vi.current),Lr(Ht.current),ea(t)){if(s=t.stateNode,r=t.memoizedProps,s[Wt]=t,(v=s.nodeValue!==r)&&(e=ht,e!==null))switch(e.tag){case 3:Zi(s.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Zi(s.nodeValue,r,(e.mode&1)!==0)}v&&(t.flags|=4)}else s=(r.nodeType===9?r:r.ownerDocument).createTextNode(s),s[Wt]=t,t.stateNode=s}return $e(t),null;case 13:if(Te(Pe),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Oe&&ct!==null&&t.mode&1&&!(t.flags&128))md(),vn(),t.flags|=98560,v=!1;else if(v=ea(t),s!==null&&s.dehydrated!==null){if(e===null){if(!v)throw Error(Z(318));if(v=t.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(Z(317));v[Wt]=t}else vn(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;$e(t),v=!1}else It!==null&&(yl(It),It=null),v=!0;if(!v)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||Pe.current&1?Re===0&&(Re=3):pu())),t.updateQueue!==null&&(t.flags|=4),$e(t),null);case 4:return yn(),cl(e,t),e===null&&hi(t.stateNode.containerInfo),$e(t),null;case 10:return Ql(t.type._context),$e(t),null;case 17:return st(t.type)&&Aa(),$e(t),null;case 19:if(Te(Pe),v=t.memoizedState,v===null)return $e(t),null;if(s=(t.flags&128)!==0,y=v.rendering,y===null)if(s)Nn(v,!1);else{if(Re!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(y=ja(e),y!==null){for(t.flags|=128,Nn(v,!1),s=y.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=r,r=t.child;r!==null;)v=r,e=s,v.flags&=14680066,y=v.alternate,y===null?(v.childLanes=0,v.lanes=e,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=y.childLanes,v.lanes=y.lanes,v.child=y.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=y.memoizedProps,v.memoizedState=y.memoizedState,v.updateQueue=y.updateQueue,v.type=y.type,e=y.dependencies,v.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return be(Pe,Pe.current&1|2),t.child}e=e.sibling}v.tail!==null&&Ae()>Sn&&(t.flags|=128,s=!0,Nn(v,!1),t.lanes=4194304)}else{if(!s)if(e=ja(y),e!==null){if(t.flags|=128,s=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Nn(v,!0),v.tail===null&&v.tailMode==="hidden"&&!y.alternate&&!Oe)return $e(t),null}else 2*Ae()-v.renderingStartTime>Sn&&r!==1073741824&&(t.flags|=128,s=!0,Nn(v,!1),t.lanes=4194304);v.isBackwards?(y.sibling=t.child,t.child=y):(r=v.last,r!==null?r.sibling=y:t.child=y,v.last=y)}return v.tail!==null?(t=v.tail,v.rendering=t,v.tail=t.sibling,v.renderingStartTime=Ae(),t.sibling=null,r=Pe.current,be(Pe,s?r&1|2:r&1),t):($e(t),null);case 22:case 23:return du(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?ut&1073741824&&($e(t),t.subtreeFlags&6&&(t.flags|=8192)):$e(t),null;case 24:return null;case 25:return null}throw Error(Z(156,t.tag))}function ry(e,t){switch(Yl(t),t.tag){case 1:return st(t.type)&&Aa(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return yn(),Te(ot),Te(Ke),ru(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return tu(t),null;case 13:if(Te(Pe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Z(340));vn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Te(Pe),null;case 4:return yn(),null;case 10:return Ql(t.type._context),null;case 22:case 23:return du(),null;case 24:return null;default:return null}}var na=!1,qe=!1,ny=typeof WeakSet=="function"?WeakSet:Set,oe=null;function an(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(s){Ie(e,t,s)}else r.current=null}function fl(e,t,r){try{r()}catch(s){Ie(e,t,s)}}var Qc=!1;function iy(e,t){if($s=Pa,e=id(),Vl(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var d=s.anchorOffset,v=s.focusNode;s=s.focusOffset;try{r.nodeType,v.nodeType}catch{r=null;break e}var y=0,u=-1,n=-1,f=0,h=0,a=e,o=null;t:for(;;){for(var i;a!==r||d!==0&&a.nodeType!==3||(u=y+d),a!==v||s!==0&&a.nodeType!==3||(n=y+s),a.nodeType===3&&(y+=a.nodeValue.length),(i=a.firstChild)!==null;)o=a,a=i;for(;;){if(a===e)break t;if(o===r&&++f===d&&(u=y),o===v&&++h===s&&(n=y),(i=a.nextSibling)!==null)break;a=o,o=a.parentNode}a=i}r=u===-1||n===-1?null:{start:u,end:n}}else r=null}r=r||{start:0,end:0}}else r=null;for(qs={focusedElem:e,selectionRange:r},Pa=!1,oe=t;oe!==null;)if(t=oe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,oe=e;else for(;oe!==null;){t=oe;try{var l=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(l!==null){var p=l.memoizedProps,c=l.memoizedState,g=t.stateNode,m=g.getSnapshotBeforeUpdate(t.elementType===t.type?p:Dt(t.type,p),c);g.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var C=t.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Z(163))}}catch(S){Ie(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,oe=e;break}oe=t.return}return l=Qc,Qc=!1,l}function Zn(e,t,r){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var d=s=s.next;do{if((d.tag&e)===e){var v=d.destroy;d.destroy=void 0,v!==void 0&&fl(t,r,v)}d=d.next}while(d!==s)}}function ho(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var s=r.create;r.destroy=s()}r=r.next}while(r!==t)}}function hl(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function ep(e){var t=e.alternate;t!==null&&(e.alternate=null,ep(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Wt],delete t[pi],delete t[Js],delete t[zm],delete t[Wm])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function tp(e){return e.tag===5||e.tag===3||e.tag===4}function Jc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||tp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function dl(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Ia));else if(s!==4&&(e=e.child,e!==null))for(dl(e,t,r),e=e.sibling;e!==null;)dl(e,t,r),e=e.sibling}function pl(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(pl(e,t,r),e=e.sibling;e!==null;)pl(e,t,r),e=e.sibling}var He=null,kt=!1;function er(e,t,r){for(r=r.child;r!==null;)rp(e,t,r),r=r.sibling}function rp(e,t,r){if(Ut&&typeof Ut.onCommitFiberUnmount=="function")try{Ut.onCommitFiberUnmount(io,r)}catch{}switch(r.tag){case 5:qe||an(r,t);case 6:var s=He,d=kt;He=null,er(e,t,r),He=s,kt=d,He!==null&&(kt?(e=He,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):He.removeChild(r.stateNode));break;case 18:He!==null&&(kt?(e=He,r=r.stateNode,e.nodeType===8?rs(e.parentNode,r):e.nodeType===1&&rs(e,r),ui(e)):rs(He,r.stateNode));break;case 4:s=He,d=kt,He=r.stateNode.containerInfo,kt=!0,er(e,t,r),He=s,kt=d;break;case 0:case 11:case 14:case 15:if(!qe&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){d=s=s.next;do{var v=d,y=v.destroy;v=v.tag,y!==void 0&&(v&2||v&4)&&fl(r,t,y),d=d.next}while(d!==s)}er(e,t,r);break;case 1:if(!qe&&(an(r,t),s=r.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(u){Ie(r,t,u)}er(e,t,r);break;case 21:er(e,t,r);break;case 22:r.mode&1?(qe=(s=qe)||r.memoizedState!==null,er(e,t,r),qe=s):er(e,t,r);break;default:er(e,t,r)}}function Zc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new ny),t.forEach(function(s){var d=dy.bind(null,e,s);r.has(s)||(r.add(s),s.then(d,d))})}}function Pt(e,t){var r=t.deletions;if(r!==null)for(var s=0;s<r.length;s++){var d=r[s];try{var v=e,y=t,u=y;e:for(;u!==null;){switch(u.tag){case 5:He=u.stateNode,kt=!1;break e;case 3:He=u.stateNode.containerInfo,kt=!0;break e;case 4:He=u.stateNode.containerInfo,kt=!0;break e}u=u.return}if(He===null)throw Error(Z(160));rp(v,y,d),He=null,kt=!1;var n=d.alternate;n!==null&&(n.return=null),d.return=null}catch(f){Ie(d,t,f)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)np(t,e),t=t.sibling}function np(e,t){var r=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Pt(t,e),jt(e),s&4){try{Zn(3,e,e.return),ho(3,e)}catch(p){Ie(e,e.return,p)}try{Zn(5,e,e.return)}catch(p){Ie(e,e.return,p)}}break;case 1:Pt(t,e),jt(e),s&512&&r!==null&&an(r,r.return);break;case 5:if(Pt(t,e),jt(e),s&512&&r!==null&&an(r,r.return),e.flags&32){var d=e.stateNode;try{ai(d,"")}catch(p){Ie(e,e.return,p)}}if(s&4&&(d=e.stateNode,d!=null)){var v=e.memoizedProps,y=r!==null?r.memoizedProps:v,u=e.type,n=e.updateQueue;if(e.updateQueue=null,n!==null)try{u==="input"&&v.type==="radio"&&v.name!=null&&Th(d,v),Ns(u,y);var f=Ns(u,v);for(y=0;y<n.length;y+=2){var h=n[y],a=n[y+1];h==="style"?kh(d,a):h==="dangerouslySetInnerHTML"?Ph(d,a):h==="children"?ai(d,a):Al(d,h,a,f)}switch(u){case"input":Ms(d,v);break;case"textarea":Eh(d,v);break;case"select":var o=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!v.multiple;var i=v.value;i!=null?sn(d,!!v.multiple,i,!1):o!==!!v.multiple&&(v.defaultValue!=null?sn(d,!!v.multiple,v.defaultValue,!0):sn(d,!!v.multiple,v.multiple?[]:"",!1))}d[pi]=v}catch(p){Ie(e,e.return,p)}}break;case 6:if(Pt(t,e),jt(e),s&4){if(e.stateNode===null)throw Error(Z(162));d=e.stateNode,v=e.memoizedProps;try{d.nodeValue=v}catch(p){Ie(e,e.return,p)}}break;case 3:if(Pt(t,e),jt(e),s&4&&r!==null&&r.memoizedState.isDehydrated)try{ui(t.containerInfo)}catch(p){Ie(e,e.return,p)}break;case 4:Pt(t,e),jt(e);break;case 13:Pt(t,e),jt(e),d=e.child,d.flags&8192&&(v=d.memoizedState!==null,d.stateNode.isHidden=v,!v||d.alternate!==null&&d.alternate.memoizedState!==null||(fu=Ae())),s&4&&Zc(e);break;case 22:if(h=r!==null&&r.memoizedState!==null,e.mode&1?(qe=(f=qe)||h,Pt(t,e),qe=f):Pt(t,e),jt(e),s&8192){if(f=e.memoizedState!==null,(e.stateNode.isHidden=f)&&!h&&e.mode&1)for(oe=e,h=e.child;h!==null;){for(a=oe=h;oe!==null;){switch(o=oe,i=o.child,o.tag){case 0:case 11:case 14:case 15:Zn(4,o,o.return);break;case 1:an(o,o.return);var l=o.stateNode;if(typeof l.componentWillUnmount=="function"){s=o,r=o.return;try{t=s,l.props=t.memoizedProps,l.state=t.memoizedState,l.componentWillUnmount()}catch(p){Ie(s,r,p)}}break;case 5:an(o,o.return);break;case 22:if(o.memoizedState!==null){tf(a);continue}}i!==null?(i.return=o,oe=i):tf(a)}h=h.sibling}e:for(h=null,a=e;;){if(a.tag===5){if(h===null){h=a;try{d=a.stateNode,f?(v=d.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(u=a.stateNode,n=a.memoizedProps.style,y=n!=null&&n.hasOwnProperty("display")?n.display:null,u.style.display=Dh("display",y))}catch(p){Ie(e,e.return,p)}}}else if(a.tag===6){if(h===null)try{a.stateNode.nodeValue=f?"":a.memoizedProps}catch(p){Ie(e,e.return,p)}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===e)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break e;for(;a.sibling===null;){if(a.return===null||a.return===e)break e;h===a&&(h=null),a=a.return}h===a&&(h=null),a.sibling.return=a.return,a=a.sibling}}break;case 19:Pt(t,e),jt(e),s&4&&Zc(e);break;case 21:break;default:Pt(t,e),jt(e)}}function jt(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(tp(r)){var s=r;break e}r=r.return}throw Error(Z(160))}switch(s.tag){case 5:var d=s.stateNode;s.flags&32&&(ai(d,""),s.flags&=-33);var v=Jc(e);pl(e,v,d);break;case 3:case 4:var y=s.stateNode.containerInfo,u=Jc(e);dl(e,u,y);break;default:throw Error(Z(161))}}catch(n){Ie(e,e.return,n)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function ay(e,t,r){oe=e,ip(e)}function ip(e,t,r){for(var s=(e.mode&1)!==0;oe!==null;){var d=oe,v=d.child;if(d.tag===22&&s){var y=d.memoizedState!==null||na;if(!y){var u=d.alternate,n=u!==null&&u.memoizedState!==null||qe;u=na;var f=qe;if(na=y,(qe=n)&&!f)for(oe=d;oe!==null;)y=oe,n=y.child,y.tag===22&&y.memoizedState!==null?rf(d):n!==null?(n.return=y,oe=n):rf(d);for(;v!==null;)oe=v,ip(v),v=v.sibling;oe=d,na=u,qe=f}ef(e)}else d.subtreeFlags&8772&&v!==null?(v.return=d,oe=v):ef(e)}}function ef(e){for(;oe!==null;){var t=oe;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:qe||ho(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!qe)if(r===null)s.componentDidMount();else{var d=t.elementType===t.type?r.memoizedProps:Dt(t.type,r.memoizedProps);s.componentDidUpdate(d,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var v=t.updateQueue;v!==null&&Nc(t,v,s);break;case 3:var y=t.updateQueue;if(y!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Nc(t,y,r)}break;case 5:var u=t.stateNode;if(r===null&&t.flags&4){r=u;var n=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break;case"img":n.src&&(r.src=n.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var f=t.alternate;if(f!==null){var h=f.memoizedState;if(h!==null){var a=h.dehydrated;a!==null&&ui(a)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Z(163))}qe||t.flags&512&&hl(t)}catch(o){Ie(t,t.return,o)}}if(t===e){oe=null;break}if(r=t.sibling,r!==null){r.return=t.return,oe=r;break}oe=t.return}}function tf(e){for(;oe!==null;){var t=oe;if(t===e){oe=null;break}var r=t.sibling;if(r!==null){r.return=t.return,oe=r;break}oe=t.return}}function rf(e){for(;oe!==null;){var t=oe;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{ho(4,t)}catch(n){Ie(t,r,n)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var d=t.return;try{s.componentDidMount()}catch(n){Ie(t,d,n)}}var v=t.return;try{hl(t)}catch(n){Ie(t,v,n)}break;case 5:var y=t.return;try{hl(t)}catch(n){Ie(t,y,n)}}}catch(n){Ie(t,t.return,n)}if(t===e){oe=null;break}var u=t.sibling;if(u!==null){u.return=t.return,oe=u;break}oe=t.return}}var oy=Math.ceil,Ua=Zt.ReactCurrentDispatcher,uu=Zt.ReactCurrentOwner,_t=Zt.ReactCurrentBatchConfig,ye=0,Ne=null,Fe=null,Ve=0,ut=0,on=br(0),Re=0,Si=null,Wr=0,po=0,cu=0,ei=null,it=null,fu=0,Sn=1/0,Gt=null,Ha=!1,gl=null,hr=null,ia=!1,or=null,Ga=0,ti=0,vl=null,Ca=-1,Sa=0;function et(){return ye&6?Ae():Ca!==-1?Ca:Ca=Ae()}function dr(e){return e.mode&1?ye&2&&Ve!==0?Ve&-Ve:Hm.transition!==null?(Sa===0&&(Sa=Uh()),Sa):(e=Se,e!==0||(e=window.event,e=e===void 0?16:qh(e.type)),e):1}function Ft(e,t,r,s){if(50<ti)throw ti=0,vl=null,Error(Z(185));Pi(e,r,s),(!(ye&2)||e!==Ne)&&(e===Ne&&(!(ye&2)&&(po|=r),Re===4&&ir(e,Ve)),lt(e,s),r===1&&ye===0&&!(t.mode&1)&&(Sn=Ae()+500,uo&&_r()))}function lt(e,t){var r=e.callbackNode;Hv(e,t);var s=Oa(e,e===Ne?Ve:0);if(s===0)r!==null&&fc(r),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(r!=null&&fc(r),t===1)e.tag===0?Um(nf.bind(null,e)):pd(nf.bind(null,e)),Nm(function(){!(ye&6)&&_r()}),r=null;else{switch(Hh(s)){case 1:r=Bl;break;case 4:r=zh;break;case 16:r=Ea;break;case 536870912:r=Wh;break;default:r=Ea}r=hp(r,ap.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function ap(e,t){if(Ca=-1,Sa=0,ye&6)throw Error(Z(327));var r=e.callbackNode;if(hn()&&e.callbackNode!==r)return null;var s=Oa(e,e===Ne?Ve:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=Va(e,s);else{t=s;var d=ye;ye|=2;var v=sp();(Ne!==e||Ve!==t)&&(Gt=null,Sn=Ae()+500,Rr(e,t));do try{uy();break}catch(u){op(e,u)}while(1);Kl(),Ua.current=v,ye=d,Fe!==null?t=0:(Ne=null,Ve=0,t=Re)}if(t!==0){if(t===2&&(d=Hs(e),d!==0&&(s=d,t=ml(e,d))),t===1)throw r=Si,Rr(e,0),ir(e,s),lt(e,Ae()),r;if(t===6)ir(e,s);else{if(d=e.current.alternate,!(s&30)&&!sy(d)&&(t=Va(e,s),t===2&&(v=Hs(e),v!==0&&(s=v,t=ml(e,v))),t===1))throw r=Si,Rr(e,0),ir(e,s),lt(e,Ae()),r;switch(e.finishedWork=d,e.finishedLanes=s,t){case 0:case 1:throw Error(Z(345));case 2:Ir(e,it,Gt);break;case 3:if(ir(e,s),(s&130023424)===s&&(t=fu+500-Ae(),10<t)){if(Oa(e,0)!==0)break;if(d=e.suspendedLanes,(d&s)!==s){et(),e.pingedLanes|=e.suspendedLanes&d;break}e.timeoutHandle=Qs(Ir.bind(null,e,it,Gt),t);break}Ir(e,it,Gt);break;case 4:if(ir(e,s),(s&4194240)===s)break;for(t=e.eventTimes,d=-1;0<s;){var y=31-Mt(s);v=1<<y,y=t[y],y>d&&(d=y),s&=~v}if(s=d,s=Ae()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*oy(s/1960))-s,10<s){e.timeoutHandle=Qs(Ir.bind(null,e,it,Gt),s);break}Ir(e,it,Gt);break;case 5:Ir(e,it,Gt);break;default:throw Error(Z(329))}}}return lt(e,Ae()),e.callbackNode===r?ap.bind(null,e):null}function ml(e,t){var r=ei;return e.current.memoizedState.isDehydrated&&(Rr(e,t).flags|=256),e=Va(e,t),e!==2&&(t=it,it=r,t!==null&&yl(t)),e}function yl(e){it===null?it=e:it.push.apply(it,e)}function sy(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var d=r[s],v=d.getSnapshot;d=d.value;try{if(!Lt(v(),d))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ir(e,t){for(t&=~cu,t&=~po,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Mt(t),s=1<<r;e[r]=-1,t&=~s}}function nf(e){if(ye&6)throw Error(Z(327));hn();var t=Oa(e,0);if(!(t&1))return lt(e,Ae()),null;var r=Va(e,t);if(e.tag!==0&&r===2){var s=Hs(e);s!==0&&(t=s,r=ml(e,s))}if(r===1)throw r=Si,Rr(e,0),ir(e,t),lt(e,Ae()),r;if(r===6)throw Error(Z(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ir(e,it,Gt),lt(e,Ae()),null}function hu(e,t){var r=ye;ye|=1;try{return e(t)}finally{ye=r,ye===0&&(Sn=Ae()+500,uo&&_r())}}function Ur(e){or!==null&&or.tag===0&&!(ye&6)&&hn();var t=ye;ye|=1;var r=_t.transition,s=Se;try{if(_t.transition=null,Se=1,e)return e()}finally{Se=s,_t.transition=r,ye=t,!(ye&6)&&_r()}}function du(){ut=on.current,Te(on)}function Rr(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Bm(r)),Fe!==null)for(r=Fe.return;r!==null;){var s=r;switch(Yl(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Aa();break;case 3:yn(),Te(ot),Te(Ke),ru();break;case 5:tu(s);break;case 4:yn();break;case 13:Te(Pe);break;case 19:Te(Pe);break;case 10:Ql(s.type._context);break;case 22:case 23:du()}r=r.return}if(Ne=e,Fe=e=pr(e.current,null),Ve=ut=t,Re=0,Si=null,cu=po=Wr=0,it=ei=null,Fr!==null){for(t=0;t<Fr.length;t++)if(r=Fr[t],s=r.interleaved,s!==null){r.interleaved=null;var d=s.next,v=r.pending;if(v!==null){var y=v.next;v.next=d,s.next=y}r.pending=s}Fr=null}return e}function op(e,t){do{var r=Fe;try{if(Kl(),va.current=Wa,za){for(var s=De.memoizedState;s!==null;){var d=s.queue;d!==null&&(d.pending=null),s=s.next}za=!1}if(zr=0,Be=Le=De=null,Jn=!1,mi=0,uu.current=null,r===null||r.return===null){Re=1,Si=t,Fe=null;break}e:{var v=e,y=r.return,u=r,n=t;if(t=Ve,u.flags|=32768,n!==null&&typeof n=="object"&&typeof n.then=="function"){var f=n,h=u,a=h.tag;if(!(h.mode&1)&&(a===0||a===11||a===15)){var o=h.alternate;o?(h.updateQueue=o.updateQueue,h.memoizedState=o.memoizedState,h.lanes=o.lanes):(h.updateQueue=null,h.memoizedState=null)}var i=Gc(y);if(i!==null){i.flags&=-257,Vc(i,y,u,v,t),i.mode&1&&Hc(v,f,t),t=i,n=f;var l=t.updateQueue;if(l===null){var p=new Set;p.add(n),t.updateQueue=p}else l.add(n);break e}else{if(!(t&1)){Hc(v,f,t),pu();break e}n=Error(Z(426))}}else if(Oe&&u.mode&1){var c=Gc(y);if(c!==null){!(c.flags&65536)&&(c.flags|=256),Vc(c,y,u,v,t),$l(Cn(n,u));break e}}v=n=Cn(n,u),Re!==4&&(Re=2),ei===null?ei=[v]:ei.push(v),v=y;do{switch(v.tag){case 3:v.flags|=65536,t&=-t,v.lanes|=t;var g=Hd(v,n,t);Bc(v,g);break e;case 1:u=n;var m=v.type,C=v.stateNode;if(!(v.flags&128)&&(typeof m.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(hr===null||!hr.has(C)))){v.flags|=65536,t&=-t,v.lanes|=t;var S=Gd(v,u,t);Bc(v,S);break e}}v=v.return}while(v!==null)}up(r)}catch(x){t=x,Fe===r&&r!==null&&(Fe=r=r.return);continue}break}while(1)}function sp(){var e=Ua.current;return Ua.current=Wa,e===null?Wa:e}function pu(){(Re===0||Re===3||Re===2)&&(Re=4),Ne===null||!(Wr&268435455)&&!(po&268435455)||ir(Ne,Ve)}function Va(e,t){var r=ye;ye|=2;var s=sp();(Ne!==e||Ve!==t)&&(Gt=null,Rr(e,t));do try{ly();break}catch(d){op(e,d)}while(1);if(Kl(),ye=r,Ua.current=s,Fe!==null)throw Error(Z(261));return Ne=null,Ve=0,Re}function ly(){for(;Fe!==null;)lp(Fe)}function uy(){for(;Fe!==null&&!Fv();)lp(Fe)}function lp(e){var t=fp(e.alternate,e,ut);e.memoizedProps=e.pendingProps,t===null?up(e):Fe=t,uu.current=null}function up(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=ry(r,t),r!==null){r.flags&=32767,Fe=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Re=6,Fe=null;return}}else if(r=ty(r,t,ut),r!==null){Fe=r;return}if(t=t.sibling,t!==null){Fe=t;return}Fe=t=e}while(t!==null);Re===0&&(Re=5)}function Ir(e,t,r){var s=Se,d=_t.transition;try{_t.transition=null,Se=1,cy(e,t,r,s)}finally{_t.transition=d,Se=s}return null}function cy(e,t,r,s){do hn();while(or!==null);if(ye&6)throw Error(Z(327));r=e.finishedWork;var d=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Z(177));e.callbackNode=null,e.callbackPriority=0;var v=r.lanes|r.childLanes;if(Gv(e,v),e===Ne&&(Fe=Ne=null,Ve=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||ia||(ia=!0,hp(Ea,function(){return hn(),null})),v=(r.flags&15990)!==0,r.subtreeFlags&15990||v){v=_t.transition,_t.transition=null;var y=Se;Se=1;var u=ye;ye|=4,uu.current=null,iy(e,r),np(r,e),km(qs),Pa=!!$s,qs=$s=null,e.current=r,ay(r),Lv(),ye=u,Se=y,_t.transition=v}else e.current=r;if(ia&&(ia=!1,or=e,Ga=d),v=e.pendingLanes,v===0&&(hr=null),Nv(r.stateNode),lt(e,Ae()),t!==null)for(s=e.onRecoverableError,r=0;r<t.length;r++)d=t[r],s(d.value,{componentStack:d.stack,digest:d.digest});if(Ha)throw Ha=!1,e=gl,gl=null,e;return Ga&1&&e.tag!==0&&hn(),v=e.pendingLanes,v&1?e===vl?ti++:(ti=0,vl=e):ti=0,_r(),null}function hn(){if(or!==null){var e=Hh(Ga),t=_t.transition,r=Se;try{if(_t.transition=null,Se=16>e?16:e,or===null)var s=!1;else{if(e=or,or=null,Ga=0,ye&6)throw Error(Z(331));var d=ye;for(ye|=4,oe=e.current;oe!==null;){var v=oe,y=v.child;if(oe.flags&16){var u=v.deletions;if(u!==null){for(var n=0;n<u.length;n++){var f=u[n];for(oe=f;oe!==null;){var h=oe;switch(h.tag){case 0:case 11:case 15:Zn(8,h,v)}var a=h.child;if(a!==null)a.return=h,oe=a;else for(;oe!==null;){h=oe;var o=h.sibling,i=h.return;if(ep(h),h===f){oe=null;break}if(o!==null){o.return=i,oe=o;break}oe=i}}}var l=v.alternate;if(l!==null){var p=l.child;if(p!==null){l.child=null;do{var c=p.sibling;p.sibling=null,p=c}while(p!==null)}}oe=v}}if(v.subtreeFlags&2064&&y!==null)y.return=v,oe=y;else e:for(;oe!==null;){if(v=oe,v.flags&2048)switch(v.tag){case 0:case 11:case 15:Zn(9,v,v.return)}var g=v.sibling;if(g!==null){g.return=v.return,oe=g;break e}oe=v.return}}var m=e.current;for(oe=m;oe!==null;){y=oe;var C=y.child;if(y.subtreeFlags&2064&&C!==null)C.return=y,oe=C;else e:for(y=m;oe!==null;){if(u=oe,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:ho(9,u)}}catch(x){Ie(u,u.return,x)}if(u===y){oe=null;break e}var S=u.sibling;if(S!==null){S.return=u.return,oe=S;break e}oe=u.return}}if(ye=d,_r(),Ut&&typeof Ut.onPostCommitFiberRoot=="function")try{Ut.onPostCommitFiberRoot(io,e)}catch{}s=!0}return s}finally{Se=r,_t.transition=t}}return!1}function af(e,t,r){t=Cn(r,t),t=Hd(e,t,1),e=fr(e,t,1),t=et(),e!==null&&(Pi(e,1,t),lt(e,t))}function Ie(e,t,r){if(e.tag===3)af(e,e,r);else for(;t!==null;){if(t.tag===3){af(t,e,r);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(hr===null||!hr.has(s))){e=Cn(r,e),e=Gd(t,e,1),t=fr(t,e,1),e=et(),t!==null&&(Pi(t,1,e),lt(t,e));break}}t=t.return}}function fy(e,t,r){var s=e.pingCache;s!==null&&s.delete(t),t=et(),e.pingedLanes|=e.suspendedLanes&r,Ne===e&&(Ve&r)===r&&(Re===4||Re===3&&(Ve&130023424)===Ve&&500>Ae()-fu?Rr(e,0):cu|=r),lt(e,t)}function cp(e,t){t===0&&(e.mode&1?(t=$i,$i<<=1,!($i&130023424)&&($i=4194304)):t=1);var r=et();e=Qt(e,t),e!==null&&(Pi(e,t,r),lt(e,r))}function hy(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),cp(e,r)}function dy(e,t){var r=0;switch(e.tag){case 13:var s=e.stateNode,d=e.memoizedState;d!==null&&(r=d.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(Z(314))}s!==null&&s.delete(t),cp(e,r)}var fp;fp=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||ot.current)at=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return at=!1,ey(e,t,r);at=!!(e.flags&131072)}else at=!1,Oe&&t.flags&1048576&&gd(t,La,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;ya(e,t),e=t.pendingProps;var d=gn(t,Ke.current);fn(t,r),d=iu(null,t,s,e,d,r);var v=au();return t.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,st(s)?(v=!0,Ma(t)):v=!1,t.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,Zl(t),d.updater=fo,t.stateNode=d,d._reactInternals=t,il(t,s,e,r),t=sl(null,t,s,!0,v,r)):(t.tag=0,Oe&&v&&Xl(t),Ze(null,t,d,r),t=t.child),t;case 16:s=t.elementType;e:{switch(ya(e,t),e=t.pendingProps,d=s._init,s=d(s._payload),t.type=s,d=t.tag=gy(s),e=Dt(s,e),d){case 0:t=ol(null,t,s,e,r);break e;case 1:t=$c(null,t,s,e,r);break e;case 11:t=Xc(null,t,s,e,r);break e;case 14:t=Yc(null,t,s,Dt(s.type,e),r);break e}throw Error(Z(306,s,""))}return t;case 0:return s=t.type,d=t.pendingProps,d=t.elementType===s?d:Dt(s,d),ol(e,t,s,d,r);case 1:return s=t.type,d=t.pendingProps,d=t.elementType===s?d:Dt(s,d),$c(e,t,s,d,r);case 3:e:{if($d(t),e===null)throw Error(Z(387));s=t.pendingProps,v=t.memoizedState,d=v.element,xd(e,t),Na(t,s,null,r);var y=t.memoizedState;if(s=y.element,v.isDehydrated)if(v={element:s,isDehydrated:!1,cache:y.cache,pendingSuspenseBoundaries:y.pendingSuspenseBoundaries,transitions:y.transitions},t.updateQueue.baseState=v,t.memoizedState=v,t.flags&256){d=Cn(Error(Z(423)),t),t=qc(e,t,s,r,d);break e}else if(s!==d){d=Cn(Error(Z(424)),t),t=qc(e,t,s,r,d);break e}else for(ct=cr(t.stateNode.containerInfo.firstChild),ht=t,Oe=!0,It=null,r=Cd(t,null,s,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(vn(),s===d){t=Jt(e,t,r);break e}Ze(e,t,s,r)}t=t.child}return t;case 5:return wd(t),e===null&&tl(t),s=t.type,d=t.pendingProps,v=e!==null?e.memoizedProps:null,y=d.children,Ks(s,d)?y=null:v!==null&&Ks(s,v)&&(t.flags|=32),Yd(e,t),Ze(e,t,y,r),t.child;case 6:return e===null&&tl(t),null;case 13:return qd(e,t,r);case 4:return eu(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=mn(t,null,s,r):Ze(e,t,s,r),t.child;case 11:return s=t.type,d=t.pendingProps,d=t.elementType===s?d:Dt(s,d),Xc(e,t,s,d,r);case 7:return Ze(e,t,t.pendingProps,r),t.child;case 8:return Ze(e,t,t.pendingProps.children,r),t.child;case 12:return Ze(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(s=t.type._context,d=t.pendingProps,v=t.memoizedProps,y=d.value,be(Ra,s._currentValue),s._currentValue=y,v!==null)if(Lt(v.value,y)){if(v.children===d.children&&!ot.current){t=Jt(e,t,r);break e}}else for(v=t.child,v!==null&&(v.return=t);v!==null;){var u=v.dependencies;if(u!==null){y=v.child;for(var n=u.firstContext;n!==null;){if(n.context===s){if(v.tag===1){n=$t(-1,r&-r),n.tag=2;var f=v.updateQueue;if(f!==null){f=f.shared;var h=f.pending;h===null?n.next=n:(n.next=h.next,h.next=n),f.pending=n}}v.lanes|=r,n=v.alternate,n!==null&&(n.lanes|=r),rl(v.return,r,t),u.lanes|=r;break}n=n.next}}else if(v.tag===10)y=v.type===t.type?null:v.child;else if(v.tag===18){if(y=v.return,y===null)throw Error(Z(341));y.lanes|=r,u=y.alternate,u!==null&&(u.lanes|=r),rl(y,r,t),y=v.sibling}else y=v.child;if(y!==null)y.return=v;else for(y=v;y!==null;){if(y===t){y=null;break}if(v=y.sibling,v!==null){v.return=y.return,y=v;break}y=y.return}v=y}Ze(e,t,d.children,r),t=t.child}return t;case 9:return d=t.type,s=t.pendingProps.children,fn(t,r),d=Et(d),s=s(d),t.flags|=1,Ze(e,t,s,r),t.child;case 14:return s=t.type,d=Dt(s,t.pendingProps),d=Dt(s.type,d),Yc(e,t,s,d,r);case 15:return Vd(e,t,t.type,t.pendingProps,r);case 17:return s=t.type,d=t.pendingProps,d=t.elementType===s?d:Dt(s,d),ya(e,t),t.tag=1,st(s)?(e=!0,Ma(t)):e=!1,fn(t,r),Ud(t,s,d),il(t,s,d,r),sl(null,t,s,!0,e,r);case 19:return Kd(e,t,r);case 22:return Xd(e,t,r)}throw Error(Z(156,t.tag))};function hp(e,t){return jh(e,t)}function py(e,t,r,s){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wt(e,t,r,s){return new py(e,t,r,s)}function gu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function gy(e){if(typeof e=="function")return gu(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Fl)return 11;if(e===Ll)return 14}return 2}function pr(e,t){var r=e.alternate;return r===null?(r=wt(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function xa(e,t,r,s,d,v){var y=2;if(s=e,typeof e=="function")gu(e)&&(y=1);else if(typeof e=="string")y=5;else e:switch(e){case qr:return Br(r.children,d,v,t);case Ml:y=8,d|=8;break;case Ps:return e=wt(12,r,t,d|2),e.elementType=Ps,e.lanes=v,e;case Ds:return e=wt(13,r,t,d),e.elementType=Ds,e.lanes=v,e;case ks:return e=wt(19,r,t,d),e.elementType=ks,e.lanes=v,e;case wh:return go(r,d,v,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Sh:y=10;break e;case xh:y=9;break e;case Fl:y=11;break e;case Ll:y=14;break e;case tr:y=16,s=null;break e}throw Error(Z(130,e==null?e:typeof e,""))}return t=wt(y,r,t,d),t.elementType=e,t.type=s,t.lanes=v,t}function Br(e,t,r,s){return e=wt(7,e,s,t),e.lanes=r,e}function go(e,t,r,s){return e=wt(22,e,s,t),e.elementType=wh,e.lanes=r,e.stateNode={isHidden:!1},e}function cs(e,t,r){return e=wt(6,e,null,t),e.lanes=r,e}function fs(e,t,r){return t=wt(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function vy(e,t,r,s,d){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Vo(0),this.expirationTimes=Vo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vo(0),this.identifierPrefix=s,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function vu(e,t,r,s,d,v,y,u,n){return e=new vy(e,t,r,u,n),t===1?(t=1,v===!0&&(t|=8)):t=0,v=wt(3,null,null,t),e.current=v,v.stateNode=e,v.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Zl(v),e}function my(e,t,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$r,key:s==null?null:""+s,children:e,containerInfo:t,implementation:r}}function dp(e){if(!e)return Sr;e=e._reactInternals;e:{if(Vr(e)!==e||e.tag!==1)throw Error(Z(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(st(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Z(171))}if(e.tag===1){var r=e.type;if(st(r))return dd(e,r,t)}return t}function pp(e,t,r,s,d,v,y,u,n){return e=vu(r,s,!0,e,d,v,y,u,n),e.context=dp(null),r=e.current,s=et(),d=dr(r),v=$t(s,d),v.callback=t??null,fr(r,v,d),e.current.lanes=d,Pi(e,d,s),lt(e,s),e}function vo(e,t,r,s){var d=t.current,v=et(),y=dr(d);return r=dp(r),t.context===null?t.context=r:t.pendingContext=r,t=$t(v,y),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=fr(d,t,y),e!==null&&(Ft(e,d,y,v),ga(e,d,y)),y}function Xa(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function of(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function mu(e,t){of(e,t),(e=e.alternate)&&of(e,t)}function yy(){return null}var gp=typeof reportError=="function"?reportError:function(e){console.error(e)};function yu(e){this._internalRoot=e}mo.prototype.render=yu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Z(409));vo(e,t,null,null)};mo.prototype.unmount=yu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ur(function(){vo(null,e,null,null)}),t[Kt]=null}};function mo(e){this._internalRoot=e}mo.prototype.unstable_scheduleHydration=function(e){if(e){var t=Xh();e={blockedOn:null,target:e,priority:t};for(var r=0;r<nr.length&&t!==0&&t<nr[r].priority;r++);nr.splice(r,0,e),r===0&&$h(e)}};function Cu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function yo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function sf(){}function Cy(e,t,r,s,d){if(d){if(typeof s=="function"){var v=s;s=function(){var f=Xa(y);v.call(f)}}var y=pp(t,s,e,0,null,!1,!1,"",sf);return e._reactRootContainer=y,e[Kt]=y.current,hi(e.nodeType===8?e.parentNode:e),Ur(),y}for(;d=e.lastChild;)e.removeChild(d);if(typeof s=="function"){var u=s;s=function(){var f=Xa(n);u.call(f)}}var n=vu(e,0,!1,null,null,!1,!1,"",sf);return e._reactRootContainer=n,e[Kt]=n.current,hi(e.nodeType===8?e.parentNode:e),Ur(function(){vo(t,n,r,s)}),n}function Co(e,t,r,s,d){var v=r._reactRootContainer;if(v){var y=v;if(typeof d=="function"){var u=d;d=function(){var n=Xa(y);u.call(n)}}vo(t,y,e,d)}else y=Cy(r,t,e,d,s);return Xa(y)}Gh=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Vn(t.pendingLanes);r!==0&&(Nl(t,r|1),lt(t,Ae()),!(ye&6)&&(Sn=Ae()+500,_r()))}break;case 13:Ur(function(){var s=Qt(e,1);if(s!==null){var d=et();Ft(s,e,1,d)}}),mu(e,1)}};jl=function(e){if(e.tag===13){var t=Qt(e,134217728);if(t!==null){var r=et();Ft(t,e,134217728,r)}mu(e,134217728)}};Vh=function(e){if(e.tag===13){var t=dr(e),r=Qt(e,t);if(r!==null){var s=et();Ft(r,e,t,s)}mu(e,t)}};Xh=function(){return Se};Yh=function(e,t){var r=Se;try{return Se=e,t()}finally{Se=r}};zs=function(e,t,r){switch(t){case"input":if(Ms(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var s=r[t];if(s!==e&&s.form===e.form){var d=lo(s);if(!d)throw Error(Z(90));_h(s),Ms(s,d)}}}break;case"textarea":Eh(e,r);break;case"select":t=r.value,t!=null&&sn(e,!!r.multiple,t,!1)}};Mh=hu;Fh=Ur;var Sy={usingClientEntryPoint:!1,Events:[ki,Zr,lo,Ih,Ah,hu]},jn={findFiberByHostInstance:Mr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},xy={bundleType:jn.bundleType,version:jn.version,rendererPackageName:jn.rendererPackageName,rendererConfig:jn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Zt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Bh(e),e===null?null:e.stateNode},findFiberByHostInstance:jn.findFiberByHostInstance||yy,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var aa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!aa.isDisabled&&aa.supportsFiber)try{io=aa.inject(xy),Ut=aa}catch{}}vt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Sy;vt.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Cu(t))throw Error(Z(200));return my(e,t,null,r)};vt.createRoot=function(e,t){if(!Cu(e))throw Error(Z(299));var r=!1,s="",d=gp;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(d=t.onRecoverableError)),t=vu(e,1,!1,null,null,r,!1,s,d),e[Kt]=t.current,hi(e.nodeType===8?e.parentNode:e),new yu(t)};vt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Z(188)):(e=Object.keys(e).join(","),Error(Z(268,e)));return e=Bh(t),e=e===null?null:e.stateNode,e};vt.flushSync=function(e){return Ur(e)};vt.hydrate=function(e,t,r){if(!yo(t))throw Error(Z(200));return Co(null,e,t,!0,r)};vt.hydrateRoot=function(e,t,r){if(!Cu(e))throw Error(Z(405));var s=r!=null&&r.hydratedSources||null,d=!1,v="",y=gp;if(r!=null&&(r.unstable_strictMode===!0&&(d=!0),r.identifierPrefix!==void 0&&(v=r.identifierPrefix),r.onRecoverableError!==void 0&&(y=r.onRecoverableError)),t=pp(t,null,e,1,r??null,d,!1,v,y),e[Kt]=t.current,hi(e),s)for(e=0;e<s.length;e++)r=s[e],d=r._getVersion,d=d(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,d]:t.mutableSourceEagerHydrationData.push(r,d);return new mo(t)};vt.render=function(e,t,r){if(!yo(t))throw Error(Z(200));return Co(null,e,t,!1,r)};vt.unmountComponentAtNode=function(e){if(!yo(e))throw Error(Z(40));return e._reactRootContainer?(Ur(function(){Co(null,null,e,!1,function(){e._reactRootContainer=null,e[Kt]=null})}),!0):!1};vt.unstable_batchedUpdates=hu;vt.unstable_renderSubtreeIntoContainer=function(e,t,r,s){if(!yo(r))throw Error(Z(200));if(e==null||e._reactInternals===void 0)throw Error(Z(38));return Co(e,t,r,!1,s)};vt.version="18.3.1-next-f1338f8080-20240426";function vp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(vp)}catch(e){console.error(e)}}vp(),vh.exports=vt;var Su=vh.exports;const wy=ro(Su);var mp,lf=Su;mp=lf.createRoot,lf.hydrateRoot;const uf=e=>{let t;const r=new Set,s=(h,a)=>{const o=typeof h=="function"?h(t):h;if(!Object.is(o,t)){const i=t;t=a??(typeof o!="object"||o===null)?o:Object.assign({},t,o),r.forEach(l=>l(t,i))}},d=()=>t,n={setState:s,getState:d,getInitialState:()=>f,subscribe:h=>(r.add(h),()=>r.delete(h)),destroy:()=>{r.clear()}},f=t=e(s,d,n);return n},by=e=>e?uf(e):uf;var yp={exports:{}},Cp={},Sp={exports:{}},xp={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xn=ae;function _y(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ty=typeof Object.is=="function"?Object.is:_y,Ey=xn.useState,Oy=xn.useEffect,Py=xn.useLayoutEffect,Dy=xn.useDebugValue;function ky(e,t){var r=t(),s=Ey({inst:{value:r,getSnapshot:t}}),d=s[0].inst,v=s[1];return Py(function(){d.value=r,d.getSnapshot=t,hs(d)&&v({inst:d})},[e,r,t]),Oy(function(){return hs(d)&&v({inst:d}),e(function(){hs(d)&&v({inst:d})})},[e]),Dy(r),r}function hs(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Ty(e,r)}catch{return!0}}function Iy(e,t){return t()}var Ay=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Iy:ky;xp.useSyncExternalStore=xn.useSyncExternalStore!==void 0?xn.useSyncExternalStore:Ay;Sp.exports=xp;var My=Sp.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var So=ae,Fy=My;function Ly(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ry=typeof Object.is=="function"?Object.is:Ly,By=Fy.useSyncExternalStore,Ny=So.useRef,jy=So.useEffect,zy=So.useMemo,Wy=So.useDebugValue;Cp.useSyncExternalStoreWithSelector=function(e,t,r,s,d){var v=Ny(null);if(v.current===null){var y={hasValue:!1,value:null};v.current=y}else y=v.current;v=zy(function(){function n(i){if(!f){if(f=!0,h=i,i=s(i),d!==void 0&&y.hasValue){var l=y.value;if(d(l,i))return a=l}return a=i}if(l=a,Ry(h,i))return l;var p=s(i);return d!==void 0&&d(l,p)?(h=i,l):(h=i,a=p)}var f=!1,h,a,o=r===void 0?null:r;return[function(){return n(t())},o===null?void 0:function(){return n(o())}]},[t,r,s,d]);var u=By(e,v[0],v[1]);return jy(function(){y.hasValue=!0,y.value=u},[u]),Wy(u),u};yp.exports=Cp;var Uy=yp.exports;const Hy=ro(Uy),{useDebugValue:Gy}=ge,{useSyncExternalStoreWithSelector:Vy}=Hy;const Xy=e=>e;function Yy(e,t=Xy,r){const s=Vy(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return Gy(s),s}const cf=e=>{const t=typeof e=="function"?by(e):e,r=(s,d)=>Yy(t,s,d);return Object.assign(r,t),r},wp=e=>e?cf(e):cf,ff={name:"",hp:"100",type:"water",secondType:"",isDualType:!1,maskUrl:"",stage:"basic",evolvesFrom:"",pokemonImageUrl:null,prevolveImageUrl:null,category:"",pokedexNumber:"",height:{feet:"",inches:""},weight:"",abilityName:"",abilityText:"",attacks:[{name:"",damage:"",energyCost:[],text:""},{name:"",damage:"",energyCost:[],text:""}],weakness:"",resistance:"",retreatCost:0,rarity:"common",holographic:!1},Tr=wp(e=>({...ff,setCardProperty:(t,r)=>e({[t]:r}),setName:t=>e({name:t}),setHP:t=>e({hp:t}),setType:t=>e({type:t}),setSecondType:t=>e({secondType:t}),toggleDualType:()=>e(t=>({isDualType:!t.isDualType,secondType:t.isDualType?"":t.secondType})),setMaskUrl:t=>e({maskUrl:t}),setStage:t=>e({stage:t}),setEvolvesFrom:t=>e({evolvesFrom:t}),setPokemonImage:t=>e({pokemonImageUrl:t}),setPrevolveImage:t=>e({prevolveImageUrl:t}),setCategory:t=>e({category:t}),setPokedexNumber:t=>e({pokedexNumber:t}),setHeight:(t,r)=>e({height:{feet:t,inches:r}}),setWeight:t=>e({weight:t}),setAbility:(t,r)=>e({abilityName:t,abilityText:r}),setAttack:(t,r)=>e(s=>{const d=[...s.attacks];return d[t]={...d[t],...r},{attacks:d}}),setAttackEnergyCost:(t,r,s)=>e(d=>{const v=[...d.attacks],y=[...v[t].energyCost],u=y.findIndex(n=>n.type===r);return u>=0?s>0?y[u].amount=s:y.splice(u,1):s>0&&y.push({type:r,amount:s}),v[t].energyCost=y,{attacks:v}}),setWeakness:t=>e({weakness:t}),setResistance:t=>e({resistance:t}),setRetreatCost:t=>e({retreatCost:t}),setRarity:t=>e({rarity:t}),toggleHolographic:()=>e(t=>({holographic:!t.holographic})),resetCard:()=>e(ff),loadCardTemplate:t=>e(r=>({...r,...t}))})),xu=wp((e,t)=>({layers:[],selectedLayerId:null,setLayers:r=>e({layers:r}),addLayer:r=>e(s=>({layers:[...s.layers,r]})),removeLayer:r=>e(s=>({layers:s.layers.filter(d=>d.id!==r),selectedLayerId:s.selectedLayerId===r?null:s.selectedLayerId})),updateLayer:(r,s)=>e(d=>({layers:d.layers.map(v=>v.id===r?{...v,...s}:v)})),setSelectedLayerId:r=>e({selectedLayerId:r}),getLayerById:r=>t().layers.find(s=>s.id===r),toggleLayerVisibility:r=>e(s=>({layers:s.layers.map(d=>d.id===r?{...d,visible:!d.visible}:d)})),toggleLayerLock:r=>e(s=>({layers:s.layers.map(d=>d.id===r?{...d,selectable:!d.selectable,evented:!d.evented}:d)})),moveLayerUp:r=>e(s=>{const d=s.layers.findIndex(u=>u.id===r);if(d>=s.layers.length-1)return s;const v=[...s.layers],y=v[d];return v[d]=v[d+1],v[d+1]=y,{layers:v}}),moveLayerDown:r=>e(s=>{const d=s.layers.findIndex(u=>u.id===r);if(d<=0)return s;const v=[...s.layers],y=v[d];return v[d]=v[d-1],v[d-1]=y,{layers:v}}),reorderLayers:(r,s)=>e(d=>{const v=[...d.layers],[y]=v.splice(r,1);return v.splice(s,0,y),{layers:v}})}));const $y=({children:e})=>R.jsx("div",{className:"sidebar left-sidebar",children:e}),qy=({children:e})=>R.jsx("div",{className:"main-content",children:e}),Ky=({children:e})=>R.jsx("div",{className:"sidebar right-sidebar",children:e});var dn={};const Qy={},Jy=Object.freeze(Object.defineProperty({__proto__:null,default:Qy},Symbol.toStringTag,{value:"Module"})),ds=Kg(Jy);(function(e){/*! Fabric.js Copyright 2008-2015, Printio (Juriy Zaytsev, Maxim Chernyak) */var t=t||{version:"5.5.2"};if(e.fabric=t,typeof document<"u"&&typeof window<"u")document instanceof(typeof HTMLDocument<"u"?HTMLDocument:Document)?t.document=document:t.document=document.implementation.createHTMLDocument(""),t.window=window;else{var r=ds,s=new r.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;t.document=s.document,t.jsdomImplForWrapper=ds.implForWrapper,t.nodeCanvas=ds.Canvas,t.window=s,DOMParser=t.window.DOMParser}t.isTouchSupported="ontouchstart"in t.window||"ontouchstart"in t.document||t.window&&t.window.navigator&&t.window.navigator.maxTouchPoints>0,t.isLikelyNode=typeof Buffer<"u"&&typeof window>"u",t.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],t.DPI=96,t.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",t.commaWsp="(?:\\s+,?\\s*|,\\s*)",t.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/ig,t.reNonWord=/[ \n\.,;!\?\-]/,t.fontPaths={},t.iMatrix=[1,0,0,1,0,0],t.svgNS="http://www.w3.org/2000/svg",t.perfLimitSizeTotal=2097152,t.maxCacheSideLimit=4096,t.minCacheSideLimit=256,t.charWidthsCache={},t.textureSize=2048,t.disableStyleCopyPaste=!1,t.enableGLFiltering=!0,t.devicePixelRatio=t.window.devicePixelRatio||t.window.webkitDevicePixelRatio||t.window.mozDevicePixelRatio||1,t.browserShadowBlurConstant=1,t.arcToSegmentsCache={},t.boundsOfCurveCache={},t.cachesBoundsOfCurve=!0,t.forceGLPutImageData=!1,t.initFilterBackend=function(){if(t.enableGLFiltering&&t.isWebglSupported&&t.isWebglSupported(t.textureSize))return console.log("max texture size: "+t.maxTextureSize),new t.WebglFilterBackend({tileSize:t.textureSize});if(t.Canvas2dFilterBackend)return new t.Canvas2dFilterBackend},typeof document<"u"&&typeof window<"u"&&(window.fabric=t),function(){function u(i,l){if(this.__eventListeners[i]){var p=this.__eventListeners[i];l?p[p.indexOf(l)]=!1:t.util.array.fill(p,!1)}}function n(i,l){if(this.__eventListeners||(this.__eventListeners={}),arguments.length===1)for(var p in i)this.on(p,i[p]);else this.__eventListeners[i]||(this.__eventListeners[i]=[]),this.__eventListeners[i].push(l);return this}function f(i,l){var p=(function(){l.apply(this,arguments),this.off(i,p)}).bind(this);this.on(i,p)}function h(i,l){if(arguments.length===1)for(var p in i)f.call(this,p,i[p]);else f.call(this,i,l);return this}function a(i,l){if(!this.__eventListeners)return this;if(arguments.length===0)for(i in this.__eventListeners)u.call(this,i);else if(arguments.length===1&&typeof arguments[0]=="object")for(var p in i)u.call(this,p,i[p]);else u.call(this,i,l);return this}function o(i,l){if(!this.__eventListeners)return this;var p=this.__eventListeners[i];if(!p)return this;for(var c=0,g=p.length;c<g;c++)p[c]&&p[c].call(this,l||{});return this.__eventListeners[i]=p.filter(function(m){return m!==!1}),this}t.Observable={fire:o,on:n,once:h,off:a}}(),t.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var u=0,n=arguments.length;u<n;u++)this._onObjectAdded(arguments[u]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(u,n,f){var h=this._objects;return f?h[n]=u:h.splice(n,0,u),this._onObjectAdded&&this._onObjectAdded(u),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var u=this._objects,n,f=!1,h=0,a=arguments.length;h<a;h++)n=u.indexOf(arguments[h]),n!==-1&&(f=!0,u.splice(n,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[h]));return this.renderOnAddRemove&&f&&this.requestRenderAll(),this},forEachObject:function(u,n){for(var f=this.getObjects(),h=0,a=f.length;h<a;h++)u.call(n,f[h],h,f);return this},getObjects:function(u){return typeof u>"u"?this._objects.concat():this._objects.filter(function(n){return n.type===u})},item:function(u){return this._objects[u]},isEmpty:function(){return this._objects.length===0},size:function(){return this._objects.length},contains:function(u,n){return this._objects.indexOf(u)>-1?!0:n?this._objects.some(function(f){return typeof f.contains=="function"&&f.contains(u,!0)}):!1},complexity:function(){return this._objects.reduce(function(u,n){return u+=n.complexity?n.complexity():0,u},0)}},t.CommonMethods={_setOptions:function(u){for(var n in u)this.set(n,u[n])},_initGradient:function(u,n){u&&u.colorStops&&!(u instanceof t.Gradient)&&this.set(n,new t.Gradient(u))},_initPattern:function(u,n,f){u&&u.source&&!(u instanceof t.Pattern)?this.set(n,new t.Pattern(u,f)):f&&f()},_setObject:function(u){for(var n in u)this._set(n,u[n])},set:function(u,n){return typeof u=="object"?this._setObject(u):this._set(u,n),this},_set:function(u,n){this[u]=n},toggle:function(u){var n=this.get(u);return typeof n=="boolean"&&this.set(u,!n),this},get:function(u){return this[u]}},function(u){var n=Math.sqrt,f=Math.atan2,h=Math.pow,a=Math.PI/180,o=Math.PI/2;t.util={cos:function(i){if(i===0)return 1;i<0&&(i=-i);var l=i/o;switch(l){case 1:case 3:return 0;case 2:return-1}return Math.cos(i)},sin:function(i){if(i===0)return 0;var l=i/o,p=1;switch(i<0&&(p=-1),l){case 1:return p;case 2:return 0;case 3:return-p}return Math.sin(i)},removeFromArray:function(i,l){var p=i.indexOf(l);return p!==-1&&i.splice(p,1),i},getRandomInt:function(i,l){return Math.floor(Math.random()*(l-i+1))+i},degreesToRadians:function(i){return i*a},radiansToDegrees:function(i){return i/a},rotatePoint:function(i,l,p){var c=new t.Point(i.x-l.x,i.y-l.y),g=t.util.rotateVector(c,p);return new t.Point(g.x,g.y).addEquals(l)},rotateVector:function(i,l){var p=t.util.sin(l),c=t.util.cos(l),g=i.x*c-i.y*p,m=i.x*p+i.y*c;return{x:g,y:m}},createVector:function(i,l){return new t.Point(l.x-i.x,l.y-i.y)},calcAngleBetweenVectors:function(i,l){return Math.acos((i.x*l.x+i.y*l.y)/(Math.hypot(i.x,i.y)*Math.hypot(l.x,l.y)))},getHatVector:function(i){return new t.Point(i.x,i.y).multiply(1/Math.hypot(i.x,i.y))},getBisector:function(i,l,p){var c=t.util.createVector(i,l),g=t.util.createVector(i,p),m=t.util.calcAngleBetweenVectors(c,g),C=t.util.calcAngleBetweenVectors(t.util.rotateVector(c,m),g),S=m*(C===0?1:-1)/2;return{vector:t.util.getHatVector(t.util.rotateVector(c,S)),angle:m}},projectStrokeOnPoints:function(i,l,p){var c=[],g=l.strokeWidth/2,m=l.strokeUniform?new t.Point(1/l.scaleX,1/l.scaleY):new t.Point(1,1),C=function(S){var x=g/Math.hypot(S.x,S.y);return new t.Point(S.x*x*m.x,S.y*x*m.y)};return i.length<=1||i.forEach(function(S,x){var w=new t.Point(S.x,S.y),_,E;x===0?(E=i[x+1],_=p?C(t.util.createVector(E,w)).addEquals(w):i[i.length-1]):x===i.length-1?(_=i[x-1],E=p?C(t.util.createVector(_,w)).addEquals(w):i[0]):(_=i[x-1],E=i[x+1]);var I=t.util.getBisector(w,_,E),M=I.vector,z=I.angle,Q,ee;if(l.strokeLineJoin==="miter"&&(Q=-g/Math.sin(z/2),ee=new t.Point(M.x*Q*m.x,M.y*Q*m.y),Math.hypot(ee.x,ee.y)/g<=l.strokeMiterLimit)){c.push(w.add(ee)),c.push(w.subtract(ee));return}Q=-g*Math.SQRT2,ee=new t.Point(M.x*Q*m.x,M.y*Q*m.y),c.push(w.add(ee)),c.push(w.subtract(ee))}),c},transformPoint:function(i,l,p){return p?new t.Point(l[0]*i.x+l[2]*i.y,l[1]*i.x+l[3]*i.y):new t.Point(l[0]*i.x+l[2]*i.y+l[4],l[1]*i.x+l[3]*i.y+l[5])},makeBoundingBoxFromPoints:function(i,l){if(l)for(var p=0;p<i.length;p++)i[p]=t.util.transformPoint(i[p],l);var c=[i[0].x,i[1].x,i[2].x,i[3].x],g=t.util.array.min(c),m=t.util.array.max(c),C=m-g,S=[i[0].y,i[1].y,i[2].y,i[3].y],x=t.util.array.min(S),w=t.util.array.max(S),_=w-x;return{left:g,top:x,width:C,height:_}},invertTransform:function(i){var l=1/(i[0]*i[3]-i[1]*i[2]),p=[l*i[3],-l*i[1],-l*i[2],l*i[0]],c=t.util.transformPoint({x:i[4],y:i[5]},p,!0);return p[4]=-c.x,p[5]=-c.y,p},toFixed:function(i,l){return parseFloat(Number(i).toFixed(l))},parseUnit:function(i,l){var p=/\D{0,2}$/.exec(i),c=parseFloat(i);switch(l||(l=t.Text.DEFAULT_SVG_FONT_SIZE),p[0]){case"mm":return c*t.DPI/25.4;case"cm":return c*t.DPI/2.54;case"in":return c*t.DPI;case"pt":return c*t.DPI/72;case"pc":return c*t.DPI/72*12;case"em":return c*l;default:return c}},falseFunction:function(){return!1},getKlass:function(i,l){return i=t.util.string.camelize(i.charAt(0).toUpperCase()+i.slice(1)),t.util.resolveNamespace(l)[i]},getSvgAttributes:function(i){var l=["instantiated_by_use","style","id","class"];switch(i){case"linearGradient":l=l.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":l=l.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":l=l.concat(["offset","stop-color","stop-opacity"]);break}return l},resolveNamespace:function(i){if(!i)return t;var l=i.split("."),p=l.length,c,g=u||t.window;for(c=0;c<p;++c)g=g[l[c]];return g},loadImage:function(i,l,p,c){if(!i){l&&l.call(p,i);return}var g=t.util.createImage(),m=function(){l&&l.call(p,g,!1),g=g.onload=g.onerror=null};g.onload=m,g.onerror=function(){t.log("Error loading "+g.src),l&&l.call(p,null,!0),g=g.onload=g.onerror=null},i.indexOf("data")!==0&&c!==void 0&&c!==null&&(g.crossOrigin=c),i.substring(0,14)==="data:image/svg"&&(g.onload=null,t.util.loadImageInDom(g,m)),g.src=i},loadImageInDom:function(i,l){var p=t.document.createElement("div");p.style.width=p.style.height="1px",p.style.left=p.style.top="-100%",p.style.position="absolute",p.appendChild(i),t.document.querySelector("body").appendChild(p),i.onload=function(){l(),p.parentNode.removeChild(p),p=null}},enlivenObjects:function(i,l,p,c){i=i||[];var g=[],m=0,C=i.length;function S(){++m===C&&l&&l(g.filter(function(x){return x}))}if(!C){l&&l(g);return}i.forEach(function(x,w){if(!x||!x.type){S();return}var _=t.util.getKlass(x.type,p);_.fromObject(x,function(E,I){I||(g[w]=E),c&&c(x,E,I),S()})})},enlivenObjectEnlivables:function(i,l,p){var c=t.Object.ENLIVEN_PROPS.filter(function(g){return!!i[g]});t.util.enlivenObjects(c.map(function(g){return i[g]}),function(g){var m={};c.forEach(function(C,S){m[C]=g[S],l&&(l[C]=g[S])}),p&&p(m)})},enlivenPatterns:function(i,l){i=i||[];function p(){++g===m&&l&&l(c)}var c=[],g=0,m=i.length;if(!m){l&&l(c);return}i.forEach(function(C,S){C&&C.source?new t.Pattern(C,function(x){c[S]=x,p()}):(c[S]=C,p())})},groupSVGElements:function(i,l,p){var c;return i&&i.length===1?(typeof p<"u"&&(i[0].sourcePath=p),i[0]):(l&&(l.width&&l.height?l.centerPoint={x:l.width/2,y:l.height/2}:(delete l.width,delete l.height)),c=new t.Group(i,l),typeof p<"u"&&(c.sourcePath=p),c)},populateWithProperties:function(i,l,p){if(p&&Array.isArray(p))for(var c=0,g=p.length;c<g;c++)p[c]in i&&(l[p[c]]=i[p[c]])},createCanvasElement:function(){return t.document.createElement("canvas")},copyCanvasElement:function(i){var l=t.util.createCanvasElement();return l.width=i.width,l.height=i.height,l.getContext("2d").drawImage(i,0,0),l},toDataURL:function(i,l,p){return i.toDataURL("image/"+l,p)},createImage:function(){return t.document.createElement("img")},multiplyTransformMatrices:function(i,l,p){return[i[0]*l[0]+i[2]*l[1],i[1]*l[0]+i[3]*l[1],i[0]*l[2]+i[2]*l[3],i[1]*l[2]+i[3]*l[3],p?0:i[0]*l[4]+i[2]*l[5]+i[4],p?0:i[1]*l[4]+i[3]*l[5]+i[5]]},qrDecompose:function(i){var l=f(i[1],i[0]),p=h(i[0],2)+h(i[1],2),c=n(p),g=(i[0]*i[3]-i[2]*i[1])/c,m=f(i[0]*i[2]+i[1]*i[3],p);return{angle:l/a,scaleX:c,scaleY:g,skewX:m/a,skewY:0,translateX:i[4],translateY:i[5]}},calcRotateMatrix:function(i){if(!i.angle)return t.iMatrix.concat();var l=t.util.degreesToRadians(i.angle),p=t.util.cos(l),c=t.util.sin(l);return[p,c,-c,p,0,0]},calcDimensionsMatrix:function(i){var l=typeof i.scaleX>"u"?1:i.scaleX,p=typeof i.scaleY>"u"?1:i.scaleY,c=[i.flipX?-l:l,0,0,i.flipY?-p:p,0,0],g=t.util.multiplyTransformMatrices,m=t.util.degreesToRadians;return i.skewX&&(c=g(c,[1,0,Math.tan(m(i.skewX)),1],!0)),i.skewY&&(c=g(c,[1,Math.tan(m(i.skewY)),0,1],!0)),c},composeMatrix:function(i){var l=[1,0,0,1,i.translateX||0,i.translateY||0],p=t.util.multiplyTransformMatrices;return i.angle&&(l=p(l,t.util.calcRotateMatrix(i))),(i.scaleX!==1||i.scaleY!==1||i.skewX||i.skewY||i.flipX||i.flipY)&&(l=p(l,t.util.calcDimensionsMatrix(i))),l},resetObjectTransform:function(i){i.scaleX=1,i.scaleY=1,i.skewX=0,i.skewY=0,i.flipX=!1,i.flipY=!1,i.rotate(0)},saveObjectTransform:function(i){return{scaleX:i.scaleX,scaleY:i.scaleY,skewX:i.skewX,skewY:i.skewY,angle:i.angle,left:i.left,flipX:i.flipX,flipY:i.flipY,top:i.top}},isTransparent:function(i,l,p,c){c>0&&(l>c?l-=c:l=0,p>c?p-=c:p=0);var g=!0,m,C,S=i.getImageData(l,p,c*2||1,c*2||1),x=S.data.length;for(m=3;m<x&&(C=S.data[m],g=C<=0,g!==!1);m+=4);return S=null,g},parsePreserveAspectRatioAttribute:function(i){var l="meet",p="Mid",c="Mid",g=i.split(" "),m;return g&&g.length&&(l=g.pop(),l!=="meet"&&l!=="slice"?(m=l,l="meet"):g.length&&(m=g.pop())),p=m!=="none"?m.slice(1,4):"none",c=m!=="none"?m.slice(5,8):"none",{meetOrSlice:l,alignX:p,alignY:c}},clearFabricFontCache:function(i){i=(i||"").toLowerCase(),i?t.charWidthsCache[i]&&delete t.charWidthsCache[i]:t.charWidthsCache={}},limitDimsByArea:function(i,l){var p=Math.sqrt(l*i),c=Math.floor(l/p);return{x:Math.floor(p),y:c}},capValue:function(i,l,p){return Math.max(i,Math.min(l,p))},findScaleToFit:function(i,l){return Math.min(l.width/i.width,l.height/i.height)},findScaleToCover:function(i,l){return Math.max(l.width/i.width,l.height/i.height)},matrixToSVG:function(i){return"matrix("+i.map(function(l){return t.util.toFixed(l,t.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(i,l){var p=t.util.invertTransform(l),c=t.util.multiplyTransformMatrices(p,i.calcOwnMatrix());t.util.applyTransformToObject(i,c)},addTransformToObject:function(i,l){t.util.applyTransformToObject(i,t.util.multiplyTransformMatrices(l,i.calcOwnMatrix()))},applyTransformToObject:function(i,l){var p=t.util.qrDecompose(l),c=new t.Point(p.translateX,p.translateY);i.flipX=!1,i.flipY=!1,i.set("scaleX",p.scaleX),i.set("scaleY",p.scaleY),i.skewX=p.skewX,i.skewY=p.skewY,i.angle=p.angle,i.setPositionByOrigin(c,"center","center")},sizeAfterTransform:function(i,l,p){var c=i/2,g=l/2,m=[{x:-c,y:-g},{x:c,y:-g},{x:-c,y:g},{x:c,y:g}],C=t.util.calcDimensionsMatrix(p),S=t.util.makeBoundingBoxFromPoints(m,C);return{x:S.width,y:S.height}},mergeClipPaths:function(i,l){var p=i,c=l;p.inverted&&!c.inverted&&(p=l,c=i),t.util.applyTransformToObject(c,t.util.multiplyTransformMatrices(t.util.invertTransform(p.calcTransformMatrix()),c.calcTransformMatrix()));var g=p.inverted&&c.inverted;return g&&(p.inverted=c.inverted=!1),new t.Group([p],{clipPath:c,inverted:g})},hasStyleChanged:function(i,l,p){return p=p||!1,i.fill!==l.fill||i.stroke!==l.stroke||i.strokeWidth!==l.strokeWidth||i.fontSize!==l.fontSize||i.fontFamily!==l.fontFamily||i.fontWeight!==l.fontWeight||i.fontStyle!==l.fontStyle||i.textBackgroundColor!==l.textBackgroundColor||i.deltaY!==l.deltaY||p&&(i.overline!==l.overline||i.underline!==l.underline||i.linethrough!==l.linethrough)},stylesToArray:function(p,l){for(var p=t.util.object.clone(p,!0),c=l.split(`
`),g=-1,m={},C=[],S=0;S<c.length;S++){if(!p[S]){g+=c[S].length;continue}for(var x=0;x<c[S].length;x++){g++;var w=p[S][x];if(w&&Object.keys(w).length>0){var _=t.util.hasStyleChanged(m,w,!0);_?C.push({start:g,end:g+1,style:w}):C[C.length-1].end++}m=w||{}}}return C},stylesFromArray:function(i,l){if(!Array.isArray(i))return i;for(var p=l.split(`
`),c=-1,g=0,m={},C=0;C<p.length;C++)for(var S=0;S<p[C].length;S++)c++,i[g]&&i[g].start<=c&&c<i[g].end&&(m[C]=m[C]||{},m[C][S]=Object.assign({},i[g].style),c===i[g].end-1&&g++);return m}}}(e),function(){var u=Array.prototype.join,n={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},f={m:"l",M:"L"};function h(b,O,k,D,B,P,T,A,F,H,N){var Y=t.util.cos(b),K=t.util.sin(b),ne=t.util.cos(O),j=t.util.sin(O),L=k*B*ne-D*P*j+T,G=D*B*ne+k*P*j+A,V=H+F*(-k*B*K-D*P*Y),W=N+F*(-D*B*K+k*P*Y),$=L+F*(k*B*j+D*P*ne),te=G+F*(D*B*j-k*P*ne);return["C",V,W,$,te,L,G]}function a(b,O,k,D,B,P,T){var A=Math.PI,F=T*A/180,H=t.util.sin(F),N=t.util.cos(F),Y=0,K=0;k=Math.abs(k),D=Math.abs(D);var ne=-N*b*.5-H*O*.5,j=-N*O*.5+H*b*.5,L=k*k,G=D*D,V=j*j,W=ne*ne,$=L*G-L*V-G*W,te=0;if($<0){var he=Math.sqrt(1-$/(L*G));k*=he,D*=he}else te=(B===P?-1:1)*Math.sqrt($/(L*V+G*W));var le=te*k*j/D,X=-te*D*ne/k,ce=N*le-H*X+b*.5,de=H*le+N*X+O*.5,ve=o(1,0,(ne-le)/k,(j-X)/D),Ee=o((ne-le)/k,(j-X)/D,(-ne-le)/k,(-j-X)/D);P===0&&Ee>0?Ee-=2*A:P===1&&Ee<0&&(Ee+=2*A);for(var Ce=Math.ceil(Math.abs(Ee/A*2)),Qe=[],Me=Ee/Ce,Or=8/3*Math.sin(Me/4)*Math.sin(Me/4)/Math.sin(Me/2),In=ve+Me,Nt=0;Nt<Ce;Nt++)Qe[Nt]=h(ve,In,N,H,k,D,ce,de,Or,Y,K),Y=Qe[Nt][5],K=Qe[Nt][6],ve=In,In+=Me;return Qe}function o(b,O,k,D){var B=Math.atan2(O,b),P=Math.atan2(D,k);return P>=B?P-B:2*Math.PI-(B-P)}function i(b,O,k,D,B,P,T,A){var F;if(t.cachesBoundsOfCurve&&(F=u.call(arguments),t.boundsOfCurveCache[F]))return t.boundsOfCurveCache[F];var H=Math.sqrt,N=Math.min,Y=Math.max,K=Math.abs,ne=[],j=[[],[]],L,G,V,W,$,te,he,le;G=6*b-12*k+6*B,L=-3*b+9*k-9*B+3*T,V=3*k-3*b;for(var X=0;X<2;++X){if(X>0&&(G=6*O-12*D+6*P,L=-3*O+9*D-9*P+3*A,V=3*D-3*O),K(L)<1e-12){if(K(G)<1e-12)continue;W=-V/G,0<W&&W<1&&ne.push(W);continue}he=G*G-4*V*L,!(he<0)&&(le=H(he),$=(-G+le)/(2*L),0<$&&$<1&&ne.push($),te=(-G-le)/(2*L),0<te&&te<1&&ne.push(te))}for(var ce,de,ve=ne.length,Ee=ve,Ce;ve--;)W=ne[ve],Ce=1-W,ce=Ce*Ce*Ce*b+3*Ce*Ce*W*k+3*Ce*W*W*B+W*W*W*T,j[0][ve]=ce,de=Ce*Ce*Ce*O+3*Ce*Ce*W*D+3*Ce*W*W*P+W*W*W*A,j[1][ve]=de;j[0][Ee]=b,j[1][Ee]=O,j[0][Ee+1]=T,j[1][Ee+1]=A;var Qe=[{x:N.apply(null,j[0]),y:N.apply(null,j[1])},{x:Y.apply(null,j[0]),y:Y.apply(null,j[1])}];return t.cachesBoundsOfCurve&&(t.boundsOfCurveCache[F]=Qe),Qe}function l(b,O,k){for(var D=k[1],B=k[2],P=k[3],T=k[4],A=k[5],F=k[6],H=k[7],N=a(F-b,H-O,D,B,T,A,P),Y=0,K=N.length;Y<K;Y++)N[Y][1]+=b,N[Y][2]+=O,N[Y][3]+=b,N[Y][4]+=O,N[Y][5]+=b,N[Y][6]+=O;return N}function p(b){var O=0,k=0,D=b.length,B=0,P=0,T,A,F,H=[],N,Y,K;for(A=0;A<D;++A){switch(F=!1,T=b[A].slice(0),T[0]){case"l":T[0]="L",T[1]+=O,T[2]+=k;case"L":O=T[1],k=T[2];break;case"h":T[1]+=O;case"H":T[0]="L",T[2]=k,O=T[1];break;case"v":T[1]+=k;case"V":T[0]="L",k=T[1],T[1]=O,T[2]=k;break;case"m":T[0]="M",T[1]+=O,T[2]+=k;case"M":O=T[1],k=T[2],B=T[1],P=T[2];break;case"c":T[0]="C",T[1]+=O,T[2]+=k,T[3]+=O,T[4]+=k,T[5]+=O,T[6]+=k;case"C":Y=T[3],K=T[4],O=T[5],k=T[6];break;case"s":T[0]="S",T[1]+=O,T[2]+=k,T[3]+=O,T[4]+=k;case"S":N==="C"?(Y=2*O-Y,K=2*k-K):(Y=O,K=k),O=T[3],k=T[4],T[0]="C",T[5]=T[3],T[6]=T[4],T[3]=T[1],T[4]=T[2],T[1]=Y,T[2]=K,Y=T[3],K=T[4];break;case"q":T[0]="Q",T[1]+=O,T[2]+=k,T[3]+=O,T[4]+=k;case"Q":Y=T[1],K=T[2],O=T[3],k=T[4];break;case"t":T[0]="T",T[1]+=O,T[2]+=k;case"T":N==="Q"?(Y=2*O-Y,K=2*k-K):(Y=O,K=k),T[0]="Q",O=T[1],k=T[2],T[1]=Y,T[2]=K,T[3]=O,T[4]=k;break;case"a":T[0]="A",T[6]+=O,T[7]+=k;case"A":F=!0,H=H.concat(l(O,k,T)),O=T[6],k=T[7];break;case"z":case"Z":O=B,k=P;break}F||H.push(T),N=T[0]}return H}function c(b,O,k,D){return Math.sqrt((k-b)*(k-b)+(D-O)*(D-O))}function g(b){return b*b*b}function m(b){return 3*b*b*(1-b)}function C(b){return 3*b*(1-b)*(1-b)}function S(b){return(1-b)*(1-b)*(1-b)}function x(b,O,k,D,B,P,T,A){return function(F){var H=g(F),N=m(F),Y=C(F),K=S(F);return{x:T*H+B*N+k*Y+b*K,y:A*H+P*N+D*Y+O*K}}}function w(b,O,k,D,B,P,T,A){return function(F){var H=1-F,N=3*H*H*(k-b)+6*H*F*(B-k)+3*F*F*(T-B),Y=3*H*H*(D-O)+6*H*F*(P-D)+3*F*F*(A-P);return Math.atan2(Y,N)}}function _(b){return b*b}function E(b){return 2*b*(1-b)}function I(b){return(1-b)*(1-b)}function M(b,O,k,D,B,P){return function(T){var A=_(T),F=E(T),H=I(T);return{x:B*A+k*F+b*H,y:P*A+D*F+O*H}}}function z(b,O,k,D,B,P){return function(T){var A=1-T,F=2*A*(k-b)+2*T*(B-k),H=2*A*(D-O)+2*T*(P-D);return Math.atan2(H,F)}}function Q(b,O,k){var D={x:O,y:k},B,P=0,T;for(T=1;T<=100;T+=1)B=b(T/100),P+=c(D.x,D.y,B.x,B.y),D=B;return P}function ee(b,O){for(var k=0,D=0,B=b.iterator,P={x:b.x,y:b.y},T,A,F=.01,H=b.angleFinder,N;D<O&&F>1e-4;)T=B(k),N=k,A=c(P.x,P.y,T.x,T.y),A+D>O?(k-=F,F/=2):(P=T,k+=F,D+=A);return T.angle=H(N),T}function q(b){for(var O=0,k=b.length,D,B=0,P=0,T=0,A=0,F=[],H,N,Y,K=0;K<k;K++){switch(D=b[K],N={x:B,y:P,command:D[0]},D[0]){case"M":N.length=0,T=B=D[1],A=P=D[2];break;case"L":N.length=c(B,P,D[1],D[2]),B=D[1],P=D[2];break;case"C":H=x(B,P,D[1],D[2],D[3],D[4],D[5],D[6]),Y=w(B,P,D[1],D[2],D[3],D[4],D[5],D[6]),N.iterator=H,N.angleFinder=Y,N.length=Q(H,B,P),B=D[5],P=D[6];break;case"Q":H=M(B,P,D[1],D[2],D[3],D[4]),Y=z(B,P,D[1],D[2],D[3],D[4]),N.iterator=H,N.angleFinder=Y,N.length=Q(H,B,P),B=D[3],P=D[4];break;case"Z":case"z":N.destX=T,N.destY=A,N.length=c(B,P,T,A),B=T,P=A;break}O+=N.length,F.push(N)}return F.push({length:O,x:B,y:P}),F}function J(b,O,k){k||(k=q(b));for(var D=0;O-k[D].length>0&&D<k.length-2;)O-=k[D].length,D++;var B=k[D],P=O/B.length,T=B.command,A=b[D],F;switch(T){case"M":return{x:B.x,y:B.y,angle:0};case"Z":case"z":return F=new t.Point(B.x,B.y).lerp(new t.Point(B.destX,B.destY),P),F.angle=Math.atan2(B.destY-B.y,B.destX-B.x),F;case"L":return F=new t.Point(B.x,B.y).lerp(new t.Point(A[1],A[2]),P),F.angle=Math.atan2(A[2]-B.y,A[1]-B.x),F;case"C":return ee(B,O);case"Q":return ee(B,O)}}function ie(b){var O=[],k=[],D,B,P=t.rePathCommand,T="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",A="("+T+")"+t.commaWsp,F="([01])"+t.commaWsp+"?",H=A+"?"+A+"?"+A+F+F+A+"?("+T+")",N=new RegExp(H,"g"),Y,K,ne;if(!b||!b.match)return O;ne=b.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);for(var j=0,L,G=ne.length;j<G;j++){D=ne[j],K=D.slice(1).trim(),k.length=0;var V=D.charAt(0);if(L=[V],V.toLowerCase()==="a")for(var W;W=N.exec(K);)for(var $=1;$<W.length;$++)k.push(W[$]);else for(;Y=P.exec(K);)k.push(Y[0]);for(var $=0,te=k.length;$<te;$++)B=parseFloat(k[$]),isNaN(B)||L.push(B);var he=n[V.toLowerCase()],le=f[V]||V;if(L.length-1>he)for(var X=1,ce=L.length;X<ce;X+=he)O.push([V].concat(L.slice(X,X+he))),V=le;else O.push(L)}return O}function se(b,O){var k=[],D,B=new t.Point(b[0].x,b[0].y),P=new t.Point(b[1].x,b[1].y),T=b.length,A=1,F=0,H=T>2;for(O=O||0,H&&(A=b[2].x<P.x?-1:b[2].x===P.x?0:1,F=b[2].y<P.y?-1:b[2].y===P.y?0:1),k.push(["M",B.x-A*O,B.y-F*O]),D=1;D<T;D++){if(!B.eq(P)){var N=B.midPointFrom(P);k.push(["Q",B.x,B.y,N.x,N.y])}B=b[D],D+1<b.length&&(P=b[D+1])}return H&&(A=B.x>b[D-2].x?1:B.x===b[D-2].x?0:-1,F=B.y>b[D-2].y?1:B.y===b[D-2].y?0:-1),k.push(["L",B.x+A*O,B.y+F*O]),k}function U(b,O,k){return k&&(O=t.util.multiplyTransformMatrices(O,[1,0,0,1,-k.x,-k.y])),b.map(function(D){for(var B=D.slice(0),P={},T=1;T<D.length-1;T+=2)P.x=D[T],P.y=D[T+1],P=t.util.transformPoint(P,O),B[T]=P.x,B[T+1]=P.y;return B})}t.util.joinPath=function(b){return b.map(function(O){return O.join(" ")}).join(" ")},t.util.parsePath=ie,t.util.makePathSimpler=p,t.util.getSmoothPathFromPoints=se,t.util.getPathSegmentsInfo=q,t.util.getBoundsOfCurve=i,t.util.getPointOnPath=J,t.util.transformPath=U}(),function(){var u=Array.prototype.slice;function n(i,l){for(var p=u.call(arguments,2),c=[],g=0,m=i.length;g<m;g++)c[g]=p.length?i[g][l].apply(i[g],p):i[g][l].call(i[g]);return c}function f(i,l){return o(i,l,function(p,c){return p>=c})}function h(i,l){return o(i,l,function(p,c){return p<c})}function a(i,l){for(var p=i.length;p--;)i[p]=l;return i}function o(i,l,p){if(!(!i||i.length===0)){var c=i.length-1,g=l?i[c][l]:i[c];if(l)for(;c--;)p(i[c][l],g)&&(g=i[c][l]);else for(;c--;)p(i[c],g)&&(g=i[c]);return g}}t.util.array={fill:a,invoke:n,min:h,max:f}}(),function(){function u(f,h,a){if(a)if(!t.isLikelyNode&&h instanceof Element)f=h;else if(h instanceof Array){f=[];for(var o=0,i=h.length;o<i;o++)f[o]=u({},h[o],a)}else if(h&&typeof h=="object")for(var l in h)l==="canvas"||l==="group"?f[l]=null:h.hasOwnProperty(l)&&(f[l]=u({},h[l],a));else f=h;else for(var l in h)f[l]=h[l];return f}function n(f,h){return u({},f,h)}t.util.object={extend:u,clone:n},t.util.object.extend(t.util,t.Observable)}(),function(){function u(o){return o.replace(/-+(.)?/g,function(i,l){return l?l.toUpperCase():""})}function n(o,i){return o.charAt(0).toUpperCase()+(i?o.slice(1):o.slice(1).toLowerCase())}function f(o){return o.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function h(o){var i=0,l,p=[];for(i=0,l;i<o.length;i++)(l=a(o,i))!==!1&&p.push(l);return p}function a(o,i){var l=o.charCodeAt(i);if(isNaN(l))return"";if(l<55296||l>57343)return o.charAt(i);if(55296<=l&&l<=56319){if(o.length<=i+1)throw"High surrogate without following low surrogate";var p=o.charCodeAt(i+1);if(56320>p||p>57343)throw"High surrogate without following low surrogate";return o.charAt(i)+o.charAt(i+1)}if(i===0)throw"Low surrogate without preceding high surrogate";var c=o.charCodeAt(i-1);if(55296>c||c>56319)throw"Low surrogate without preceding high surrogate";return!1}t.util.string={camelize:u,capitalize:n,escapeXml:f,graphemeSplit:h}}(),function(){var u=Array.prototype.slice,n=function(){},f=function(){for(var l in{toString:1})if(l==="toString")return!1;return!0}(),h=function(l,p,c){for(var g in p)g in l.prototype&&typeof l.prototype[g]=="function"&&(p[g]+"").indexOf("callSuper")>-1?l.prototype[g]=function(m){return function(){var C=this.constructor.superclass;this.constructor.superclass=c;var S=p[m].apply(this,arguments);if(this.constructor.superclass=C,m!=="initialize")return S}}(g):l.prototype[g]=p[g],f&&(p.toString!==Object.prototype.toString&&(l.prototype.toString=p.toString),p.valueOf!==Object.prototype.valueOf&&(l.prototype.valueOf=p.valueOf))};function a(){}function o(l){for(var p=null,c=this;c.constructor.superclass;){var g=c.constructor.superclass.prototype[l];if(c[l]!==g){p=g;break}c=c.constructor.superclass.prototype}return p?arguments.length>1?p.apply(this,u.call(arguments,1)):p.call(this):console.log("tried to callSuper "+l+", method not found in prototype chain",this)}function i(){var l=null,p=u.call(arguments,0);typeof p[0]=="function"&&(l=p.shift());function c(){this.initialize.apply(this,arguments)}c.superclass=l,c.subclasses=[],l&&(a.prototype=l.prototype,c.prototype=new a,l.subclasses.push(c));for(var g=0,m=p.length;g<m;g++)h(c,p[g],l);return c.prototype.initialize||(c.prototype.initialize=n),c.prototype.constructor=c,c.prototype.callSuper=o,c}t.util.createClass=i}(),function(){var u=!!t.document.createElement("div").attachEvent,n=["touchstart","touchmove","touchend"];t.util.addListener=function(h,a,o,i){h&&h.addEventListener(a,o,u?!1:i)},t.util.removeListener=function(h,a,o,i){h&&h.removeEventListener(a,o,u?!1:i)};function f(h){var a=h.changedTouches;return a&&a[0]?a[0]:h}t.util.getPointer=function(h){var a=h.target,o=t.util.getScrollLeftTop(a),i=f(h);return{x:i.clientX+o.left,y:i.clientY+o.top}},t.util.isTouchEvent=function(h){return n.indexOf(h.type)>-1||h.pointerType==="touch"}}(),function(){function u(i,l){var p=i.style;if(!p)return i;if(typeof l=="string")return i.style.cssText+=";"+l,l.indexOf("opacity")>-1?o(i,l.match(/opacity:\s*(\d?\.?\d*)/)[1]):i;for(var c in l)if(c==="opacity")o(i,l[c]);else{var g=c==="float"||c==="cssFloat"?typeof p.styleFloat>"u"?"cssFloat":"styleFloat":c;p.setProperty(g,l[c])}return i}var n=t.document.createElement("div"),f=typeof n.style.opacity=="string",h=typeof n.style.filter=="string",a=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,o=function(i){return i};f?o=function(i,l){return i.style.opacity=l,i}:h&&(o=function(i,l){var p=i.style;return i.currentStyle&&!i.currentStyle.hasLayout&&(p.zoom=1),a.test(p.filter)?(l=l>=.9999?"":"alpha(opacity="+l*100+")",p.filter=p.filter.replace(a,l)):p.filter+=" alpha(opacity="+l*100+")",i}),t.util.setStyle=u}(),function(){var u=Array.prototype.slice;function n(S){return typeof S=="string"?t.document.getElementById(S):S}var f,h=function(S){return u.call(S,0)};try{f=h(t.document.childNodes)instanceof Array}catch{}f||(h=function(S){for(var x=new Array(S.length),w=S.length;w--;)x[w]=S[w];return x});function a(S,x){var w=t.document.createElement(S);for(var _ in x)_==="class"?w.className=x[_]:_==="for"?w.htmlFor=x[_]:w.setAttribute(_,x[_]);return w}function o(S,x){S&&(" "+S.className+" ").indexOf(" "+x+" ")===-1&&(S.className+=(S.className?" ":"")+x)}function i(S,x,w){return typeof x=="string"&&(x=a(x,w)),S.parentNode&&S.parentNode.replaceChild(x,S),x.appendChild(S),x}function l(S){for(var x=0,w=0,_=t.document.documentElement,E=t.document.body||{scrollLeft:0,scrollTop:0};S&&(S.parentNode||S.host)&&(S=S.parentNode||S.host,S===t.document?(x=E.scrollLeft||_.scrollLeft||0,w=E.scrollTop||_.scrollTop||0):(x+=S.scrollLeft||0,w+=S.scrollTop||0),!(S.nodeType===1&&S.style.position==="fixed")););return{left:x,top:w}}function p(S){var x,w=S&&S.ownerDocument,_={left:0,top:0},E={left:0,top:0},I,M={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!w)return E;for(var z in M)E[M[z]]+=parseInt(c(S,z),10)||0;return x=w.documentElement,typeof S.getBoundingClientRect<"u"&&(_=S.getBoundingClientRect()),I=l(S),{left:_.left+I.left-(x.clientLeft||0)+E.left,top:_.top+I.top-(x.clientTop||0)+E.top}}var c;t.document.defaultView&&t.document.defaultView.getComputedStyle?c=function(S,x){var w=t.document.defaultView.getComputedStyle(S,null);return w?w[x]:void 0}:c=function(S,x){var w=S.style[x];return!w&&S.currentStyle&&(w=S.currentStyle[x]),w},function(){var S=t.document.documentElement.style,x="userSelect"in S?"userSelect":"MozUserSelect"in S?"MozUserSelect":"WebkitUserSelect"in S?"WebkitUserSelect":"KhtmlUserSelect"in S?"KhtmlUserSelect":"";function w(E){return typeof E.onselectstart<"u"&&(E.onselectstart=t.util.falseFunction),x?E.style[x]="none":typeof E.unselectable=="string"&&(E.unselectable="on"),E}function _(E){return typeof E.onselectstart<"u"&&(E.onselectstart=null),x?E.style[x]="":typeof E.unselectable=="string"&&(E.unselectable=""),E}t.util.makeElementUnselectable=w,t.util.makeElementSelectable=_}();function g(S){var x=t.jsdomImplForWrapper(S);return x._canvas||x._image}function m(S){if(t.isLikelyNode){var x=t.jsdomImplForWrapper(S);x&&(x._image=null,x._canvas=null,x._currentSrc=null,x._attributes=null,x._classList=null)}}function C(S,x){S.imageSmoothingEnabled=S.imageSmoothingEnabled||S.webkitImageSmoothingEnabled||S.mozImageSmoothingEnabled||S.msImageSmoothingEnabled||S.oImageSmoothingEnabled,S.imageSmoothingEnabled=x}t.util.setImageSmoothing=C,t.util.getById=n,t.util.toArray=h,t.util.addClass=o,t.util.makeElement=a,t.util.wrapElement=i,t.util.getScrollLeftTop=l,t.util.getElementOffset=p,t.util.getNodeCanvas=g,t.util.cleanUpJsdomNode=m}(),function(){function u(h,a){return h+(/\?/.test(h)?"&":"?")+a}function n(){}function f(h,a){a||(a={});var o=a.method?a.method.toUpperCase():"GET",i=a.onComplete||function(){},l=new t.window.XMLHttpRequest,p=a.body||a.parameters;return l.onreadystatechange=function(){l.readyState===4&&(i(l),l.onreadystatechange=n)},o==="GET"&&(p=null,typeof a.parameters=="string"&&(h=u(h,a.parameters))),l.open(o,h,!0),(o==="POST"||o==="PUT")&&l.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),l.send(p),l}t.util.request=f}(),t.log=console.log,t.warn=console.warn,function(){var u=t.util.object.extend,n=t.util.object.clone,f=[];t.util.object.extend(f,{cancelAll:function(){var g=this.splice(0);return g.forEach(function(m){m.cancel()}),g},cancelByCanvas:function(g){if(!g)return[];var m=this.filter(function(C){return typeof C.target=="object"&&C.target.canvas===g});return m.forEach(function(C){C.cancel()}),m},cancelByTarget:function(g){var m=this.findAnimationsByTarget(g);return m.forEach(function(C){C.cancel()}),m},findAnimationIndex:function(g){return this.indexOf(this.findAnimation(g))},findAnimation:function(g){return this.find(function(m){return m.cancel===g})},findAnimationsByTarget:function(g){return g?this.filter(function(m){return m.target===g}):[]}});function h(){return!1}function a(g,m,C,S){return-C*Math.cos(g/S*(Math.PI/2))+C+m}function o(g){g||(g={});var m=!1,C,S=function(){var x=t.runningAnimations.indexOf(C);return x>-1&&t.runningAnimations.splice(x,1)[0]};return C=u(n(g),{cancel:function(){return m=!0,S()},currentValue:"startValue"in g?g.startValue:0,completionRate:0,durationRate:0}),t.runningAnimations.push(C),p(function(x){var w=x||+new Date,_=g.duration||500,E=w+_,I,M=g.onChange||h,z=g.abort||h,Q=g.onComplete||h,ee=g.easing||a,q="startValue"in g?g.startValue.length>0:!1,J="startValue"in g?g.startValue:0,ie="endValue"in g?g.endValue:100,se=g.byValue||(q?J.map(function(U,b){return ie[b]-J[b]}):ie-J);g.onStart&&g.onStart(),function U(b){I=b||+new Date;var O=I>E?_:I-w,k=O/_,D=q?J.map(function(P,T){return ee(O,J[T],se[T],_)}):ee(O,J,se,_),B=Math.abs(q?(D[0]-J[0])/se[0]:(D-J)/se);if(C.currentValue=q?D.slice():D,C.completionRate=B,C.durationRate=k,!m){if(z(D,B,k)){S();return}if(I>E){C.currentValue=q?ie.slice():ie,C.completionRate=1,C.durationRate=1,M(q?ie.slice():ie,1,1),Q(ie,1,1),S();return}else M(D,B,k),p(U)}}(w)}),C.cancel}var i=t.window.requestAnimationFrame||t.window.webkitRequestAnimationFrame||t.window.mozRequestAnimationFrame||t.window.oRequestAnimationFrame||t.window.msRequestAnimationFrame||function(g){return t.window.setTimeout(g,1e3/60)},l=t.window.cancelAnimationFrame||t.window.clearTimeout;function p(){return i.apply(t.window,arguments)}function c(){return l.apply(t.window,arguments)}t.util.animate=o,t.util.requestAnimFrame=p,t.util.cancelAnimFrame=c,t.runningAnimations=f}(),function(){function u(f,h,a){var o="rgba("+parseInt(f[0]+a*(h[0]-f[0]),10)+","+parseInt(f[1]+a*(h[1]-f[1]),10)+","+parseInt(f[2]+a*(h[2]-f[2]),10);return o+=","+(f&&h?parseFloat(f[3]+a*(h[3]-f[3])):1),o+=")",o}function n(f,h,a,o){var i=new t.Color(f).getSource(),l=new t.Color(h).getSource(),p=o.onComplete,c=o.onChange;return o=o||{},t.util.animate(t.util.object.extend(o,{duration:a||500,startValue:i,endValue:l,byValue:l,easing:function(g,m,C,S){var x=o.colorEasing?o.colorEasing(g,S):1-Math.cos(g/S*(Math.PI/2));return u(m,C,x)},onComplete:function(g,m,C){if(p)return p(u(l,l,0),m,C)},onChange:function(g,m,C){if(c){if(Array.isArray(g))return c(u(g,g,0),m,C);c(g,m,C)}}}))}t.util.animateColor=n}(),function(){function u(b,O,k,D){return b<Math.abs(O)?(b=O,D=k/4):O===0&&b===0?D=k/(2*Math.PI)*Math.asin(1):D=k/(2*Math.PI)*Math.asin(O/b),{a:b,c:O,p:k,s:D}}function n(b,O,k){return b.a*Math.pow(2,10*(O-=1))*Math.sin((O*k-b.s)*(2*Math.PI)/b.p)}function f(b,O,k,D){return k*((b=b/D-1)*b*b+1)+O}function h(b,O,k,D){return b/=D/2,b<1?k/2*b*b*b+O:k/2*((b-=2)*b*b+2)+O}function a(b,O,k,D){return k*(b/=D)*b*b*b+O}function o(b,O,k,D){return-k*((b=b/D-1)*b*b*b-1)+O}function i(b,O,k,D){return b/=D/2,b<1?k/2*b*b*b*b+O:-k/2*((b-=2)*b*b*b-2)+O}function l(b,O,k,D){return k*(b/=D)*b*b*b*b+O}function p(b,O,k,D){return k*((b=b/D-1)*b*b*b*b+1)+O}function c(b,O,k,D){return b/=D/2,b<1?k/2*b*b*b*b*b+O:k/2*((b-=2)*b*b*b*b+2)+O}function g(b,O,k,D){return-k*Math.cos(b/D*(Math.PI/2))+k+O}function m(b,O,k,D){return k*Math.sin(b/D*(Math.PI/2))+O}function C(b,O,k,D){return-k/2*(Math.cos(Math.PI*b/D)-1)+O}function S(b,O,k,D){return b===0?O:k*Math.pow(2,10*(b/D-1))+O}function x(b,O,k,D){return b===D?O+k:k*(-Math.pow(2,-10*b/D)+1)+O}function w(b,O,k,D){return b===0?O:b===D?O+k:(b/=D/2,b<1?k/2*Math.pow(2,10*(b-1))+O:k/2*(-Math.pow(2,-10*--b)+2)+O)}function _(b,O,k,D){return-k*(Math.sqrt(1-(b/=D)*b)-1)+O}function E(b,O,k,D){return k*Math.sqrt(1-(b=b/D-1)*b)+O}function I(b,O,k,D){return b/=D/2,b<1?-k/2*(Math.sqrt(1-b*b)-1)+O:k/2*(Math.sqrt(1-(b-=2)*b)+1)+O}function M(b,O,k,D){var B=1.70158,P=0,T=k;if(b===0)return O;if(b/=D,b===1)return O+k;P||(P=D*.3);var A=u(T,k,P,B);return-n(A,b,D)+O}function z(b,O,k,D){var B=1.70158,P=0,T=k;if(b===0)return O;if(b/=D,b===1)return O+k;P||(P=D*.3);var A=u(T,k,P,B);return A.a*Math.pow(2,-10*b)*Math.sin((b*D-A.s)*(2*Math.PI)/A.p)+A.c+O}function Q(b,O,k,D){var B=1.70158,P=0,T=k;if(b===0)return O;if(b/=D/2,b===2)return O+k;P||(P=D*(.3*1.5));var A=u(T,k,P,B);return b<1?-.5*n(A,b,D)+O:A.a*Math.pow(2,-10*(b-=1))*Math.sin((b*D-A.s)*(2*Math.PI)/A.p)*.5+A.c+O}function ee(b,O,k,D,B){return B===void 0&&(B=1.70158),k*(b/=D)*b*((B+1)*b-B)+O}function q(b,O,k,D,B){return B===void 0&&(B=1.70158),k*((b=b/D-1)*b*((B+1)*b+B)+1)+O}function J(b,O,k,D,B){return B===void 0&&(B=1.70158),b/=D/2,b<1?k/2*(b*b*(((B*=1.525)+1)*b-B))+O:k/2*((b-=2)*b*(((B*=1.525)+1)*b+B)+2)+O}function ie(b,O,k,D){return k-se(D-b,0,k,D)+O}function se(b,O,k,D){return(b/=D)<1/2.75?k*(7.5625*b*b)+O:b<2/2.75?k*(7.5625*(b-=1.5/2.75)*b+.75)+O:b<2.5/2.75?k*(7.5625*(b-=2.25/2.75)*b+.9375)+O:k*(7.5625*(b-=2.625/2.75)*b+.984375)+O}function U(b,O,k,D){return b<D/2?ie(b*2,0,k,D)*.5+O:se(b*2-D,0,k,D)*.5+k*.5+O}t.util.ease={easeInQuad:function(b,O,k,D){return k*(b/=D)*b+O},easeOutQuad:function(b,O,k,D){return-k*(b/=D)*(b-2)+O},easeInOutQuad:function(b,O,k,D){return b/=D/2,b<1?k/2*b*b+O:-k/2*(--b*(b-2)-1)+O},easeInCubic:function(b,O,k,D){return k*(b/=D)*b*b+O},easeOutCubic:f,easeInOutCubic:h,easeInQuart:a,easeOutQuart:o,easeInOutQuart:i,easeInQuint:l,easeOutQuint:p,easeInOutQuint:c,easeInSine:g,easeOutSine:m,easeInOutSine:C,easeInExpo:S,easeOutExpo:x,easeInOutExpo:w,easeInCirc:_,easeOutCirc:E,easeInOutCirc:I,easeInElastic:M,easeOutElastic:z,easeInOutElastic:Q,easeInBack:ee,easeOutBack:q,easeInOutBack:J,easeInBounce:ie,easeOutBounce:se,easeInOutBounce:U}}(),function(u){var n=u.fabric||(u.fabric={}),f=n.util.object.extend,h=n.util.object.clone,a=n.util.toFixed,o=n.util.parseUnit,i=n.util.multiplyTransformMatrices,l=["path","circle","polygon","polyline","ellipse","rect","line","image","text"],p=["symbol","image","marker","pattern","view","svg"],c=["pattern","defs","symbol","metadata","clipPath","mask","desc"],g=["symbol","g","a","svg","clipPath","defs"],m={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},C={stroke:"strokeOpacity",fill:"fillOpacity"},S="font-size",x="clip-path";n.svgValidTagNamesRegEx=E(l),n.svgViewBoxElementsRegEx=E(p),n.svgInvalidAncestorsRegEx=E(c),n.svgValidParentsRegEx=E(g),n.cssRules={},n.gradientDefs={},n.clipPaths={};function w(P){return P in m?m[P]:P}function _(P,T,A,F){var H=Array.isArray(T),N;if((P==="fill"||P==="stroke")&&T==="none")T="";else{if(P==="strokeUniform")return T==="non-scaling-stroke";if(P==="strokeDashArray")T==="none"?T=null:T=T.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(P==="transformMatrix")A&&A.transformMatrix?T=i(A.transformMatrix,n.parseTransformAttribute(T)):T=n.parseTransformAttribute(T);else if(P==="visible")T=T!=="none"&&T!=="hidden",A&&A.visible===!1&&(T=!1);else if(P==="opacity")T=parseFloat(T),A&&typeof A.opacity<"u"&&(T*=A.opacity);else if(P==="textAnchor")T=T==="start"?"left":T==="end"?"right":"center";else if(P==="charSpacing")N=o(T,F)/F*1e3;else if(P==="paintFirst"){var Y=T.indexOf("fill"),K=T.indexOf("stroke"),T="fill";(Y>-1&&K>-1&&K<Y||Y===-1&&K>-1)&&(T="stroke")}else{if(P==="href"||P==="xlink:href"||P==="font")return T;if(P==="imageSmoothing")return T==="optimizeQuality";N=H?T.map(o):o(T,F)}}return!H&&isNaN(N)?T:N}function E(P){return new RegExp("^("+P.join("|")+")\\b","i")}function I(P){for(var T in C)if(!(typeof P[C[T]]>"u"||P[T]==="")){if(typeof P[T]>"u"){if(!n.Object.prototype[T])continue;P[T]=n.Object.prototype[T]}if(P[T].indexOf("url(")!==0){var A=new n.Color(P[T]);P[T]=A.setAlpha(a(A.getAlpha()*P[C[T]],2)).toRgba()}}return P}function M(P,T){var A,F=[],H,N,Y;for(N=0,Y=T.length;N<Y;N++)A=T[N],H=P.getElementsByTagName(A),F=F.concat(Array.prototype.slice.call(H));return F}n.parseTransformAttribute=function(){function P(X,ce){var de=n.util.cos(ce[0]),ve=n.util.sin(ce[0]),Ee=0,Ce=0;ce.length===3&&(Ee=ce[1],Ce=ce[2]),X[0]=de,X[1]=ve,X[2]=-ve,X[3]=de,X[4]=Ee-(de*Ee-ve*Ce),X[5]=Ce-(ve*Ee+de*Ce)}function T(X,ce){var de=ce[0],ve=ce.length===2?ce[1]:ce[0];X[0]=de,X[3]=ve}function A(X,ce,de){X[de]=Math.tan(n.util.degreesToRadians(ce[0]))}function F(X,ce){X[4]=ce[0],ce.length===2&&(X[5]=ce[1])}var H=n.iMatrix,N=n.reNum,Y=n.commaWsp,K="(?:(skewX)\\s*\\(\\s*("+N+")\\s*\\))",ne="(?:(skewY)\\s*\\(\\s*("+N+")\\s*\\))",j="(?:(rotate)\\s*\\(\\s*("+N+")(?:"+Y+"("+N+")"+Y+"("+N+"))?\\s*\\))",L="(?:(scale)\\s*\\(\\s*("+N+")(?:"+Y+"("+N+"))?\\s*\\))",G="(?:(translate)\\s*\\(\\s*("+N+")(?:"+Y+"("+N+"))?\\s*\\))",V="(?:(matrix)\\s*\\(\\s*("+N+")"+Y+"("+N+")"+Y+"("+N+")"+Y+"("+N+")"+Y+"("+N+")"+Y+"("+N+")\\s*\\))",W="(?:"+V+"|"+G+"|"+L+"|"+j+"|"+K+"|"+ne+")",$="(?:"+W+"(?:"+Y+"*"+W+")*)",te="^\\s*(?:"+$+"?)\\s*$",he=new RegExp(te),le=new RegExp(W,"g");return function(X){var ce=H.concat(),de=[];if(!X||X&&!he.test(X))return ce;X.replace(le,function(Ee){var Ce=new RegExp(W).exec(Ee).filter(function(Or){return!!Or}),Qe=Ce[1],Me=Ce.slice(2).map(parseFloat);switch(Qe){case"translate":F(ce,Me);break;case"rotate":Me[0]=n.util.degreesToRadians(Me[0]),P(ce,Me);break;case"scale":T(ce,Me);break;case"skewX":A(ce,Me,2);break;case"skewY":A(ce,Me,1);break;case"matrix":ce=Me;break}de.push(ce.concat()),ce=H.concat()});for(var ve=de[0];de.length>1;)de.shift(),ve=n.util.multiplyTransformMatrices(ve,de[0]);return ve}}();function z(P,T){var A,F;P.replace(/;\s*$/,"").split(";").forEach(function(H){var N=H.split(":");A=N[0].trim().toLowerCase(),F=N[1].trim(),T[A]=F})}function Q(P,T){var A,F;for(var H in P)typeof P[H]>"u"||(A=H.toLowerCase(),F=P[H],T[A]=F)}function ee(P,T){var A={};for(var F in n.cssRules[T])if(q(P,F.split(" ")))for(var H in n.cssRules[T][F])A[H]=n.cssRules[T][F][H];return A}function q(P,T){var A,F=!0;return A=ie(P,T.pop()),A&&T.length&&(F=J(P,T)),A&&F&&T.length===0}function J(P,T){for(var A,F=!0;P.parentNode&&P.parentNode.nodeType===1&&T.length;)F&&(A=T.pop()),P=P.parentNode,F=ie(P,A);return T.length===0}function ie(P,T){var A=P.nodeName,F=P.getAttribute("class"),H=P.getAttribute("id"),N,Y;if(N=new RegExp("^"+A,"i"),T=T.replace(N,""),H&&T.length&&(N=new RegExp("#"+H+"(?![a-zA-Z\\-]+)","i"),T=T.replace(N,"")),F&&T.length)for(F=F.split(" "),Y=F.length;Y--;)N=new RegExp("\\."+F[Y]+"(?![a-zA-Z\\-]+)","i"),T=T.replace(N,"");return T.length===0}function se(P,T){var A;if(P.getElementById&&(A=P.getElementById(T)),A)return A;var F,H,N,Y=P.getElementsByTagName("*");for(H=0,N=Y.length;H<N;H++)if(F=Y[H],T===F.getAttribute("id"))return F}function U(P){for(var T=M(P,["use","svg:use"]),A=0;T.length&&A<T.length;){var F=T[A],H=F.getAttribute("xlink:href")||F.getAttribute("href");if(H===null)return;var N=H.slice(1),Y=F.getAttribute("x")||0,K=F.getAttribute("y")||0,ne=se(P,N).cloneNode(!0),j=(ne.getAttribute("transform")||"")+" translate("+Y+", "+K+")",L,G=T.length,V,W,$,te,he=n.svgNS;if(O(ne),/^svg$/i.test(ne.nodeName)){var le=ne.ownerDocument.createElementNS(he,"g");for(W=0,$=ne.attributes,te=$.length;W<te;W++)V=$.item(W),le.setAttributeNS(he,V.nodeName,V.nodeValue);for(;ne.firstChild;)le.appendChild(ne.firstChild);ne=le}for(W=0,$=F.attributes,te=$.length;W<te;W++)V=$.item(W),!(V.nodeName==="x"||V.nodeName==="y"||V.nodeName==="xlink:href"||V.nodeName==="href")&&(V.nodeName==="transform"?j=V.nodeValue+" "+j:ne.setAttribute(V.nodeName,V.nodeValue));ne.setAttribute("transform",j),ne.setAttribute("instantiated_by_use","1"),ne.removeAttribute("id"),L=F.parentNode,L.replaceChild(ne,F),T.length===G&&A++}}var b=new RegExp("^\\s*("+n.reNum+"+)\\s*,?\\s*("+n.reNum+"+)\\s*,?\\s*("+n.reNum+"+)\\s*,?\\s*("+n.reNum+"+)\\s*$");function O(P){if(!n.svgViewBoxElementsRegEx.test(P.nodeName))return{};var T=P.getAttribute("viewBox"),A=1,F=1,H=0,N=0,Y,K,ne,j,L=P.getAttribute("width"),G=P.getAttribute("height"),V=P.getAttribute("x")||0,W=P.getAttribute("y")||0,$=P.getAttribute("preserveAspectRatio")||"",te=!T||!(T=T.match(b)),he=!L||!G||L==="100%"||G==="100%",le=te&&he,X={},ce="",de=0,ve=0;if(X.width=0,X.height=0,X.toBeParsed=le,te&&(V||W)&&P.parentNode&&P.parentNode.nodeName!=="#document"&&(ce=" translate("+o(V)+" "+o(W)+") ",ne=(P.getAttribute("transform")||"")+ce,P.setAttribute("transform",ne),P.removeAttribute("x"),P.removeAttribute("y")),le)return X;if(te)return X.width=o(L),X.height=o(G),X;if(H=-parseFloat(T[1]),N=-parseFloat(T[2]),Y=parseFloat(T[3]),K=parseFloat(T[4]),X.minX=H,X.minY=N,X.viewBoxWidth=Y,X.viewBoxHeight=K,he?(X.width=Y,X.height=K):(X.width=o(L),X.height=o(G),A=X.width/Y,F=X.height/K),$=n.util.parsePreserveAspectRatioAttribute($),$.alignX!=="none"&&($.meetOrSlice==="meet"&&(F=A=A>F?F:A),$.meetOrSlice==="slice"&&(F=A=A>F?A:F),de=X.width-Y*A,ve=X.height-K*A,$.alignX==="Mid"&&(de/=2),$.alignY==="Mid"&&(ve/=2),$.alignX==="Min"&&(de=0),$.alignY==="Min"&&(ve=0)),A===1&&F===1&&H===0&&N===0&&V===0&&W===0)return X;if((V||W)&&P.parentNode.nodeName!=="#document"&&(ce=" translate("+o(V)+" "+o(W)+") "),ne=ce+" matrix("+A+" 0 0 "+F+" "+(H*A+de)+" "+(N*F+ve)+") ",P.nodeName==="svg"){for(j=P.ownerDocument.createElementNS(n.svgNS,"g");P.firstChild;)j.appendChild(P.firstChild);P.appendChild(j)}else j=P,j.removeAttribute("x"),j.removeAttribute("y"),ne=j.getAttribute("transform")+ne;return j.setAttribute("transform",ne),X}function k(P,T){for(;P&&(P=P.parentNode);)if(P.nodeName&&T.test(P.nodeName.replace("svg:",""))&&!P.getAttribute("instantiated_by_use"))return!0;return!1}n.parseSVGDocument=function(P,T,A,F){if(P){U(P);var H=n.Object.__uid++,N,Y,K=O(P),ne=n.util.toArray(P.getElementsByTagName("*"));if(K.crossOrigin=F&&F.crossOrigin,K.svgUid=H,ne.length===0&&n.isLikelyNode){ne=P.selectNodes('//*[name(.)!="svg"]');var j=[];for(N=0,Y=ne.length;N<Y;N++)j[N]=ne[N];ne=j}var L=ne.filter(function(V){return O(V),n.svgValidTagNamesRegEx.test(V.nodeName.replace("svg:",""))&&!k(V,n.svgInvalidAncestorsRegEx)});if(!L||L&&!L.length){T&&T([],{});return}var G={};ne.filter(function(V){return V.nodeName.replace("svg:","")==="clipPath"}).forEach(function(V){var W=V.getAttribute("id");G[W]=n.util.toArray(V.getElementsByTagName("*")).filter(function($){return n.svgValidTagNamesRegEx.test($.nodeName.replace("svg:",""))})}),n.gradientDefs[H]=n.getGradientDefs(P),n.cssRules[H]=n.getCSSRules(P),n.clipPaths[H]=G,n.parseElements(L,function(V,W){T&&(T(V,K,W,ne),delete n.gradientDefs[H],delete n.cssRules[H],delete n.clipPaths[H])},h(K),A,F)}};function D(P,T){var A=["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"],F="xlink:href",H=T.getAttribute(F).slice(1),N=se(P,H);if(N&&N.getAttribute(F)&&D(P,N),A.forEach(function(K){N&&!T.hasAttribute(K)&&N.hasAttribute(K)&&T.setAttribute(K,N.getAttribute(K))}),!T.children.length)for(var Y=N.cloneNode(!0);Y.firstChild;)T.appendChild(Y.firstChild);T.removeAttribute(F)}var B=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+n.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+n.reNum+"))?\\s+(.*)");f(n,{parseFontDeclaration:function(P,T){var A=P.match(B);if(A){var F=A[1],H=A[3],N=A[4],Y=A[5],K=A[6];F&&(T.fontStyle=F),H&&(T.fontWeight=isNaN(parseFloat(H))?H:parseFloat(H)),N&&(T.fontSize=o(N)),K&&(T.fontFamily=K),Y&&(T.lineHeight=Y==="normal"?1:Y)}},getGradientDefs:function(P){var T=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"],A=M(P,T),F,H=0,N={};for(H=A.length;H--;)F=A[H],F.getAttribute("xlink:href")&&D(P,F),N[F.getAttribute("id")]=F;return N},parseAttributes:function(P,T,A){if(P){var F,H={},N,Y;typeof A>"u"&&(A=P.getAttribute("svgUid")),P.parentNode&&n.svgValidParentsRegEx.test(P.parentNode.nodeName)&&(H=n.parseAttributes(P.parentNode,T,A));var K=T.reduce(function($,te){return F=P.getAttribute(te),F&&($[te]=F),$},{}),ne=f(ee(P,A),n.parseStyleAttribute(P));K=f(K,ne),ne[x]&&P.setAttribute(x,ne[x]),N=Y=H.fontSize||n.Text.DEFAULT_SVG_FONT_SIZE,K[S]&&(K[S]=N=o(K[S],Y));var j,L,G={};for(var V in K)j=w(V),L=_(j,K[V],H,N),G[j]=L;G&&G.font&&n.parseFontDeclaration(G.font,G);var W=f(H,G);return n.svgValidParentsRegEx.test(P.nodeName)?W:I(W)}},parseElements:function(P,T,A,F,H){new n.ElementsParser(P,T,A,F,H).parse()},parseStyleAttribute:function(P){var T={},A=P.getAttribute("style");return A&&(typeof A=="string"?z(A,T):Q(A,T)),T},parsePointsAttribute:function(P){if(!P)return null;P=P.replace(/,/g," ").trim(),P=P.split(/\s+/);var T=[],A,F;for(A=0,F=P.length;A<F;A+=2)T.push({x:parseFloat(P[A]),y:parseFloat(P[A+1])});return T},getCSSRules:function(P){var T=P.getElementsByTagName("style"),A,F,H={},N;for(A=0,F=T.length;A<F;A++){var Y=T[A].textContent;Y=Y.replace(/\/\*[\s\S]*?\*\//g,""),Y.trim()!==""&&(N=Y.split("}"),N=N.filter(function(K){return K.trim()}),N.forEach(function(K){var ne=K.split("{"),j={},L=ne[1].trim(),G=L.split(";").filter(function(te){return te.trim()});for(A=0,F=G.length;A<F;A++){var V=G[A].split(":"),W=V[0].trim(),$=V[1].trim();j[W]=$}K=ne[0].trim(),K.split(",").forEach(function(te){te=te.replace(/^svg/i,"").trim(),te!==""&&(H[te]?n.util.object.extend(H[te],j):H[te]=n.util.object.clone(j))})}))}return H},loadSVGFromURL:function(P,T,A,F){P=P.replace(/^\n\s*/,"").trim(),new n.util.request(P,{method:"get",onComplete:H});function H(N){var Y=N.responseXML;if(!Y||!Y.documentElement)return T&&T(null),!1;n.parseSVGDocument(Y.documentElement,function(K,ne,j,L){T&&T(K,ne,j,L)},A,F)}},loadSVGFromString:function(P,T,A,F){var H=new n.window.DOMParser,N=H.parseFromString(P.trim(),"text/xml");n.parseSVGDocument(N.documentElement,function(Y,K,ne,j){T(Y,K,ne,j)},A,F)}})}(e),t.ElementsParser=function(u,n,f,h,a,o){this.elements=u,this.callback=n,this.options=f,this.reviver=h,this.svgUid=f&&f.svgUid||0,this.parsingOptions=a,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=o},function(u){u.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},u.createObjects=function(){var n=this;this.elements.forEach(function(f,h){f.setAttribute("svgUid",n.svgUid),n.createObject(f,h)})},u.findTag=function(n){return t[t.util.string.capitalize(n.tagName.replace("svg:",""))]},u.createObject=function(n,f){var h=this.findTag(n);if(h&&h.fromElement)try{h.fromElement(n,this.createCallback(f,n),this.options)}catch(a){t.log(a)}else this.checkIfDone()},u.createCallback=function(n,f){var h=this;return function(a){var o;h.resolveGradient(a,f,"fill"),h.resolveGradient(a,f,"stroke"),a instanceof t.Image&&a._originalElement&&(o=a.parsePreserveAspectRatioAttribute(f)),a._removeTransformMatrix(o),h.resolveClipPath(a,f),h.reviver&&h.reviver(f,a),h.instances[n]=a,h.checkIfDone()}},u.extractPropertyDefinition=function(n,f,h){var a=n[f],o=this.regexUrl;if(o.test(a)){o.lastIndex=0;var i=o.exec(a)[1];return o.lastIndex=0,t[h][this.svgUid][i]}},u.resolveGradient=function(n,f,h){var a=this.extractPropertyDefinition(n,h,"gradientDefs");if(a){var o=f.getAttribute(h+"-opacity"),i=t.Gradient.fromElement(a,n,o,this.options);n.set(h,i)}},u.createClipPathCallback=function(n,f){return function(h){h._removeTransformMatrix(),h.fillRule=h.clipRule,f.push(h)}},u.resolveClipPath=function(n,f){var h=this.extractPropertyDefinition(n,"clipPath","clipPaths"),a,o,i,l,p,c;if(h){l=[],i=t.util.invertTransform(n.calcTransformMatrix());for(var g=h[0].parentNode,m=f;m.parentNode&&m.getAttribute("clip-path")!==n.clipPath;)m=m.parentNode;m.parentNode.appendChild(g);for(var C=0;C<h.length;C++)a=h[C],o=this.findTag(a),o.fromElement(a,this.createClipPathCallback(n,l),this.options);l.length===1?h=l[0]:h=new t.Group(l),p=t.util.multiplyTransformMatrices(i,h.calcTransformMatrix()),h.clipPath&&this.resolveClipPath(h,m);var c=t.util.qrDecompose(p);h.flipX=!1,h.flipY=!1,h.set("scaleX",c.scaleX),h.set("scaleY",c.scaleY),h.angle=c.angle,h.skewX=c.skewX,h.skewY=0,h.setPositionByOrigin({x:c.translateX,y:c.translateY},"center","center"),n.clipPath=h}else delete n.clipPath},u.checkIfDone=function(){--this.numElements===0&&(this.instances=this.instances.filter(function(n){return n!=null}),this.callback(this.instances,this.elements))}}(t.ElementsParser.prototype),function(u){var n=u.fabric||(u.fabric={});if(n.Point){n.warn("fabric.Point is already defined");return}n.Point=f;function f(h,a){this.x=h,this.y=a}f.prototype={type:"point",constructor:f,add:function(h){return new f(this.x+h.x,this.y+h.y)},addEquals:function(h){return this.x+=h.x,this.y+=h.y,this},scalarAdd:function(h){return new f(this.x+h,this.y+h)},scalarAddEquals:function(h){return this.x+=h,this.y+=h,this},subtract:function(h){return new f(this.x-h.x,this.y-h.y)},subtractEquals:function(h){return this.x-=h.x,this.y-=h.y,this},scalarSubtract:function(h){return new f(this.x-h,this.y-h)},scalarSubtractEquals:function(h){return this.x-=h,this.y-=h,this},multiply:function(h){return new f(this.x*h,this.y*h)},multiplyEquals:function(h){return this.x*=h,this.y*=h,this},divide:function(h){return new f(this.x/h,this.y/h)},divideEquals:function(h){return this.x/=h,this.y/=h,this},eq:function(h){return this.x===h.x&&this.y===h.y},lt:function(h){return this.x<h.x&&this.y<h.y},lte:function(h){return this.x<=h.x&&this.y<=h.y},gt:function(h){return this.x>h.x&&this.y>h.y},gte:function(h){return this.x>=h.x&&this.y>=h.y},lerp:function(h,a){return typeof a>"u"&&(a=.5),a=Math.max(Math.min(1,a),0),new f(this.x+(h.x-this.x)*a,this.y+(h.y-this.y)*a)},distanceFrom:function(h){var a=this.x-h.x,o=this.y-h.y;return Math.sqrt(a*a+o*o)},midPointFrom:function(h){return this.lerp(h)},min:function(h){return new f(Math.min(this.x,h.x),Math.min(this.y,h.y))},max:function(h){return new f(Math.max(this.x,h.x),Math.max(this.y,h.y))},toString:function(){return this.x+","+this.y},setXY:function(h,a){return this.x=h,this.y=a,this},setX:function(h){return this.x=h,this},setY:function(h){return this.y=h,this},setFromPoint:function(h){return this.x=h.x,this.y=h.y,this},swap:function(h){var a=this.x,o=this.y;this.x=h.x,this.y=h.y,h.x=a,h.y=o},clone:function(){return new f(this.x,this.y)}}}(e),function(u){var n=u.fabric||(u.fabric={});if(n.Intersection){n.warn("fabric.Intersection is already defined");return}function f(h){this.status=h,this.points=[]}n.Intersection=f,n.Intersection.prototype={constructor:f,appendPoint:function(h){return this.points.push(h),this},appendPoints:function(h){return this.points=this.points.concat(h),this}},n.Intersection.intersectLineLine=function(h,a,o,i){var l,p=(i.x-o.x)*(h.y-o.y)-(i.y-o.y)*(h.x-o.x),c=(a.x-h.x)*(h.y-o.y)-(a.y-h.y)*(h.x-o.x),g=(i.y-o.y)*(a.x-h.x)-(i.x-o.x)*(a.y-h.y);if(g!==0){var m=p/g,C=c/g;0<=m&&m<=1&&0<=C&&C<=1?(l=new f("Intersection"),l.appendPoint(new n.Point(h.x+m*(a.x-h.x),h.y+m*(a.y-h.y)))):l=new f}else p===0||c===0?l=new f("Coincident"):l=new f("Parallel");return l},n.Intersection.intersectLinePolygon=function(h,a,o){var i=new f,l=o.length,p,c,g,m;for(m=0;m<l;m++)p=o[m],c=o[(m+1)%l],g=f.intersectLineLine(h,a,p,c),i.appendPoints(g.points);return i.points.length>0&&(i.status="Intersection"),i},n.Intersection.intersectPolygonPolygon=function(h,a){var o=new f,i=h.length,l;for(l=0;l<i;l++){var p=h[l],c=h[(l+1)%i],g=f.intersectLinePolygon(p,c,a);o.appendPoints(g.points)}return o.points.length>0&&(o.status="Intersection"),o},n.Intersection.intersectPolygonRectangle=function(h,a,o){var i=a.min(o),l=a.max(o),p=new n.Point(l.x,i.y),c=new n.Point(i.x,l.y),g=f.intersectLinePolygon(i,p,h),m=f.intersectLinePolygon(p,l,h),C=f.intersectLinePolygon(l,c,h),S=f.intersectLinePolygon(c,i,h),x=new f;return x.appendPoints(g.points),x.appendPoints(m.points),x.appendPoints(C.points),x.appendPoints(S.points),x.points.length>0&&(x.status="Intersection"),x}}(e),function(u){var n=u.fabric||(u.fabric={});if(n.Color){n.warn("fabric.Color is already defined.");return}function f(a){a?this._tryParsingColor(a):this.setSource([0,0,0,1])}n.Color=f,n.Color.prototype={_tryParsingColor:function(a){var o;a in f.colorNameMap&&(a=f.colorNameMap[a]),a==="transparent"&&(o=[255,255,255,0]),o||(o=f.sourceFromHex(a)),o||(o=f.sourceFromRgb(a)),o||(o=f.sourceFromHsl(a)),o||(o=[0,0,0,1]),o&&this.setSource(o)},_rgbToHsl:function(a,o,i){a/=255,o/=255,i/=255;var l,p,c,g=n.util.array.max([a,o,i]),m=n.util.array.min([a,o,i]);if(c=(g+m)/2,g===m)l=p=0;else{var C=g-m;switch(p=c>.5?C/(2-g-m):C/(g+m),g){case a:l=(o-i)/C+(o<i?6:0);break;case o:l=(i-a)/C+2;break;case i:l=(a-o)/C+4;break}l/=6}return[Math.round(l*360),Math.round(p*100),Math.round(c*100)]},getSource:function(){return this._source},setSource:function(a){this._source=a},toRgb:function(){var a=this.getSource();return"rgb("+a[0]+","+a[1]+","+a[2]+")"},toRgba:function(){var a=this.getSource();return"rgba("+a[0]+","+a[1]+","+a[2]+","+a[3]+")"},toHsl:function(){var a=this.getSource(),o=this._rgbToHsl(a[0],a[1],a[2]);return"hsl("+o[0]+","+o[1]+"%,"+o[2]+"%)"},toHsla:function(){var a=this.getSource(),o=this._rgbToHsl(a[0],a[1],a[2]);return"hsla("+o[0]+","+o[1]+"%,"+o[2]+"%,"+a[3]+")"},toHex:function(){var a=this.getSource(),o,i,l;return o=a[0].toString(16),o=o.length===1?"0"+o:o,i=a[1].toString(16),i=i.length===1?"0"+i:i,l=a[2].toString(16),l=l.length===1?"0"+l:l,o.toUpperCase()+i.toUpperCase()+l.toUpperCase()},toHexa:function(){var a=this.getSource(),o;return o=Math.round(a[3]*255),o=o.toString(16),o=o.length===1?"0"+o:o,this.toHex()+o.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(a){var o=this.getSource();return o[3]=a,this.setSource(o),this},toGrayscale:function(){var a=this.getSource(),o=parseInt((a[0]*.3+a[1]*.59+a[2]*.11).toFixed(0),10),i=a[3];return this.setSource([o,o,o,i]),this},toBlackWhite:function(a){var o=this.getSource(),i=(o[0]*.3+o[1]*.59+o[2]*.11).toFixed(0),l=o[3];return a=a||127,i=Number(i)<Number(a)?0:255,this.setSource([i,i,i,l]),this},overlayWith:function(a){a instanceof f||(a=new f(a));var o=[],i=this.getAlpha(),l=.5,p=this.getSource(),c=a.getSource(),g;for(g=0;g<3;g++)o.push(Math.round(p[g]*(1-l)+c[g]*l));return o[3]=i,this.setSource(o),this}},n.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,n.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,n.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,n.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function h(a,o,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?a+(o-a)*6*i:i<1/2?o:i<2/3?a+(o-a)*(2/3-i)*6:a}n.Color.fromRgb=function(a){return f.fromSource(f.sourceFromRgb(a))},n.Color.sourceFromRgb=function(a){var o=a.match(f.reRGBa);if(o){var i=parseInt(o[1],10)/(/%$/.test(o[1])?100:1)*(/%$/.test(o[1])?255:1),l=parseInt(o[2],10)/(/%$/.test(o[2])?100:1)*(/%$/.test(o[2])?255:1),p=parseInt(o[3],10)/(/%$/.test(o[3])?100:1)*(/%$/.test(o[3])?255:1);return[parseInt(i,10),parseInt(l,10),parseInt(p,10),o[4]?parseFloat(o[4]):1]}},n.Color.fromRgba=f.fromRgb,n.Color.fromHsl=function(a){return f.fromSource(f.sourceFromHsl(a))},n.Color.sourceFromHsl=function(a){var o=a.match(f.reHSLa);if(o){var i=(parseFloat(o[1])%360+360)%360/360,l=parseFloat(o[2])/(/%$/.test(o[2])?100:1),p=parseFloat(o[3])/(/%$/.test(o[3])?100:1),c,g,m;if(l===0)c=g=m=p;else{var C=p<=.5?p*(l+1):p+l-p*l,S=p*2-C;c=h(S,C,i+1/3),g=h(S,C,i),m=h(S,C,i-1/3)}return[Math.round(c*255),Math.round(g*255),Math.round(m*255),o[4]?parseFloat(o[4]):1]}},n.Color.fromHsla=f.fromHsl,n.Color.fromHex=function(a){return f.fromSource(f.sourceFromHex(a))},n.Color.sourceFromHex=function(a){if(a.match(f.reHex)){var o=a.slice(a.indexOf("#")+1),i=o.length===3||o.length===4,l=o.length===8||o.length===4,p=i?o.charAt(0)+o.charAt(0):o.substring(0,2),c=i?o.charAt(1)+o.charAt(1):o.substring(2,4),g=i?o.charAt(2)+o.charAt(2):o.substring(4,6),m=l?i?o.charAt(3)+o.charAt(3):o.substring(6,8):"FF";return[parseInt(p,16),parseInt(c,16),parseInt(g,16),parseFloat((parseInt(m,16)/255).toFixed(2))]}},n.Color.fromSource=function(a){var o=new f;return o.setSource(a),o}}(e),function(u){var n=u.fabric||(u.fabric={}),f=["e","se","s","sw","w","nw","n","ne","e"],h=["ns","nesw","ew","nwse"],a={},o="left",i="top",l="right",p="bottom",c="center",g={top:p,bottom:i,left:l,right:o,center:c},m=n.util.radiansToDegrees,C=Math.sign||function(j){return(j>0)-(j<0)||+j};function S(j,L){var G=j.angle+m(Math.atan2(L.y,L.x))+360;return Math.round(G%360/45)}function x(j,L){var G=L.transform.target,V=G.canvas,W=n.util.object.clone(L);W.target=G,V&&V.fire("object:"+j,W),G.fire(j,L)}function w(j,L){var G=L.canvas,V=G.uniScaleKey,W=j[V];return G.uniformScaling&&!W||!G.uniformScaling&&W}function _(j){return j.originX===c&&j.originY===c}function E(j,L,G){var V=j.lockScalingX,W=j.lockScalingY;return!!(V&&W||!L&&(V||W)&&G||V&&L==="x"||W&&L==="y")}function I(j,L,G){var V="not-allowed",W=w(j,G),$="";if(L.x!==0&&L.y===0?$="x":L.x===0&&L.y!==0&&($="y"),E(G,$,W))return V;var te=S(G,L);return f[te]+"-resize"}function M(j,L,G){var V="not-allowed";if(L.x!==0&&G.lockSkewingY||L.y!==0&&G.lockSkewingX)return V;var W=S(G,L)%4;return h[W]+"-resize"}function z(j,L,G){return j[G.canvas.altActionKey]?a.skewCursorStyleHandler(j,L,G):a.scaleCursorStyleHandler(j,L,G)}function Q(j,L,G){var V=j[G.canvas.altActionKey];if(L.x===0)return V?"skewX":"scaleY";if(L.y===0)return V?"skewY":"scaleX"}function ee(j,L,G){return G.lockRotation?"not-allowed":L.cursorStyle}function q(j,L,G,V){return{e:j,transform:L,pointer:{x:G,y:V}}}function J(j){return function(L,G,V,W){var $=G.target,te=$.getCenterPoint(),he=$.translateToOriginPoint(te,G.originX,G.originY),le=j(L,G,V,W);return $.setPositionByOrigin(he,G.originX,G.originY),le}}function ie(j,L){return function(G,V,W,$){var te=L(G,V,W,$);return te&&x(j,q(G,V,W,$)),te}}function se(j,L,G,V,W){var $=j.target,te=$.controls[j.corner],he=$.canvas.getZoom(),le=$.padding/he,X=$.toLocalPoint(new n.Point(V,W),L,G);return X.x>=le&&(X.x-=le),X.x<=-le&&(X.x+=le),X.y>=le&&(X.y-=le),X.y<=le&&(X.y+=le),X.x-=te.offsetX,X.y-=te.offsetY,X}function U(j){return j.flipX!==j.flipY}function b(j,L,G,V,W){if(j[L]!==0){var $=j._getTransformedDimensions()[V],te=W/$*j[G];j.set(G,te)}}function O(j,L,G,V){var W=L.target,$=W._getTransformedDimensions(0,W.skewY),te=se(L,L.originX,L.originY,G,V),he=Math.abs(te.x*2)-$.x,le=W.skewX,X;he<2?X=0:(X=m(Math.atan2(he/W.scaleX,$.y/W.scaleY)),L.originX===o&&L.originY===p&&(X=-X),L.originX===l&&L.originY===i&&(X=-X),U(W)&&(X=-X));var ce=le!==X;if(ce){var de=W._getTransformedDimensions().y;W.set("skewX",X),b(W,"skewY","scaleY","y",de)}return ce}function k(j,L,G,V){var W=L.target,$=W._getTransformedDimensions(W.skewX,0),te=se(L,L.originX,L.originY,G,V),he=Math.abs(te.y*2)-$.y,le=W.skewY,X;he<2?X=0:(X=m(Math.atan2(he/W.scaleY,$.x/W.scaleX)),L.originX===o&&L.originY===p&&(X=-X),L.originX===l&&L.originY===i&&(X=-X),U(W)&&(X=-X));var ce=le!==X;if(ce){var de=W._getTransformedDimensions().x;W.set("skewY",X),b(W,"skewX","scaleX","x",de)}return ce}function D(j,L,G,V){var W=L.target,$=W.skewX,te,he=L.originY;if(W.lockSkewingX)return!1;if($===0){var le=se(L,c,c,G,V);le.x>0?te=o:te=l}else $>0&&(te=he===i?o:l),$<0&&(te=he===i?l:o),U(W)&&(te=te===o?l:o);L.originX=te;var X=ie("skewing",J(O));return X(j,L,G,V)}function B(j,L,G,V){var W=L.target,$=W.skewY,te,he=L.originX;if(W.lockSkewingY)return!1;if($===0){var le=se(L,c,c,G,V);le.y>0?te=i:te=p}else $>0&&(te=he===o?i:p),$<0&&(te=he===o?p:i),U(W)&&(te=te===i?p:i);L.originY=te;var X=ie("skewing",J(k));return X(j,L,G,V)}function P(j,L,G,V){var W=L,$=W.target,te=$.translateToOriginPoint($.getCenterPoint(),W.originX,W.originY);if($.lockRotation)return!1;var he=Math.atan2(W.ey-te.y,W.ex-te.x),le=Math.atan2(V-te.y,G-te.x),X=m(le-he+W.theta),ce=!0;if($.snapAngle>0){var de=$.snapAngle,ve=$.snapThreshold||de,Ee=Math.ceil(X/de)*de,Ce=Math.floor(X/de)*de;Math.abs(X-Ce)<ve?X=Ce:Math.abs(X-Ee)<ve&&(X=Ee)}return X<0&&(X=360+X),X%=360,ce=$.angle!==X,$.angle=X,ce}function T(j,L,G,V,W){W=W||{};var $=L.target,te=$.lockScalingX,he=$.lockScalingY,le=W.by,X,ce,de,ve,Ee=w(j,$),Ce=E($,le,Ee),Qe,Me,Or=L.gestureScale;if(Ce)return!1;if(Or)ce=L.scaleX*Or,de=L.scaleY*Or;else{if(X=se(L,L.originX,L.originY,G,V),Qe=le!=="y"?C(X.x):1,Me=le!=="x"?C(X.y):1,L.signX||(L.signX=Qe),L.signY||(L.signY=Me),$.lockScalingFlip&&(L.signX!==Qe||L.signY!==Me))return!1;if(ve=$._getTransformedDimensions(),Ee&&!le){var In=Math.abs(X.x)+Math.abs(X.y),Nt=L.original,Vg=Math.abs(ve.x*Nt.scaleX/$.scaleX)+Math.abs(ve.y*Nt.scaleY/$.scaleY),Qu=In/Vg;ce=Nt.scaleX*Qu,de=Nt.scaleY*Qu}else ce=Math.abs(X.x*$.scaleX/ve.x),de=Math.abs(X.y*$.scaleY/ve.y);_(L)&&(ce*=2,de*=2),L.signX!==Qe&&le!=="y"&&(L.originX=g[L.originX],ce*=-1,L.signX=Qe),L.signY!==Me&&le!=="x"&&(L.originY=g[L.originY],de*=-1,L.signY=Me)}var Xg=$.scaleX,Yg=$.scaleY;return le?(le==="x"&&$.set("scaleX",ce),le==="y"&&$.set("scaleY",de)):(!te&&$.set("scaleX",ce),!he&&$.set("scaleY",de)),Xg!==$.scaleX||Yg!==$.scaleY}function A(j,L,G,V){return T(j,L,G,V)}function F(j,L,G,V){return T(j,L,G,V,{by:"x"})}function H(j,L,G,V){return T(j,L,G,V,{by:"y"})}function N(j,L,G,V){return j[L.target.canvas.altActionKey]?a.skewHandlerX(j,L,G,V):a.scalingY(j,L,G,V)}function Y(j,L,G,V){return j[L.target.canvas.altActionKey]?a.skewHandlerY(j,L,G,V):a.scalingX(j,L,G,V)}function K(j,L,G,V){var W=L.target,$=se(L,L.originX,L.originY,G,V),te=W.strokeWidth/(W.strokeUniform?W.scaleX:1),he=_(L)?2:1,le=W.width,X=Math.abs($.x*he/W.scaleX)-te;return W.set("width",Math.max(X,0)),le!==X}function ne(j,L,G,V){var W=L.target,$=G-L.offsetX,te=V-L.offsetY,he=!W.get("lockMovementX")&&W.left!==$,le=!W.get("lockMovementY")&&W.top!==te;return he&&W.set("left",$),le&&W.set("top",te),(he||le)&&x("moving",q(j,L,G,V)),he||le}a.scaleCursorStyleHandler=I,a.skewCursorStyleHandler=M,a.scaleSkewCursorStyleHandler=z,a.rotationWithSnapping=ie("rotating",J(P)),a.scalingEqually=ie("scaling",J(A)),a.scalingX=ie("scaling",J(F)),a.scalingY=ie("scaling",J(H)),a.scalingYOrSkewingX=N,a.scalingXOrSkewingY=Y,a.changeWidth=ie("resizing",J(K)),a.skewHandlerX=D,a.skewHandlerY=B,a.dragHandler=ne,a.scaleOrSkewActionName=Q,a.rotationStyleHandler=ee,a.fireEvent=x,a.wrapWithFixedAnchor=J,a.wrapWithFireEvent=ie,a.getLocalPoint=se,n.controlsUtils=a}(e),function(u){var n=u.fabric||(u.fabric={}),f=n.util.degreesToRadians,h=n.controlsUtils;function a(i,l,p,c,g){c=c||{};var m=this.sizeX||c.cornerSize||g.cornerSize,C=this.sizeY||c.cornerSize||g.cornerSize,S=typeof c.transparentCorners<"u"?c.transparentCorners:g.transparentCorners,x=S?"stroke":"fill",w=!S&&(c.cornerStrokeColor||g.cornerStrokeColor),_=l,E=p,I;i.save(),i.fillStyle=c.cornerColor||g.cornerColor,i.strokeStyle=c.cornerStrokeColor||g.cornerStrokeColor,m>C?(I=m,i.scale(1,C/m),E=p*m/C):C>m?(I=C,i.scale(m/C,1),_=l*C/m):I=m,i.lineWidth=1,i.beginPath(),i.arc(_,E,I/2,0,2*Math.PI,!1),i[x](),w&&i.stroke(),i.restore()}function o(i,l,p,c,g){c=c||{};var m=this.sizeX||c.cornerSize||g.cornerSize,C=this.sizeY||c.cornerSize||g.cornerSize,S=typeof c.transparentCorners<"u"?c.transparentCorners:g.transparentCorners,x=S?"stroke":"fill",w=!S&&(c.cornerStrokeColor||g.cornerStrokeColor),_=m/2,E=C/2;i.save(),i.fillStyle=c.cornerColor||g.cornerColor,i.strokeStyle=c.cornerStrokeColor||g.cornerStrokeColor,i.lineWidth=1,i.translate(l,p),i.rotate(f(g.angle)),i[x+"Rect"](-_,-E,m,C),w&&i.strokeRect(-_,-E,m,C),i.restore()}h.renderCircleControl=a,h.renderSquareControl=o}(e),function(u){var n=u.fabric||(u.fabric={});function f(h){for(var a in h)this[a]=h[a]}n.Control=f,n.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(h,a){return a.cursorStyle},getActionName:function(h,a){return a.actionName},getVisibility:function(h,a){var o=h._controlsVisibility;return o&&typeof o[a]<"u"?o[a]:this.visible},setVisibility:function(h){this.visible=h},positionHandler:function(h,a){var o=n.util.transformPoint({x:this.x*h.x+this.offsetX,y:this.y*h.y+this.offsetY},a);return o},calcCornerCoords:function(h,a,o,i,l){var p,c,g,m,C=l?this.touchSizeX:this.sizeX,S=l?this.touchSizeY:this.sizeY;if(C&&S&&C!==S){var x=Math.atan2(S,C),w=Math.sqrt(C*C+S*S)/2,_=x-n.util.degreesToRadians(h),E=Math.PI/2-x-n.util.degreesToRadians(h);p=w*n.util.cos(_),c=w*n.util.sin(_),g=w*n.util.cos(E),m=w*n.util.sin(E)}else{var I=C&&S?C:a;w=I*.7071067812;var _=n.util.degreesToRadians(45-h);p=g=w*n.util.cos(_),c=m=w*n.util.sin(_)}return{tl:{x:o-m,y:i-g},tr:{x:o+p,y:i-c},bl:{x:o-p,y:i+c},br:{x:o+m,y:i+g}}},render:function(h,a,o,i,l){switch(i=i||{},i.cornerStyle||l.cornerStyle){case"circle":n.controlsUtils.renderCircleControl.call(this,h,a,o,i,l);break;default:n.controlsUtils.renderSquareControl.call(this,h,a,o,i,l)}}}}(e),function(){function u(o,i){var l=o.getAttribute("style"),p=o.getAttribute("offset")||0,c,g,m,C;if(p=parseFloat(p)/(/%$/.test(p)?100:1),p=p<0?0:p>1?1:p,l){var S=l.split(/\s*;\s*/);for(S[S.length-1]===""&&S.pop(),C=S.length;C--;){var x=S[C].split(/\s*:\s*/),w=x[0].trim(),_=x[1].trim();w==="stop-color"?c=_:w==="stop-opacity"&&(m=_)}}return c||(c=o.getAttribute("stop-color")||"rgb(0,0,0)"),m||(m=o.getAttribute("stop-opacity")),c=new t.Color(c),g=c.getAlpha(),m=isNaN(parseFloat(m))?1:parseFloat(m),m*=g*i,{offset:p,color:c.toRgb(),opacity:m}}function n(o){return{x1:o.getAttribute("x1")||0,y1:o.getAttribute("y1")||0,x2:o.getAttribute("x2")||"100%",y2:o.getAttribute("y2")||0}}function f(o){return{x1:o.getAttribute("fx")||o.getAttribute("cx")||"50%",y1:o.getAttribute("fy")||o.getAttribute("cy")||"50%",r1:0,x2:o.getAttribute("cx")||"50%",y2:o.getAttribute("cy")||"50%",r2:o.getAttribute("r")||"50%"}}var h=t.util.object.clone;t.Gradient=t.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(o){o||(o={}),o.coords||(o.coords={});var i,l=this;Object.keys(o).forEach(function(p){l[p]=o[p]}),this.id?this.id+="_"+t.Object.__uid++:this.id=t.Object.__uid++,i={x1:o.coords.x1||0,y1:o.coords.y1||0,x2:o.coords.x2||0,y2:o.coords.y2||0},this.type==="radial"&&(i.r1=o.coords.r1||0,i.r2=o.coords.r2||0),this.coords=i,this.colorStops=o.colorStops.slice()},addColorStop:function(o){for(var i in o){var l=new t.Color(o[i]);this.colorStops.push({offset:parseFloat(i),color:l.toRgb(),opacity:l.getAlpha()})}return this},toObject:function(o){var i={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return t.util.populateWithProperties(this,i,o),i},toSVG:function(o,g){var l=h(this.coords,!0),p,c,g=g||{},m,C,S=h(this.colorStops,!0),x=l.r1>l.r2,w=this.gradientTransform?this.gradientTransform.concat():t.iMatrix.concat(),_=-this.offsetX,E=-this.offsetY,I=!!g.additionalTransform,M=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox";if(S.sort(function(J,ie){return J.offset-ie.offset}),M==="objectBoundingBox"?(_/=o.width,E/=o.height):(_+=o.width/2,E+=o.height/2),o.type==="path"&&this.gradientUnits!=="percentage"&&(_-=o.pathOffset.x,E-=o.pathOffset.y),w[4]-=_,w[5]-=E,C='id="SVGID_'+this.id+'" gradientUnits="'+M+'"',C+=' gradientTransform="'+(I?g.additionalTransform+" ":"")+t.util.matrixToSVG(w)+'" ',this.type==="linear"?m=["<linearGradient ",C,' x1="',l.x1,'" y1="',l.y1,'" x2="',l.x2,'" y2="',l.y2,`">
`]:this.type==="radial"&&(m=["<radialGradient ",C,' cx="',x?l.x1:l.x2,'" cy="',x?l.y1:l.y2,'" r="',x?l.r1:l.r2,'" fx="',x?l.x2:l.x1,'" fy="',x?l.y2:l.y1,`">
`]),this.type==="radial"){if(x)for(S=S.concat(),S.reverse(),p=0,c=S.length;p<c;p++)S[p].offset=1-S[p].offset;var z=Math.min(l.r1,l.r2);if(z>0){var Q=Math.max(l.r1,l.r2),ee=z/Q;for(p=0,c=S.length;p<c;p++)S[p].offset+=ee*(1-S[p].offset)}}for(p=0,c=S.length;p<c;p++){var q=S[p];m.push("<stop ",'offset="',q.offset*100+"%",'" style="stop-color:',q.color,typeof q.opacity<"u"?";stop-opacity: "+q.opacity:";",`"/>
`)}return m.push(this.type==="linear"?`</linearGradient>
`:`</radialGradient>
`),m.join("")},toLive:function(o){var i,l=t.util.object.clone(this.coords),p,c;if(this.type){for(this.type==="linear"?i=o.createLinearGradient(l.x1,l.y1,l.x2,l.y2):this.type==="radial"&&(i=o.createRadialGradient(l.x1,l.y1,l.r1,l.x2,l.y2,l.r2)),p=0,c=this.colorStops.length;p<c;p++){var g=this.colorStops[p].color,m=this.colorStops[p].opacity,C=this.colorStops[p].offset;typeof m<"u"&&(g=new t.Color(g).setAlpha(m).toRgba()),i.addColorStop(C,g)}return i}}}),t.util.object.extend(t.Gradient,{fromElement:function(o,i,l,p){var c=parseFloat(l)/(/%$/.test(l)?100:1);c=c<0?0:c>1?1:c,isNaN(c)&&(c=1);var g=o.getElementsByTagName("stop"),m,C=o.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage",S=o.getAttribute("gradientTransform")||"",x=[],w,_,E=0,I=0,M;for(o.nodeName==="linearGradient"||o.nodeName==="LINEARGRADIENT"?(m="linear",w=n(o)):(m="radial",w=f(o)),_=g.length;_--;)x.push(u(g[_],c));M=t.parseTransformAttribute(S),a(i,w,p,C),C==="pixels"&&(E=-i.left,I=-i.top);var z=new t.Gradient({id:o.getAttribute("id"),type:m,coords:w,colorStops:x,gradientUnits:C,gradientTransform:M,offsetX:E,offsetY:I});return z}});function a(o,i,l,p){var c,g;Object.keys(i).forEach(function(m){c=i[m],c==="Infinity"?g=1:c==="-Infinity"?g=0:(g=parseFloat(i[m],10),typeof c=="string"&&/^(\d+\.\d+)%|(\d+)%$/.test(c)&&(g*=.01,p==="pixels"&&((m==="x1"||m==="x2"||m==="r2")&&(g*=l.viewBoxWidth||l.width),(m==="y1"||m==="y2")&&(g*=l.viewBoxHeight||l.height)))),i[m]=g})}}(),function(){var u=t.util.toFixed;t.Pattern=t.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(n,f){if(n||(n={}),this.id=t.Object.__uid++,this.setOptions(n),!n.source||n.source&&typeof n.source!="string"){f&&f(this);return}else{var h=this;this.source=t.util.createImage(),t.util.loadImage(n.source,function(a,o){h.source=a,f&&f(h,o)},null,this.crossOrigin)}},toObject:function(n){var f=t.Object.NUM_FRACTION_DIGITS,h,a;return typeof this.source.src=="string"?h=this.source.src:typeof this.source=="object"&&this.source.toDataURL&&(h=this.source.toDataURL()),a={type:"pattern",source:h,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:u(this.offsetX,f),offsetY:u(this.offsetY,f),patternTransform:this.patternTransform?this.patternTransform.concat():null},t.util.populateWithProperties(this,a,n),a},toSVG:function(n){var f=typeof this.source=="function"?this.source():this.source,h=f.width/n.width,a=f.height/n.height,o=this.offsetX/n.width,i=this.offsetY/n.height,l="";return(this.repeat==="repeat-x"||this.repeat==="no-repeat")&&(a=1,i&&(a+=Math.abs(i))),(this.repeat==="repeat-y"||this.repeat==="no-repeat")&&(h=1,o&&(h+=Math.abs(o))),f.src?l=f.src:f.toDataURL&&(l=f.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+o+'" y="'+i+'" width="'+h+'" height="'+a+`">
<image x="0" y="0" width="`+f.width+'" height="'+f.height+'" xlink:href="'+l+`"></image>
</pattern>
`},setOptions:function(n){for(var f in n)this[f]=n[f]},toLive:function(n){var f=this.source;return!f||typeof f.src<"u"&&(!f.complete||f.naturalWidth===0||f.naturalHeight===0)?"":n.createPattern(f,this.repeat)}})}(),function(u){var n=u.fabric||(u.fabric={}),f=n.util.toFixed;if(n.Shadow){n.warn("fabric.Shadow is already defined.");return}n.Shadow=n.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(h){typeof h=="string"&&(h=this._parseShadow(h));for(var a in h)this[a]=h[a];this.id=n.Object.__uid++},_parseShadow:function(h){var a=h.trim(),o=n.Shadow.reOffsetsAndBlur.exec(a)||[],i=a.replace(n.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)";return{color:i.trim(),offsetX:parseFloat(o[1],10)||0,offsetY:parseFloat(o[2],10)||0,blur:parseFloat(o[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(h){var a=40,o=40,i=n.Object.NUM_FRACTION_DIGITS,l=n.util.rotateVector({x:this.offsetX,y:this.offsetY},n.util.degreesToRadians(-h.angle)),p=20,c=new n.Color(this.color);return h.width&&h.height&&(a=f((Math.abs(l.x)+this.blur)/h.width,i)*100+p,o=f((Math.abs(l.y)+this.blur)/h.height,i)*100+p),h.flipX&&(l.x*=-1),h.flipY&&(l.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+o+'%" height="'+(100+2*o)+'%" x="-'+a+'%" width="'+(100+2*a)+`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`+f(this.blur?this.blur/2:0,i)+`"></feGaussianBlur>
	<feOffset dx="`+f(l.x,i)+'" dy="'+f(l.y,i)+`" result="oBlur" ></feOffset>
	<feFlood flood-color="`+c.toRgb()+'" flood-opacity="'+c.getAlpha()+`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var h={},a=n.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(o){this[o]!==a[o]&&(h[o]=this[o])},this),h}}),n.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/}(e),function(){if(t.StaticCanvas){t.warn("fabric.StaticCanvas is already defined.");return}var u=t.util.object.extend,n=t.util.getElementOffset,f=t.util.removeFromArray,h=t.util.toFixed,a=t.util.transformPoint,o=t.util.invertTransform,i=t.util.getNodeCanvas,l=t.util.createCanvasElement,p=new Error("Could not initialize `canvas` element");t.StaticCanvas=t.util.createClass(t.CommonMethods,{initialize:function(c,g){g||(g={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(c,g)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:t.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(c,g){var m=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(c),this._initOptions(g),this.interactive||this._initRetinaScaling(),g.overlayImage&&this.setOverlayImage(g.overlayImage,m),g.backgroundImage&&this.setBackgroundImage(g.backgroundImage,m),g.backgroundColor&&this.setBackgroundColor(g.backgroundColor,m),g.overlayColor&&this.setOverlayColor(g.overlayColor,m),this.calcOffset()},_isRetinaScaling:function(){return t.devicePixelRatio>1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?Math.max(1,t.devicePixelRatio):1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var c=t.devicePixelRatio;this.__initRetinaScaling(c,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(c,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(c,g,m){g.setAttribute("width",this.width*c),g.setAttribute("height",this.height*c),m.scale(c,c)},calcOffset:function(){return this._offset=n(this.lowerCanvasEl),this},setOverlayImage:function(c,g,m){return this.__setBgOverlayImage("overlayImage",c,g,m)},setBackgroundImage:function(c,g,m){return this.__setBgOverlayImage("backgroundImage",c,g,m)},setOverlayColor:function(c,g){return this.__setBgOverlayColor("overlayColor",c,g)},setBackgroundColor:function(c,g){return this.__setBgOverlayColor("backgroundColor",c,g)},__setBgOverlayImage:function(c,g,m,C){return typeof g=="string"?t.util.loadImage(g,function(S,x){if(S){var w=new t.Image(S,C);this[c]=w,w.canvas=this}m&&m(S,x)},this,C&&C.crossOrigin):(C&&g.setOptions(C),this[c]=g,g&&(g.canvas=this),m&&m(g,!1)),this},__setBgOverlayColor:function(c,g,m){return this[c]=g,this._initGradient(g,c),this._initPattern(g,c,m),this},_createCanvasElement:function(){var c=l();if(!c||(c.style||(c.style={}),typeof c.getContext>"u"))throw p;return c},_initOptions:function(c){var g=this.lowerCanvasEl;this._setOptions(c),this.width=this.width||parseInt(g.width,10)||0,this.height=this.height||parseInt(g.height,10)||0,this.lowerCanvasEl.style&&(g.width=this.width,g.height=this.height,g.style.width=this.width+"px",g.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(c){c&&c.getContext?this.lowerCanvasEl=c:this.lowerCanvasEl=t.util.getById(c)||this._createCanvasElement(),t.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(c,g){return this.setDimensions({width:c},g)},setHeight:function(c,g){return this.setDimensions({height:c},g)},setDimensions:function(c,g){var m;g=g||{};for(var C in c)m=c[C],g.cssOnly||(this._setBackstoreDimension(C,c[C]),m+="px",this.hasLostContext=!0),g.backstoreOnly||this._setCssDimension(C,m);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop),this._initRetinaScaling(),this.calcOffset(),g.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(c,g){return this.lowerCanvasEl[c]=g,this.upperCanvasEl&&(this.upperCanvasEl[c]=g),this.cacheCanvasEl&&(this.cacheCanvasEl[c]=g),this[c]=g,this},_setCssDimension:function(c,g){return this.lowerCanvasEl.style[c]=g,this.upperCanvasEl&&(this.upperCanvasEl.style[c]=g),this.wrapperEl&&(this.wrapperEl.style[c]=g),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(c){var g=this._activeObject,m=this.backgroundImage,C=this.overlayImage,S,x,w;for(this.viewportTransform=c,x=0,w=this._objects.length;x<w;x++)S=this._objects[x],S.group||S.setCoords(!0);return g&&g.setCoords(),m&&m.setCoords(!0),C&&C.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(c,g){var m=c,C=this.viewportTransform.slice(0);c=a(c,o(this.viewportTransform)),C[0]=g,C[3]=g;var S=a(c,C);return C[4]+=m.x-S.x,C[5]+=m.y-S.y,this.setViewportTransform(C)},setZoom:function(c){return this.zoomToPoint(new t.Point(0,0),c),this},absolutePan:function(c){var g=this.viewportTransform.slice(0);return g[4]=-c.x,g[5]=-c.y,this.setViewportTransform(g)},relativePan:function(c){return this.absolutePan(new t.Point(-c.x-this.viewportTransform[4],-c.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(c){this.stateful&&c.setupState(),c._set("canvas",this),c.setCoords(),this.fire("object:added",{target:c}),c.fire("added")},_onObjectRemoved:function(c){this.fire("object:removed",{target:c}),c.fire("removed"),delete c.canvas},clearContext:function(c){return c.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var c=this.contextContainer;return this.renderCanvas(c,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=t.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var c={},g=this.width,m=this.height,C=o(this.viewportTransform);return c.tl=a({x:0,y:0},C),c.br=a({x:g,y:m},C),c.tr=new t.Point(c.br.x,c.tl.y),c.bl=new t.Point(c.tl.x,c.br.y),this.vptCoords=c,c},cancelRequestedRender:function(){this.isRendering&&(t.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(c,g){var m=this.viewportTransform,C=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(c),t.util.setImageSmoothing(c,this.imageSmoothingEnabled),this.fire("before:render",{ctx:c}),this._renderBackground(c),c.save(),c.transform(m[0],m[1],m[2],m[3],m[4],m[5]),this._renderObjects(c,g),c.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(c),C&&(C.canvas=this,C.shouldCache(),C._transformDone=!0,C.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(c)),this._renderOverlay(c),this.controlsAboveOverlay&&this.interactive&&this.drawControls(c),this.fire("after:render",{ctx:c})},drawClipPathOnCanvas:function(c){var g=this.viewportTransform,m=this.clipPath;c.save(),c.transform(g[0],g[1],g[2],g[3],g[4],g[5]),c.globalCompositeOperation="destination-in",m.transform(c),c.scale(1/m.zoomX,1/m.zoomY),c.drawImage(m._cacheCanvas,-m.cacheTranslationX,-m.cacheTranslationY),c.restore()},_renderObjects:function(c,g){var m,C;for(m=0,C=g.length;m<C;++m)g[m]&&g[m].render(c)},_renderBackgroundOrOverlay:function(c,g){var m=this[g+"Color"],C=this[g+"Image"],S=this.viewportTransform,x=this[g+"Vpt"];if(!(!m&&!C)){if(m){c.save(),c.beginPath(),c.moveTo(0,0),c.lineTo(this.width,0),c.lineTo(this.width,this.height),c.lineTo(0,this.height),c.closePath(),c.fillStyle=m.toLive?m.toLive(c,this):m,x&&c.transform(S[0],S[1],S[2],S[3],S[4],S[5]),c.transform(1,0,0,1,m.offsetX||0,m.offsetY||0);var w=m.gradientTransform||m.patternTransform;w&&c.transform(w[0],w[1],w[2],w[3],w[4],w[5]),c.fill(),c.restore()}if(C){c.save();var _=this.skipOffscreen;this.skipOffscreen=x,x&&c.transform(S[0],S[1],S[2],S[3],S[4],S[5]),C.render(c),this.skipOffscreen=_,c.restore()}}},_renderBackground:function(c){this._renderBackgroundOrOverlay(c,"background")},_renderOverlay:function(c){this._renderBackgroundOrOverlay(c,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},getCenterPoint:function(){return new t.Point(this.width/2,this.height/2)},centerObjectH:function(c){return this._centerObject(c,new t.Point(this.getCenterPoint().x,c.getCenterPoint().y))},centerObjectV:function(c){return this._centerObject(c,new t.Point(c.getCenterPoint().x,this.getCenterPoint().y))},centerObject:function(c){var g=this.getCenterPoint();return this._centerObject(c,g)},viewportCenterObject:function(c){var g=this.getVpCenter();return this._centerObject(c,g)},viewportCenterObjectH:function(c){var g=this.getVpCenter();return this._centerObject(c,new t.Point(g.x,c.getCenterPoint().y)),this},viewportCenterObjectV:function(c){var g=this.getVpCenter();return this._centerObject(c,new t.Point(c.getCenterPoint().x,g.y))},getVpCenter:function(){var c=this.getCenterPoint(),g=o(this.viewportTransform);return a(c,g)},_centerObject:function(c,g){return c.setPositionByOrigin(g,"center","center"),c.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(c){return this.toDatalessObject(c)},toObject:function(c){return this._toObjectMethod("toObject",c)},toDatalessObject:function(c){return this._toObjectMethod("toDatalessObject",c)},_toObjectMethod:function(c,g){var m=this.clipPath,C={version:t.version,objects:this._toObjects(c,g)};return m&&!m.excludeFromExport&&(C.clipPath=this._toObject(this.clipPath,c,g)),u(C,this.__serializeBgOverlay(c,g)),t.util.populateWithProperties(this,C,g),C},_toObjects:function(c,g){return this._objects.filter(function(m){return!m.excludeFromExport}).map(function(m){return this._toObject(m,c,g)},this)},_toObject:function(c,g,m){var C;this.includeDefaultValues||(C=c.includeDefaultValues,c.includeDefaultValues=!1);var S=c[g](m);return this.includeDefaultValues||(c.includeDefaultValues=C),S},__serializeBgOverlay:function(c,g){var m={},C=this.backgroundImage,S=this.overlayImage,x=this.backgroundColor,w=this.overlayColor;return x&&x.toObject?x.excludeFromExport||(m.background=x.toObject(g)):x&&(m.background=x),w&&w.toObject?w.excludeFromExport||(m.overlay=w.toObject(g)):w&&(m.overlay=w),C&&!C.excludeFromExport&&(m.backgroundImage=this._toObject(C,c,g)),S&&!S.excludeFromExport&&(m.overlayImage=this._toObject(S,c,g)),m},svgViewportTransformation:!0,toSVG:function(c,g){c||(c={}),c.reviver=g;var m=[];return this._setSVGPreamble(m,c),this._setSVGHeader(m,c),this.clipPath&&m.push('<g clip-path="url(#'+this.clipPath.clipPathId+`)" >
`),this._setSVGBgOverlayColor(m,"background"),this._setSVGBgOverlayImage(m,"backgroundImage",g),this._setSVGObjects(m,g),this.clipPath&&m.push(`</g>
`),this._setSVGBgOverlayColor(m,"overlay"),this._setSVGBgOverlayImage(m,"overlayImage",g),m.push("</svg>"),m.join("")},_setSVGPreamble:function(c,g){g.suppressPreamble||c.push('<?xml version="1.0" encoding="',g.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)},_setSVGHeader:function(c,g){var m=g.width||this.width,C=g.height||this.height,S,x='viewBox="0 0 '+this.width+" "+this.height+'" ',w=t.Object.NUM_FRACTION_DIGITS;g.viewBox?x='viewBox="'+g.viewBox.x+" "+g.viewBox.y+" "+g.viewBox.width+" "+g.viewBox.height+'" ':this.svgViewportTransformation&&(S=this.viewportTransform,x='viewBox="'+h(-S[4]/S[0],w)+" "+h(-S[5]/S[3],w)+" "+h(this.width/S[0],w)+" "+h(this.height/S[3],w)+'" '),c.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',m,'" ','height="',C,'" ',x,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",t.version,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(g),`</defs>
`)},createSVGClipPathMarkup:function(c){var g=this.clipPath;return g?(g.clipPathId="CLIPPATH_"+t.Object.__uid++,'<clipPath id="'+g.clipPathId+`" >
`+this.clipPath.toClipPathSVG(c.reviver)+`</clipPath>
`):""},createSVGRefElementsMarkup:function(){var c=this,g=["background","overlay"].map(function(m){var C=c[m+"Color"];if(C&&C.toLive){var S=c[m+"Vpt"],x=c.viewportTransform,w={width:c.width/(S?x[0]:1),height:c.height/(S?x[3]:1)};return C.toSVG(w,{additionalTransform:S?t.util.matrixToSVG(x):""})}});return g.join("")},createSVGFontFacesMarkup:function(){var c="",g={},m,C,S,x,w,_,E,I,M,z=t.fontPaths,Q=[];for(this._objects.forEach(function q(J){Q.push(J),J._objects&&J._objects.forEach(q)}),I=0,M=Q.length;I<M;I++)if(m=Q[I],C=m.fontFamily,!(m.type.indexOf("text")===-1||g[C]||!z[C])&&(g[C]=!0,!!m.styles)){S=m.styles;for(w in S){x=S[w];for(E in x)_=x[E],C=_.fontFamily,!g[C]&&z[C]&&(g[C]=!0)}}for(var ee in g)c+=[`		@font-face {
`,"			font-family: '",ee,`';
`,"			src: url('",z[ee],`');
`,`		}
`].join("");return c&&(c=['	<style type="text/css">',`<![CDATA[
`,c,"]]>",`</style>
`].join("")),c},_setSVGObjects:function(c,g){var m,C,S,x=this._objects;for(C=0,S=x.length;C<S;C++)m=x[C],!m.excludeFromExport&&this._setSVGObject(c,m,g)},_setSVGObject:function(c,g,m){c.push(g.toSVG(m))},_setSVGBgOverlayImage:function(c,g,m){this[g]&&!this[g].excludeFromExport&&this[g].toSVG&&c.push(this[g].toSVG(m))},_setSVGBgOverlayColor:function(c,g){var m=this[g+"Color"],C=this.viewportTransform,S=this.width,x=this.height;if(m)if(m.toLive){var w=m.repeat,_=t.util.invertTransform(C),E=this[g+"Vpt"],I=E?t.util.matrixToSVG(_):"";c.push('<rect transform="'+I+" translate(",S/2,",",x/2,')"',' x="',m.offsetX-S/2,'" y="',m.offsetY-x/2,'" ','width="',w==="repeat-y"||w==="no-repeat"?m.source.width:S,'" height="',w==="repeat-x"||w==="no-repeat"?m.source.height:x,'" fill="url(#SVGID_'+m.id+')"',`></rect>
`)}else c.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',m,'"',`></rect>
`)},sendToBack:function(c){if(!c)return this;var g=this._activeObject,m,C,S;if(c===g&&c.type==="activeSelection")for(S=g._objects,m=S.length;m--;)C=S[m],f(this._objects,C),this._objects.unshift(C);else f(this._objects,c),this._objects.unshift(c);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(c){if(!c)return this;var g=this._activeObject,m,C,S;if(c===g&&c.type==="activeSelection")for(S=g._objects,m=0;m<S.length;m++)C=S[m],f(this._objects,C),this._objects.push(C);else f(this._objects,c),this._objects.push(c);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(c,g){if(!c)return this;var m=this._activeObject,C,S,x,w,_,E=0;if(c===m&&c.type==="activeSelection")for(_=m._objects,C=0;C<_.length;C++)S=_[C],x=this._objects.indexOf(S),x>0+E&&(w=x-1,f(this._objects,S),this._objects.splice(w,0,S)),E++;else x=this._objects.indexOf(c),x!==0&&(w=this._findNewLowerIndex(c,x,g),f(this._objects,c),this._objects.splice(w,0,c));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(c,g,m){var C,S;if(m)for(C=g,S=g-1;S>=0;--S){var x=c.intersectsWithObject(this._objects[S])||c.isContainedWithinObject(this._objects[S])||this._objects[S].isContainedWithinObject(c);if(x){C=S;break}}else C=g-1;return C},bringForward:function(c,g){if(!c)return this;var m=this._activeObject,C,S,x,w,_,E=0;if(c===m&&c.type==="activeSelection")for(_=m._objects,C=_.length;C--;)S=_[C],x=this._objects.indexOf(S),x<this._objects.length-1-E&&(w=x+1,f(this._objects,S),this._objects.splice(w,0,S)),E++;else x=this._objects.indexOf(c),x!==this._objects.length-1&&(w=this._findNewUpperIndex(c,x,g),f(this._objects,c),this._objects.splice(w,0,c));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(c,g,m){var C,S,x;if(m)for(C=g,S=g+1,x=this._objects.length;S<x;++S){var w=c.intersectsWithObject(this._objects[S])||c.isContainedWithinObject(this._objects[S])||this._objects[S].isContainedWithinObject(c);if(w){C=S;break}}else C=g+1;return C},moveTo:function(c,g){return f(this._objects,c),this._objects.splice(g,0,c),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(t.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(c){c.dispose&&c.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),t.util.setStyle(this.lowerCanvasEl,this._originalCanvasStyle),delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),t.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),u(t.StaticCanvas.prototype,t.Observable),u(t.StaticCanvas.prototype,t.Collection),u(t.StaticCanvas.prototype,t.DataURLExporter),u(t.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(c){var g=l();if(!g||!g.getContext)return null;var m=g.getContext("2d");if(!m)return null;switch(c){case"setLineDash":return typeof m.setLineDash<"u";default:return null}}}),t.StaticCanvas.prototype.toJSON=t.StaticCanvas.prototype.toObject,t.isLikelyNode&&(t.StaticCanvas.prototype.createPNGStream=function(){var c=i(this.lowerCanvasEl);return c&&c.createPNGStream()},t.StaticCanvas.prototype.createJPEGStream=function(c){var g=i(this.lowerCanvasEl);return g&&g.createJPEGStream(c)})}(),t.BaseBrush=t.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(u){u.strokeStyle=this.color,u.lineWidth=this.width,u.lineCap=this.strokeLineCap,u.miterLimit=this.strokeMiterLimit,u.lineJoin=this.strokeLineJoin,u.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(u){var n=this.canvas.viewportTransform;u.save(),u.transform(n[0],n[1],n[2],n[3],n[4],n[5])},_setShadow:function(){if(this.shadow){var u=this.canvas,n=this.shadow,f=u.contextTop,h=u.getZoom();u&&u._isRetinaScaling()&&(h*=t.devicePixelRatio),f.shadowColor=n.color,f.shadowBlur=n.blur*h,f.shadowOffsetX=n.offsetX*h,f.shadowOffsetY=n.offsetY*h}},needsFullRender:function(){var u=new t.Color(this.color);return u.getAlpha()<1||!!this.shadow},_resetShadow:function(){var u=this.canvas.contextTop;u.shadowColor="",u.shadowBlur=u.shadowOffsetX=u.shadowOffsetY=0},_isOutSideCanvas:function(u){return u.x<0||u.x>this.canvas.getWidth()||u.y<0||u.y>this.canvas.getHeight()}}),function(){t.PencilBrush=t.util.createClass(t.BaseBrush,{decimate:.4,drawStraightLine:!1,straightLineKey:"shiftKey",initialize:function(u){this.canvas=u,this._points=[]},needsFullRender:function(){return this.callSuper("needsFullRender")||this._hasStraightLine},_drawSegment:function(u,n,f){var h=n.midPointFrom(f);return u.quadraticCurveTo(n.x,n.y,h.x,h.y),h},onMouseDown:function(u,n){this.canvas._isMainEvent(n.e)&&(this.drawStraightLine=n.e[this.straightLineKey],this._prepareForDrawing(u),this._captureDrawingPath(u),this._render())},onMouseMove:function(u,n){if(this.canvas._isMainEvent(n.e)&&(this.drawStraightLine=n.e[this.straightLineKey],!(this.limitedToCanvasSize===!0&&this._isOutSideCanvas(u))&&this._captureDrawingPath(u)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var f=this._points,h=f.length,a=this.canvas.contextTop;this._saveAndTransform(a),this.oldEnd&&(a.beginPath(),a.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(a,f[h-2],f[h-1],!0),a.stroke(),a.restore()}},onMouseUp:function(u){return this.canvas._isMainEvent(u.e)?(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1):!0},_prepareForDrawing:function(u){var n=new t.Point(u.x,u.y);this._reset(),this._addPoint(n),this.canvas.contextTop.moveTo(n.x,n.y)},_addPoint:function(u){return this._points.length>1&&u.eq(this._points[this._points.length-1])?!1:(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(u),!0)},_reset:function(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1},_captureDrawingPath:function(u){var n=new t.Point(u.x,u.y);return this._addPoint(n)},_render:function(u){var n,f,h=this._points[0],a=this._points[1];if(u=u||this.canvas.contextTop,this._saveAndTransform(u),u.beginPath(),this._points.length===2&&h.x===a.x&&h.y===a.y){var o=this.width/1e3;h=new t.Point(h.x,h.y),a=new t.Point(a.x,a.y),h.x-=o,a.x+=o}for(u.moveTo(h.x,h.y),n=1,f=this._points.length;n<f;n++)this._drawSegment(u,h,a),h=this._points[n],a=this._points[n+1];u.lineTo(h.x,h.y),u.stroke(),u.restore()},convertPointsToSVGPath:function(u){var n=this.width/1e3;return t.util.getSmoothPathFromPoints(u,n)},_isEmptySVGPath:function(u){var n=t.util.joinPath(u);return n==="M 0 0 Q 0 0 0 0 L 0 0"},createPath:function(u){var n=new t.Path(u,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,n.shadow=new t.Shadow(this.shadow)),n},decimatePoints:function(u,n){if(u.length<=2)return u;var f=this.canvas.getZoom(),h=Math.pow(n/f,2),a,o=u.length-1,i=u[0],l=[i],p;for(a=1;a<o-1;a++)p=Math.pow(i.x-u[a].x,2)+Math.pow(i.y-u[a].y,2),p>=h&&(i=u[a],l.push(i));return l.push(u[o]),l},_finalizeAndAddPath:function(){var u=this.canvas.contextTop;u.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var n=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(n)){this.canvas.requestRenderAll();return}var f=this.createPath(n);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:f}),this.canvas.add(f),this.canvas.requestRenderAll(),f.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:f})}})}(),t.CircleBrush=t.util.createClass(t.BaseBrush,{width:10,initialize:function(u){this.canvas=u,this.points=[]},drawDot:function(u){var n=this.addPoint(u),f=this.canvas.contextTop;this._saveAndTransform(f),this.dot(f,n),f.restore()},dot:function(u,n){u.fillStyle=n.fill,u.beginPath(),u.arc(n.x,n.y,n.radius,0,Math.PI*2,!1),u.closePath(),u.fill()},onMouseDown:function(u){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(u)},_render:function(){var u=this.canvas.contextTop,n,f,h=this.points;for(this._saveAndTransform(u),n=0,f=h.length;n<f;n++)this.dot(u,h[n]);u.restore()},onMouseMove:function(u){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(u)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(u),this._render()):this.drawDot(u))},onMouseUp:function(){var u=this.canvas.renderOnAddRemove,n,f;this.canvas.renderOnAddRemove=!1;var h=[];for(n=0,f=this.points.length;n<f;n++){var a=this.points[n],o=new t.Circle({radius:a.radius,left:a.x,top:a.y,originX:"center",originY:"center",fill:a.fill});this.shadow&&(o.shadow=new t.Shadow(this.shadow)),h.push(o)}var i=new t.Group(h);i.canvas=this.canvas,this.canvas.fire("before:path:created",{path:i}),this.canvas.add(i),this.canvas.fire("path:created",{path:i}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=u,this.canvas.requestRenderAll()},addPoint:function(u){var n=new t.Point(u.x,u.y),f=t.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,h=new t.Color(this.color).setAlpha(t.util.getRandomInt(0,100)/100).toRgba();return n.radius=f,n.fill=h,this.points.push(n),n}}),t.SprayBrush=t.util.createClass(t.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(u){this.canvas=u,this.sprayChunks=[]},onMouseDown:function(u){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(u),this.render(this.sprayChunkPoints)},onMouseMove:function(u){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(u)||(this.addSprayChunk(u),this.render(this.sprayChunkPoints))},onMouseUp:function(){var u=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var n=[],f=0,h=this.sprayChunks.length;f<h;f++)for(var a=this.sprayChunks[f],o=0,i=a.length;o<i;o++){var l=new t.Rect({width:a[o].width,height:a[o].width,left:a[o].x+1,top:a[o].y+1,originX:"center",originY:"center",fill:this.color});n.push(l)}this.optimizeOverlapping&&(n=this._getOptimizedRects(n));var p=new t.Group(n);this.shadow&&p.set("shadow",new t.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:p}),this.canvas.add(p),this.canvas.fire("path:created",{path:p}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=u,this.canvas.requestRenderAll()},_getOptimizedRects:function(u){var n={},f,h,a;for(h=0,a=u.length;h<a;h++)f=u[h].left+""+u[h].top,n[f]||(n[f]=u[h]);var o=[];for(f in n)o.push(n[f]);return o},render:function(u){var n=this.canvas.contextTop,f,h;for(n.fillStyle=this.color,this._saveAndTransform(n),f=0,h=u.length;f<h;f++){var a=u[f];typeof a.opacity<"u"&&(n.globalAlpha=a.opacity),n.fillRect(a.x,a.y,a.width,a.width)}n.restore()},_render:function(){var u=this.canvas.contextTop,n,f;for(u.fillStyle=this.color,this._saveAndTransform(u),n=0,f=this.sprayChunks.length;n<f;n++)this.render(this.sprayChunks[n]);u.restore()},addSprayChunk:function(u){this.sprayChunkPoints=[];var n,f,h,a=this.width/2,o;for(o=0;o<this.density;o++){n=t.util.getRandomInt(u.x-a,u.x+a),f=t.util.getRandomInt(u.y-a,u.y+a),this.dotWidthVariance?h=t.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):h=this.dotWidth;var i=new t.Point(n,f);i.width=h,this.randomOpacity&&(i.opacity=t.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(i)}this.sprayChunks.push(this.sprayChunkPoints)}}),t.PatternBrush=t.util.createClass(t.PencilBrush,{getPatternSrc:function(){var u=20,n=5,f=t.util.createCanvasElement(),h=f.getContext("2d");return f.width=f.height=u+n,h.fillStyle=this.color,h.beginPath(),h.arc(u/2,u/2,u/2,0,Math.PI*2,!1),h.closePath(),h.fill(),f},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(u){return u.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(u){this.callSuper("_setBrushStyles",u),u.strokeStyle=this.getPattern(u)},createPath:function(u){var n=this.callSuper("createPath",u),f=n._getLeftTopCoords().scalarAdd(n.strokeWidth/2);return n.stroke=new t.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-f.x,offsetY:-f.y}),n}}),function(){var u=t.util.getPointer,n=t.util.degreesToRadians,f=t.util.isTouchEvent;t.Canvas=t.util.createClass(t.StaticCanvas,{initialize:function(a,o){o||(o={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(a,o),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],enablePointerEvents:!1,_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=t.PencilBrush&&new t.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var a=this.getActiveObjects(),o,i,l;if(a.length>0&&!this.preserveObjectStacking){i=[],l=[];for(var p=0,c=this._objects.length;p<c;p++)o=this._objects[p],a.indexOf(o)===-1?i.push(o):l.push(o);a.length>1&&(this._activeObject._objects=l),i.push.apply(i,l)}else i=this._objects;return i},renderAll:function(){this.contextTopDirty&&!this._groupSelector&&!this.isDrawingMode&&(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1);var a=this.contextContainer;return this.renderCanvas(a,this._chooseObjectsToRender()),this},renderTopLayer:function(a){a.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(a),this.contextTopDirty=!0),a.restore()},renderTop:function(){var a=this.contextTop;return this.clearContext(a),this.renderTopLayer(a),this.fire("after:render"),this},_normalizePointer:function(a,o){var i=a.calcTransformMatrix(),l=t.util.invertTransform(i),p=this.restorePointerVpt(o);return t.util.transformPoint(p,l)},isTargetTransparent:function(a,o,i){if(a.shouldCache()&&a._cacheCanvas&&a!==this._activeObject){var l=this._normalizePointer(a,{x:o,y:i}),p=Math.max(a.cacheTranslationX+l.x*a.zoomX,0),c=Math.max(a.cacheTranslationY+l.y*a.zoomY,0),S=t.util.isTransparent(a._cacheContext,Math.round(p),Math.round(c),this.targetFindTolerance);return S}var g=this.contextCache,m=a.selectionBackgroundColor,C=this.viewportTransform;a.selectionBackgroundColor="",this.clearContext(g),g.save(),g.transform(C[0],C[1],C[2],C[3],C[4],C[5]),a.render(g),g.restore(),a.selectionBackgroundColor=m;var S=t.util.isTransparent(g,o,i,this.targetFindTolerance);return S},_isSelectionKeyPressed:function(a){var o=!1;return Array.isArray(this.selectionKey)?o=!!this.selectionKey.find(function(i){return a[i]===!0}):o=a[this.selectionKey],o},_shouldClearSelection:function(a,o){var i=this.getActiveObjects(),l=this._activeObject;return!o||o&&l&&i.length>1&&i.indexOf(o)===-1&&l!==o&&!this._isSelectionKeyPressed(a)||o&&!o.evented||o&&!o.selectable&&l&&l!==o},_shouldCenterTransform:function(a,o,i){if(a){var l;return o==="scale"||o==="scaleX"||o==="scaleY"||o==="resizing"?l=this.centeredScaling||a.centeredScaling:o==="rotate"&&(l=this.centeredRotation||a.centeredRotation),l?!i:i}},_getOriginFromCorner:function(a,o){var i={x:a.originX,y:a.originY};return o==="ml"||o==="tl"||o==="bl"?i.x="right":(o==="mr"||o==="tr"||o==="br")&&(i.x="left"),o==="tl"||o==="mt"||o==="tr"?i.y="bottom":(o==="bl"||o==="mb"||o==="br")&&(i.y="top"),i},_getActionFromCorner:function(a,o,i,l){if(!o||!a)return"drag";var p=l.controls[o];return p.getActionName(i,p,l)},_setupCurrentTransform:function(a,o,i){if(o){var l=this.getPointer(a),p=o.__corner,c=o.controls[p],g=i&&p?c.getActionHandler(a,o,c):t.controlsUtils.dragHandler,m=this._getActionFromCorner(i,p,a,o),C=this._getOriginFromCorner(o,p),S=a[this.centeredKey],x={target:o,action:m,actionHandler:g,corner:p,scaleX:o.scaleX,scaleY:o.scaleY,skewX:o.skewX,skewY:o.skewY,offsetX:l.x-o.left,offsetY:l.y-o.top,originX:C.x,originY:C.y,ex:l.x,ey:l.y,lastX:l.x,lastY:l.y,theta:n(o.angle),width:o.width*o.scaleX,shiftKey:a.shiftKey,altKey:S,original:t.util.saveObjectTransform(o)};this._shouldCenterTransform(o,m,S)&&(x.originX="center",x.originY="center"),x.original.originX=C.x,x.original.originY=C.y,this._currentTransform=x,this._beforeTransform(a)}},setCursor:function(a){this.upperCanvasEl.style.cursor=a},_drawSelection:function(a){var o=this._groupSelector,i=new t.Point(o.ex,o.ey),l=t.util.transformPoint(i,this.viewportTransform),p=new t.Point(o.ex+o.left,o.ey+o.top),c=t.util.transformPoint(p,this.viewportTransform),g=Math.min(l.x,c.x),m=Math.min(l.y,c.y),C=Math.max(l.x,c.x),S=Math.max(l.y,c.y),x=this.selectionLineWidth/2;this.selectionColor&&(a.fillStyle=this.selectionColor,a.fillRect(g,m,C-g,S-m)),!(!this.selectionLineWidth||!this.selectionBorderColor)&&(a.lineWidth=this.selectionLineWidth,a.strokeStyle=this.selectionBorderColor,g+=x,m+=x,C-=x,S-=x,t.Object.prototype._setLineDash.call(this,a,this.selectionDashArray),a.strokeRect(g,m,C-g,S-m))},findTarget:function(a,o){if(!this.skipTargetFind){var i=!0,l=this.getPointer(a,i),p=this._activeObject,c=this.getActiveObjects(),g,m,C=f(a),S=c.length>1&&!o||c.length===1;if(this.targets=[],S&&p._findTargetCorner(l,C)||c.length>1&&!o&&p===this._searchPossibleTargets([p],l))return p;if(c.length===1&&p===this._searchPossibleTargets([p],l))if(this.preserveObjectStacking)g=p,m=this.targets,this.targets=[];else return p;var x=this._searchPossibleTargets(this._objects,l);return a[this.altSelectionKey]&&x&&g&&x!==g&&(x=g,this.targets=m),x}},_checkTarget:function(a,o,i){if(o&&o.visible&&o.evented&&o.containsPoint(a))if((this.perPixelTargetFind||o.perPixelTargetFind)&&!o.isEditing){var l=this.isTargetTransparent(o,i.x,i.y);if(!l)return!0}else return!0},_searchPossibleTargets:function(a,o){for(var i,l=a.length,p;l--;){var c=a[l],g=c.group?this._normalizePointer(c.group,o):o;if(this._checkTarget(g,c,o)){i=a[l],i.subTargetCheck&&i instanceof t.Group&&(p=this._searchPossibleTargets(i._objects,o),p&&this.targets.push(p));break}}return i},restorePointerVpt:function(a){return t.util.transformPoint(a,t.util.invertTransform(this.viewportTransform))},getPointer:function(a,o){if(this._absolutePointer&&!o)return this._absolutePointer;if(this._pointer&&o)return this._pointer;var i=u(a),l=this.upperCanvasEl,p=l.getBoundingClientRect(),c=p.width||0,g=p.height||0,m;(!c||!g)&&("top"in p&&"bottom"in p&&(g=Math.abs(p.top-p.bottom)),"right"in p&&"left"in p&&(c=Math.abs(p.right-p.left))),this.calcOffset(),i.x=i.x-this._offset.left,i.y=i.y-this._offset.top,o||(i=this.restorePointerVpt(i));var C=this.getRetinaScaling();return C!==1&&(i.x/=C,i.y/=C),c===0||g===0?m={width:1,height:1}:m={width:l.width/c,height:l.height/g},{x:i.x*m.width,y:i.y*m.height}},_createUpperCanvas:function(){var a=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),o=this.lowerCanvasEl,i=this.upperCanvasEl;i?i.className="":(i=this._createCanvasElement(),this.upperCanvasEl=i),t.util.addClass(i,"upper-canvas "+a),this.wrapperEl.appendChild(i),this._copyCanvasStyle(o,i),this._applyCanvasStyle(i),this.contextTop=i.getContext("2d")},getTopContext:function(){return this.contextTop},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=t.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),t.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),t.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(a){var o=this.width||a.width,i=this.height||a.height;t.util.setStyle(a,{position:"absolute",width:o+"px",height:i+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),a.width=o,a.height=i,t.util.makeElementUnselectable(a)},_copyCanvasStyle:function(a,o){o.style.cssText=a.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var a=this._activeObject;return a?a.type==="activeSelection"&&a._objects?a._objects.slice(0):[a]:[]},_onObjectRemoved:function(a){a===this._activeObject&&(this.fire("before:selection:cleared",{target:a}),this._discardActiveObject(),this.fire("selection:cleared",{target:a}),a.fire("deselected")),a===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",a)},_fireSelectionEvents:function(a,o){var i=!1,l=this.getActiveObjects(),p=[],c=[];a.forEach(function(g){l.indexOf(g)===-1&&(i=!0,g.fire("deselected",{e:o,target:g}),c.push(g))}),l.forEach(function(g){a.indexOf(g)===-1&&(i=!0,g.fire("selected",{e:o,target:g}),p.push(g))}),a.length>0&&l.length>0?i&&this.fire("selection:updated",{e:o,selected:p,deselected:c}):l.length>0?this.fire("selection:created",{e:o,selected:p}):a.length>0&&this.fire("selection:cleared",{e:o,deselected:c})},setActiveObject:function(a,o){var i=this.getActiveObjects();return this._setActiveObject(a,o),this._fireSelectionEvents(i,o),this},_setActiveObject:function(a,o){return this._activeObject===a||!this._discardActiveObject(o,a)||a.onSelect({e:o})?!1:(this._activeObject=a,!0)},_discardActiveObject:function(a,o){var i=this._activeObject;if(i){if(i.onDeselect({e:a,object:o}))return!1;this._activeObject=null}return!0},discardActiveObject:function(a){var o=this.getActiveObjects(),i=this.getActiveObject();return o.length&&this.fire("before:selection:cleared",{target:i,e:a}),this._discardActiveObject(a),this._fireSelectionEvents(o,a),this},dispose:function(){var a=this.wrapperEl;return this.removeListeners(),a.removeChild(this.upperCanvasEl),a.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach((function(o){t.util.cleanUpJsdomNode(this[o]),this[o]=void 0}).bind(this)),a.parentNode&&a.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,t.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(a){var o=this._activeObject;o&&o._renderControls(a)},_toObject:function(a,o,i){var l=this._realizeGroupTransformOnObject(a),p=this.callSuper("_toObject",a,o,i);return this._unwindGroupTransformOnObject(a,l),p},_realizeGroupTransformOnObject:function(a){if(a.group&&a.group.type==="activeSelection"&&this._activeObject===a.group){var o=["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"],i={};return o.forEach(function(l){i[l]=a[l]}),t.util.addTransformToObject(a,this._activeObject.calcOwnMatrix()),i}else return null},_unwindGroupTransformOnObject:function(a,o){o&&a.set(o)},_setSVGObject:function(a,o,i){var l=this._realizeGroupTransformOnObject(o);this.callSuper("_setSVGObject",a,o,i),this._unwindGroupTransformOnObject(o,l)},setViewportTransform:function(a){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),t.StaticCanvas.prototype.setViewportTransform.call(this,a)}});for(var h in t.StaticCanvas)h!=="prototype"&&(t.Canvas[h]=t.StaticCanvas[h])}(),function(){var u=t.util.addListener,n=t.util.removeListener,f=3,h=2,a=1,o={passive:!1};function i(l,p){return l.button&&l.button===p-1}t.util.object.extend(t.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(u,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(l,p){var c=this.upperCanvasEl,g=this._getEventPrefix();l(t.window,"resize",this._onResize),l(c,g+"down",this._onMouseDown),l(c,g+"move",this._onMouseMove,o),l(c,g+"out",this._onMouseOut),l(c,g+"enter",this._onMouseEnter),l(c,"wheel",this._onMouseWheel),l(c,"contextmenu",this._onContextMenu),l(c,"dblclick",this._onDoubleClick),l(c,"dragover",this._onDragOver),l(c,"dragenter",this._onDragEnter),l(c,"dragleave",this._onDragLeave),l(c,"drop",this._onDrop),this.enablePointerEvents||l(c,"touchstart",this._onTouchStart,o),typeof eventjs<"u"&&p in eventjs&&(eventjs[p](c,"gesture",this._onGesture),eventjs[p](c,"drag",this._onDrag),eventjs[p](c,"orientation",this._onOrientationChange),eventjs[p](c,"shake",this._onShake),eventjs[p](c,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(n,"remove");var l=this._getEventPrefix();n(t.document,l+"up",this._onMouseUp),n(t.document,"touchend",this._onTouchEnd,o),n(t.document,l+"move",this._onMouseMove,o),n(t.document,"touchmove",this._onMouseMove,o)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._onDrop.bind(this),this.eventsBound=!0)},_onGesture:function(l,p){this.__onTransformGesture&&this.__onTransformGesture(l,p)},_onDrag:function(l,p){this.__onDrag&&this.__onDrag(l,p)},_onMouseWheel:function(l){this.__onMouseWheel(l)},_onMouseOut:function(l){var p=this._hoveredTarget;this.fire("mouse:out",{target:p,e:l}),this._hoveredTarget=null,p&&p.fire("mouseout",{e:l});var c=this;this._hoveredTargets.forEach(function(g){c.fire("mouse:out",{target:g,e:l}),g&&g.fire("mouseout",{e:l})}),this._hoveredTargets=[]},_onMouseEnter:function(l){!this._currentTransform&&!this.findTarget(l)&&(this.fire("mouse:over",{target:null,e:l}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(l,p){this.__onOrientationChange&&this.__onOrientationChange(l,p)},_onShake:function(l,p){this.__onShake&&this.__onShake(l,p)},_onLongPress:function(l,p){this.__onLongPress&&this.__onLongPress(l,p)},_onDragOver:function(l){l.preventDefault();var p=this._simpleEventHandler("dragover",l);this._fireEnterLeaveEvents(p,l)},_onDrop:function(l){return this._simpleEventHandler("drop:before",l),this._simpleEventHandler("drop",l)},_onContextMenu:function(l){return this.stopContextMenu&&(l.stopPropagation(),l.preventDefault()),!1},_onDoubleClick:function(l){this._cacheTransformEventData(l),this._handleEvent(l,"dblclick"),this._resetTransformEventData(l)},getPointerId:function(l){var p=l.changedTouches;return p?p[0]&&p[0].identifier:this.enablePointerEvents?l.pointerId:-1},_isMainEvent:function(l){return l.isPrimary===!0?!0:l.isPrimary===!1?!1:l.type==="touchend"&&l.touches.length===0?!0:l.changedTouches?l.changedTouches[0].identifier===this.mainTouchId:!0},_onTouchStart:function(l){l.preventDefault(),this.mainTouchId===null&&(this.mainTouchId=this.getPointerId(l)),this.__onMouseDown(l),this._resetTransformEventData();var p=this.upperCanvasEl,c=this._getEventPrefix();u(t.document,"touchend",this._onTouchEnd,o),u(t.document,"touchmove",this._onMouseMove,o),n(p,c+"down",this._onMouseDown)},_onMouseDown:function(l){this.__onMouseDown(l),this._resetTransformEventData();var p=this.upperCanvasEl,c=this._getEventPrefix();n(p,c+"move",this._onMouseMove,o),u(t.document,c+"up",this._onMouseUp),u(t.document,c+"move",this._onMouseMove,o)},_onTouchEnd:function(l){if(!(l.touches.length>0)){this.__onMouseUp(l),this._resetTransformEventData(),this.mainTouchId=null;var p=this._getEventPrefix();n(t.document,"touchend",this._onTouchEnd,o),n(t.document,"touchmove",this._onMouseMove,o);var c=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){u(c.upperCanvasEl,p+"down",c._onMouseDown),c._willAddMouseDown=0},400)}},_onMouseUp:function(l){this.__onMouseUp(l),this._resetTransformEventData();var p=this.upperCanvasEl,c=this._getEventPrefix();this._isMainEvent(l)&&(n(t.document,c+"up",this._onMouseUp),n(t.document,c+"move",this._onMouseMove,o),u(p,c+"move",this._onMouseMove,o))},_onMouseMove:function(l){!this.allowTouchScrolling&&l.preventDefault&&l.preventDefault(),this.__onMouseMove(l)},_onResize:function(){this.calcOffset()},_shouldRender:function(l){var p=this._activeObject;return!!p!=!!l||p&&l&&p!==l?!0:(p&&p.isEditing,!1)},__onMouseUp:function(l){var p,c=this._currentTransform,g=this._groupSelector,m=!1,C=!g||g.left===0&&g.top===0;if(this._cacheTransformEventData(l),p=this._target,this._handleEvent(l,"up:before"),i(l,f)){this.fireRightClick&&this._handleEvent(l,"up",f,C);return}if(i(l,h)){this.fireMiddleClick&&this._handleEvent(l,"up",h,C),this._resetTransformEventData();return}if(this.isDrawingMode&&this._isCurrentlyDrawing){this._onMouseUpInDrawingMode(l);return}if(this._isMainEvent(l)){if(c&&(this._finalizeCurrentTransform(l),m=c.actionPerformed),!C){var S=p===this._activeObject;this._maybeGroupObjects(l),m||(m=this._shouldRender(p)||!S&&p===this._activeObject)}var x,w;if(p){if(x=p._findTargetCorner(this.getPointer(l,!0),t.util.isTouchEvent(l)),p.selectable&&p!==this._activeObject&&p.activeOn==="up")this.setActiveObject(p,l),m=!0;else{var _=p.controls[x],E=_&&_.getMouseUpHandler(l,p,_);E&&(w=this.getPointer(l),E(l,c,w.x,w.y))}p.isMoving=!1}if(c&&(c.target!==p||c.corner!==x)){var I=c.target&&c.target.controls[c.corner],M=I&&I.getMouseUpHandler(l,p,_);w=w||this.getPointer(l),M&&M(l,c,w.x,w.y)}this._setCursorFromEvent(l,p),this._handleEvent(l,"up",a,C),this._groupSelector=null,this._currentTransform=null,p&&(p.__corner=0),m?this.requestRenderAll():C||this.renderTop()}},_simpleEventHandler:function(l,p){var c=this.findTarget(p),g=this.targets,m={e:p,target:c,subTargets:g};if(this.fire(l,m),c&&c.fire(l,m),!g)return c;for(var C=0;C<g.length;C++)g[C].fire(l,m);return c},_handleEvent:function(l,p,c,g){var m=this._target,C=this.targets||[],S={e:l,target:m,subTargets:C,button:c||a,isClick:g||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};p==="up"&&(S.currentTarget=this.findTarget(l),S.currentSubTargets=this.targets),this.fire("mouse:"+p,S),m&&m.fire("mouse"+p,S);for(var x=0;x<C.length;x++)C[x].fire("mouse"+p,S)},_finalizeCurrentTransform:function(l){var p=this._currentTransform,c=p.target,g={e:l,target:c,transform:p,action:p.action};c._scaling&&(c._scaling=!1),c.setCoords(),(p.actionPerformed||this.stateful&&c.hasStateChanged())&&this._fire("modified",g)},_onMouseDownInDrawingMode:function(l){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(l).requestRenderAll();var p=this.getPointer(l);this.freeDrawingBrush.onMouseDown(p,{e:l,pointer:p}),this._handleEvent(l,"down")},_onMouseMoveInDrawingMode:function(l){if(this._isCurrentlyDrawing){var p=this.getPointer(l);this.freeDrawingBrush.onMouseMove(p,{e:l,pointer:p})}this.setCursor(this.freeDrawingCursor),this._handleEvent(l,"move")},_onMouseUpInDrawingMode:function(l){var p=this.getPointer(l);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:l,pointer:p}),this._handleEvent(l,"up")},__onMouseDown:function(l){this._cacheTransformEventData(l),this._handleEvent(l,"down:before");var p=this._target;if(i(l,f)){this.fireRightClick&&this._handleEvent(l,"down",f);return}if(i(l,h)){this.fireMiddleClick&&this._handleEvent(l,"down",h);return}if(this.isDrawingMode){this._onMouseDownInDrawingMode(l);return}if(this._isMainEvent(l)&&!this._currentTransform){var c=this._pointer;this._previousPointer=c;var g=this._shouldRender(p),m=this._shouldGroup(l,p);if(this._shouldClearSelection(l,p)?this.discardActiveObject(l):m&&(this._handleGrouping(l,p),p=this._activeObject),this.selection&&(!p||!p.selectable&&!p.isEditing&&p!==this._activeObject)&&(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),p){var C=p===this._activeObject;p.selectable&&p.activeOn==="down"&&this.setActiveObject(p,l);var S=p._findTargetCorner(this.getPointer(l,!0),t.util.isTouchEvent(l));if(p.__corner=S,p===this._activeObject&&(S||!m)){this._setupCurrentTransform(l,p,C);var x=p.controls[S],c=this.getPointer(l),w=x&&x.getMouseDownHandler(l,p,x);w&&w(l,this._currentTransform,c.x,c.y)}}this._handleEvent(l,"down"),(g||m)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(l){this._resetTransformEventData(),this._pointer=this.getPointer(l,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(l)||null},_beforeTransform:function(l){var p=this._currentTransform;this.stateful&&p.target.saveState(),this.fire("before:transform",{e:l,transform:p})},__onMouseMove:function(l){this._handleEvent(l,"move:before"),this._cacheTransformEventData(l);var p,c;if(this.isDrawingMode){this._onMouseMoveInDrawingMode(l);return}if(this._isMainEvent(l)){var g=this._groupSelector;g?(c=this._absolutePointer,g.left=c.x-g.ex,g.top=c.y-g.ey,this.renderTop()):this._currentTransform?this._transformObject(l):(p=this.findTarget(l)||null,this._setCursorFromEvent(l,p),this._fireOverOutEvents(p,l)),this._handleEvent(l,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(l,p){var c=this._hoveredTarget,g=this._hoveredTargets,m=this.targets,C=Math.max(g.length,m.length);this.fireSyntheticInOutEvents(l,p,{oldTarget:c,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var S=0;S<C;S++)this.fireSyntheticInOutEvents(m[S],p,{oldTarget:g[S],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=l,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(l,p){var c=this._draggedoverTarget,g=this._hoveredTargets,m=this.targets,C=Math.max(g.length,m.length);this.fireSyntheticInOutEvents(l,p,{oldTarget:c,evtOut:"dragleave",evtIn:"dragenter"});for(var S=0;S<C;S++)this.fireSyntheticInOutEvents(m[S],p,{oldTarget:g[S],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=l},fireSyntheticInOutEvents:function(l,p,c){var g,m,C=c.oldTarget,S,x,w=C!==l,_=c.canvasEvtIn,E=c.canvasEvtOut;w&&(g={e:p,target:l,previousTarget:C},m={e:p,target:C,nextTarget:l}),x=l&&w,S=C&&w,S&&(E&&this.fire(E,m),C.fire(c.evtOut,m)),x&&(_&&this.fire(_,g),l.fire(c.evtIn,g))},__onMouseWheel:function(l){this._cacheTransformEventData(l),this._handleEvent(l,"wheel"),this._resetTransformEventData()},_transformObject:function(l){var p=this.getPointer(l),c=this._currentTransform;c.reset=!1,c.shiftKey=l.shiftKey,c.altKey=l[this.centeredKey],this._performTransformAction(l,c,p),c.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(l,p,c){var g=c.x,m=c.y,C=p.action,S=!1,x=p.actionHandler;x&&(S=x(l,p,g,m)),C==="drag"&&S&&(p.target.isMoving=!0,this.setCursor(p.target.moveCursor||this.moveCursor)),p.actionPerformed=p.actionPerformed||S},_fire:t.controlsUtils.fireEvent,_setCursorFromEvent:function(l,p){if(!p)return this.setCursor(this.defaultCursor),!1;var c=p.hoverCursor||this.hoverCursor,g=this._activeObject&&this._activeObject.type==="activeSelection"?this._activeObject:null,m=(!g||!g.contains(p))&&p._findTargetCorner(this.getPointer(l,!0));m?this.setCursor(this.getCornerCursor(m,p,l)):(p.subTargetCheck&&this.targets.concat().reverse().map(function(C){c=C.hoverCursor||c}),this.setCursor(c))},getCornerCursor:function(l,p,c){var g=p.controls[l];return g.cursorStyleHandler(c,g,p)}})}(),function(){var u=Math.min,n=Math.max;t.util.object.extend(t.Canvas.prototype,{_shouldGroup:function(f,h){var a=this._activeObject;return a&&this._isSelectionKeyPressed(f)&&h&&h.selectable&&this.selection&&(a!==h||a.type==="activeSelection")&&!h.onSelect({e:f})},_handleGrouping:function(f,h){var a=this._activeObject;a.__corner||h===a&&(h=this.findTarget(f,!0),!h||!h.selectable)||(a&&a.type==="activeSelection"?this._updateActiveSelection(h,f):this._createActiveSelection(h,f))},_updateActiveSelection:function(f,h){var a=this._activeObject,o=a._objects.slice(0);a.contains(f)?(a.removeWithUpdate(f),this._hoveredTarget=f,this._hoveredTargets=this.targets.concat(),a.size()===1&&this._setActiveObject(a.item(0),h)):(a.addWithUpdate(f),this._hoveredTarget=a,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(o,h)},_createActiveSelection:function(f,h){var a=this.getActiveObjects(),o=this._createGroup(f);this._hoveredTarget=o,this._setActiveObject(o,h),this._fireSelectionEvents(a,h)},_createGroup:function(f){var h=this._objects,a=h.indexOf(this._activeObject)<h.indexOf(f),o=a?[this._activeObject,f]:[f,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new t.ActiveSelection(o,{canvas:this})},_groupSelectedObjects:function(f){var h=this._collectObjects(f),a;h.length===1?this.setActiveObject(h[0],f):h.length>1&&(a=new t.ActiveSelection(h.reverse(),{canvas:this}),this.setActiveObject(a,f))},_collectObjects:function(f){for(var h=[],a,o=this._groupSelector.ex,i=this._groupSelector.ey,l=o+this._groupSelector.left,p=i+this._groupSelector.top,c=new t.Point(u(o,l),u(i,p)),g=new t.Point(n(o,l),n(i,p)),m=!this.selectionFullyContained,C=o===l&&i===p,S=this._objects.length;S--&&(a=this._objects[S],!(!(!a||!a.selectable||!a.visible)&&(m&&a.intersectsWithRect(c,g,!0)||a.isContainedWithinRect(c,g,!0)||m&&a.containsPoint(c,null,!0)||m&&a.containsPoint(g,null,!0))&&(h.push(a),C))););return h.length>1&&(h=h.filter(function(x){return!x.onSelect({e:f})})),h},_maybeGroupObjects:function(f){this.selection&&this._groupSelector&&this._groupSelectedObjects(f),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),function(){t.util.object.extend(t.StaticCanvas.prototype,{toDataURL:function(u){u||(u={});var n=u.format||"png",f=u.quality||1,h=(u.multiplier||1)*(u.enableRetinaScaling?this.getRetinaScaling():1),a=this.toCanvasElement(h,u);return t.util.toDataURL(a,n,f)},toCanvasElement:function(u,n){u=u||1,n=n||{};var f=(n.width||this.width)*u,h=(n.height||this.height)*u,a=this.getZoom(),o=this.width,i=this.height,l=a*u,p=this.viewportTransform,c=(p[4]-(n.left||0))*u,g=(p[5]-(n.top||0))*u,m=this.interactive,C=[l,0,0,l,c,g],S=this.enableRetinaScaling,x=t.util.createCanvasElement(),w=this.contextTop;return x.width=f,x.height=h,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=C,this.width=f,this.height=h,this.calcViewportBoundaries(),this.renderCanvas(x.getContext("2d"),this._objects),this.viewportTransform=p,this.width=o,this.height=i,this.calcViewportBoundaries(),this.interactive=m,this.enableRetinaScaling=S,this.contextTop=w,x}})}(),t.util.object.extend(t.StaticCanvas.prototype,{loadFromJSON:function(u,n,f){if(u){var h=typeof u=="string"?JSON.parse(u):t.util.object.clone(u),a=this,o=h.clipPath,i=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete h.clipPath,this._enlivenObjects(h.objects,function(l){a.clear(),a._setBgOverlay(h,function(){o?a._enlivenObjects([o],function(p){a.clipPath=p[0],a.__setupCanvas.call(a,h,l,i,n)}):a.__setupCanvas.call(a,h,l,i,n)})},f),this}},__setupCanvas:function(u,n,f,h){var a=this;n.forEach(function(o,i){a.insertAt(o,i)}),this.renderOnAddRemove=f,delete u.objects,delete u.backgroundImage,delete u.overlayImage,delete u.background,delete u.overlay,this._setOptions(u),this.renderAll(),h&&h()},_setBgOverlay:function(u,n){var f={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(!u.backgroundImage&&!u.overlayImage&&!u.background&&!u.overlay){n&&n();return}var h=function(){f.backgroundImage&&f.overlayImage&&f.backgroundColor&&f.overlayColor&&n&&n()};this.__setBgOverlay("backgroundImage",u.backgroundImage,f,h),this.__setBgOverlay("overlayImage",u.overlayImage,f,h),this.__setBgOverlay("backgroundColor",u.background,f,h),this.__setBgOverlay("overlayColor",u.overlay,f,h)},__setBgOverlay:function(u,n,f,h){var a=this;if(!n){f[u]=!0,h&&h();return}u==="backgroundImage"||u==="overlayImage"?t.util.enlivenObjects([n],function(o){a[u]=o[0],f[u]=!0,h&&h()}):this["set"+t.util.string.capitalize(u,!0)](n,function(){f[u]=!0,h&&h()})},_enlivenObjects:function(u,n,f){if(!u||u.length===0){n&&n([]);return}t.util.enlivenObjects(u,function(h){n&&n(h)},null,f)},_toDataURL:function(u,n){this.clone(function(f){n(f.toDataURL(u))})},_toDataURLWithMultiplier:function(u,n,f){this.clone(function(h){f(h.toDataURLWithMultiplier(u,n))})},clone:function(u,n){var f=JSON.stringify(this.toJSON(n));this.cloneWithoutData(function(h){h.loadFromJSON(f,function(){u&&u(h)})})},cloneWithoutData:function(u){var n=t.util.createCanvasElement();n.width=this.width,n.height=this.height;var f=new t.Canvas(n);this.backgroundImage?(f.setBackgroundImage(this.backgroundImage.src,function(){f.renderAll(),u&&u(f)}),f.backgroundImageOpacity=this.backgroundImageOpacity,f.backgroundImageStretch=this.backgroundImageStretch):u&&u(f)}}),function(u){var n=u.fabric||(u.fabric={}),f=n.util.object.extend,h=n.util.object.clone,a=n.util.toFixed,o=n.util.string.capitalize,i=n.util.degreesToRadians,l=!n.isLikelyNode,p=2;n.Object||(n.Object=n.util.createClass(n.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:l,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(c){c&&this.setOptions(c)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=n.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(c){var g=n.perfLimitSizeTotal,m=c.width,C=c.height,S=n.maxCacheSideLimit,x=n.minCacheSideLimit;if(m<=S&&C<=S&&m*C<=g)return m<x&&(c.width=x),C<x&&(c.height=x),c;var w=m/C,_=n.util.limitDimsByArea(w,g),E=n.util.capValue,I=E(x,_.x,S),M=E(x,_.y,S);return m>I&&(c.zoomX/=m/I,c.width=I,c.capped=!0),C>M&&(c.zoomY/=C/M,c.height=M,c.capped=!0),c},_getCacheCanvasDimensions:function(){var c=this.getTotalObjectScaling(),g=this._getTransformedDimensions(0,0),m=g.x*c.scaleX/this.scaleX,C=g.y*c.scaleY/this.scaleY;return{width:Math.ceil(m+p),height:Math.ceil(C+p),zoomX:c.scaleX,zoomY:c.scaleY,x:m,y:C}},_updateCacheCanvas:function(){var c=this.canvas;if(this.noScaleCache&&c&&c._currentTransform){var g=c._currentTransform.target,m=c._currentTransform.action;if(this===g&&m.slice&&m.slice(0,5)==="scale")return!1}var C=this._cacheCanvas,S=this._limitCacheSize(this._getCacheCanvasDimensions()),x=S.width,w=S.height,_,E,I=S.zoomX,M=S.zoomY,z=x!==this.cacheWidth||w!==this.cacheHeight,Q=this.zoomX!==I||this.zoomY!==M,ee=z||Q;return ee?(z?(C.width=x,C.height=w):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,C.width,C.height)),_=S.x/2,E=S.y/2,this.cacheTranslationX=Math.round(C.width/2-_)+_,this.cacheTranslationY=Math.round(C.height/2-E)+E,this.cacheWidth=x,this.cacheHeight=w,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(I,M),this.zoomX=I,this.zoomY=M,!0):!1},setOptions:function(c){this._setOptions(c),this._initGradient(c.fill,"fill"),this._initGradient(c.stroke,"stroke"),this._initPattern(c.fill,"fill"),this._initPattern(c.stroke,"stroke")},transform:function(c){var g=this.group&&!this.group._transformDone||this.group&&this.canvas&&c===this.canvas.contextTop,m=this.calcTransformMatrix(!g);c.transform(m[0],m[1],m[2],m[3],m[4],m[5])},toObject:function(c){var g=n.Object.NUM_FRACTION_DIGITS,m={type:this.type,version:n.version,originX:this.originX,originY:this.originY,left:a(this.left,g),top:a(this.top,g),width:a(this.width,g),height:a(this.height,g),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:a(this.strokeWidth,g),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:a(this.strokeMiterLimit,g),scaleX:a(this.scaleX,g),scaleY:a(this.scaleY,g),angle:a(this.angle,g),flipX:this.flipX,flipY:this.flipY,opacity:a(this.opacity,g),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:a(this.skewX,g),skewY:a(this.skewY,g)};return this.clipPath&&!this.clipPath.excludeFromExport&&(m.clipPath=this.clipPath.toObject(c),m.clipPath.inverted=this.clipPath.inverted,m.clipPath.absolutePositioned=this.clipPath.absolutePositioned),n.util.populateWithProperties(this,m,c),this.includeDefaultValues||(m=this._removeDefaultValues(m)),m},toDatalessObject:function(c){return this.toObject(c)},_removeDefaultValues:function(c){var g=n.util.getKlass(c.type).prototype,m=g.stateProperties;return m.forEach(function(C){C==="left"||C==="top"||(c[C]===g[C]&&delete c[C],Array.isArray(c[C])&&Array.isArray(g[C])&&c[C].length===0&&g[C].length===0&&delete c[C])}),c},toString:function(){return"#<fabric."+o(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var c=n.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(c.scaleX),scaleY:Math.abs(c.scaleY)}},getTotalObjectScaling:function(){var c=this.getObjectScaling(),g=c.scaleX,m=c.scaleY;if(this.canvas){var C=this.canvas.getZoom(),S=this.canvas.getRetinaScaling();g*=C*S,m*=C*S}return{scaleX:g,scaleY:m}},getObjectOpacity:function(){var c=this.opacity;return this.group&&(c*=this.group.getObjectOpacity()),c},_set:function(c,g){var m=c==="scaleX"||c==="scaleY",C=this[c]!==g,S=!1;return m&&(g=this._constrainScale(g)),c==="scaleX"&&g<0?(this.flipX=!this.flipX,g*=-1):c==="scaleY"&&g<0?(this.flipY=!this.flipY,g*=-1):c==="shadow"&&g&&!(g instanceof n.Shadow)?g=new n.Shadow(g):c==="dirty"&&this.group&&this.group.set("dirty",g),this[c]=g,C&&(S=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(c)>-1?(this.dirty=!0,S&&this.group.set("dirty",!0)):S&&this.stateProperties.indexOf(c)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:n.iMatrix.concat()},isNotVisible:function(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible},render:function(c){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(c.save(),this._setupCompositeOperation(c),this.drawSelectionBackground(c),this.transform(c),this._setOpacity(c),this._setShadow(c,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(c)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(c),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),c.restore())},renderCache:function(c){c=c||{},(!this._cacheCanvas||!this._cacheContext)&&this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,c.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this._cacheContext=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0},hasFill:function(){return this.fill&&this.fill!=="transparent"},needsItsOwnCache:function(){return!!(this.paintFirst==="stroke"&&this.hasFill()&&this.hasStroke()&&typeof this.shadow=="object"||this.clipPath)},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)},drawClipPathOnCache:function(c,g){if(c.save(),g.inverted?c.globalCompositeOperation="destination-out":c.globalCompositeOperation="destination-in",g.absolutePositioned){var m=n.util.invertTransform(this.calcTransformMatrix());c.transform(m[0],m[1],m[2],m[3],m[4],m[5])}g.transform(c),c.scale(1/g.zoomX,1/g.zoomY),c.drawImage(g._cacheCanvas,-g.cacheTranslationX,-g.cacheTranslationY),c.restore()},drawObject:function(c,g){var m=this.fill,C=this.stroke;g?(this.fill="black",this.stroke="",this._setClippingProperties(c)):this._renderBackground(c),this._render(c),this._drawClipPath(c,this.clipPath),this.fill=m,this.stroke=C},_drawClipPath:function(c,g){g&&(g.canvas=this.canvas,g.shouldCache(),g._transformDone=!0,g.renderCache({forClipping:!0}),this.drawClipPathOnCache(c,g))},drawCacheOnCanvas:function(c){c.scale(1/this.zoomX,1/this.zoomY),c.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(c){if(this.isNotVisible())return!1;if(this._cacheCanvas&&this._cacheContext&&!c&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&this._cacheContext&&!c){var g=this.cacheWidth/this.zoomX,m=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-g/2,-m/2,g,m)}return!0}return!1},_renderBackground:function(c){if(this.backgroundColor){var g=this._getNonTransformedDimensions();c.fillStyle=this.backgroundColor,c.fillRect(-g.x/2,-g.y/2,g.x,g.y),this._removeShadow(c)}},_setOpacity:function(c){this.group&&!this.group._transformDone?c.globalAlpha=this.getObjectOpacity():c.globalAlpha*=this.opacity},_setStrokeStyles:function(c,g){var m=g.stroke;m&&(c.lineWidth=g.strokeWidth,c.lineCap=g.strokeLineCap,c.lineDashOffset=g.strokeDashOffset,c.lineJoin=g.strokeLineJoin,c.miterLimit=g.strokeMiterLimit,m.toLive?m.gradientUnits==="percentage"||m.gradientTransform||m.patternTransform?this._applyPatternForTransformedGradient(c,m):(c.strokeStyle=m.toLive(c,this),this._applyPatternGradientTransform(c,m)):c.strokeStyle=g.stroke)},_setFillStyles:function(c,g){var m=g.fill;m&&(m.toLive?(c.fillStyle=m.toLive(c,this),this._applyPatternGradientTransform(c,g.fill)):c.fillStyle=m)},_setClippingProperties:function(c){c.globalAlpha=1,c.strokeStyle="transparent",c.fillStyle="#000000"},_setLineDash:function(c,g){!g||g.length===0||(1&g.length&&g.push.apply(g,g),c.setLineDash(g))},_renderControls:function(c,g){var m=this.getViewportTransform(),C=this.calcTransformMatrix(),S,x,w;g=g||{},x=typeof g.hasBorders<"u"?g.hasBorders:this.hasBorders,w=typeof g.hasControls<"u"?g.hasControls:this.hasControls,C=n.util.multiplyTransformMatrices(m,C),S=n.util.qrDecompose(C),c.save(),c.translate(S.translateX,S.translateY),c.lineWidth=1*this.borderScaleFactor,this.group||(c.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(S.angle-=180),c.rotate(i(this.group?S.angle:this.angle)),g.forActiveSelection||this.group?x&&this.drawBordersInGroup(c,S,g):x&&this.drawBorders(c,g),w&&this.drawControls(c,g),c.restore()},_setShadow:function(c){if(this.shadow){var g=this.shadow,m=this.canvas,C,S=m&&m.viewportTransform[0]||1,x=m&&m.viewportTransform[3]||1;g.nonScaling?C={scaleX:1,scaleY:1}:C=this.getObjectScaling(),m&&m._isRetinaScaling()&&(S*=n.devicePixelRatio,x*=n.devicePixelRatio),c.shadowColor=g.color,c.shadowBlur=g.blur*n.browserShadowBlurConstant*(S+x)*(C.scaleX+C.scaleY)/4,c.shadowOffsetX=g.offsetX*S*C.scaleX,c.shadowOffsetY=g.offsetY*x*C.scaleY}},_removeShadow:function(c){this.shadow&&(c.shadowColor="",c.shadowBlur=c.shadowOffsetX=c.shadowOffsetY=0)},_applyPatternGradientTransform:function(c,g){if(!g||!g.toLive)return{offsetX:0,offsetY:0};var m=g.gradientTransform||g.patternTransform,C=-this.width/2+g.offsetX||0,S=-this.height/2+g.offsetY||0;return g.gradientUnits==="percentage"?c.transform(this.width,0,0,this.height,C,S):c.transform(1,0,0,1,C,S),m&&c.transform(m[0],m[1],m[2],m[3],m[4],m[5]),{offsetX:C,offsetY:S}},_renderPaintInOrder:function(c){this.paintFirst==="stroke"?(this._renderStroke(c),this._renderFill(c)):(this._renderFill(c),this._renderStroke(c))},_render:function(){},_renderFill:function(c){this.fill&&(c.save(),this._setFillStyles(c,this),this.fillRule==="evenodd"?c.fill("evenodd"):c.fill(),c.restore())},_renderStroke:function(c){if(!(!this.stroke||this.strokeWidth===0)){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(c),c.save(),this.strokeUniform&&this.group){var g=this.getObjectScaling();c.scale(1/g.scaleX,1/g.scaleY)}else this.strokeUniform&&c.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(c,this.strokeDashArray),this._setStrokeStyles(c,this),c.stroke(),c.restore()}},_applyPatternForTransformedGradient:function(c,g){var m=this._limitCacheSize(this._getCacheCanvasDimensions()),C=n.util.createCanvasElement(),S,x=this.canvas.getRetinaScaling(),w=m.x/this.scaleX/x,_=m.y/this.scaleY/x;C.width=Math.ceil(w),C.height=Math.ceil(_),S=C.getContext("2d"),S.beginPath(),S.moveTo(0,0),S.lineTo(w,0),S.lineTo(w,_),S.lineTo(0,_),S.closePath(),S.translate(w/2,_/2),S.scale(m.zoomX/this.scaleX/x,m.zoomY/this.scaleY/x),this._applyPatternGradientTransform(S,g),S.fillStyle=g.toLive(c),S.fill(),c.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),c.scale(x*this.scaleX/m.zoomX,x*this.scaleY/m.zoomY),c.strokeStyle=S.createPattern(C,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var c=n.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",c.scaleX),this.set("scaleY",c.scaleY),this.angle=c.angle,this.skewX=c.skewX,this.skewY=0}},_removeTransformMatrix:function(c){var g=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),g=n.util.transformPoint(g,this.transformMatrix)),this.transformMatrix=null,c&&(this.scaleX*=c.scaleX,this.scaleY*=c.scaleY,this.cropX=c.cropX,this.cropY=c.cropY,g.x+=c.offsetLeft,g.y+=c.offsetTop,this.width=c.width,this.height=c.height),this.setPositionByOrigin(g,"center","center")},clone:function(c,g){var m=this.toObject(g);this.constructor.fromObject?this.constructor.fromObject(m,c):n.Object._fromObject("Object",m,c)},cloneAsImage:function(c,g){var m=this.toCanvasElement(g);return c&&c(new n.Image(m)),this},toCanvasElement:function(c){c||(c={});var g=n.util,m=g.saveObjectTransform(this),C=this.group,S=this.shadow,x=Math.abs,w=(c.multiplier||1)*(c.enableRetinaScaling?n.devicePixelRatio:1);delete this.group,c.withoutTransform&&g.resetObjectTransform(this),c.withoutShadow&&(this.shadow=null);var _=n.util.createCanvasElement(),E=this.getBoundingRect(!0,!0),I=this.shadow,M,z={x:0,y:0},Q,ee,q;I&&(Q=I.blur,I.nonScaling?M={scaleX:1,scaleY:1}:M=this.getObjectScaling(),z.x=2*Math.round(x(I.offsetX)+Q)*x(M.scaleX),z.y=2*Math.round(x(I.offsetY)+Q)*x(M.scaleY)),ee=E.width+z.x,q=E.height+z.y,_.width=Math.ceil(ee),_.height=Math.ceil(q);var J=new n.StaticCanvas(_,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});c.format==="jpeg"&&(J.backgroundColor="#fff"),this.setPositionByOrigin(new n.Point(J.width/2,J.height/2),"center","center");var ie=this.canvas;J.add(this);var se=J.toCanvasElement(w||1,c);return this.shadow=S,this.set("canvas",ie),C&&(this.group=C),this.set(m).setCoords(),J._objects=[],J.dispose(),J=null,se},toDataURL:function(c){return c||(c={}),n.util.toDataURL(this.toCanvasElement(c),c.format||"png",c.quality||1)},isType:function(c){return arguments.length>1?Array.from(arguments).includes(this.type):this.type===c},complexity:function(){return 1},toJSON:function(c){return this.toObject(c)},rotate:function(c){var g=(this.originX!=="center"||this.originY!=="center")&&this.centeredRotation;return g&&this._setOriginToCenter(),this.set("angle",c),g&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(c,g){g=g||this.canvas.getPointer(c);var m=new n.Point(g.x,g.y),C=this._getLeftTopCoords();return this.angle&&(m=n.util.rotatePoint(m,C,i(-this.angle))),{x:m.x-C.x,y:m.y-C.y}},_setupCompositeOperation:function(c){this.globalCompositeOperation&&(c.globalCompositeOperation=this.globalCompositeOperation)},dispose:function(){n.runningAnimations&&n.runningAnimations.cancelByTarget(this)}}),n.util.createAccessors&&n.util.createAccessors(n.Object),f(n.Object.prototype,n.Observable),n.Object.NUM_FRACTION_DIGITS=2,n.Object.ENLIVEN_PROPS=["clipPath"],n.Object._fromObject=function(c,g,m,C){var S=n[c];g=h(g,!0),n.util.enlivenPatterns([g.fill,g.stroke],function(x){typeof x[0]<"u"&&(g.fill=x[0]),typeof x[1]<"u"&&(g.stroke=x[1]),n.util.enlivenObjectEnlivables(g,g,function(){var w=C?new S(g[C],g):new S(g);m&&m(w)})})},n.Object.__uid=0)}(e),function(){var u=t.util.degreesToRadians,n={left:-.5,center:0,right:.5},f={top:-.5,center:0,bottom:.5};t.util.object.extend(t.Object.prototype,{translateToGivenOrigin:function(h,a,o,i,l){var p=h.x,c=h.y,g,m,C;return typeof a=="string"?a=n[a]:a-=.5,typeof i=="string"?i=n[i]:i-=.5,g=i-a,typeof o=="string"?o=f[o]:o-=.5,typeof l=="string"?l=f[l]:l-=.5,m=l-o,(g||m)&&(C=this._getTransformedDimensions(),p=h.x+g*C.x,c=h.y+m*C.y),new t.Point(p,c)},translateToCenterPoint:function(h,a,o){var i=this.translateToGivenOrigin(h,a,o,"center","center");return this.angle?t.util.rotatePoint(i,h,u(this.angle)):i},translateToOriginPoint:function(h,a,o){var i=this.translateToGivenOrigin(h,"center","center",a,o);return this.angle?t.util.rotatePoint(i,h,u(this.angle)):i},getCenterPoint:function(){var h=new t.Point(this.left,this.top);return this.translateToCenterPoint(h,this.originX,this.originY)},getPointByOrigin:function(h,a){var o=this.getCenterPoint();return this.translateToOriginPoint(o,h,a)},toLocalPoint:function(h,a,o){var i=this.getCenterPoint(),l,p;return typeof a<"u"&&typeof o<"u"?l=this.translateToGivenOrigin(i,"center","center",a,o):l=new t.Point(this.left,this.top),p=new t.Point(h.x,h.y),this.angle&&(p=t.util.rotatePoint(p,i,-u(this.angle))),p.subtractEquals(l)},setPositionByOrigin:function(h,a,o){var i=this.translateToCenterPoint(h,a,o),l=this.translateToOriginPoint(i,this.originX,this.originY);this.set("left",l.x),this.set("top",l.y)},adjustPosition:function(h){var a=u(this.angle),o=this.getScaledWidth(),i=t.util.cos(a)*o,l=t.util.sin(a)*o,p,c;typeof this.originX=="string"?p=n[this.originX]:p=this.originX-.5,typeof h=="string"?c=n[h]:c=h-.5,this.left+=i*(c-p),this.top+=l*(c-p),this.setCoords(),this.originX=h},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var h=this.getCenterPoint();this.originX="center",this.originY="center",this.left=h.x,this.top=h.y},_resetOrigin:function(){var h=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=h.x,this.top=h.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){function u(o){return[new t.Point(o.tl.x,o.tl.y),new t.Point(o.tr.x,o.tr.y),new t.Point(o.br.x,o.br.y),new t.Point(o.bl.x,o.bl.y)]}var n=t.util,f=n.degreesToRadians,h=n.multiplyTransformMatrices,a=n.transformPoint;n.object.extend(t.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(o,i){return i?o?this.calcACoords():this.calcLineCoords():((!this.aCoords||!this.lineCoords)&&this.setCoords(!0),o?this.aCoords:this.lineCoords)},getCoords:function(o,i){return u(this._getCoords(o,i))},intersectsWithRect:function(o,i,l,p){var c=this.getCoords(l,p),g=t.Intersection.intersectPolygonRectangle(c,o,i);return g.status==="Intersection"},intersectsWithObject:function(o,i,l){var p=t.Intersection.intersectPolygonPolygon(this.getCoords(i,l),o.getCoords(i,l));return p.status==="Intersection"||o.isContainedWithinObject(this,i,l)||this.isContainedWithinObject(o,i,l)},isContainedWithinObject:function(o,i,l){for(var p=this.getCoords(i,l),c=i?o.aCoords:o.lineCoords,g=0,m=o._getImageLines(c);g<4;g++)if(!o.containsPoint(p[g],m))return!1;return!0},isContainedWithinRect:function(o,i,l,p){var c=this.getBoundingRect(l,p);return c.left>=o.x&&c.left+c.width<=i.x&&c.top>=o.y&&c.top+c.height<=i.y},containsPoint:function(o,g,l,p){var c=this._getCoords(l,p),g=g||this._getImageLines(c),m=this._findCrossPoints(o,g);return m!==0&&m%2===1},isOnScreen:function(o){if(!this.canvas)return!1;var i=this.canvas.vptCoords.tl,l=this.canvas.vptCoords.br,p=this.getCoords(!0,o);return p.some(function(c){return c.x<=l.x&&c.x>=i.x&&c.y<=l.y&&c.y>=i.y})||this.intersectsWithRect(i,l,!0,o)?!0:this._containsCenterOfCanvas(i,l,o)},_containsCenterOfCanvas:function(o,i,l){var p={x:(o.x+i.x)/2,y:(o.y+i.y)/2};return!!this.containsPoint(p,null,!0,l)},isPartiallyOnScreen:function(o){if(!this.canvas)return!1;var i=this.canvas.vptCoords.tl,l=this.canvas.vptCoords.br;if(this.intersectsWithRect(i,l,!0,o))return!0;var p=this.getCoords(!0,o).every(function(c){return(c.x>=l.x||c.x<=i.x)&&(c.y>=l.y||c.y<=i.y)});return p&&this._containsCenterOfCanvas(i,l,o)},_getImageLines:function(o){var i={topline:{o:o.tl,d:o.tr},rightline:{o:o.tr,d:o.br},bottomline:{o:o.br,d:o.bl},leftline:{o:o.bl,d:o.tl}};return i},_findCrossPoints:function(o,i){var l,p,c,g,m,C=0,S;for(var x in i)if(S=i[x],!(S.o.y<o.y&&S.d.y<o.y)&&!(S.o.y>=o.y&&S.d.y>=o.y)&&(S.o.x===S.d.x&&S.o.x>=o.x?m=S.o.x:(l=0,p=(S.d.y-S.o.y)/(S.d.x-S.o.x),c=o.y-l*o.x,g=S.o.y-p*S.o.x,m=-(c-g)/(l-p)),m>=o.x&&(C+=1),C===2))break;return C},getBoundingRect:function(o,i){var l=this.getCoords(o,i);return n.makeBoundingBoxFromPoints(l)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(o){return Math.abs(o)<this.minScaleLimit?o<0?-this.minScaleLimit:this.minScaleLimit:o===0?1e-4:o},scale:function(o){return this._set("scaleX",o),this._set("scaleY",o),this.setCoords()},scaleToWidth:function(o,i){var l=this.getBoundingRect(i).width/this.getScaledWidth();return this.scale(o/this.width/l)},scaleToHeight:function(o,i){var l=this.getBoundingRect(i).height/this.getScaledHeight();return this.scale(o/this.height/l)},calcLineCoords:function(){var o=this.getViewportTransform(),i=this.padding,l=f(this.angle),p=n.cos(l),c=n.sin(l),g=p*i,m=c*i,C=g+m,S=g-m,x=this.calcACoords(),w={tl:a(x.tl,o),tr:a(x.tr,o),bl:a(x.bl,o),br:a(x.br,o)};return i&&(w.tl.x-=S,w.tl.y-=C,w.tr.x+=C,w.tr.y-=S,w.bl.x-=C,w.bl.y+=S,w.br.x+=S,w.br.y+=C),w},calcOCoords:function(){var o=this._calcRotateMatrix(),i=this._calcTranslateMatrix(),l=this.getViewportTransform(),p=h(l,i),c=h(p,o),c=h(c,[1/l[0],0,0,1/l[3],0,0]),g=this._calculateCurrentDimensions(),m={};return this.forEachControl(function(C,S,x){m[S]=C.positionHandler(g,c,x)}),m},calcACoords:function(){var o=this._calcRotateMatrix(),i=this._calcTranslateMatrix(),l=h(i,o),p=this._getTransformedDimensions(),c=p.x/2,g=p.y/2;return{tl:a({x:-c,y:-g},l),tr:a({x:c,y:-g},l),bl:a({x:-c,y:g},l),br:a({x:c,y:g},l)}},setCoords:function(o){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),o?this:(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords(),this)},_calcRotateMatrix:function(){return n.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var o=this.getCenterPoint();return[1,0,0,1,o.x,o.y]},transformMatrixKey:function(o){var i="_",l="";return!o&&this.group&&(l=this.group.transformMatrixKey(o)+i),l+this.top+i+this.left+i+this.scaleX+i+this.scaleY+i+this.skewX+i+this.skewY+i+this.angle+i+this.originX+i+this.originY+i+this.width+i+this.height+i+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(o){var i=this.calcOwnMatrix();if(o||!this.group)return i;var l=this.transformMatrixKey(o),p=this.matrixCache||(this.matrixCache={});return p.key===l?p.value:(this.group&&(i=h(this.group.calcTransformMatrix(!1),i)),p.key=l,p.value=i,i)},calcOwnMatrix:function(){var o=this.transformMatrixKey(!0),i=this.ownMatrixCache||(this.ownMatrixCache={});if(i.key===o)return i.value;var l=this._calcTranslateMatrix(),p={angle:this.angle,translateX:l[4],translateY:l[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return i.key=o,i.value=n.composeMatrix(p),i.value},_getNonTransformedDimensions:function(){var o=this.strokeWidth,i=this.width+o,l=this.height+o;return{x:i,y:l}},_getTransformedDimensions:function(o,i){typeof o>"u"&&(o=this.skewX),typeof i>"u"&&(i=this.skewY);var l,p,c,g=o===0&&i===0;if(this.strokeUniform?(p=this.width,c=this.height):(l=this._getNonTransformedDimensions(),p=l.x,c=l.y),g)return this._finalizeDimensions(p*this.scaleX,c*this.scaleY);var m=n.sizeAfterTransform(p,c,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:o,skewY:i});return this._finalizeDimensions(m.x,m.y)},_finalizeDimensions:function(o,i){return this.strokeUniform?{x:o+this.strokeWidth,y:i+this.strokeWidth}:{x:o,y:i}},_calculateCurrentDimensions:function(){var o=this.getViewportTransform(),i=this._getTransformedDimensions(),l=a(i,o,!0);return l.scalarAdd(2*this.padding)}})}(),t.util.object.extend(t.Object.prototype,{sendToBack:function(){return this.group?t.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?t.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(u){return this.group?t.StaticCanvas.prototype.sendBackwards.call(this.group,this,u):this.canvas&&this.canvas.sendBackwards(this,u),this},bringForward:function(u){return this.group?t.StaticCanvas.prototype.bringForward.call(this.group,this,u):this.canvas&&this.canvas.bringForward(this,u),this},moveTo:function(u){return this.group&&this.group.type!=="activeSelection"?t.StaticCanvas.prototype.moveTo.call(this.group,this,u):this.canvas&&this.canvas.moveTo(this,u),this}}),function(){function u(f,h){if(h){if(h.toLive)return f+": url(#SVGID_"+h.id+"); ";var a=new t.Color(h),o=f+": "+a.toRgb()+"; ",i=a.getAlpha();return i!==1&&(o+=f+"-opacity: "+i.toString()+"; "),o}else return f+": none; "}var n=t.util.toFixed;t.util.object.extend(t.Object.prototype,{getSvgStyles:function(f){var h=this.fillRule?this.fillRule:"nonzero",a=this.strokeWidth?this.strokeWidth:"0",o=this.strokeDashArray?this.strokeDashArray.join(" "):"none",i=this.strokeDashOffset?this.strokeDashOffset:"0",l=this.strokeLineCap?this.strokeLineCap:"butt",p=this.strokeLineJoin?this.strokeLineJoin:"miter",c=this.strokeMiterLimit?this.strokeMiterLimit:"4",g=typeof this.opacity<"u"?this.opacity:"1",m=this.visible?"":" visibility: hidden;",C=f?"":this.getSvgFilter(),S=u("fill",this.fill),x=u("stroke",this.stroke);return[x,"stroke-width: ",a,"; ","stroke-dasharray: ",o,"; ","stroke-linecap: ",l,"; ","stroke-dashoffset: ",i,"; ","stroke-linejoin: ",p,"; ","stroke-miterlimit: ",c,"; ",S,"fill-rule: ",h,"; ","opacity: ",g,";",C,m].join("")},getSvgSpanStyles:function(f,h){var a="; ",i=f.fontFamily?"font-family: "+(f.fontFamily.indexOf("'")===-1&&f.fontFamily.indexOf('"')===-1?"'"+f.fontFamily+"'":f.fontFamily)+a:"",o=f.strokeWidth?"stroke-width: "+f.strokeWidth+a:"",i=i,l=f.fontSize?"font-size: "+f.fontSize+"px"+a:"",p=f.fontStyle?"font-style: "+f.fontStyle+a:"",c=f.fontWeight?"font-weight: "+f.fontWeight+a:"",g=f.fill?u("fill",f.fill):"",m=f.stroke?u("stroke",f.stroke):"",C=this.getSvgTextDecoration(f),S=f.deltaY?"baseline-shift: "+-f.deltaY+"; ":"";return C&&(C="text-decoration: "+C+a),[m,o,i,l,p,c,C,g,S,h?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(f){return["overline","underline","line-through"].filter(function(h){return f[h.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(f,h){var a=f?this.calcTransformMatrix():this.calcOwnMatrix(),o='transform="'+t.util.matrixToSVG(a);return o+(h||"")+'" '},_setSVGBg:function(f){if(this.backgroundColor){var h=t.Object.NUM_FRACTION_DIGITS;f.push("		<rect ",this._getFillAttributes(this.backgroundColor),' x="',n(-this.width/2,h),'" y="',n(-this.height/2,h),'" width="',n(this.width,h),'" height="',n(this.height,h),`"></rect>
`)}},toSVG:function(f){return this._createBaseSVGMarkup(this._toSVG(f),{reviver:f})},toClipPathSVG:function(f){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(f),{reviver:f})},_createBaseClipPathSVGMarkup:function(f,h){h=h||{};var a=h.reviver,o=h.additionalTransform||"",i=[this.getSvgTransform(!0,o),this.getSvgCommons()].join(""),l=f.indexOf("COMMON_PARTS");return f[l]=i,a?a(f.join("")):f.join("")},_createBaseSVGMarkup:function(f,h){h=h||{};var a=h.noStyle,o=h.reviver,i=a?"":'style="'+this.getSvgStyles()+'" ',l=h.withShadow?'style="'+this.getSvgFilter()+'" ':"",p=this.clipPath,c=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",g=p&&p.absolutePositioned,m=this.stroke,C=this.fill,S=this.shadow,x,w=[],_,E=f.indexOf("COMMON_PARTS"),I=h.additionalTransform;return p&&(p.clipPathId="CLIPPATH_"+t.Object.__uid++,_='<clipPath id="'+p.clipPathId+`" >
`+p.toClipPathSVG(o)+`</clipPath>
`),g&&w.push("<g ",l,this.getSvgCommons(),` >
`),w.push("<g ",this.getSvgTransform(!1),g?"":l+this.getSvgCommons(),` >
`),x=[i,c,a?"":this.addPaintOrder()," ",I?'transform="'+I+'" ':""].join(""),f[E]=x,C&&C.toLive&&w.push(C.toSVG(this)),m&&m.toLive&&w.push(m.toSVG(this)),S&&w.push(S.toSVG(this)),p&&w.push(_),w.push(f.join("")),w.push(`</g>
`),g&&w.push(`</g>
`),o?o(w.join("")):w.join("")},addPaintOrder:function(){return this.paintFirst!=="fill"?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var u=t.util.object.extend,n="stateProperties";function f(a,o,i){var l={},p=!0;i.forEach(function(c){l[c]=a[c]}),u(a[o],l,p)}function h(a,o,i){if(a===o)return!0;if(Array.isArray(a)){if(!Array.isArray(o)||a.length!==o.length)return!1;for(var l=0,p=a.length;l<p;l++)if(!h(a[l],o[l]))return!1;return!0}else if(a&&typeof a=="object"){var c=Object.keys(a),g;if(!o||typeof o!="object"||!i&&c.length!==Object.keys(o).length)return!1;for(var l=0,p=c.length;l<p;l++)if(g=c[l],!(g==="canvas"||g==="group")&&!h(a[g],o[g]))return!1;return!0}}t.util.object.extend(t.Object.prototype,{hasStateChanged:function(a){a=a||n;var o="_"+a;return Object.keys(this[o]).length<this[a].length?!0:!h(this[o],this,!0)},saveState:function(a){var o=a&&a.propertySet||n,i="_"+o;return this[i]?(f(this,i,this[o]),a&&a.stateProperties&&f(this,i,a.stateProperties),this):this.setupState(a)},setupState:function(a){a=a||{};var o=a.propertySet||n;return a.propertySet=o,this["_"+o]={},this.saveState(a),this}})}(),function(){var u=t.util.degreesToRadians;t.util.object.extend(t.Object.prototype,{_findTargetCorner:function(n,f){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var h=n.x,a=n.y,o,i,l=Object.keys(this.oCoords),p=l.length-1,c;for(this.__corner=0;p>=0;p--)if(c=l[p],!!this.isControlVisible(c)&&(i=this._getImageLines(f?this.oCoords[c].touchCorner:this.oCoords[c].corner),o=this._findCrossPoints({x:h,y:a},i),o!==0&&o%2===1))return this.__corner=c,c;return!1},forEachControl:function(n){for(var f in this.controls)n(this.controls[f],f,this)},_setCornerCoords:function(){var n=this.oCoords;for(var f in n){var h=this.controls[f];n[f].corner=h.calcCornerCoords(this.angle,this.cornerSize,n[f].x,n[f].y,!1),n[f].touchCorner=h.calcCornerCoords(this.angle,this.touchCornerSize,n[f].x,n[f].y,!0)}},drawSelectionBackground:function(n){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;n.save();var f=this.getCenterPoint(),h=this._calculateCurrentDimensions(),a=this.canvas.viewportTransform;return n.translate(f.x,f.y),n.scale(1/a[0],1/a[3]),n.rotate(u(this.angle)),n.fillStyle=this.selectionBackgroundColor,n.fillRect(-h.x/2,-h.y/2,h.x,h.y),n.restore(),this},drawBorders:function(n,f){f=f||{};var h=this._calculateCurrentDimensions(),a=this.borderScaleFactor,o=h.x+a,i=h.y+a,l=typeof f.hasControls<"u"?f.hasControls:this.hasControls,p=!1;return n.save(),n.strokeStyle=f.borderColor||this.borderColor,this._setLineDash(n,f.borderDashArray||this.borderDashArray),n.strokeRect(-o/2,-i/2,o,i),l&&(n.beginPath(),this.forEachControl(function(c,g,m){c.withConnection&&c.getVisibility(m,g)&&(p=!0,n.moveTo(c.x*o,c.y*i),n.lineTo(c.x*o+c.offsetX,c.y*i+c.offsetY))}),p&&n.stroke()),n.restore(),this},drawBordersInGroup:function(n,f,h){h=h||{};var a=t.util.sizeAfterTransform(this.width,this.height,f),o=this.strokeWidth,i=this.strokeUniform,l=this.borderScaleFactor,p=a.x+o*(i?this.canvas.getZoom():f.scaleX)+l,c=a.y+o*(i?this.canvas.getZoom():f.scaleY)+l;return n.save(),this._setLineDash(n,h.borderDashArray||this.borderDashArray),n.strokeStyle=h.borderColor||this.borderColor,n.strokeRect(-p/2,-c/2,p,c),n.restore(),this},drawControls:function(n,f){f=f||{},n.save();var h=1,a,o;return this.canvas&&(h=this.canvas.getRetinaScaling()),n.setTransform(h,0,0,h,0,0),n.strokeStyle=n.fillStyle=f.cornerColor||this.cornerColor,this.transparentCorners||(n.strokeStyle=f.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(n,f.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(a=this.group.calcTransformMatrix()),this.forEachControl(function(i,l,p){o=p.oCoords[l],i.getVisibility(p,l)&&(a&&(o=t.util.transformPoint(o,a)),i.render(n,o.x,o.y,f,p))}),n.restore(),this},isControlVisible:function(n){return this.controls[n]&&this.controls[n].getVisibility(this,n)},setControlVisible:function(n,f){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[n]=f,this},setControlsVisibility:function(n){n||(n={});for(var f in n)this.setControlVisible(f,n[f]);return this},onDeselect:function(){},onSelect:function(){}})}(),t.util.object.extend(t.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(u,n){n=n||{};var f=function(){},h=n.onComplete||f,a=n.onChange||f,o=this;return t.util.animate({target:this,startValue:u.left,endValue:this.getCenterPoint().x,duration:this.FX_DURATION,onChange:function(i){u.set("left",i),o.requestRenderAll(),a()},onComplete:function(){u.setCoords(),h()}})},fxCenterObjectV:function(u,n){n=n||{};var f=function(){},h=n.onComplete||f,a=n.onChange||f,o=this;return t.util.animate({target:this,startValue:u.top,endValue:this.getCenterPoint().y,duration:this.FX_DURATION,onChange:function(i){u.set("top",i),o.requestRenderAll(),a()},onComplete:function(){u.setCoords(),h()}})},fxRemove:function(u,n){n=n||{};var f=function(){},h=n.onComplete||f,a=n.onChange||f,o=this;return t.util.animate({target:this,startValue:u.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(i){u.set("opacity",i),o.requestRenderAll(),a()},onComplete:function(){o.remove(u),h()}})}}),t.util.object.extend(t.Object.prototype,{animate:function(){if(arguments[0]&&typeof arguments[0]=="object"){var u=[],n,f,h=[];for(n in arguments[0])u.push(n);for(var a=0,o=u.length;a<o;a++)n=u[a],f=a!==o-1,h.push(this._animate(n,arguments[0][n],arguments[1],f));return h}else return this._animate.apply(this,arguments)},_animate:function(u,n,f,h){var a=this,o;n=n.toString(),f?f=t.util.object.clone(f):f={},~u.indexOf(".")&&(o=u.split("."));var i=a.colorProperties.indexOf(u)>-1||o&&a.colorProperties.indexOf(o[1])>-1,l=o?this.get(o[0])[o[1]]:this.get(u);"from"in f||(f.from=l),i||(~n.indexOf("=")?n=l+parseFloat(n.replace("=","")):n=parseFloat(n));var p={target:this,startValue:f.from,endValue:n,byValue:f.by,easing:f.easing,duration:f.duration,abort:f.abort&&function(c,g,m){return f.abort.call(a,c,g,m)},onChange:function(c,g,m){o?a[o[0]][o[1]]=c:a.set(u,c),!h&&f.onChange&&f.onChange(c,g,m)},onComplete:function(c,g,m){h||(a.setCoords(),f.onComplete&&f.onComplete(c,g,m))}};return i?t.util.animateColor(p.startValue,p.endValue,p.duration,p):t.util.animate(p)}}),function(u){var n=u.fabric||(u.fabric={}),f=n.util.object.extend,h=n.util.object.clone,a={x1:1,x2:1,y1:1,y2:1};if(n.Line){n.warn("fabric.Line is already defined");return}n.Line=n.util.createClass(n.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:n.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(i,l){i||(i=[0,0,0,0]),this.callSuper("initialize",l),this.set("x1",i[0]),this.set("y1",i[1]),this.set("x2",i[2]),this.set("y2",i[3]),this._setWidthHeight(l)},_setWidthHeight:function(i){i||(i={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in i?i.left:this._getLeftToOriginX(),this.top="top"in i?i.top:this._getTopToOriginY()},_set:function(i,l){return this.callSuper("_set",i,l),typeof a[i]<"u"&&this._setWidthHeight(),this},_getLeftToOriginX:o({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:o({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(i){i.beginPath();var l=this.calcLinePoints();i.moveTo(l.x1,l.y1),i.lineTo(l.x2,l.y2),i.lineWidth=this.strokeWidth;var p=i.strokeStyle;i.strokeStyle=this.stroke||i.fillStyle,this.stroke&&this._renderStroke(i),i.strokeStyle=p},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(i){return f(this.callSuper("toObject",i),this.calcLinePoints())},_getNonTransformedDimensions:function(){var i=this.callSuper("_getNonTransformedDimensions");return this.strokeLineCap==="butt"&&(this.width===0&&(i.y-=this.strokeWidth),this.height===0&&(i.x-=this.strokeWidth)),i},calcLinePoints:function(){var i=this.x1<=this.x2?-1:1,l=this.y1<=this.y2?-1:1,p=i*this.width*.5,c=l*this.height*.5,g=i*this.width*-.5,m=l*this.height*-.5;return{x1:p,x2:g,y1:c,y2:m}},_toSVG:function(){var i=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',i.x1,'" y1="',i.y1,'" x2="',i.x2,'" y2="',i.y2,`" />
`]}}),n.Line.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),n.Line.fromElement=function(i,l,p){p=p||{};var c=n.parseAttributes(i,n.Line.ATTRIBUTE_NAMES),g=[c.x1||0,c.y1||0,c.x2||0,c.y2||0];l(new n.Line(g,f(c,p)))},n.Line.fromObject=function(i,l){function p(g){delete g.points,l&&l(g)}var c=h(i,!0);c.points=[i.x1,i.y1,i.x2,i.y2],n.Object._fromObject("Line",c,p,"points")};function o(i,l){var p=i.origin,c=i.axis1,g=i.axis2,m=i.dimension,C=l.nearest,S=l.center,x=l.farthest;return function(){switch(this.get(p)){case C:return Math.min(this.get(c),this.get(g));case S:return Math.min(this.get(c),this.get(g))+.5*this.get(m);case x:return Math.max(this.get(c),this.get(g))}}}}(e),function(u){var n=u.fabric||(u.fabric={}),f=n.util.degreesToRadians;if(n.Circle){n.warn("fabric.Circle is already defined.");return}n.Circle=n.util.createClass(n.Object,{type:"circle",radius:0,startAngle:0,endAngle:360,cacheProperties:n.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(a,o){return this.callSuper("_set",a,o),a==="radius"&&this.setRadius(o),this},toObject:function(a){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(a))},_toSVG:function(){var a,o=0,i=0,l=(this.endAngle-this.startAngle)%360;if(l===0)a=["<circle ","COMMON_PARTS",'cx="'+o+'" cy="'+i+'" ','r="',this.radius,`" />
`];else{var p=f(this.startAngle),c=f(this.endAngle),g=this.radius,m=n.util.cos(p)*g,C=n.util.sin(p)*g,S=n.util.cos(c)*g,x=n.util.sin(c)*g,w=l>180?"1":"0";a=['<path d="M '+m+" "+C," A "+g+" "+g," 0 ",+w+" 1"," "+S+" "+x,'" ',"COMMON_PARTS",` />
`]}return a},_render:function(a){a.beginPath(),a.arc(0,0,this.radius,f(this.startAngle),f(this.endAngle),!1),this._renderPaintInOrder(a)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(a){return this.radius=a,this.set("width",a*2).set("height",a*2)}}),n.Circle.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),n.Circle.fromElement=function(a,o){var i=n.parseAttributes(a,n.Circle.ATTRIBUTE_NAMES);if(!h(i))throw new Error("value of `r` attribute is required and can not be negative");i.left=(i.left||0)-i.radius,i.top=(i.top||0)-i.radius,o(new n.Circle(i))};function h(a){return"radius"in a&&a.radius>=0}n.Circle.fromObject=function(a,o){n.Object._fromObject("Circle",a,o)}}(e),function(u){var n=u.fabric||(u.fabric={});if(n.Triangle){n.warn("fabric.Triangle is already defined");return}n.Triangle=n.util.createClass(n.Object,{type:"triangle",width:100,height:100,_render:function(f){var h=this.width/2,a=this.height/2;f.beginPath(),f.moveTo(-h,a),f.lineTo(0,-a),f.lineTo(h,a),f.closePath(),this._renderPaintInOrder(f)},_toSVG:function(){var f=this.width/2,h=this.height/2,a=[-f+" "+h,"0 "+-h,f+" "+h].join(",");return["<polygon ","COMMON_PARTS",'points="',a,'" />']}}),n.Triangle.fromObject=function(f,h){return n.Object._fromObject("Triangle",f,h)}}(e),function(u){var n=u.fabric||(u.fabric={}),f=Math.PI*2;if(n.Ellipse){n.warn("fabric.Ellipse is already defined.");return}n.Ellipse=n.util.createClass(n.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:n.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(h){this.callSuper("initialize",h),this.set("rx",h&&h.rx||0),this.set("ry",h&&h.ry||0)},_set:function(h,a){switch(this.callSuper("_set",h,a),h){case"rx":this.rx=a,this.set("width",a*2);break;case"ry":this.ry=a,this.set("height",a*2);break}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(h){return this.callSuper("toObject",["rx","ry"].concat(h))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,`" />
`]},_render:function(h){h.beginPath(),h.save(),h.transform(1,0,0,this.ry/this.rx,0,0),h.arc(0,0,this.rx,0,f,!1),h.restore(),this._renderPaintInOrder(h)}}),n.Ellipse.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),n.Ellipse.fromElement=function(h,a){var o=n.parseAttributes(h,n.Ellipse.ATTRIBUTE_NAMES);o.left=(o.left||0)-o.rx,o.top=(o.top||0)-o.ry,a(new n.Ellipse(o))},n.Ellipse.fromObject=function(h,a){n.Object._fromObject("Ellipse",h,a)}}(e),function(u){var n=u.fabric||(u.fabric={}),f=n.util.object.extend;if(n.Rect){n.warn("fabric.Rect is already defined");return}n.Rect=n.util.createClass(n.Object,{stateProperties:n.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:n.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(h){this.callSuper("initialize",h),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(h){var a=this.rx?Math.min(this.rx,this.width/2):0,o=this.ry?Math.min(this.ry,this.height/2):0,i=this.width,l=this.height,p=-this.width/2,c=-this.height/2,g=a!==0||o!==0,m=1-.5522847498;h.beginPath(),h.moveTo(p+a,c),h.lineTo(p+i-a,c),g&&h.bezierCurveTo(p+i-m*a,c,p+i,c+m*o,p+i,c+o),h.lineTo(p+i,c+l-o),g&&h.bezierCurveTo(p+i,c+l-m*o,p+i-m*a,c+l,p+i-a,c+l),h.lineTo(p+a,c+l),g&&h.bezierCurveTo(p+m*a,c+l,p,c+l-m*o,p,c+l-o),h.lineTo(p,c+o),g&&h.bezierCurveTo(p,c+m*o,p+m*a,c,p+a,c),h.closePath(),this._renderPaintInOrder(h)},toObject:function(h){return this.callSuper("toObject",["rx","ry"].concat(h))},_toSVG:function(){var h=-this.width/2,a=-this.height/2;return["<rect ","COMMON_PARTS",'x="',h,'" y="',a,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,`" />
`]}}),n.Rect.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),n.Rect.fromElement=function(h,a,o){if(!h)return a(null);o=o||{};var i=n.parseAttributes(h,n.Rect.ATTRIBUTE_NAMES);i.left=i.left||0,i.top=i.top||0,i.height=i.height||0,i.width=i.width||0;var l=new n.Rect(f(o?n.util.object.clone(o):{},i));l.visible=l.visible&&l.width>0&&l.height>0,a(l)},n.Rect.fromObject=function(h,a){return n.Object._fromObject("Rect",h,a)}}(e),function(u){var n=u.fabric||(u.fabric={}),f=n.util.object.extend,h=n.util.array.min,a=n.util.array.max,o=n.util.toFixed,i=n.util.projectStrokeOnPoints;if(n.Polyline){n.warn("fabric.Polyline is already defined");return}n.Polyline=n.util.createClass(n.Object,{type:"polyline",points:null,exactBoundingBox:!1,cacheProperties:n.Object.prototype.cacheProperties.concat("points"),initialize:function(l,p){p=p||{},this.points=l||[],this.callSuper("initialize",p),this._setPositionDimensions(p)},_projectStrokeOnPoints:function(){return i(this.points,this,!0)},_setPositionDimensions:function(l){var p=this._calcDimensions(l),c,g=this.exactBoundingBox?this.strokeWidth:0;this.width=p.width-g,this.height=p.height-g,l.fromSVG||(c=this.translateToGivenOrigin({x:p.left-this.strokeWidth/2+g/2,y:p.top-this.strokeWidth/2+g/2},"left","top",this.originX,this.originY)),typeof l.left>"u"&&(this.left=l.fromSVG?p.left:c.x),typeof l.top>"u"&&(this.top=l.fromSVG?p.top:c.y),this.pathOffset={x:p.left+this.width/2+g/2,y:p.top+this.height/2+g/2}},_calcDimensions:function(){var l=this.exactBoundingBox?this._projectStrokeOnPoints():this.points,p=h(l,"x")||0,c=h(l,"y")||0,g=a(l,"x")||0,m=a(l,"y")||0,C=g-p,S=m-c;return{left:p,top:c,width:C,height:S}},toObject:function(l){return f(this.callSuper("toObject",l),{points:this.points.concat()})},_toSVG:function(){for(var l=[],p=this.pathOffset.x,c=this.pathOffset.y,g=n.Object.NUM_FRACTION_DIGITS,m=0,C=this.points.length;m<C;m++)l.push(o(this.points[m].x-p,g),",",o(this.points[m].y-c,g)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',l.join(""),`" />
`]},commonRender:function(l){var p,c=this.points.length,g=this.pathOffset.x,m=this.pathOffset.y;if(!c||isNaN(this.points[c-1].y))return!1;l.beginPath(),l.moveTo(this.points[0].x-g,this.points[0].y-m);for(var C=0;C<c;C++)p=this.points[C],l.lineTo(p.x-g,p.y-m);return!0},_render:function(l){this.commonRender(l)&&this._renderPaintInOrder(l)},complexity:function(){return this.get("points").length}}),n.Polyline.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat(),n.Polyline.fromElementGenerator=function(l){return function(p,c,g){if(!p)return c(null);g||(g={});var m=n.parsePointsAttribute(p.getAttribute("points")),C=n.parseAttributes(p,n[l].ATTRIBUTE_NAMES);C.fromSVG=!0,c(new n[l](m,f(C,g)))}},n.Polyline.fromElement=n.Polyline.fromElementGenerator("Polyline"),n.Polyline.fromObject=function(l,p){return n.Object._fromObject("Polyline",l,p,"points")}}(e),function(u){var n=u.fabric||(u.fabric={}),f=n.util.projectStrokeOnPoints;if(n.Polygon){n.warn("fabric.Polygon is already defined");return}n.Polygon=n.util.createClass(n.Polyline,{type:"polygon",_projectStrokeOnPoints:function(){return f(this.points,this)},_render:function(h){this.commonRender(h)&&(h.closePath(),this._renderPaintInOrder(h))}}),n.Polygon.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat(),n.Polygon.fromElement=n.Polyline.fromElementGenerator("Polygon"),n.Polygon.fromObject=function(h,a){n.Object._fromObject("Polygon",h,a,"points")}}(e),function(u){var n=u.fabric||(u.fabric={}),f=n.util.array.min,h=n.util.array.max,a=n.util.object.extend,o=n.util.object.clone,i=n.util.toFixed;if(n.Path){n.warn("fabric.Path is already defined");return}n.Path=n.util.createClass(n.Object,{type:"path",path:null,cacheProperties:n.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:n.Object.prototype.stateProperties.concat("path"),initialize:function(l,p){p=o(p||{}),delete p.path,this.callSuper("initialize",p),this._setPath(l||[],p)},_setPath:function(l,p){this.path=n.util.makePathSimpler(Array.isArray(l)?l:n.util.parsePath(l)),n.Polyline.prototype._setPositionDimensions.call(this,p||{})},_renderPathCommands:function(l){var p,c=0,g=0,m=0,C=0,S=0,x=0,w=-this.pathOffset.x,_=-this.pathOffset.y;l.beginPath();for(var E=0,I=this.path.length;E<I;++E)switch(p=this.path[E],p[0]){case"L":m=p[1],C=p[2],l.lineTo(m+w,C+_);break;case"M":m=p[1],C=p[2],c=m,g=C,l.moveTo(m+w,C+_);break;case"C":m=p[5],C=p[6],S=p[3],x=p[4],l.bezierCurveTo(p[1]+w,p[2]+_,S+w,x+_,m+w,C+_);break;case"Q":l.quadraticCurveTo(p[1]+w,p[2]+_,p[3]+w,p[4]+_),m=p[3],C=p[4],S=p[1],x=p[2];break;case"z":case"Z":m=c,C=g,l.closePath();break}},_render:function(l){this._renderPathCommands(l),this._renderPaintInOrder(l)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(l){return a(this.callSuper("toObject",l),{path:this.path.map(function(p){return p.slice()})})},toDatalessObject:function(l){var p=this.toObject(["sourcePath"].concat(l));return p.sourcePath&&delete p.path,p},_toSVG:function(){var l=n.util.joinPath(this.path);return["<path ","COMMON_PARTS",'d="',l,'" stroke-linecap="round" ',`/>
`]},_getOffsetTransform:function(){var l=n.Object.NUM_FRACTION_DIGITS;return" translate("+i(-this.pathOffset.x,l)+", "+i(-this.pathOffset.y,l)+")"},toClipPathSVG:function(l){var p=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:l,additionalTransform:p})},toSVG:function(l){var p=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:l,additionalTransform:p})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var l=[],p=[],c,g=0,m=0,C=0,S=0,x,w=0,_=this.path.length;w<_;++w){switch(c=this.path[w],c[0]){case"L":C=c[1],S=c[2],x=[];break;case"M":C=c[1],S=c[2],g=C,m=S,x=[];break;case"C":x=n.util.getBoundsOfCurve(C,S,c[1],c[2],c[3],c[4],c[5],c[6]),C=c[5],S=c[6];break;case"Q":x=n.util.getBoundsOfCurve(C,S,c[1],c[2],c[1],c[2],c[3],c[4]),C=c[3],S=c[4];break;case"z":case"Z":C=g,S=m;break}x.forEach(function(q){l.push(q.x),p.push(q.y)}),l.push(C),p.push(S)}var E=f(l)||0,I=f(p)||0,M=h(l)||0,z=h(p)||0,Q=M-E,ee=z-I;return{left:E,top:I,width:Q,height:ee}}}),n.Path.fromObject=function(l,p){if(typeof l.sourcePath=="string"){var c=l.sourcePath;n.loadSVGFromURL(c,function(g){var m=g[0];m.setOptions(l),l.clipPath?n.util.enlivenObjects([l.clipPath],function(C){m.clipPath=C[0],p&&p(m)}):p&&p(m)})}else n.Object._fromObject("Path",l,p,"path")},n.Path.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat(["d"]),n.Path.fromElement=function(l,p,c){var g=n.parseAttributes(l,n.Path.ATTRIBUTE_NAMES);g.fromSVG=!0,p(new n.Path(g.d,a(g,c)))}}(e),function(u){var n=u.fabric||(u.fabric={}),f=n.util.array.min,h=n.util.array.max;n.Group||(n.Group=n.util.createClass(n.Object,n.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(a,o,i){o=o||{},this._objects=[],i&&this.callSuper("initialize",o),this._objects=a||[];for(var l=this._objects.length;l--;)this._objects[l].group=this;if(i)this._updateObjectsACoords();else{var p=o&&o.centerPoint;o.originX!==void 0&&(this.originX=o.originX),o.originY!==void 0&&(this.originY=o.originY),p||this._calcBounds(),this._updateObjectsCoords(p),delete o.centerPoint,this.callSuper("initialize",o)}this.setCoords()},_updateObjectsACoords:function(){for(var a=!0,o=this._objects.length;o--;)this._objects[o].setCoords(a)},_updateObjectsCoords:function(o){for(var o=o||this.getCenterPoint(),i=this._objects.length;i--;)this._updateObjectCoords(this._objects[i],o)},_updateObjectCoords:function(a,o){var i=a.left,l=a.top,p=!0;a.set({left:i-o.x,top:l-o.y}),a.group=this,a.setCoords(p)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(a){var o=!!this.group;return this._restoreObjectsState(),n.util.resetObjectTransform(this),a&&(o&&n.util.removeTransformFromObject(a,this.group.calcTransformMatrix()),this._objects.push(a),a.group=this,a._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,o?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(a){return this._restoreObjectsState(),n.util.resetObjectTransform(this),this.remove(a),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(a){this.dirty=!0,a.group=this,a._set("canvas",this.canvas)},_onObjectRemoved:function(a){this.dirty=!0,delete a.group},_set:function(a,o){var i=this._objects.length;if(this.useSetOnGroup)for(;i--;)this._objects[i].setOnGroup(a,o);if(a==="canvas")for(;i--;)this._objects[i]._set(a,o);n.Object.prototype._set.call(this,a,o)},toObject:function(a){var o=this.includeDefaultValues,i=this._objects.filter(function(p){return!p.excludeFromExport}).map(function(p){var c=p.includeDefaultValues;p.includeDefaultValues=o;var g=p.toObject(a);return p.includeDefaultValues=c,g}),l=n.Object.prototype.toObject.call(this,a);return l.objects=i,l},toDatalessObject:function(a){var o,i=this.sourcePath;if(i)o=i;else{var l=this.includeDefaultValues;o=this._objects.map(function(c){var g=c.includeDefaultValues;c.includeDefaultValues=l;var m=c.toDatalessObject(a);return c.includeDefaultValues=g,m})}var p=n.Object.prototype.toDatalessObject.call(this,a);return p.objects=o,p},render:function(a){this._transformDone=!0,this.callSuper("render",a),this._transformDone=!1},shouldCache:function(){var a=n.Object.prototype.shouldCache.call(this);if(a){for(var o=0,i=this._objects.length;o<i;o++)if(this._objects[o].willDrawShadow())return this.ownCaching=!1,!1}return a},willDrawShadow:function(){if(n.Object.prototype.willDrawShadow.call(this))return!0;for(var a=0,o=this._objects.length;a<o;a++)if(this._objects[a].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(a){for(var o=0,i=this._objects.length;o<i;o++)this._objects[o].render(a);this._drawClipPath(a,this.clipPath)},isCacheDirty:function(a){if(this.callSuper("isCacheDirty",a))return!0;if(!this.statefullCache)return!1;for(var o=0,i=this._objects.length;o<i;o++)if(this._objects[o].isCacheDirty(!0)){if(this._cacheCanvas){var l=this.cacheWidth/this.zoomX,p=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-l/2,-p/2,l,p)}return!0}return!1},_restoreObjectsState:function(){var a=this.calcOwnMatrix();return this._objects.forEach(function(o){n.util.addTransformToObject(o,a),delete o.group,o.setCoords()}),this},destroy:function(){return this._objects.forEach(function(a){a.set("dirty",!0)}),this._restoreObjectsState()},dispose:function(){this.callSuper("dispose"),this.forEachObject(function(a){a.dispose&&a.dispose()}),this._objects=[]},toActiveSelection:function(){if(this.canvas){var a=this._objects,o=this.canvas;this._objects=[];var i=this.toObject();delete i.objects;var l=new n.ActiveSelection([]);return l.set(i),l.type="activeSelection",o.remove(this),a.forEach(function(p){p.group=l,p.dirty=!0,o.add(p)}),l.canvas=o,l._objects=a,o._activeObject=l,l.setCoords(),l}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){var a=!0;return this.forEachObject(function(o){o.setCoords(a)}),this},_calcBounds:function(a){for(var o=[],i=[],l,p,c,g=["tr","br","bl","tl"],m=0,C=this._objects.length,S,x=g.length;m<C;++m){for(l=this._objects[m],c=l.calcACoords(),S=0;S<x;S++)p=g[S],o.push(c[p].x),i.push(c[p].y);l.aCoords=c}this._getBounds(o,i,a)},_getBounds:function(a,o,i){var l=new n.Point(f(a),f(o)),p=new n.Point(h(a),h(o)),c=l.y||0,g=l.x||0,m=p.x-l.x||0,C=p.y-l.y||0;this.width=m,this.height=C,i||this.setPositionByOrigin({x:g,y:c},"left","top")},_toSVG:function(a){for(var o=["<g ","COMMON_PARTS",` >
`],i=0,l=this._objects.length;i<l;i++)o.push("		",this._objects[i].toSVG(a));return o.push(`</g>
`),o},getSvgStyles:function(){var a=typeof this.opacity<"u"&&this.opacity!==1?"opacity: "+this.opacity+";":"",o=this.visible?"":" visibility: hidden;";return[a,this.getSvgFilter(),o].join("")},toClipPathSVG:function(a){for(var o=[],i=0,l=this._objects.length;i<l;i++)o.push("	",this._objects[i].toClipPathSVG(a));return this._createBaseClipPathSVGMarkup(o,{reviver:a})}}),n.Group.fromObject=function(a,o){var i=a.objects,l=n.util.object.clone(a,!0);if(delete l.objects,typeof i=="string"){n.loadSVGFromURL(i,function(p){var c=n.util.groupSVGElements(p,a,i),g=l.clipPath;delete l.clipPath,c.set(l),g?n.util.enlivenObjects([g],function(m){c.clipPath=m[0],o&&o(c)}):o&&o(c)});return}n.util.enlivenObjects(i,function(p){n.util.enlivenObjectEnlivables(a,l,function(){o&&o(new n.Group(p,l,!0))})})})}(e),function(u){var n=u.fabric||(u.fabric={});n.ActiveSelection||(n.ActiveSelection=n.util.createClass(n.Group,{type:"activeSelection",initialize:function(f,h){h=h||{},this._objects=f||[];for(var a=this._objects.length;a--;)this._objects[a].group=this;h.originX&&(this.originX=h.originX),h.originY&&(this.originY=h.originY),this._calcBounds(),this._updateObjectsCoords(),n.Object.prototype.initialize.call(this,h),this.setCoords()},toGroup:function(){var f=this._objects.concat();this._objects=[];var h=n.Object.prototype.toObject.call(this),a=new n.Group([]);if(delete h.type,a.set(h),f.forEach(function(i){i.canvas.remove(i),i.group=a}),a._objects=f,!this.canvas)return a;var o=this.canvas;return o.add(a),o._activeObject=a,a.setCoords(),a},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(f,h,a){f.save(),f.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,a=a||{},typeof a.hasControls>"u"&&(a.hasControls=!1),a.forActiveSelection=!0;for(var o=0,i=this._objects.length;o<i;o++)this._objects[o]._renderControls(f,a);this.callSuper("_renderControls",f,h),f.restore()}}),n.ActiveSelection.fromObject=function(f,h){n.util.enlivenObjects(f.objects,function(a){delete f.objects,h&&h(new n.ActiveSelection(a,f,!0))})})}(e),function(u){var n=t.util.object.extend;if(u.fabric||(u.fabric={}),u.fabric.Image){t.warn("fabric.Image is already defined.");return}t.Image=t.util.createClass(t.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:t.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:t.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(f,h){h||(h={}),this.filters=[],this.cacheKey="texture"+t.Object.__uid++,this.callSuper("initialize",h),this._initElement(f,h)},getElement:function(){return this._element||{}},setElement:function(f,h){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=f,this._originalElement=f,this._initConfig(h),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(f){var h=t.filterBackend;h&&h.evictCachesForKey&&h.evictCachesForKey(f)},dispose:function(){this.callSuper("dispose"),this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach((function(f){t.util.cleanUpJsdomNode(this[f]),this[f]=void 0}).bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var f=this.getElement();return{width:f.naturalWidth||f.width,height:f.naturalHeight||f.height}},_stroke:function(f){if(!(!this.stroke||this.strokeWidth===0)){var h=this.width/2,a=this.height/2;f.beginPath(),f.moveTo(-h,-a),f.lineTo(h,-a),f.lineTo(h,a),f.lineTo(-h,a),f.lineTo(-h,-a),f.closePath()}},toObject:function(f){var h=[];this.filters.forEach(function(o){o&&h.push(o.toObject())});var a=n(this.callSuper("toObject",["cropX","cropY"].concat(f)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:h});return this.resizeFilter&&(a.resizeFilter=this.resizeFilter.toObject()),a},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var f=[],h=[],a,o=this._element,i=-this.width/2,l=-this.height/2,p="",c="";if(!o)return[];if(this.hasCrop()){var g=t.Object.__uid++;f.push('<clipPath id="imageCrop_'+g+`">
`,'	<rect x="'+i+'" y="'+l+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),p=' clip-path="url(#imageCrop_'+g+')" '}if(this.imageSmoothing||(c='" image-rendering="optimizeSpeed'),h.push("	<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',i-this.cropX,'" y="',l-this.cropY,'" width="',o.width||o.naturalWidth,'" height="',o.height||o.height,c,'"',p,`></image>
`),this.stroke||this.strokeDashArray){var m=this.fill;this.fill=null,a=["	<rect ",'x="',i,'" y="',l,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),`"/>
`],this.fill=m}return this.paintFirst!=="fill"?f=f.concat(a,h):f=f.concat(h,a),f},getSrc:function(f){var h=f?this._element:this._originalElement;return h?h.toDataURL?h.toDataURL():this.srcFromAttribute?h.getAttribute("src"):h.src:this.src||""},setSrc:function(f,h,a){return t.util.loadImage(f,function(o,i){this.setElement(o,a),this._setWidthHeight(),h&&h(this,i)},this,a&&a.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var f=this.resizeFilter,h=this.minimumScaleTrigger,a=this.getTotalObjectScaling(),o=a.scaleX,i=a.scaleY,l=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!f||o>h&&i>h){this._element=l,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=o,this._lastScaleY=i;return}t.filterBackend||(t.filterBackend=t.initFilterBackend());var p=t.util.createCanvasElement(),c=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,g=l.width,m=l.height;p.width=g,p.height=m,this._element=p,this._lastScaleX=f.scaleX=o,this._lastScaleY=f.scaleY=i,t.filterBackend.applyFilters([f],l,g,m,this._element,c),this._filterScalingX=p.width/this._originalElement.width,this._filterScalingY=p.height/this._originalElement.height},applyFilters:function(f){if(f=f||this.filters||[],f=f.filter(function(l){return l&&!l.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),f.length===0)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var h=this._originalElement,a=h.naturalWidth||h.width,o=h.naturalHeight||h.height;if(this._element===this._originalElement){var i=t.util.createCanvasElement();i.width=a,i.height=o,this._element=i,this._filteredEl=i}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,a,o),this._lastScaleX=1,this._lastScaleY=1;return t.filterBackend||(t.filterBackend=t.initFilterBackend()),t.filterBackend.applyFilters(f,this._originalElement,a,o,this._element,this.cacheKey),(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)&&(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(f){t.util.setImageSmoothing(f,this.imageSmoothing),this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(f),this._renderPaintInOrder(f)},drawCacheOnCanvas:function(f){t.util.setImageSmoothing(f,this.imageSmoothing),t.Object.prototype.drawCacheOnCanvas.call(this,f)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(f){var h=this._element;if(h){var a=this._filterScalingX,o=this._filterScalingY,i=this.width,l=this.height,p=Math.min,c=Math.max,g=c(this.cropX,0),m=c(this.cropY,0),C=h.naturalWidth||h.width,S=h.naturalHeight||h.height,x=g*a,w=m*o,_=p(i*a,C-x),E=p(l*o,S-w),I=-i/2,M=-l/2,z=p(i,C/a-g),Q=p(l,S/o-m);h&&f.drawImage(h,x,w,_,E,I,M,z,Q)}},_needsResize:function(){var f=this.getTotalObjectScaling();return f.scaleX!==this._lastScaleX||f.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(f,h){this.setElement(t.util.getById(f),h),t.util.addClass(this.getElement(),t.Image.CSS_CANVAS)},_initConfig:function(f){f||(f={}),this.setOptions(f),this._setWidthHeight(f)},_initFilters:function(f,h){f&&f.length?t.util.enlivenObjects(f,function(a){h&&h(a)},"fabric.Image.filters"):h&&h()},_setWidthHeight:function(f){f||(f={});var h=this.getElement();this.width=f.width||h.naturalWidth||h.width||0,this.height=f.height||h.naturalHeight||h.height||0},parsePreserveAspectRatioAttribute:function(){var f=t.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),h=this._element.width,a=this._element.height,o=1,i=1,l=0,p=0,c=0,g=0,m,C=this.width,S=this.height,x={width:C,height:S};return f&&(f.alignX!=="none"||f.alignY!=="none")?(f.meetOrSlice==="meet"&&(o=i=t.util.findScaleToFit(this._element,x),m=(C-h*o)/2,f.alignX==="Min"&&(l=-m),f.alignX==="Max"&&(l=m),m=(S-a*i)/2,f.alignY==="Min"&&(p=-m),f.alignY==="Max"&&(p=m)),f.meetOrSlice==="slice"&&(o=i=t.util.findScaleToCover(this._element,x),m=h-C/o,f.alignX==="Mid"&&(c=m/2),f.alignX==="Max"&&(c=m),m=a-S/i,f.alignY==="Mid"&&(g=m/2),f.alignY==="Max"&&(g=m),h=C/o,a=S/i)):(o=C/h,i=S/a),{width:h,height:a,scaleX:o,scaleY:i,offsetLeft:l,offsetTop:p,cropX:c,cropY:g}}}),t.Image.CSS_CANVAS="canvas-img",t.Image.prototype.getSvgSrc=t.Image.prototype.getSrc,t.Image.fromObject=function(f,h){var a=t.util.object.clone(f);t.util.loadImage(a.src,function(o,i){if(i){h&&h(null,!0);return}t.Image.prototype._initFilters.call(a,a.filters,function(l){a.filters=l||[],t.Image.prototype._initFilters.call(a,[a.resizeFilter],function(p){a.resizeFilter=p[0],t.util.enlivenObjectEnlivables(a,a,function(){var c=new t.Image(o,a);h(c,!1)})})})},null,a.crossOrigin)},t.Image.fromURL=function(f,h,a){t.util.loadImage(f,function(o,i){h&&h(new t.Image(o,a),i)},null,a&&a.crossOrigin)},t.Image.ATTRIBUTE_NAMES=t.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),t.Image.fromElement=function(f,h,a){var o=t.parseAttributes(f,t.Image.ATTRIBUTE_NAMES);t.Image.fromURL(o["xlink:href"],h,n(a?t.util.object.clone(a):{},o))}}(e),t.util.object.extend(t.Object.prototype,{_getAngleValueForStraighten:function(){var u=this.angle%360;return u>0?Math.round((u-1)/90)*90:Math.round(u/90)*90},straighten:function(){return this.rotate(this._getAngleValueForStraighten())},fxStraighten:function(u){u=u||{};var n=function(){},f=u.onComplete||n,h=u.onChange||n,a=this;return t.util.animate({target:this,startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(o){a.rotate(o),h()},onComplete:function(){a.setCoords(),f()}})}}),t.util.object.extend(t.StaticCanvas.prototype,{straightenObject:function(u){return u.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(u){return u.fxStraighten({onChange:this.requestRenderAllBound})}}),function(){function u(f,h){var a="precision "+h+` float;
void main(){}`,o=f.createShader(f.FRAGMENT_SHADER);return f.shaderSource(o,a),f.compileShader(o),!!f.getShaderParameter(o,f.COMPILE_STATUS)}t.isWebglSupported=function(f){if(t.isLikelyNode)return!1;f=f||t.WebglFilterBackend.prototype.tileSize;var h=document.createElement("canvas"),a=h.getContext("webgl")||h.getContext("experimental-webgl"),o=!1;if(a){t.maxTextureSize=a.getParameter(a.MAX_TEXTURE_SIZE),o=t.maxTextureSize>=f;for(var i=["highp","mediump","lowp"],l=0;l<3;l++)if(u(a,i[l])){t.webGlPrecision=i[l];break}}return this.isSupported=o,o},t.WebglFilterBackend=n;function n(f){f&&f.tileSize&&(this.tileSize=f.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}n.prototype={tileSize:2048,resources:{},setupGLContext:function(f,h){this.dispose(),this.createWebGLCanvas(f,h),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(f,h)},chooseFastestCopyGLTo2DMethod:function(f,h){var a=typeof window.performance<"u",o;try{new ImageData(1,1),o=!0}catch{o=!1}var i=typeof ArrayBuffer<"u",l=typeof Uint8ClampedArray<"u";if(a&&o&&i&&l){var p=t.util.createCanvasElement(),c=new ArrayBuffer(f*h*4);if(t.forceGLPutImageData){this.imageBuffer=c,this.copyGLTo2D=y;return}var g={imageBuffer:c,destinationWidth:f,destinationHeight:h,targetCanvas:p},m,C,S;p.width=f,p.height=h,m=window.performance.now(),v.call(g,this.gl,g),C=window.performance.now()-m,m=window.performance.now(),y.call(g,this.gl,g),S=window.performance.now()-m,C>S?(this.imageBuffer=c,this.copyGLTo2D=y):this.copyGLTo2D=v}},createWebGLCanvas:function(f,h){var a=t.util.createCanvasElement();a.width=f,a.height=h;var o={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},i=a.getContext("webgl",o);i||(i=a.getContext("experimental-webgl",o)),i&&(i.clearColor(0,0,0,0),this.canvas=a,this.gl=i)},applyFilters:function(f,h,a,o,i,l){var p=this.gl,c;l&&(c=this.getCachedTexture(l,h));var g={originalWidth:h.width||h.originalWidth,originalHeight:h.height||h.originalHeight,sourceWidth:a,sourceHeight:o,destinationWidth:a,destinationHeight:o,context:p,sourceTexture:this.createTexture(p,a,o,!c&&h),targetTexture:this.createTexture(p,a,o),originalTexture:c||this.createTexture(p,a,o,!c&&h),passes:f.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:i},m=p.createFramebuffer();return p.bindFramebuffer(p.FRAMEBUFFER,m),f.forEach(function(C){C&&C.applyTo(g)}),d(g),this.copyGLTo2D(p,g),p.bindTexture(p.TEXTURE_2D,null),p.deleteTexture(g.sourceTexture),p.deleteTexture(g.targetTexture),p.deleteFramebuffer(m),i.getContext("2d").setTransform(1,0,0,1,0,0),g},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(f,h,a,o,i){var l=f.createTexture();return f.bindTexture(f.TEXTURE_2D,l),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,i||f.NEAREST),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,i||f.NEAREST),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE),o?f.texImage2D(f.TEXTURE_2D,0,f.RGBA,f.RGBA,f.UNSIGNED_BYTE,o):f.texImage2D(f.TEXTURE_2D,0,f.RGBA,h,a,0,f.RGBA,f.UNSIGNED_BYTE,null),l},getCachedTexture:function(f,h){if(this.textureCache[f])return this.textureCache[f];var a=this.createTexture(this.gl,h.width,h.height,h);return this.textureCache[f]=a,a},evictCachesForKey:function(f){this.textureCache[f]&&(this.gl.deleteTexture(this.textureCache[f]),delete this.textureCache[f])},copyGLTo2D:v,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var f=this.gl,h={renderer:"",vendor:""};if(!f)return h;var a=f.getExtension("WEBGL_debug_renderer_info");if(a){var o=f.getParameter(a.UNMASKED_RENDERER_WEBGL),i=f.getParameter(a.UNMASKED_VENDOR_WEBGL);o&&(h.renderer=o.toLowerCase()),i&&(h.vendor=i.toLowerCase())}return this.gpuInfo=h,h}}}();function d(u){var n=u.targetCanvas,f=n.width,h=n.height,a=u.destinationWidth,o=u.destinationHeight;(f!==a||h!==o)&&(n.width=a,n.height=o)}function v(u,n){var f=u.canvas,h=n.targetCanvas,a=h.getContext("2d");a.translate(0,h.height),a.scale(1,-1);var o=f.height-h.height;a.drawImage(f,0,o,h.width,h.height,0,0,h.width,h.height)}function y(u,n){var f=n.targetCanvas,h=f.getContext("2d"),a=n.destinationWidth,o=n.destinationHeight,i=a*o*4,l=new Uint8Array(this.imageBuffer,0,i),p=new Uint8ClampedArray(this.imageBuffer,0,i);u.readPixels(0,0,a,o,u.RGBA,u.UNSIGNED_BYTE,l);var c=new ImageData(p,a,o);h.putImageData(c,0,0)}(function(){var u=function(){};t.Canvas2dFilterBackend=n;function n(){}n.prototype={evictCachesForKey:u,dispose:u,clearWebGLCaches:u,resources:{},applyFilters:function(f,h,a,o,i){var l=i.getContext("2d");l.drawImage(h,0,0,a,o);var p=l.getImageData(0,0,a,o),c=l.getImageData(0,0,a,o),g={sourceWidth:a,sourceHeight:o,imageData:p,originalEl:h,originalImageData:c,canvasEl:i,ctx:l,filterBackend:this};return f.forEach(function(m){m.applyTo(g)}),(g.imageData.width!==a||g.imageData.height!==o)&&(i.width=g.imageData.width,i.height=g.imageData.height),l.putImageData(g.imageData,0,0),g}}})(),t.Image=t.Image||{},t.Image.filters=t.Image.filters||{},t.Image.filters.BaseFilter=t.util.createClass({type:"BaseFilter",vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
void main() {
vTexCoord = aPosition;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:`precision highp float;
varying vec2 vTexCoord;
uniform sampler2D uTexture;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
}`,initialize:function(u){u&&this.setOptions(u)},setOptions:function(u){for(var n in u)this[n]=u[n]},createProgram:function(u,n,f){n=n||this.fragmentSource,f=f||this.vertexSource,t.webGlPrecision!=="highp"&&(n=n.replace(/precision highp float/g,"precision "+t.webGlPrecision+" float"));var h=u.createShader(u.VERTEX_SHADER);if(u.shaderSource(h,f),u.compileShader(h),!u.getShaderParameter(h,u.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+u.getShaderInfoLog(h));var a=u.createShader(u.FRAGMENT_SHADER);if(u.shaderSource(a,n),u.compileShader(a),!u.getShaderParameter(a,u.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+u.getShaderInfoLog(a));var o=u.createProgram();if(u.attachShader(o,h),u.attachShader(o,a),u.linkProgram(o),!u.getProgramParameter(o,u.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+u.getProgramInfoLog(o));var i=this.getAttributeLocations(u,o),l=this.getUniformLocations(u,o)||{};return l.uStepW=u.getUniformLocation(o,"uStepW"),l.uStepH=u.getUniformLocation(o,"uStepH"),{program:o,attributeLocations:i,uniformLocations:l}},getAttributeLocations:function(u,n){return{aPosition:u.getAttribLocation(n,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(u,n,f){var h=n.aPosition,a=u.createBuffer();u.bindBuffer(u.ARRAY_BUFFER,a),u.enableVertexAttribArray(h),u.vertexAttribPointer(h,2,u.FLOAT,!1,0,0),u.bufferData(u.ARRAY_BUFFER,f,u.STATIC_DRAW)},_setupFrameBuffer:function(u){var n=u.context,f,h;u.passes>1?(f=u.destinationWidth,h=u.destinationHeight,(u.sourceWidth!==f||u.sourceHeight!==h)&&(n.deleteTexture(u.targetTexture),u.targetTexture=u.filterBackend.createTexture(n,f,h)),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,u.targetTexture,0)):(n.bindFramebuffer(n.FRAMEBUFFER,null),n.finish())},_swapTextures:function(u){u.passes--,u.pass++;var n=u.targetTexture;u.targetTexture=u.sourceTexture,u.sourceTexture=n},isNeutralState:function(){var u=this.mainParameter,n=t.Image.filters[this.type].prototype;if(u)if(Array.isArray(n[u])){for(var f=n[u].length;f--;)if(this[u][f]!==n[u][f])return!1;return!0}else return n[u]===this[u];else return!1},applyTo:function(u){u.webgl?(this._setupFrameBuffer(u),this.applyToWebGL(u),this._swapTextures(u)):this.applyTo2d(u)},retrieveShader:function(u){return u.programCache.hasOwnProperty(this.type)||(u.programCache[this.type]=this.createProgram(u.context)),u.programCache[this.type]},applyToWebGL:function(u){var n=u.context,f=this.retrieveShader(u);u.pass===0&&u.originalTexture?n.bindTexture(n.TEXTURE_2D,u.originalTexture):n.bindTexture(n.TEXTURE_2D,u.sourceTexture),n.useProgram(f.program),this.sendAttributeData(n,f.attributeLocations,u.aPosition),n.uniform1f(f.uniformLocations.uStepW,1/u.sourceWidth),n.uniform1f(f.uniformLocations.uStepH,1/u.sourceHeight),this.sendUniformData(n,f.uniformLocations),n.viewport(0,0,u.destinationWidth,u.destinationHeight),n.drawArrays(n.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(u,n,f){u.activeTexture(f),u.bindTexture(u.TEXTURE_2D,n),u.activeTexture(u.TEXTURE0)},unbindAdditionalTexture:function(u,n){u.activeTexture(n),u.bindTexture(u.TEXTURE_2D,null),u.activeTexture(u.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(u){this[this.mainParameter]=u},sendUniformData:function(){},createHelpLayer:function(u){if(!u.helpLayer){var n=document.createElement("canvas");n.width=u.sourceWidth,n.height=u.sourceHeight,u.helpLayer=n}},toObject:function(){var u={type:this.type},n=this.mainParameter;return n&&(u[n]=this[n]),u},toJSON:function(){return this.toObject()}}),t.Image.filters.BaseFilter.fromObject=function(u,n){var f=new t.Image.filters[u.type](u);return n&&n(f),f},function(u){var n=u.fabric||(u.fabric={}),f=n.Image.filters,h=n.util.createClass;f.ColorMatrix=h(f.BaseFilter,{type:"ColorMatrix",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
uniform mat4 uColorMatrix;
uniform vec4 uConstants;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color *= uColorMatrix;
color += uConstants;
gl_FragColor = color;
}`,matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(a){this.callSuper("initialize",a),this.matrix=this.matrix.slice(0)},applyTo2d:function(a){var o=a.imageData,i=o.data,l=i.length,p=this.matrix,c,g,m,C,S,x=this.colorsOnly;for(S=0;S<l;S+=4)c=i[S],g=i[S+1],m=i[S+2],x?(i[S]=c*p[0]+g*p[1]+m*p[2]+p[4]*255,i[S+1]=c*p[5]+g*p[6]+m*p[7]+p[9]*255,i[S+2]=c*p[10]+g*p[11]+m*p[12]+p[14]*255):(C=i[S+3],i[S]=c*p[0]+g*p[1]+m*p[2]+C*p[3]+p[4]*255,i[S+1]=c*p[5]+g*p[6]+m*p[7]+C*p[8]+p[9]*255,i[S+2]=c*p[10]+g*p[11]+m*p[12]+C*p[13]+p[14]*255,i[S+3]=c*p[15]+g*p[16]+m*p[17]+C*p[18]+p[19]*255)},getUniformLocations:function(a,o){return{uColorMatrix:a.getUniformLocation(o,"uColorMatrix"),uConstants:a.getUniformLocation(o,"uConstants")}},sendUniformData:function(a,o){var i=this.matrix,l=[i[0],i[1],i[2],i[3],i[5],i[6],i[7],i[8],i[10],i[11],i[12],i[13],i[15],i[16],i[17],i[18]],p=[i[4],i[9],i[14],i[19]];a.uniformMatrix4fv(o.uColorMatrix,!1,l),a.uniform4fv(o.uConstants,p)}}),n.Image.filters.ColorMatrix.fromObject=n.Image.filters.BaseFilter.fromObject}(e),function(u){var n=u.fabric||(u.fabric={}),f=n.Image.filters,h=n.util.createClass;f.Brightness=h(f.BaseFilter,{type:"Brightness",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBrightness;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += uBrightness;
gl_FragColor = color;
}`,brightness:0,mainParameter:"brightness",applyTo2d:function(a){if(this.brightness!==0){var o=a.imageData,i=o.data,l,p=i.length,c=Math.round(this.brightness*255);for(l=0;l<p;l+=4)i[l]=i[l]+c,i[l+1]=i[l+1]+c,i[l+2]=i[l+2]+c}},getUniformLocations:function(a,o){return{uBrightness:a.getUniformLocation(o,"uBrightness")}},sendUniformData:function(a,o){a.uniform1f(o.uBrightness,this.brightness)}}),n.Image.filters.Brightness.fromObject=n.Image.filters.BaseFilter.fromObject}(e),function(u){var n=u.fabric||(u.fabric={}),f=n.util.object.extend,h=n.Image.filters,a=n.util.createClass;h.Convolute=a(h.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_3_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_5_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_5_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_7_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_7_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_9_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_9_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`},retrieveShader:function(o){var i=Math.sqrt(this.matrix.length),l=this.type+"_"+i+"_"+(this.opaque?1:0),p=this.fragmentSource[l];return o.programCache.hasOwnProperty(l)||(o.programCache[l]=this.createProgram(o.context,p)),o.programCache[l]},applyTo2d:function(o){var i=o.imageData,l=i.data,p=this.matrix,c=Math.round(Math.sqrt(p.length)),g=Math.floor(c/2),m=i.width,C=i.height,S=o.ctx.createImageData(m,C),x=S.data,w=this.opaque?1:0,_,E,I,M,z,Q,ee,q,J,ie,se,U,b;for(se=0;se<C;se++)for(ie=0;ie<m;ie++){for(z=(se*m+ie)*4,_=0,E=0,I=0,M=0,b=0;b<c;b++)for(U=0;U<c;U++)ee=se+b-g,Q=ie+U-g,!(ee<0||ee>=C||Q<0||Q>=m)&&(q=(ee*m+Q)*4,J=p[b*c+U],_+=l[q]*J,E+=l[q+1]*J,I+=l[q+2]*J,w||(M+=l[q+3]*J));x[z]=_,x[z+1]=E,x[z+2]=I,w?x[z+3]=l[z+3]:x[z+3]=M}o.imageData=S},getUniformLocations:function(o,i){return{uMatrix:o.getUniformLocation(i,"uMatrix"),uOpaque:o.getUniformLocation(i,"uOpaque"),uHalfSize:o.getUniformLocation(i,"uHalfSize"),uSize:o.getUniformLocation(i,"uSize")}},sendUniformData:function(o,i){o.uniform1fv(i.uMatrix,this.matrix)},toObject:function(){return f(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),n.Image.filters.Convolute.fromObject=n.Image.filters.BaseFilter.fromObject}(e),function(u){var n=u.fabric||(u.fabric={}),f=n.Image.filters,h=n.util.createClass;f.Grayscale=h(f.BaseFilter,{type:"Grayscale",fragmentSource:{average:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float average = (color.r + color.b + color.g) / 3.0;
gl_FragColor = vec4(average, average, average, color.a);
}`,lightness:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
gl_FragColor = vec4(average, average, average, col.a);
}`,luminosity:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
gl_FragColor = vec4(average, average, average, col.a);
}`},mode:"average",mainParameter:"mode",applyTo2d:function(a){var o=a.imageData,i=o.data,l,p=i.length,c,g=this.mode;for(l=0;l<p;l+=4)g==="average"?c=(i[l]+i[l+1]+i[l+2])/3:g==="lightness"?c=(Math.min(i[l],i[l+1],i[l+2])+Math.max(i[l],i[l+1],i[l+2]))/2:g==="luminosity"&&(c=.21*i[l]+.72*i[l+1]+.07*i[l+2]),i[l]=c,i[l+1]=c,i[l+2]=c},retrieveShader:function(a){var o=this.type+"_"+this.mode;if(!a.programCache.hasOwnProperty(o)){var i=this.fragmentSource[this.mode];a.programCache[o]=this.createProgram(a.context,i)}return a.programCache[o]},getUniformLocations:function(a,o){return{uMode:a.getUniformLocation(o,"uMode")}},sendUniformData:function(a,o){var i=1;a.uniform1i(o.uMode,i)},isNeutralState:function(){return!1}}),n.Image.filters.Grayscale.fromObject=n.Image.filters.BaseFilter.fromObject}(e),function(u){var n=u.fabric||(u.fabric={}),f=n.Image.filters,h=n.util.createClass;f.Invert=h(f.BaseFilter,{type:"Invert",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform int uInvert;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
if (uInvert == 1) {
gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
} else {
gl_FragColor = color;
}
}`,invert:!0,mainParameter:"invert",applyTo2d:function(a){var o=a.imageData,i=o.data,l,p=i.length;for(l=0;l<p;l+=4)i[l]=255-i[l],i[l+1]=255-i[l+1],i[l+2]=255-i[l+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(a,o){return{uInvert:a.getUniformLocation(o,"uInvert")}},sendUniformData:function(a,o){a.uniform1i(o.uInvert,this.invert)}}),n.Image.filters.Invert.fromObject=n.Image.filters.BaseFilter.fromObject}(e),function(u){var n=u.fabric||(u.fabric={}),f=n.util.object.extend,h=n.Image.filters,a=n.util.createClass;h.Noise=a(h.BaseFilter,{type:"Noise",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uStepH;
uniform float uNoise;
uniform float uSeed;
varying vec2 vTexCoord;
float rand(vec2 co, float seed, float vScale) {
return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
}
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
gl_FragColor = color;
}`,mainParameter:"noise",noise:0,applyTo2d:function(o){if(this.noise!==0){var i=o.imageData,l=i.data,p,c=l.length,g=this.noise,m;for(p=0,c=l.length;p<c;p+=4)m=(.5-Math.random())*g,l[p]+=m,l[p+1]+=m,l[p+2]+=m}},getUniformLocations:function(o,i){return{uNoise:o.getUniformLocation(i,"uNoise"),uSeed:o.getUniformLocation(i,"uSeed")}},sendUniformData:function(o,i){o.uniform1f(i.uNoise,this.noise/255),o.uniform1f(i.uSeed,Math.random())},toObject:function(){return f(this.callSuper("toObject"),{noise:this.noise})}}),n.Image.filters.Noise.fromObject=n.Image.filters.BaseFilter.fromObject}(e),function(u){var n=u.fabric||(u.fabric={}),f=n.Image.filters,h=n.util.createClass;f.Pixelate=h(f.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBlocksize;
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
float blockW = uBlocksize * uStepW;
float blockH = uBlocksize * uStepW;
int posX = int(vTexCoord.x / blockW);
int posY = int(vTexCoord.y / blockH);
float fposX = float(posX);
float fposY = float(posY);
vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
vec4 color = texture2D(uTexture, squareCoords);
gl_FragColor = color;
}`,applyTo2d:function(a){var o=a.imageData,i=o.data,l=o.height,p=o.width,c,g,m,C,S,x,w,_,E,I,M;for(g=0;g<l;g+=this.blocksize)for(m=0;m<p;m+=this.blocksize)for(c=g*4*p+m*4,C=i[c],S=i[c+1],x=i[c+2],w=i[c+3],I=Math.min(g+this.blocksize,l),M=Math.min(m+this.blocksize,p),_=g;_<I;_++)for(E=m;E<M;E++)c=_*4*p+E*4,i[c]=C,i[c+1]=S,i[c+2]=x,i[c+3]=w},isNeutralState:function(){return this.blocksize===1},getUniformLocations:function(a,o){return{uBlocksize:a.getUniformLocation(o,"uBlocksize"),uStepW:a.getUniformLocation(o,"uStepW"),uStepH:a.getUniformLocation(o,"uStepH")}},sendUniformData:function(a,o){a.uniform1f(o.uBlocksize,this.blocksize)}}),n.Image.filters.Pixelate.fromObject=n.Image.filters.BaseFilter.fromObject}(e),function(u){var n=u.fabric||(u.fabric={}),f=n.util.object.extend,h=n.Image.filters,a=n.util.createClass;h.RemoveColor=a(h.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
gl_FragColor.a = 0.0;
}
}`,distance:.02,useAlpha:!1,applyTo2d:function(o){var i=o.imageData,l=i.data,p,c=this.distance*255,g,m,C,S=new n.Color(this.color).getSource(),x=[S[0]-c,S[1]-c,S[2]-c],w=[S[0]+c,S[1]+c,S[2]+c];for(p=0;p<l.length;p+=4)g=l[p],m=l[p+1],C=l[p+2],g>x[0]&&m>x[1]&&C>x[2]&&g<w[0]&&m<w[1]&&C<w[2]&&(l[p+3]=0)},getUniformLocations:function(o,i){return{uLow:o.getUniformLocation(i,"uLow"),uHigh:o.getUniformLocation(i,"uHigh")}},sendUniformData:function(o,i){var l=new n.Color(this.color).getSource(),p=parseFloat(this.distance),c=[0+l[0]/255-p,0+l[1]/255-p,0+l[2]/255-p,1],g=[l[0]/255+p,l[1]/255+p,l[2]/255+p,1];o.uniform4fv(i.uLow,c),o.uniform4fv(i.uHigh,g)},toObject:function(){return f(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),n.Image.filters.RemoveColor.fromObject=n.Image.filters.BaseFilter.fromObject}(e),function(u){var n=u.fabric||(u.fabric={}),f=n.Image.filters,h=n.util.createClass,a={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var o in a)f[o]=h(f.ColorMatrix,{type:o,matrix:a[o],mainParameter:!1,colorsOnly:!0}),n.Image.filters[o].fromObject=n.Image.filters.BaseFilter.fromObject}(e),function(u){var n=u.fabric,f=n.Image.filters,h=n.util.createClass;f.BlendColor=h(f.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,diff:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`if (uColor.r < 0.5) {
gl_FragColor.r *= 2.0 * uColor.r;
} else {
gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
}
if (uColor.g < 0.5) {
gl_FragColor.g *= 2.0 * uColor.g;
} else {
gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
}
if (uColor.b < 0.5) {
gl_FragColor.b *= 2.0 * uColor.b;
} else {
gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
}
`,tint:`gl_FragColor.rgb *= (1.0 - uColor.a);
gl_FragColor.rgb += uColor.rgb;
`},buildSource:function(a){return`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uColor;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
gl_FragColor = color;
if (color.a > 0.0) {
`+this.fragmentSource[a]+`}
}`},retrieveShader:function(a){var o=this.type+"_"+this.mode,i;return a.programCache.hasOwnProperty(o)||(i=this.buildSource(this.mode),a.programCache[o]=this.createProgram(a.context,i)),a.programCache[o]},applyTo2d:function(a){var o=a.imageData,i=o.data,l=i.length,p,c,g,m,C,S,x,w=1-this.alpha;x=new n.Color(this.color).getSource(),p=x[0]*this.alpha,c=x[1]*this.alpha,g=x[2]*this.alpha;for(var _=0;_<l;_+=4)switch(m=i[_],C=i[_+1],S=i[_+2],this.mode){case"multiply":i[_]=m*p/255,i[_+1]=C*c/255,i[_+2]=S*g/255;break;case"screen":i[_]=255-(255-m)*(255-p)/255,i[_+1]=255-(255-C)*(255-c)/255,i[_+2]=255-(255-S)*(255-g)/255;break;case"add":i[_]=m+p,i[_+1]=C+c,i[_+2]=S+g;break;case"diff":case"difference":i[_]=Math.abs(m-p),i[_+1]=Math.abs(C-c),i[_+2]=Math.abs(S-g);break;case"subtract":i[_]=m-p,i[_+1]=C-c,i[_+2]=S-g;break;case"darken":i[_]=Math.min(m,p),i[_+1]=Math.min(C,c),i[_+2]=Math.min(S,g);break;case"lighten":i[_]=Math.max(m,p),i[_+1]=Math.max(C,c),i[_+2]=Math.max(S,g);break;case"overlay":i[_]=p<128?2*m*p/255:255-2*(255-m)*(255-p)/255,i[_+1]=c<128?2*C*c/255:255-2*(255-C)*(255-c)/255,i[_+2]=g<128?2*S*g/255:255-2*(255-S)*(255-g)/255;break;case"exclusion":i[_]=p+m-2*p*m/255,i[_+1]=c+C-2*c*C/255,i[_+2]=g+S-2*g*S/255;break;case"tint":i[_]=p+m*w,i[_+1]=c+C*w,i[_+2]=g+S*w}},getUniformLocations:function(a,o){return{uColor:a.getUniformLocation(o,"uColor")}},sendUniformData:function(a,o){var i=new n.Color(this.color).getSource();i[0]=this.alpha*i[0]/255,i[1]=this.alpha*i[1]/255,i[2]=this.alpha*i[2]/255,i[3]=this.alpha,a.uniform4fv(o.uColor,i)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),n.Image.filters.BlendColor.fromObject=n.Image.filters.BaseFilter.fromObject}(e),function(u){var n=u.fabric,f=n.Image.filters,h=n.util.createClass;f.BlendImage=h(f.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
uniform mat3 uTransformMatrix;
void main() {
vTexCoord = aPosition;
vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:{multiply:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.rgba *= color2.rgba;
gl_FragColor = color;
}`,mask:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.a = color2.a;
gl_FragColor = color;
}`},retrieveShader:function(a){var o=this.type+"_"+this.mode,i=this.fragmentSource[this.mode];return a.programCache.hasOwnProperty(o)||(a.programCache[o]=this.createProgram(a.context,i)),a.programCache[o]},applyToWebGL:function(a){var o=a.context,i=this.createTexture(a.filterBackend,this.image);this.bindAdditionalTexture(o,i,o.TEXTURE1),this.callSuper("applyToWebGL",a),this.unbindAdditionalTexture(o,o.TEXTURE1)},createTexture:function(a,o){return a.getCachedTexture(o.cacheKey,o._element)},calculateMatrix:function(){var a=this.image,o=a._element.width,i=a._element.height;return[1/a.scaleX,0,0,0,1/a.scaleY,0,-a.left/o,-a.top/i,1]},applyTo2d:function(a){var o=a.imageData,i=a.filterBackend.resources,l=o.data,p=l.length,c=o.width,g=o.height,m,C,S,x,w,_,E,I,M,z,Q=this.image,ee;i.blendImage||(i.blendImage=n.util.createCanvasElement()),M=i.blendImage,z=M.getContext("2d"),M.width!==c||M.height!==g?(M.width=c,M.height=g):z.clearRect(0,0,c,g),z.setTransform(Q.scaleX,0,0,Q.scaleY,Q.left,Q.top),z.drawImage(Q._element,0,0,c,g),ee=z.getImageData(0,0,c,g).data;for(var q=0;q<p;q+=4)switch(w=l[q],_=l[q+1],E=l[q+2],I=l[q+3],m=ee[q],C=ee[q+1],S=ee[q+2],x=ee[q+3],this.mode){case"multiply":l[q]=w*m/255,l[q+1]=_*C/255,l[q+2]=E*S/255,l[q+3]=I*x/255;break;case"mask":l[q+3]=x;break}},getUniformLocations:function(a,o){return{uTransformMatrix:a.getUniformLocation(o,"uTransformMatrix"),uImage:a.getUniformLocation(o,"uImage")}},sendUniformData:function(a,o){var i=this.calculateMatrix();a.uniform1i(o.uImage,1),a.uniformMatrix3fv(o.uTransformMatrix,!1,i)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),n.Image.filters.BlendImage.fromObject=function(a,o){n.Image.fromObject(a.image,function(i){var l=n.util.object.clone(a);l.image=i,o(new n.Image.filters.BlendImage(l))})}}(e),function(u){var n=u.fabric||(u.fabric={}),f=Math.pow,h=Math.floor,a=Math.sqrt,o=Math.abs,i=Math.round,l=Math.sin,p=Math.ceil,c=n.Image.filters,g=n.util.createClass;c.Resize=g(c.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(m,C){return{uDelta:m.getUniformLocation(C,"uDelta"),uTaps:m.getUniformLocation(C,"uTaps")}},sendUniformData:function(m,C){m.uniform2fv(C.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),m.uniform1fv(C.uTaps,this.taps)},retrieveShader:function(m){var C=this.getFilterWindow(),S=this.type+"_"+C;if(!m.programCache.hasOwnProperty(S)){var x=this.generateShader(C);m.programCache[S]=this.createProgram(m.context,x)}return m.programCache[S]},getFilterWindow:function(){var m=this.tempScale;return Math.ceil(this.lanczosLobes/m)},getTaps:function(){for(var m=this.lanczosCreate(this.lanczosLobes),C=this.tempScale,S=this.getFilterWindow(),x=new Array(S),w=1;w<=S;w++)x[w-1]=m(w*C);return x},generateShader:function(x){for(var C=new Array(x),S=this.fragmentSourceTOP,x,w=1;w<=x;w++)C[w-1]=w+".0 * uDelta";return S+="uniform float uTaps["+x+`];
`,S+=`void main() {
`,S+=`  vec4 color = texture2D(uTexture, vTexCoord);
`,S+=`  float sum = 1.0;
`,C.forEach(function(_,E){S+="  color += texture2D(uTexture, vTexCoord + "+_+") * uTaps["+E+`];
`,S+="  color += texture2D(uTexture, vTexCoord - "+_+") * uTaps["+E+`];
`,S+="  sum += 2.0 * uTaps["+E+`];
`}),S+=`  gl_FragColor = color / sum;
`,S+="}",S},fragmentSourceTOP:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
`,applyTo:function(m){m.webgl?(m.passes++,this.width=m.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=m.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),m.destinationWidth=this.dW,this._setupFrameBuffer(m),this.applyToWebGL(m),this._swapTextures(m),m.sourceWidth=m.destinationWidth,this.height=m.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),m.destinationHeight=this.dH,this._setupFrameBuffer(m),this.applyToWebGL(m),this._swapTextures(m),m.sourceHeight=m.destinationHeight):this.applyTo2d(m)},isNeutralState:function(){return this.scaleX===1&&this.scaleY===1},lanczosCreate:function(m){return function(C){if(C>=m||C<=-m)return 0;if(C<11920929e-14&&C>-11920929e-14)return 1;C*=Math.PI;var S=C/m;return l(C)/C*l(S)/S}},applyTo2d:function(m){var C=m.imageData,S=this.scaleX,x=this.scaleY;this.rcpScaleX=1/S,this.rcpScaleY=1/x;var w=C.width,_=C.height,E=i(w*S),I=i(_*x),M;this.resizeType==="sliceHack"?M=this.sliceByTwo(m,w,_,E,I):this.resizeType==="hermite"?M=this.hermiteFastResize(m,w,_,E,I):this.resizeType==="bilinear"?M=this.bilinearFiltering(m,w,_,E,I):this.resizeType==="lanczos"&&(M=this.lanczosResize(m,w,_,E,I)),m.imageData=M},sliceByTwo:function(m,C,S,x,w){var _=m.imageData,E=.5,I=!1,M=!1,z=C*E,Q=S*E,ee=n.filterBackend.resources,q,J,ie=0,se=0,U=C,b=0;for(ee.sliceByTwo||(ee.sliceByTwo=document.createElement("canvas")),q=ee.sliceByTwo,(q.width<C*1.5||q.height<S)&&(q.width=C*1.5,q.height=S),J=q.getContext("2d"),J.clearRect(0,0,C*1.5,S),J.putImageData(_,0,0),x=h(x),w=h(w);!I||!M;)C=z,S=Q,x<h(z*E)?z=h(z*E):(z=x,I=!0),w<h(Q*E)?Q=h(Q*E):(Q=w,M=!0),J.drawImage(q,ie,se,C,S,U,b,z,Q),ie=U,se=b,b+=Q;return J.getImageData(ie,se,x,w)},lanczosResize:function(m,C,S,x,w){function _(k){var D,B,P,T,A,F,H,N,Y,K,ne;for(b.x=(k+.5)*Q,O.x=h(b.x),D=0;D<w;D++){for(b.y=(D+.5)*ee,O.y=h(b.y),A=0,F=0,H=0,N=0,Y=0,B=O.x-ie;B<=O.x+ie;B++)if(!(B<0||B>=C)){K=h(1e3*o(B-b.x)),U[K]||(U[K]={});for(var j=O.y-se;j<=O.y+se;j++)j<0||j>=S||(ne=h(1e3*o(j-b.y)),U[K][ne]||(U[K][ne]=z(a(f(K*q,2)+f(ne*J,2))/1e3)),P=U[K][ne],P>0&&(T=(j*C+B)*4,A+=P,F+=P*E[T],H+=P*E[T+1],N+=P*E[T+2],Y+=P*E[T+3]))}T=(D*x+k)*4,M[T]=F/A,M[T+1]=H/A,M[T+2]=N/A,M[T+3]=Y/A}return++k<x?_(k):I}var E=m.imageData.data,I=m.ctx.createImageData(x,w),M=I.data,z=this.lanczosCreate(this.lanczosLobes),Q=this.rcpScaleX,ee=this.rcpScaleY,q=2/this.rcpScaleX,J=2/this.rcpScaleY,ie=p(Q*this.lanczosLobes/2),se=p(ee*this.lanczosLobes/2),U={},b={},O={};return _(0)},bilinearFiltering:function(m,C,S,x,w){var _,E,I,M,z,Q,ee,q,J,ie,se,U,b=0,O,k=this.rcpScaleX,D=this.rcpScaleY,B=4*(C-1),P=m.imageData,T=P.data,A=m.ctx.createImageData(x,w),F=A.data;for(ee=0;ee<w;ee++)for(q=0;q<x;q++)for(z=h(k*q),Q=h(D*ee),J=k*q-z,ie=D*ee-Q,O=4*(Q*C+z),se=0;se<4;se++)_=T[O+se],E=T[O+4+se],I=T[O+B+se],M=T[O+B+4+se],U=_*(1-J)*(1-ie)+E*J*(1-ie)+I*ie*(1-J)+M*J*ie,F[b++]=U;return A},hermiteFastResize:function(m,C,S,x,w){for(var _=this.rcpScaleX,E=this.rcpScaleY,I=p(_/2),M=p(E/2),z=m.imageData,Q=z.data,ee=m.ctx.createImageData(x,w),q=ee.data,J=0;J<w;J++)for(var ie=0;ie<x;ie++){for(var se=(ie+J*x)*4,U=0,b=0,O=0,k=0,D=0,B=0,P=0,T=(J+.5)*E,A=h(J*E);A<(J+1)*E;A++)for(var F=o(T-(A+.5))/M,H=(ie+.5)*_,N=F*F,Y=h(ie*_);Y<(ie+1)*_;Y++){var K=o(H-(Y+.5))/I,ne=a(N+K*K);ne>1&&ne<-1||(U=2*ne*ne*ne-3*ne*ne+1,U>0&&(K=4*(Y+A*C),P+=U*Q[K+3],O+=U,Q[K+3]<255&&(U=U*Q[K+3]/250),k+=U*Q[K],D+=U*Q[K+1],B+=U*Q[K+2],b+=U))}q[se]=k/b,q[se+1]=D/b,q[se+2]=B/b,q[se+3]=P/O}return ee},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),n.Image.filters.Resize.fromObject=n.Image.filters.BaseFilter.fromObject}(e),function(u){var n=u.fabric||(u.fabric={}),f=n.Image.filters,h=n.util.createClass;f.Contrast=h(f.BaseFilter,{type:"Contrast",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uContrast;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
gl_FragColor = color;
}`,contrast:0,mainParameter:"contrast",applyTo2d:function(a){if(this.contrast!==0){var o=a.imageData,i,p,l=o.data,p=l.length,c=Math.floor(this.contrast*255),g=259*(c+255)/(255*(259-c));for(i=0;i<p;i+=4)l[i]=g*(l[i]-128)+128,l[i+1]=g*(l[i+1]-128)+128,l[i+2]=g*(l[i+2]-128)+128}},getUniformLocations:function(a,o){return{uContrast:a.getUniformLocation(o,"uContrast")}},sendUniformData:function(a,o){a.uniform1f(o.uContrast,this.contrast)}}),n.Image.filters.Contrast.fromObject=n.Image.filters.BaseFilter.fromObject}(e),function(u){var n=u.fabric||(u.fabric={}),f=n.Image.filters,h=n.util.createClass;f.Saturation=h(f.BaseFilter,{type:"Saturation",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uSaturation;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float rgMax = max(color.r, color.g);
float rgbMax = max(rgMax, color.b);
color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
gl_FragColor = color;
}`,saturation:0,mainParameter:"saturation",applyTo2d:function(a){if(this.saturation!==0){var o=a.imageData,i=o.data,l=i.length,p=-this.saturation,c,g;for(c=0;c<l;c+=4)g=Math.max(i[c],i[c+1],i[c+2]),i[c]+=g!==i[c]?(g-i[c])*p:0,i[c+1]+=g!==i[c+1]?(g-i[c+1])*p:0,i[c+2]+=g!==i[c+2]?(g-i[c+2])*p:0}},getUniformLocations:function(a,o){return{uSaturation:a.getUniformLocation(o,"uSaturation")}},sendUniformData:function(a,o){a.uniform1f(o.uSaturation,-this.saturation)}}),n.Image.filters.Saturation.fromObject=n.Image.filters.BaseFilter.fromObject}(e),function(u){var n=u.fabric||(u.fabric={}),f=n.Image.filters,h=n.util.createClass;f.Vibrance=h(f.BaseFilter,{type:"Vibrance",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uVibrance;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float max = max(color.r, max(color.g, color.b));
float avg = (color.r + color.g + color.b) / 3.0;
float amt = (abs(max - avg) * 2.0) * uVibrance;
color.r += max != color.r ? (max - color.r) * amt : 0.00;
color.g += max != color.g ? (max - color.g) * amt : 0.00;
color.b += max != color.b ? (max - color.b) * amt : 0.00;
gl_FragColor = color;
}`,vibrance:0,mainParameter:"vibrance",applyTo2d:function(a){if(this.vibrance!==0){var o=a.imageData,i=o.data,l=i.length,p=-this.vibrance,c,g,m,C;for(c=0;c<l;c+=4)g=Math.max(i[c],i[c+1],i[c+2]),m=(i[c]+i[c+1]+i[c+2])/3,C=Math.abs(g-m)*2/255*p,i[c]+=g!==i[c]?(g-i[c])*C:0,i[c+1]+=g!==i[c+1]?(g-i[c+1])*C:0,i[c+2]+=g!==i[c+2]?(g-i[c+2])*C:0}},getUniformLocations:function(a,o){return{uVibrance:a.getUniformLocation(o,"uVibrance")}},sendUniformData:function(a,o){a.uniform1f(o.uVibrance,-this.vibrance)}}),n.Image.filters.Vibrance.fromObject=n.Image.filters.BaseFilter.fromObject}(e),function(u){var n=u.fabric||(u.fabric={}),f=n.Image.filters,h=n.util.createClass;f.Blur=h(f.BaseFilter,{type:"Blur",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
const float nSamples = 15.0;
vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
float random(vec3 scale) {
return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
}
void main() {
vec4 color = vec4(0.0);
float total = 0.0;
float offset = random(v3offset);
for (float t = -nSamples; t <= nSamples; t++) {
float percent = (t + offset - 0.5) / nSamples;
float weight = 1.0 - abs(percent);
color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
total += weight;
}
gl_FragColor = color / total;
}`,blur:0,mainParameter:"blur",applyTo:function(a){a.webgl?(this.aspectRatio=a.sourceWidth/a.sourceHeight,a.passes++,this._setupFrameBuffer(a),this.horizontal=!0,this.applyToWebGL(a),this._swapTextures(a),this._setupFrameBuffer(a),this.horizontal=!1,this.applyToWebGL(a),this._swapTextures(a)):this.applyTo2d(a)},applyTo2d:function(a){a.imageData=this.simpleBlur(a)},simpleBlur:function(a){var o=a.filterBackend.resources,i,l,p=a.imageData.width,c=a.imageData.height;o.blurLayer1||(o.blurLayer1=n.util.createCanvasElement(),o.blurLayer2=n.util.createCanvasElement()),i=o.blurLayer1,l=o.blurLayer2,(i.width!==p||i.height!==c)&&(l.width=i.width=p,l.height=i.height=c);var g=i.getContext("2d"),m=l.getContext("2d"),C=15,S,x,w,_,E=this.blur*.06*.5;for(g.putImageData(a.imageData,0,0),m.clearRect(0,0,p,c),_=-C;_<=C;_++)S=(Math.random()-.5)/4,x=_/C,w=E*x*p+S,m.globalAlpha=1-Math.abs(x),m.drawImage(i,w,S),g.drawImage(l,0,0),m.globalAlpha=1,m.clearRect(0,0,l.width,l.height);for(_=-C;_<=C;_++)S=(Math.random()-.5)/4,x=_/C,w=E*x*c+S,m.globalAlpha=1-Math.abs(x),m.drawImage(i,S,w),g.drawImage(l,0,0),m.globalAlpha=1,m.clearRect(0,0,l.width,l.height);a.ctx.drawImage(i,0,0);var I=a.ctx.getImageData(0,0,i.width,i.height);return g.globalAlpha=1,g.clearRect(0,0,i.width,i.height),I},getUniformLocations:function(a,o){return{delta:a.getUniformLocation(o,"uDelta")}},sendUniformData:function(a,o){var i=this.chooseRightDelta();a.uniform2fv(o.delta,i)},chooseRightDelta:function(){var a=1,o=[0,0],i;return this.horizontal?this.aspectRatio>1&&(a=1/this.aspectRatio):this.aspectRatio<1&&(a=this.aspectRatio),i=a*this.blur*.12,this.horizontal?o[0]=i:o[1]=i,o}}),f.Blur.fromObject=n.Image.filters.BaseFilter.fromObject}(e),function(u){var n=u.fabric||(u.fabric={}),f=n.Image.filters,h=n.util.createClass;f.Gamma=h(f.BaseFilter,{type:"Gamma",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec3 uGamma;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec3 correction = (1.0 / uGamma);
color.r = pow(color.r, correction.r);
color.g = pow(color.g, correction.g);
color.b = pow(color.b, correction.b);
gl_FragColor = color;
gl_FragColor.rgb *= color.a;
}`,gamma:[1,1,1],mainParameter:"gamma",initialize:function(a){this.gamma=[1,1,1],f.BaseFilter.prototype.initialize.call(this,a)},applyTo2d:function(a){var o=a.imageData,i=o.data,l=this.gamma,p=i.length,c=1/l[0],g=1/l[1],m=1/l[2],C;for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),C=0,p=256;C<p;C++)this.rVals[C]=Math.pow(C/255,c)*255,this.gVals[C]=Math.pow(C/255,g)*255,this.bVals[C]=Math.pow(C/255,m)*255;for(C=0,p=i.length;C<p;C+=4)i[C]=this.rVals[i[C]],i[C+1]=this.gVals[i[C+1]],i[C+2]=this.bVals[i[C+2]]},getUniformLocations:function(a,o){return{uGamma:a.getUniformLocation(o,"uGamma")}},sendUniformData:function(a,o){a.uniform3fv(o.uGamma,this.gamma)}}),n.Image.filters.Gamma.fromObject=n.Image.filters.BaseFilter.fromObject}(e),function(u){var n=u.fabric||(u.fabric={}),f=n.Image.filters,h=n.util.createClass;f.Composed=h(f.BaseFilter,{type:"Composed",subFilters:[],initialize:function(a){this.callSuper("initialize",a),this.subFilters=this.subFilters.slice(0)},applyTo:function(a){a.passes+=this.subFilters.length-1,this.subFilters.forEach(function(o){o.applyTo(a)})},toObject:function(){return n.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(a){return a.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(a){return!a.isNeutralState()})}}),n.Image.filters.Composed.fromObject=function(a,o){var i=a.subFilters||[],l=i.map(function(c){return new n.Image.filters[c.type](c)}),p=new n.Image.filters.Composed({subFilters:l});return o&&o(p),p}}(e),function(u){var n=u.fabric||(u.fabric={}),f=n.Image.filters,h=n.util.createClass;f.HueRotation=h(f.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var a=this.rotation*Math.PI,o=n.util.cos(a),i=n.util.sin(a),l=1/3,p=Math.sqrt(l)*i,c=1-o;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=o+c/3,this.matrix[1]=l*c-p,this.matrix[2]=l*c+p,this.matrix[5]=l*c+p,this.matrix[6]=o+l*c,this.matrix[7]=l*c-p,this.matrix[10]=l*c-p,this.matrix[11]=l*c+p,this.matrix[12]=o+l*c},isNeutralState:function(a){return this.calculateMatrix(),f.BaseFilter.prototype.isNeutralState.call(this,a)},applyTo:function(a){this.calculateMatrix(),f.BaseFilter.prototype.applyTo.call(this,a)}}),n.Image.filters.HueRotation.fromObject=n.Image.filters.BaseFilter.fromObject}(e),function(u){var n=u.fabric||(u.fabric={}),f=n.util.object.clone;if(n.Text){n.warn("fabric.Text is already defined");return}var h="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide pathAlign".split(" ");n.Text=n.util.createClass(n.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:n.Object.prototype.stateProperties.concat(h),cacheProperties:n.Object.prototype.cacheProperties.concat(h),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(a,o){this.styles=o?o.styles||{}:{},this.text=a,this.__skipDimension=!0,this.callSuper("initialize",o),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var a=this.path;a&&(a.segmentsInfo=n.util.getPathSegmentsInfo(a.path))},getMeasuringContext:function(){return n._measuringContext||(n._measuringContext=this.canvas&&this.canvas.contextCache||n.util.createCanvasElement().getContext("2d")),n._measuringContext},_splitText:function(){var a=this._splitTextIntoLines(this.text);return this.textLines=a.lines,this._textLines=a.graphemeLines,this._unwrappedTextLines=a._unwrappedLines,this._text=a.graphemeText,a},initDimensions:function(){if(!this.__skipDimension){if(this._splitText(),this._clearCache(),this.path){var a=this.getHeightOfLine(0)*1.1;this.width=this.path.width+a,this.height=this.path.height+a}else this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight();this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"})}},enlargeSpaces:function(){for(var a,o,i,l,p,c,g,m=0,C=this._textLines.length;m<C;m++)if(!(this.textAlign!=="justify"&&(m===C-1||this.isEndOfWrapping(m)))&&(l=0,p=this._textLines[m],o=this.getLineWidth(m),o<this.width&&(g=this.textLines[m].match(this._reSpacesAndTabs)))){i=g.length,a=(this.width-o)/i;for(var S=0,x=p.length;S<=x;S++)c=this.__charBounds[m][S],this._reSpaceAndTab.test(p[S])?(c.width+=a,c.kernedWidth+=a,c.left+=l,l+=a):c.left+=l}},isEndOfWrapping:function(a){return a===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var a=this.callSuper("_getCacheCanvasDimensions"),o=this.fontSize;return a.width+=o*a.zoomX,a.height+=o*a.zoomY,a},_render:function(a){var o=this.path;o&&!o.isNotVisible()&&o._render(a),this._setTextStyles(a),this._renderTextLinesBackground(a),this._renderTextDecoration(a,"underline"),this._renderText(a),this._renderTextDecoration(a,"overline"),this._renderTextDecoration(a,"linethrough")},_renderText:function(a){this.paintFirst==="stroke"?(this._renderTextStroke(a),this._renderTextFill(a)):(this._renderTextFill(a),this._renderTextStroke(a))},_setTextStyles:function(a,o,i){if(a.textBaseline="alphabetic",this.path)switch(this.pathAlign){case"center":a.textBaseline="middle";break;case"ascender":a.textBaseline="top";break;case"descender":a.textBaseline="bottom";break}a.font=this._getFontDeclaration(o,i)},calcTextWidth:function(){for(var a=this.getLineWidth(0),o=1,i=this._textLines.length;o<i;o++){var l=this.getLineWidth(o);l>a&&(a=l)}return a},_renderTextLine:function(a,o,i,l,p,c){this._renderChars(a,o,i,l,p,c)},_renderTextLinesBackground:function(a){if(!(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))){for(var o,i,l=a.fillStyle,p,c,g=this._getLeftOffset(),m=this._getTopOffset(),C=0,S=0,x,w,_=this.path,E,I=0,M=this._textLines.length;I<M;I++){if(o=this.getHeightOfLine(I),!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",I)){m+=o;continue}p=this._textLines[I],i=this._getLineLeftOffset(I),S=0,C=0,c=this.getValueOfPropertyAt(I,0,"textBackgroundColor");for(var z=0,Q=p.length;z<Q;z++)x=this.__charBounds[I][z],w=this.getValueOfPropertyAt(I,z,"textBackgroundColor"),_?(a.save(),a.translate(x.renderLeft,x.renderTop),a.rotate(x.angle),a.fillStyle=w,w&&a.fillRect(-x.width/2,-o/this.lineHeight*(1-this._fontSizeFraction),x.width,o/this.lineHeight),a.restore()):w!==c?(E=g+i+C,this.direction==="rtl"&&(E=this.width-E-S),a.fillStyle=c,c&&a.fillRect(E,m,S,o/this.lineHeight),C=x.left,S=x.width,c=w):S+=x.kernedWidth;w&&!_&&(E=g+i+C,this.direction==="rtl"&&(E=this.width-E-S),a.fillStyle=w,a.fillRect(E,m,S,o/this.lineHeight)),m+=o}a.fillStyle=l,this._removeShadow(a)}},getFontCache:function(a){var o=a.fontFamily.toLowerCase();n.charWidthsCache[o]||(n.charWidthsCache[o]={});var i=n.charWidthsCache[o],l=a.fontStyle.toLowerCase()+"_"+(a.fontWeight+"").toLowerCase();return i[l]||(i[l]={}),i[l]},_measureChar:function(a,o,i,l){var p=this.getFontCache(o),c=this._getFontDeclaration(o),g=this._getFontDeclaration(l),m=i+a,C=c===g,S,x,w,_=o.fontSize/this.CACHE_FONT_SIZE,E;if(i&&p[i]!==void 0&&(w=p[i]),p[a]!==void 0&&(E=S=p[a]),C&&p[m]!==void 0&&(x=p[m],E=x-w),S===void 0||w===void 0||x===void 0){var I=this.getMeasuringContext();this._setTextStyles(I,o,!0)}return S===void 0&&(E=S=I.measureText(a).width,p[a]=S),w===void 0&&C&&i&&(w=I.measureText(i).width,p[i]=w),C&&x===void 0&&(x=I.measureText(m).width,p[m]=x,E=x-w),{width:S*_,kernedWidth:E*_}},getHeightOfChar:function(a,o){return this.getValueOfPropertyAt(a,o,"fontSize")},measureLine:function(a){var o=this._measureLine(a);return this.charSpacing!==0&&(o.width-=this._getWidthOfCharSpacing()),o.width<0&&(o.width=0),o},_measureLine:function(a){var o=0,i,l,p=this._textLines[a],c,g,m=0,C=new Array(p.length),S=0,x,w,_=this.path,E=this.pathSide==="right";for(this.__charBounds[a]=C,i=0;i<p.length;i++)l=p[i],g=this._getGraphemeBox(l,a,i,c),C[i]=g,o+=g.kernedWidth,c=l;if(C[i]={left:g?g.left+g.width:0,width:0,kernedWidth:0,height:this.fontSize},_){switch(w=_.segmentsInfo[_.segmentsInfo.length-1].length,x=n.util.getPointOnPath(_.path,0,_.segmentsInfo),x.x+=_.pathOffset.x,x.y+=_.pathOffset.y,this.textAlign){case"left":S=E?w-o:0;break;case"center":S=(w-o)/2;break;case"right":S=E?0:w-o;break}for(S+=this.pathStartOffset*(E?-1:1),i=E?p.length-1:0;E?i>=0:i<p.length;E?i--:i++)g=C[i],S>w?S%=w:S<0&&(S+=w),this._setGraphemeOnPath(S,g,x),S+=g.kernedWidth}return{width:o,numOfSpaces:m}},_setGraphemeOnPath:function(a,o,i){var l=a+o.kernedWidth/2,p=this.path,c=n.util.getPointOnPath(p.path,l,p.segmentsInfo);o.renderLeft=c.x-i.x,o.renderTop=c.y-i.y,o.angle=c.angle+(this.pathSide==="right"?Math.PI:0)},_getGraphemeBox:function(a,o,i,l,p){var c=this.getCompleteStyleDeclaration(o,i),g=l?this.getCompleteStyleDeclaration(o,i-1):{},m=this._measureChar(a,c,l,g),C=m.kernedWidth,S=m.width,x;this.charSpacing!==0&&(x=this._getWidthOfCharSpacing(),S+=x,C+=x);var w={width:S,left:0,height:c.fontSize,kernedWidth:C,deltaY:c.deltaY};if(i>0&&!p){var _=this.__charBounds[o][i-1];w.left=_.left+_.width+m.kernedWidth-m.width}return w},getHeightOfLine:function(a){if(this.__lineHeights[a])return this.__lineHeights[a];for(var o=this._textLines[a],i=this.getHeightOfChar(a,0),l=1,p=o.length;l<p;l++)i=Math.max(this.getHeightOfChar(a,l),i);return this.__lineHeights[a]=i*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var a,o=0,i=0,l=this._textLines.length;i<l;i++)a=this.getHeightOfLine(i),o+=i===l-1?a/this.lineHeight:a;return o},_getLeftOffset:function(){return this.direction==="ltr"?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(a,o){a.save();for(var i=0,l=this._getLeftOffset(),p=this._getTopOffset(),c=0,g=this._textLines.length;c<g;c++){var m=this.getHeightOfLine(c),C=m/this.lineHeight,S=this._getLineLeftOffset(c);this._renderTextLine(o,a,this._textLines[c],l+S,p+i+C,c),i+=m}a.restore()},_renderTextFill:function(a){!this.fill&&!this.styleHas("fill")||this._renderTextCommon(a,"fillText")},_renderTextStroke:function(a){(!this.stroke||this.strokeWidth===0)&&this.isEmptyStyles()||(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(a),a.save(),this._setLineDash(a,this.strokeDashArray),a.beginPath(),this._renderTextCommon(a,"strokeText"),a.closePath(),a.restore())},_renderChars:function(a,o,i,l,p,c){var g=this.getHeightOfLine(c),m=this.textAlign.indexOf("justify")!==-1,C,S,x="",w,_=0,E,I=this.path,M=!m&&this.charSpacing===0&&this.isEmptyStyles(c)&&!I,z=this.direction==="ltr",Q=this.direction==="ltr"?1:-1,ee,q=o.canvas.getAttribute("dir");if(o.save(),q!==this.direction&&(o.canvas.setAttribute("dir",z?"ltr":"rtl"),o.direction=z?"ltr":"rtl",o.textAlign=z?"left":"right"),p-=g*this._fontSizeFraction/this.lineHeight,M){this._renderChar(a,o,c,0,i.join(""),l,p,g),o.restore();return}for(var J=0,ie=i.length-1;J<=ie;J++)E=J===ie||this.charSpacing||I,x+=i[J],w=this.__charBounds[c][J],_===0?(l+=Q*(w.kernedWidth-w.width),_+=w.width):_+=w.kernedWidth,m&&!E&&this._reSpaceAndTab.test(i[J])&&(E=!0),E||(C=C||this.getCompleteStyleDeclaration(c,J),S=this.getCompleteStyleDeclaration(c,J+1),E=n.util.hasStyleChanged(C,S,!1)),E&&(I?(o.save(),o.translate(w.renderLeft,w.renderTop),o.rotate(w.angle),this._renderChar(a,o,c,J,x,-_/2,0,g),o.restore()):(ee=l,this._renderChar(a,o,c,J,x,ee,p,g)),x="",C=S,l+=Q*_,_=0);o.restore()},_applyPatternGradientTransformText:function(a){var o=n.util.createCanvasElement(),i,l=this.width+this.strokeWidth,p=this.height+this.strokeWidth;return o.width=l,o.height=p,i=o.getContext("2d"),i.beginPath(),i.moveTo(0,0),i.lineTo(l,0),i.lineTo(l,p),i.lineTo(0,p),i.closePath(),i.translate(l/2,p/2),i.fillStyle=a.toLive(i),this._applyPatternGradientTransform(i,a),i.fill(),i.createPattern(o,"no-repeat")},handleFiller:function(a,o,i){var l,p;return i.toLive?i.gradientUnits==="percentage"||i.gradientTransform||i.patternTransform?(l=-this.width/2,p=-this.height/2,a.translate(l,p),a[o]=this._applyPatternGradientTransformText(i),{offsetX:l,offsetY:p}):(a[o]=i.toLive(a,this),this._applyPatternGradientTransform(a,i)):(a[o]=i,{offsetX:0,offsetY:0})},_setStrokeStyles:function(a,o){return a.lineWidth=o.strokeWidth,a.lineCap=this.strokeLineCap,a.lineDashOffset=this.strokeDashOffset,a.lineJoin=this.strokeLineJoin,a.miterLimit=this.strokeMiterLimit,this.handleFiller(a,"strokeStyle",o.stroke)},_setFillStyles:function(a,o){return this.handleFiller(a,"fillStyle",o.fill)},_renderChar:function(a,o,i,l,p,c,g){var m=this._getStyleDeclaration(i,l),C=this.getCompleteStyleDeclaration(i,l),S=a==="fillText"&&C.fill,x=a==="strokeText"&&C.stroke&&C.strokeWidth,w,_;!x&&!S||(o.save(),S&&(w=this._setFillStyles(o,C)),x&&(_=this._setStrokeStyles(o,C)),o.font=this._getFontDeclaration(C),m&&m.textBackgroundColor&&this._removeShadow(o),m&&m.deltaY&&(g+=m.deltaY),S&&o.fillText(p,c-w.offsetX,g-w.offsetY),x&&o.strokeText(p,c-_.offsetX,g-_.offsetY),o.restore())},setSuperscript:function(a,o){return this._setScript(a,o,this.superscript)},setSubscript:function(a,o){return this._setScript(a,o,this.subscript)},_setScript:function(a,o,i){var l=this.get2DCursorLocation(a,!0),p=this.getValueOfPropertyAt(l.lineIndex,l.charIndex,"fontSize"),c=this.getValueOfPropertyAt(l.lineIndex,l.charIndex,"deltaY"),g={fontSize:p*i.size,deltaY:c+p*i.baseline};return this.setSelectionStyles(g,a,o),this},_getLineLeftOffset:function(a){var o=this.getLineWidth(a),i=this.width-o,l=this.textAlign,p=this.direction,g,c=0,g=this.isEndOfWrapping(a);return l==="justify"||l==="justify-center"&&!g||l==="justify-right"&&!g||l==="justify-left"&&!g?0:(l==="center"&&(c=i/2),l==="right"&&(c=i),l==="justify-center"&&(c=i/2),l==="justify-right"&&(c=i),p==="rtl"&&(c-=i),c)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var a=this._forceClearCache;return a||(a=this.hasStateChanged("_dimensionAffectingProps")),a&&(this.dirty=!0,this._forceClearCache=!1),a},getLineWidth:function(a){if(this.__lineWidths[a]!==void 0)return this.__lineWidths[a];var o=this.measureLine(a),i=o.width;return this.__lineWidths[a]=i,i},_getWidthOfCharSpacing:function(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(a,o,i){var l=this._getStyleDeclaration(a,o);return l&&typeof l[i]<"u"?l[i]:this[i]},_renderTextDecoration:function(a,o){if(!(!this[o]&&!this.styleHas(o))){a.save(),(o==="overline"||o==="linethrough")&&this._removeShadow(a);for(var i,l,p,c,g,m,C,S,x=this._getLeftOffset(),w=this._getTopOffset(),_,E,I,M,z,Q,ee,q,J=this.path,ie=this._getWidthOfCharSpacing(),se=this.offsets[o],U=0,b=this._textLines.length;U<b;U++){if(i=this.getHeightOfLine(U),!this[o]&&!this.styleHas(o,U)){w+=i;continue}C=this._textLines[U],Q=i/this.lineHeight,c=this._getLineLeftOffset(U),E=0,I=0,S=this.getValueOfPropertyAt(U,0,o),q=this.getValueOfPropertyAt(U,0,"fill"),_=w+Q*(1-this._fontSizeFraction),l=this.getHeightOfChar(U,0),g=this.getValueOfPropertyAt(U,0,"deltaY");for(var O=0,k=C.length;O<k;O++)if(M=this.__charBounds[U][O],z=this.getValueOfPropertyAt(U,O,o),ee=this.getValueOfPropertyAt(U,O,"fill"),p=this.getHeightOfChar(U,O),m=this.getValueOfPropertyAt(U,O,"deltaY"),J&&z&&ee)a.save(),a.fillStyle=q,a.translate(M.renderLeft,M.renderTop),a.rotate(M.angle),a.fillRect(-M.kernedWidth/2,se*p+m,M.kernedWidth,this.fontSize/15),a.restore();else if((z!==S||ee!==q||p!==l||m!==g)&&I>0){var D=x+c+E;this.direction==="rtl"&&(D=this.width-D-I),S&&q&&(a.fillStyle=q,a.fillRect(D,_+se*l+g,I,this.fontSize/15)),E=M.left,I=M.width,S=z,q=ee,l=p,g=m}else I+=M.kernedWidth;var D=x+c+E;this.direction==="rtl"&&(D=this.width-D-I),a.fillStyle=ee,z&&ee&&a.fillRect(D,_+se*l+g,I-ie,this.fontSize/15),w+=i}a.restore()}},_getFontDeclaration:function(a,o){var i=a||this,l=this.fontFamily,p=n.Text.genericFonts.indexOf(l.toLowerCase())>-1,c=l===void 0||l.indexOf("'")>-1||l.indexOf(",")>-1||l.indexOf('"')>-1||p?i.fontFamily:'"'+i.fontFamily+'"';return[n.isLikelyNode?i.fontWeight:i.fontStyle,n.isLikelyNode?i.fontStyle:i.fontWeight,o?this.CACHE_FONT_SIZE+"px":i.fontSize+"px",c].join(" ")},render:function(a){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",a)))},_splitTextIntoLines:function(a){for(var o=a.split(this._reNewline),i=new Array(o.length),l=[`
`],p=[],c=0;c<o.length;c++)i[c]=n.util.string.graphemeSplit(o[c]),p=p.concat(i[c],l);return p.pop(),{_unwrappedLines:i,lines:o,graphemeText:p,graphemeLines:i}},toObject:function(a){var o=h.concat(a),i=this.callSuper("toObject",o);return i.styles=n.util.stylesToArray(this.styles,this.text),i.path&&(i.path=this.path.toObject()),i},set:function(a,o){this.callSuper("set",a,o);var i=!1,l=!1;if(typeof a=="object")for(var p in a)p==="path"&&this.setPathInfo(),i=i||this._dimensionAffectingProps.indexOf(p)!==-1,l=l||p==="path";else i=this._dimensionAffectingProps.indexOf(a)!==-1,l=a==="path";return l&&this.setPathInfo(),i&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),n.Text.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),n.Text.DEFAULT_SVG_FONT_SIZE=16,n.Text.fromElement=function(a,o,i){if(!a)return o(null);var l=n.parseAttributes(a,n.Text.ATTRIBUTE_NAMES),p=l.textAnchor||"left";if(i=n.util.object.extend(i?f(i):{},l),i.top=i.top||0,i.left=i.left||0,l.textDecoration){var c=l.textDecoration;c.indexOf("underline")!==-1&&(i.underline=!0),c.indexOf("overline")!==-1&&(i.overline=!0),c.indexOf("line-through")!==-1&&(i.linethrough=!0),delete i.textDecoration}"dx"in l&&(i.left+=l.dx),"dy"in l&&(i.top+=l.dy),"fontSize"in i||(i.fontSize=n.Text.DEFAULT_SVG_FONT_SIZE);var g="";"textContent"in a?g=a.textContent:"firstChild"in a&&a.firstChild!==null&&"data"in a.firstChild&&a.firstChild.data!==null&&(g=a.firstChild.data),g=g.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var m=i.strokeWidth;i.strokeWidth=0;var C=new n.Text(g,i),S=C.getScaledHeight()/C.height,x=(C.height+C.strokeWidth)*C.lineHeight-C.height,w=x*S,_=C.getScaledHeight()+w,E=0;p==="center"&&(E=C.getScaledWidth()/2),p==="right"&&(E=C.getScaledWidth()),C.set({left:C.left-E,top:C.top-(_-C.fontSize*(.07+C._fontSizeFraction))/C.lineHeight,strokeWidth:typeof m<"u"?m:1}),o(C)},n.Text.fromObject=function(a,o){var i=f(a),l=a.path;return delete i.path,n.Object._fromObject("Text",i,function(p){p.styles=n.util.stylesFromArray(a.styles,a.text),l?n.Object._fromObject("Path",l,function(c){p.set("path",c),o(p)},"path"):o(p)},"text")},n.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],n.util.createAccessors&&n.util.createAccessors(n.Text)}(e),function(){t.util.object.extend(t.Text.prototype,{isEmptyStyles:function(u){if(!this.styles||typeof u<"u"&&!this.styles[u])return!0;var n=typeof u>"u"?this.styles:{line:this.styles[u]};for(var f in n)for(var h in n[f])for(var a in n[f][h])return!1;return!0},styleHas:function(u,n){if(!this.styles||!u||u===""||typeof n<"u"&&!this.styles[n])return!1;var f=typeof n>"u"?this.styles:{0:this.styles[n]};for(var h in f)for(var a in f[h])if(typeof f[h][a][u]<"u")return!0;return!1},cleanStyle:function(u){if(!this.styles||!u||u==="")return!1;var n=this.styles,f=0,h,a,o=!0,i=0,l;for(var p in n){h=0;for(var c in n[p]){var l=n[p][c],g=l.hasOwnProperty(u);f++,g?(a?l[u]!==a&&(o=!1):a=l[u],l[u]===this[u]&&delete l[u]):o=!1,Object.keys(l).length!==0?h++:delete n[p][c]}h===0&&delete n[p]}for(var m=0;m<this._textLines.length;m++)i+=this._textLines[m].length;o&&f===i&&(this[u]=a,this.removeStyle(u))},removeStyle:function(u){if(!(!this.styles||!u||u==="")){var n=this.styles,f,h,a;for(h in n){f=n[h];for(a in f)delete f[a][u],Object.keys(f[a]).length===0&&delete f[a];Object.keys(f).length===0&&delete n[h]}}},_extendStyles:function(u,n){var f=this.get2DCursorLocation(u);this._getLineStyle(f.lineIndex)||this._setLineStyle(f.lineIndex),this._getStyleDeclaration(f.lineIndex,f.charIndex)||this._setStyleDeclaration(f.lineIndex,f.charIndex,{}),t.util.object.extend(this._getStyleDeclaration(f.lineIndex,f.charIndex),n)},get2DCursorLocation:function(u,n){typeof u>"u"&&(u=this.selectionStart);for(var f=n?this._unwrappedTextLines:this._textLines,h=f.length,a=0;a<h;a++){if(u<=f[a].length)return{lineIndex:a,charIndex:u};u-=f[a].length+this.missingNewlineOffset(a,n)}return{lineIndex:a-1,charIndex:f[a-1].length<u?f[a-1].length:u}},getSelectionStyles:function(u,n,f){typeof u>"u"&&(u=this.selectionStart||0),typeof n>"u"&&(n=this.selectionEnd||u);for(var h=[],a=u;a<n;a++)h.push(this.getStyleAtPosition(a,f));return h},getStyleAtPosition:function(u,n){var f=this.get2DCursorLocation(u),h=n?this.getCompleteStyleDeclaration(f.lineIndex,f.charIndex):this._getStyleDeclaration(f.lineIndex,f.charIndex);return h||{}},setSelectionStyles:function(u,n,f){typeof n>"u"&&(n=this.selectionStart||0),typeof f>"u"&&(f=this.selectionEnd||n);for(var h=n;h<f;h++)this._extendStyles(h,u);return this._forceClearCache=!0,this},_getStyleDeclaration:function(u,n){var f=this.styles&&this.styles[u];return f?f[n]:null},getCompleteStyleDeclaration:function(u,n){for(var f=this._getStyleDeclaration(u,n)||{},h={},a,o=0;o<this._styleProperties.length;o++)a=this._styleProperties[o],h[a]=typeof f[a]>"u"?this[a]:f[a];return h},_setStyleDeclaration:function(u,n,f){this.styles[u][n]=f},_deleteStyleDeclaration:function(u,n){delete this.styles[u][n]},_getLineStyle:function(u){return!!this.styles[u]},_setLineStyle:function(u){this.styles[u]={}},_deleteLineStyle:function(u){delete this.styles[u]}})}(),function(){function u(n){n.textDecoration&&(n.textDecoration.indexOf("underline")>-1&&(n.underline=!0),n.textDecoration.indexOf("line-through")>-1&&(n.linethrough=!0),n.textDecoration.indexOf("overline")>-1&&(n.overline=!0),delete n.textDecoration)}t.IText=t.util.createClass(t.Text,t.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(n,f){this.callSuper("initialize",n,f),this.initBehavior()},setSelectionStart:function(n){n=Math.max(n,0),this._updateAndFire("selectionStart",n)},setSelectionEnd:function(n){n=Math.min(n,this.text.length),this._updateAndFire("selectionEnd",n)},_updateAndFire:function(n,f){this[n]!==f&&(this._fireSelectionChanged(),this[n]=f),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(n){this.clearContextTop(),this.callSuper("render",n),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(n){this.callSuper("_render",n)},clearContextTop:function(n){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var f=this.canvas.contextTop,h=this.canvas.viewportTransform;f.save(),f.transform(h[0],h[1],h[2],h[3],h[4],h[5]),this.transform(f),this._clearTextArea(f),n||f.restore()}},renderCursorOrSelection:function(){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var n=this._getCursorBoundaries(),f=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(n,f):this.renderSelection(n,f),f.restore()}},_clearTextArea:function(n){var f=this.width+4,h=this.height+4;n.clearRect(-f/2,-h/2,f,h)},_getCursorBoundaries:function(n){typeof n>"u"&&(n=this.selectionStart);var f=this._getLeftOffset(),h=this._getTopOffset(),a=this._getCursorBoundariesOffsets(n);return{left:f,top:h,leftOffset:a.left,topOffset:a.top}},_getCursorBoundariesOffsets:function(n){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var f,h,a,o=0,i=0,l,p=this.get2DCursorLocation(n);a=p.charIndex,h=p.lineIndex;for(var c=0;c<h;c++)o+=this.getHeightOfLine(c);f=this._getLineLeftOffset(h);var g=this.__charBounds[h][a];return g&&(i=g.left),this.charSpacing!==0&&a===this._textLines[h].length&&(i-=this._getWidthOfCharSpacing()),l={top:o,left:f+(i>0?i:0)},this.direction==="rtl"&&(l.left*=-1),this.cursorOffsetCache=l,this.cursorOffsetCache},renderCursor:function(n,f){var h=this.get2DCursorLocation(),a=h.lineIndex,o=h.charIndex>0?h.charIndex-1:0,i=this.getValueOfPropertyAt(a,o,"fontSize"),l=this.scaleX*this.canvas.getZoom(),p=this.cursorWidth/l,c=n.topOffset,g=this.getValueOfPropertyAt(a,o,"deltaY");c+=(1-this._fontSizeFraction)*this.getHeightOfLine(a)/this.lineHeight-i*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(n,f),f.fillStyle=this.cursorColor||this.getValueOfPropertyAt(a,o,"fill"),f.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,f.fillRect(n.left+n.leftOffset-p/2,c+n.top+g,p,i)},renderSelection:function(n,f){for(var h=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,a=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,o=this.textAlign.indexOf("justify")!==-1,i=this.get2DCursorLocation(h),l=this.get2DCursorLocation(a),p=i.lineIndex,c=l.lineIndex,g=i.charIndex<0?0:i.charIndex,m=l.charIndex<0?0:l.charIndex,C=p;C<=c;C++){var S=this._getLineLeftOffset(C)||0,x=this.getHeightOfLine(C),w=0,_=0,E=0;if(C===p&&(_=this.__charBounds[p][g].left),C>=p&&C<c)E=o&&!this.isEndOfWrapping(C)?this.width:this.getLineWidth(C)||5;else if(C===c)if(m===0)E=this.__charBounds[c][m].left;else{var I=this._getWidthOfCharSpacing();E=this.__charBounds[c][m-1].left+this.__charBounds[c][m-1].width-I}w=x,(this.lineHeight<1||C===c&&this.lineHeight>1)&&(x/=this.lineHeight);var M=n.left+S+_,z=E-_,Q=x,ee=0;this.inCompositionMode?(f.fillStyle=this.compositionColor||"black",Q=1,ee=x):f.fillStyle=this.selectionColor,this.direction==="rtl"&&(M=this.width-M-z),f.fillRect(M,n.top+n.topOffset+ee,z,Q),n.topOffset+=w}},getCurrentCharFontSize:function(){var n=this._getCurrentCharIndex();return this.getValueOfPropertyAt(n.l,n.c,"fontSize")},getCurrentCharColor:function(){var n=this._getCurrentCharIndex();return this.getValueOfPropertyAt(n.l,n.c,"fill")},_getCurrentCharIndex:function(){var n=this.get2DCursorLocation(this.selectionStart,!0),f=n.charIndex>0?n.charIndex-1:0;return{l:n.lineIndex,c:f}}}),t.IText.fromObject=function(n,f){var h=t.util.stylesFromArray(n.styles,n.text),a=Object.assign({},n,{styles:h});if(delete a.path,u(a),a.styles)for(var o in a.styles)for(var i in a.styles[o])u(a.styles[o][i]);t.Object._fromObject("IText",a,function(l){n.path?t.Object._fromObject("Path",n.path,function(p){l.set("path",p),f(l)},"path"):f(l)},"text")}}(),function(){var u=t.util.object.clone;t.util.object.extend(t.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var n=this;this.on("added",function(){var f=n.canvas;f&&(f._hasITextHandlers||(f._hasITextHandlers=!0,n._initCanvasHandlers(f)),f._iTextInstances=f._iTextInstances||[],f._iTextInstances.push(n))})},initRemovedHandler:function(){var n=this;this.on("removed",function(){var f=n.canvas;f&&(f._iTextInstances=f._iTextInstances||[],t.util.removeFromArray(f._iTextInstances,n),f._iTextInstances.length===0&&(f._hasITextHandlers=!1,n._removeCanvasHandlers(f)))})},_initCanvasHandlers:function(n){n._mouseUpITextHandler=function(){n._iTextInstances&&n._iTextInstances.forEach(function(f){f.__isMousedown=!1})},n.on("mouse:up",n._mouseUpITextHandler)},_removeCanvasHandlers:function(n){n.off("mouse:up",n._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(n,f,h,a){var o;return o={isAborted:!1,abort:function(){this.isAborted=!0}},n.animate("_currentCursorOpacity",f,{duration:h,onComplete:function(){o.isAborted||n[a]()},onChange:function(){n.canvas&&n.selectionStart===n.selectionEnd&&n.renderCursorOrSelection()},abort:function(){return o.isAborted}}),o},_onTickComplete:function(){var n=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){n._currentTickCompleteState=n._animateCursor(n,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(n){var f=this,h=n?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){f._tick()},h)},abortCursorAnimation:function(){var n=this._currentTickState||this._currentTickCompleteState,f=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,n&&f&&f.clearContext(f.contextTop||f.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(n){var f=0,h=n-1;if(this._reSpace.test(this._text[h]))for(;this._reSpace.test(this._text[h]);)f++,h--;for(;/\S/.test(this._text[h])&&h>-1;)f++,h--;return n-f},findWordBoundaryRight:function(n){var f=0,h=n;if(this._reSpace.test(this._text[h]))for(;this._reSpace.test(this._text[h]);)f++,h++;for(;/\S/.test(this._text[h])&&h<this._text.length;)f++,h++;return n+f},findLineBoundaryLeft:function(n){for(var f=0,h=n-1;!/\n/.test(this._text[h])&&h>-1;)f++,h--;return n-f},findLineBoundaryRight:function(n){for(var f=0,h=n;!/\n/.test(this._text[h])&&h<this._text.length;)f++,h++;return n+f},searchWordBoundary:function(n,f){for(var h=this._text,a=this._reSpace.test(h[n])?n-1:n,o=h[a],i=t.reNonWord;!i.test(o)&&a>0&&a<h.length;)a+=f,o=h[a];return i.test(o)&&(a+=f===1?0:1),a},selectWord:function(n){n=n||this.selectionStart;var f=this.searchWordBoundary(n,-1),h=this.searchWordBoundary(n,1);this.selectionStart=f,this.selectionEnd=h,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(n){n=n||this.selectionStart;var f=this.findLineBoundaryLeft(n),h=this.findLineBoundaryRight(n);return this.selectionStart=f,this.selectionEnd=h,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(n){if(!(this.isEditing||!this.editable))return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(n),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(n){n._iTextInstances&&n._iTextInstances.forEach(function(f){f.selected=!1,f.isEditing&&f.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(n){if(!(!this.__isMousedown||!this.isEditing)){document.activeElement!==this.hiddenTextarea&&this.hiddenTextarea.focus();var f=this.getSelectionStartFromPointer(n.e),h=this.selectionStart,a=this.selectionEnd;(f!==this.__selectionStartOnMouseDown||h===a)&&(h===f||a===f)||(f>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=f):(this.selectionStart=f,this.selectionEnd=this.__selectionStartOnMouseDown),(this.selectionStart!==h||this.selectionEnd!==a)&&(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(n,f,h){var a=h.slice(0,n),o=t.util.string.graphemeSplit(a).length;if(n===f)return{selectionStart:o,selectionEnd:o};var i=h.slice(n,f),l=t.util.string.graphemeSplit(i).length;return{selectionStart:o,selectionEnd:o+l}},fromGraphemeToStringSelection:function(n,f,h){var a=h.slice(0,n),o=a.join("").length;if(n===f)return{selectionStart:o,selectionEnd:o};var i=h.slice(n,f),l=i.join("").length;return{selectionStart:o,selectionEnd:o+l}},_updateTextarea:function(){if(this.cursorOffsetCache={},!!this.hiddenTextarea){if(!this.inCompositionMode){var n=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=n.selectionStart,this.hiddenTextarea.selectionEnd=n.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var n=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=n.selectionEnd,this.inCompositionMode||(this.selectionStart=n.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var n=this._calcTextareaPosition();this.hiddenTextarea.style.left=n.left,this.hiddenTextarea.style.top=n.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var n=this.inCompositionMode?this.compositionStart:this.selectionStart,f=this._getCursorBoundaries(n),h=this.get2DCursorLocation(n),a=h.lineIndex,o=h.charIndex,i=this.getValueOfPropertyAt(a,o,"fontSize")*this.lineHeight,l=f.leftOffset,p=this.calcTransformMatrix(),c={x:f.left+l,y:f.top+f.topOffset+i},g=this.canvas.getRetinaScaling(),m=this.canvas.upperCanvasEl,C=m.width/g,S=m.height/g,x=C-i,w=S-i,_=m.clientWidth/C,E=m.clientHeight/S;return c=t.util.transformPoint(c,p),c=t.util.transformPoint(c,this.canvas.viewportTransform),c.x*=_,c.y*=E,c.x<0&&(c.x=0),c.x>x&&(c.x=x),c.y<0&&(c.y=0),c.y>w&&(c.y=w),c.x+=this.canvas._offset.left,c.y+=this.canvas._offset.top,{left:c.x+"px",top:c.y+"px",fontSize:i+"px",charHeight:i}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var n=this._textBeforeEdit!==this.text,f=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,f&&(f.blur&&f.blur(),f.parentNode&&f.parentNode.removeChild(f)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),n&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),n&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var n in this.styles)this._textLines[n]||delete this.styles[n]},removeStyleFromTo:function(n,f){var h=this.get2DCursorLocation(n,!0),a=this.get2DCursorLocation(f,!0),o=h.lineIndex,i=h.charIndex,l=a.lineIndex,p=a.charIndex,c,g;if(o!==l){if(this.styles[o])for(c=i;c<this._unwrappedTextLines[o].length;c++)delete this.styles[o][c];if(this.styles[l])for(c=p;c<this._unwrappedTextLines[l].length;c++)g=this.styles[l][c],g&&(this.styles[o]||(this.styles[o]={}),this.styles[o][i+c-p]=g);for(c=o+1;c<=l;c++)delete this.styles[c];this.shiftLineStyles(l,o-l)}else if(this.styles[o]){g=this.styles[o];var m=p-i,C,S;for(c=i;c<p;c++)delete g[c];for(S in this.styles[o])C=parseInt(S,10),C>=p&&(g[C-m]=g[S],delete g[S])}},shiftLineStyles:function(n,f){var h=u(this.styles);for(var a in this.styles){var o=parseInt(a,10);o>n&&(this.styles[o+f]=h[o],h[o-f]||delete this.styles[o])}},restartCursorIfNeeded:function(){(!this._currentTickState||this._currentTickState.isAborted||!this._currentTickCompleteState||this._currentTickCompleteState.isAborted)&&this.initDelayedCursor()},insertNewlineStyleObject:function(n,f,h,a){var o,i={},l=!1,p=this._unwrappedTextLines[n].length,c=p===f;h||(h=1),this.shiftLineStyles(n,h),this.styles[n]&&(o=this.styles[n][f===0?f:f-1]);for(var g in this.styles[n]){var m=parseInt(g,10);m>=f&&(l=!0,i[m-f]=this.styles[n][g],c&&f===0||delete this.styles[n][g])}var C=!1;for(l&&!c&&(this.styles[n+h]=i,C=!0),(C||p>f)&&h--;h>0;)a&&a[h-1]?this.styles[n+h]={0:u(a[h-1])}:o?this.styles[n+h]={0:u(o)}:delete this.styles[n+h],h--;this._forceClearCache=!0},insertCharStyleObject:function(n,f,h,a){this.styles||(this.styles={});var o=this.styles[n],i=o?u(o):{};h||(h=1);for(var l in i){var p=parseInt(l,10);p>=f&&(o[p+h]=i[p],i[p-h]||delete o[p])}if(this._forceClearCache=!0,a){for(;h--;)Object.keys(a[h]).length&&(this.styles[n]||(this.styles[n]={}),this.styles[n][f+h]=u(a[h]));return}if(o)for(var c=o[f?f-1:1];c&&h--;)this.styles[n][f+h]=u(c)},insertNewStyleBlock:function(n,f,h){for(var a=this.get2DCursorLocation(f,!0),o=[0],i=0,l=0;l<n.length;l++)n[l]===`
`?(i++,o[i]=0):o[i]++;o[0]>0&&(this.insertCharStyleObject(a.lineIndex,a.charIndex,o[0],h),h=h&&h.slice(o[0]+1)),i&&this.insertNewlineStyleObject(a.lineIndex,a.charIndex+o[0],i);for(var l=1;l<i;l++)o[l]>0?this.insertCharStyleObject(a.lineIndex+l,0,o[l],h):h&&this.styles[a.lineIndex+l]&&h[0]&&(this.styles[a.lineIndex+l][0]=h[0]),h=h&&h.slice(o[l]+1);o[l]>0&&this.insertCharStyleObject(a.lineIndex+l,0,o[l],h)},setSelectionStartEndWithShift:function(n,f,h){h<=n?(f===n?this._selectionDirection="left":this._selectionDirection==="right"&&(this._selectionDirection="left",this.selectionEnd=n),this.selectionStart=h):h>n&&h<f?this._selectionDirection==="right"?this.selectionEnd=h:this.selectionStart=h:(f===n?this._selectionDirection="right":this._selectionDirection==="left"&&(this._selectionDirection="right",this.selectionStart=f),this.selectionEnd=h)},setSelectionInBoundaries:function(){var n=this.text.length;this.selectionStart>n?this.selectionStart=n:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>n?this.selectionEnd=n:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),t.util.object.extend(t.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(u){if(this.canvas){this.__newClickTime=+new Date;var n=u.pointer;this.isTripleClick(n)&&(this.fire("tripleclick",u),this._stopEvent(u.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=n,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(u){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===u.x&&this.__lastPointer.y===u.y},_stopEvent:function(u){u.preventDefault&&u.preventDefault(),u.stopPropagation&&u.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(u){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(u.e))},tripleClickHandler:function(u){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(u.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(u){!this.canvas||!this.editable||u.e.button&&u.e.button!==1||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(u.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(u){!this.canvas||!this.editable||u.e.button&&u.e.button!==1||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(u){if(this.__isMousedown=!1,!(!this.editable||this.group||u.transform&&u.transform.actionPerformed||u.e.button&&u.e.button!==1)){if(this.canvas){var n=this.canvas._activeObject;if(n&&n!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(u.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(u){var n=this.getSelectionStartFromPointer(u),f=this.selectionStart,h=this.selectionEnd;u.shiftKey?this.setSelectionStartEndWithShift(f,h,n):(this.selectionStart=n,this.selectionEnd=n),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(u){for(var n=this.getLocalPointer(u),f=0,h=0,a=0,o=0,i=0,l,p,c=0,g=this._textLines.length;c<g&&a<=n.y;c++)a+=this.getHeightOfLine(c)*this.scaleY,i=c,c>0&&(o+=this._textLines[c-1].length+this.missingNewlineOffset(c-1));l=this._getLineLeftOffset(i),h=l*this.scaleX,p=this._textLines[i],this.direction==="rtl"&&(n.x=this.width*this.scaleX-n.x+h);for(var m=0,C=p.length;m<C&&(f=h,h+=this.__charBounds[i][m].kernedWidth*this.scaleX,h<=n.x);m++)o++;return this._getNewSelectionStartFromOffset(n,f,h,o,C)},_getNewSelectionStartFromOffset:function(u,n,f,h,a){var o=u.x-n,i=f-u.x,l=i>o||i<0?0:1,p=h+l;return this.flipX&&(p=a-p),p>this._text.length&&(p=this._text.length),p}}),t.util.object.extend(t.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=t.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var u=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+u.top+"; left: "+u.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: "+u.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):t.document.body.appendChild(this.hiddenTextarea),t.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),t.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),t.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),t.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),t.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),t.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),t.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),t.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),t.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(t.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(u){if(this.isEditing){var n=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(u.keyCode in n)this[n[u.keyCode]](u);else if(u.keyCode in this.ctrlKeysMapDown&&(u.ctrlKey||u.metaKey))this[this.ctrlKeysMapDown[u.keyCode]](u);else return;u.stopImmediatePropagation(),u.preventDefault(),u.keyCode>=33&&u.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(u){if(!this.isEditing||this._copyDone||this.inCompositionMode){this._copyDone=!1;return}if(u.keyCode in this.ctrlKeysMapUp&&(u.ctrlKey||u.metaKey))this[this.ctrlKeysMapUp[u.keyCode]](u);else return;u.stopImmediatePropagation(),u.preventDefault(),this.canvas&&this.canvas.requestRenderAll()},onInput:function(u){var n=this.fromPaste;if(this.fromPaste=!1,u&&u.stopPropagation(),!!this.isEditing){var f=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,h=this._text.length,a=f.length,o,i,l=a-h,p=this.selectionStart,c=this.selectionEnd,g=p!==c,m,C,S;if(this.hiddenTextarea.value===""){this.styles={},this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll());return}var x=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),w=p>x.selectionStart;g?(o=this._text.slice(p,c),l+=c-p):a<h&&(w?o=this._text.slice(c+l,c):o=this._text.slice(p,p-l)),i=f.slice(x.selectionEnd-l,x.selectionEnd),o&&o.length&&(i.length&&(m=this.getSelectionStyles(p,p+1,!1),m=i.map(function(){return m[0]})),g?(C=p,S=c):w?(C=c-o.length,S=c):(C=c,S=c+o.length),this.removeStyleFromTo(C,S)),i.length&&(n&&i.join("")===t.copiedText&&!t.disableStyleCopyPaste&&(m=t.copiedTextStyle),this.insertNewStyleBlock(i,p,m)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(u){this.compositionStart=u.target.selectionStart,this.compositionEnd=u.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(t.copiedText=this.getSelectedText(),t.disableStyleCopyPaste?t.copiedTextStyle=null:t.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(u){return u&&u.clipboardData||t.window.clipboardData},_getWidthBeforeCursor:function(u,n){var f=this._getLineLeftOffset(u),h;return n>0&&(h=this.__charBounds[u][n-1],f+=h.left+h.width),f},getDownCursorOffset:function(u,n){var f=this._getSelectionForOffset(u,n),h=this.get2DCursorLocation(f),a=h.lineIndex;if(a===this._textLines.length-1||u.metaKey||u.keyCode===34)return this._text.length-f;var o=h.charIndex,i=this._getWidthBeforeCursor(a,o),l=this._getIndexOnLine(a+1,i),p=this._textLines[a].slice(o);return p.length+l+1+this.missingNewlineOffset(a)},_getSelectionForOffset:function(u,n){return u.shiftKey&&this.selectionStart!==this.selectionEnd&&n?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(u,n){var f=this._getSelectionForOffset(u,n),h=this.get2DCursorLocation(f),a=h.lineIndex;if(a===0||u.metaKey||u.keyCode===33)return-f;var o=h.charIndex,i=this._getWidthBeforeCursor(a,o),l=this._getIndexOnLine(a-1,i),p=this._textLines[a].slice(0,o),c=this.missingNewlineOffset(a-1);return-this._textLines[a-1].length+l-p.length+(1-c)},_getIndexOnLine:function(u,n){for(var f=this._textLines[u],h=this._getLineLeftOffset(u),a=h,o=0,i,l,p=0,c=f.length;p<c;p++)if(i=this.__charBounds[u][p].width,a+=i,a>n){l=!0;var g=a-i,m=a,C=Math.abs(g-n),S=Math.abs(m-n);o=S<C?p:p-1;break}return l||(o=f.length-1),o},moveCursorDown:function(u){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",u)},moveCursorUp:function(u){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",u)},_moveCursorUpOrDown:function(u,n){var f="get"+u+"CursorOffset",h=this[f](n,this._selectionDirection==="right");n.shiftKey?this.moveCursorWithShift(h):this.moveCursorWithoutShift(h),h!==0&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(u){var n=this._selectionDirection==="left"?this.selectionStart+u:this.selectionEnd+u;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,n),u!==0},moveCursorWithoutShift:function(u){return u<0?(this.selectionStart+=u,this.selectionEnd=this.selectionStart):(this.selectionEnd+=u,this.selectionStart=this.selectionEnd),u!==0},moveCursorLeft:function(u){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",u)},_move:function(u,n,f){var h;if(u.altKey)h=this["findWordBoundary"+f](this[n]);else if(u.metaKey||u.keyCode===35||u.keyCode===36)h=this["findLineBoundary"+f](this[n]);else return this[n]+=f==="Left"?-1:1,!0;if(typeof h<"u"&&this[n]!==h)return this[n]=h,!0},_moveLeft:function(u,n){return this._move(u,n,"Left")},_moveRight:function(u,n){return this._move(u,n,"Right")},moveCursorLeftWithoutShift:function(u){var n=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(n=this._moveLeft(u,"selectionStart")),this.selectionEnd=this.selectionStart,n},moveCursorLeftWithShift:function(u){if(this._selectionDirection==="right"&&this.selectionStart!==this.selectionEnd)return this._moveLeft(u,"selectionEnd");if(this.selectionStart!==0)return this._selectionDirection="left",this._moveLeft(u,"selectionStart")},moveCursorRight:function(u){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",u)},_moveCursorLeftOrRight:function(u,n){var f="moveCursor"+u+"With";this._currentCursorOpacity=1,n.shiftKey?f+="Shift":f+="outShift",this[f](n)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(u){if(this._selectionDirection==="left"&&this.selectionStart!==this.selectionEnd)return this._moveRight(u,"selectionStart");if(this.selectionEnd!==this._text.length)return this._selectionDirection="right",this._moveRight(u,"selectionEnd")},moveCursorRightWithoutShift:function(u){var n=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(n=this._moveRight(u,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,n},removeChars:function(u,n){typeof n>"u"&&(n=u+1),this.removeStyleFromTo(u,n),this._text.splice(u,n-u),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(u,n,f,h){typeof h>"u"&&(h=f),h>f&&this.removeStyleFromTo(f,h);var a=t.util.string.graphemeSplit(u);this.insertNewStyleBlock(a,f,n),this._text=[].concat(this._text.slice(0,f),a,this._text.slice(h)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var u=t.util.toFixed,n=t.util.radiansToDegrees,f=t.util.calcRotateMatrix,h=t.util.transformPoint,a=/  +/g;t.util.object.extend(t.Text.prototype,{_toSVG:function(){var o=this._getSVGLeftTopOffsets(),i=this._getSVGTextAndBg(o.textTop,o.textLeft);return this._wrapSVGTextAndBg(i)},toSVG:function(o){var i=this._createBaseSVGMarkup(this._toSVG(),{reviver:o,noStyle:!0,withShadow:!0}),l=this.path;return l?i+l._createBaseSVGMarkup(l._toSVG(),{reviver:o,withShadow:!0}):i},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(o){var i=!0,l=this.getSvgTextDecoration(this);return[o.textBgRects.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",l?'text-decoration="'+l+'" ':"",'style="',this.getSvgStyles(i),'"',this.addPaintOrder()," >",o.textSpans.join(""),`</text>
`]},_getSVGTextAndBg:function(o,i){var l=[],p=[],c=o,g;this._setSVGBg(p);for(var m=0,C=this._textLines.length;m<C;m++)g=this._getLineLeftOffset(m),(this.textBackgroundColor||this.styleHas("textBackgroundColor",m))&&this._setSVGTextLineBg(p,m,i+g,c),this._setSVGTextLineText(l,m,i+g,c),c+=this.getHeightOfLine(m);return{textSpans:l,textBgRects:p}},_createTextCharSpan:function(o,i,l,p,c){var g=o!==o.trim()||o.match(a),m=this.getSvgSpanStyles(i,g),C=m?'style="'+m+'"':"",S=i.deltaY,x="",w=t.Object.NUM_FRACTION_DIGITS,_="";if(S&&(x=' dy="'+u(S,w)+'" '),c.renderLeft!==void 0){var E=c.angle;_=' rotate="'+u(n(E),t.Object.NUM_FRACTION_DIGITS)+'" ';var I=c.width/2,M=f({angle:n(E)});M[4]=c.renderLeft,M[5]=c.renderTop;var z=h({x:-I,y:0},M);l=z.x,p=z.y}return['<tspan x="',u(l,w),'" y="',u(p,w),'" ',x,C,_,">",t.util.string.escapeXml(o),"</tspan>"].join("")},_setSVGTextLineText:function(o,i,l,p){var c=this.getHeightOfLine(i),g=this.textAlign.indexOf("justify")!==-1,m,C,S="",x,w,_=0,E=this._textLines[i],I;p+=c*(1-this._fontSizeFraction)/this.lineHeight;for(var M=0,z=E.length-1;M<=z;M++)I=M===z||this.charSpacing||this.path,S+=E[M],x=this.__charBounds[i][M],_===0?(l+=x.kernedWidth-x.width,_+=x.width):_+=x.kernedWidth,g&&!I&&this._reSpaceAndTab.test(E[M])&&(I=!0),I||(m=m||this.getCompleteStyleDeclaration(i,M),C=this.getCompleteStyleDeclaration(i,M+1),I=t.util.hasStyleChanged(m,C,!0)),I&&(w=this._getStyleDeclaration(i,M)||{},o.push(this._createTextCharSpan(S,w,l,p,x)),S="",m=C,l+=_,_=0)},_pushTextBgRect:function(o,i,l,p,c,g){var m=t.Object.NUM_FRACTION_DIGITS;o.push("		<rect ",this._getFillAttributes(i),' x="',u(l,m),'" y="',u(p,m),'" width="',u(c,m),'" height="',u(g,m),`"></rect>
`)},_setSVGTextLineBg:function(o,i,l,p){for(var c=this._textLines[i],g=this.getHeightOfLine(i)/this.lineHeight,m=0,C=0,S,x,w=this.getValueOfPropertyAt(i,0,"textBackgroundColor"),_=0,E=c.length;_<E;_++)S=this.__charBounds[i][_],x=this.getValueOfPropertyAt(i,_,"textBackgroundColor"),x!==w?(w&&this._pushTextBgRect(o,w,l+C,p,m,g),C=S.left,m=S.width,w=x):m+=S.kernedWidth;x&&this._pushTextBgRect(o,x,l+C,p,m,g)},_getFillAttributes:function(o){var i=o&&typeof o=="string"?new t.Color(o):"";return!i||!i.getSource()||i.getAlpha()===1?'fill="'+o+'"':'opacity="'+i.getAlpha()+'" fill="'+i.setAlpha(1).toRgb()+'"'},_getSVGLineTopOffset:function(o){for(var i=0,l=0,p=0;p<o;p++)i+=this.getHeightOfLine(p);return l=this.getHeightOfLine(p),{lineTop:i,offset:(this._fontSizeMult-this._fontSizeFraction)*l/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(o){var i=t.Object.prototype.getSvgStyles.call(this,o);return i+" white-space: pre;"}})}(),function(u){var n=u.fabric||(u.fabric={});n.Textbox=n.util.createClass(n.IText,n.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:n.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(f){for(var h=0,a=0,o=0,i={},l=0;l<f.graphemeLines.length;l++)f.graphemeText[o]===`
`&&l>0?(a=0,o++,h++):!this.splitByGrapheme&&this._reSpaceAndTab.test(f.graphemeText[o])&&l>0&&(a++,o++),i[l]={line:h,offset:a},o+=f.graphemeLines[l].length,a+=f.graphemeLines[l].length;return i},styleHas:function(f,h){if(this._styleMap&&!this.isWrapping){var a=this._styleMap[h];a&&(h=a.line)}return n.Text.prototype.styleHas.call(this,f,h)},isEmptyStyles:function(f){if(!this.styles)return!0;var h=0,a=f+1,o,i,l=!1,p=this._styleMap[f],c=this._styleMap[f+1];p&&(f=p.line,h=p.offset),c&&(a=c.line,l=a===f,o=c.offset),i=typeof f>"u"?this.styles:{line:this.styles[f]};for(var g in i)for(var m in i[g])if(m>=h&&(!l||m<o))for(var C in i[g][m])return!1;return!0},_getStyleDeclaration:function(f,h){if(this._styleMap&&!this.isWrapping){var a=this._styleMap[f];if(!a)return null;f=a.line,h=a.offset+h}return this.callSuper("_getStyleDeclaration",f,h)},_setStyleDeclaration:function(f,h,a){var o=this._styleMap[f];f=o.line,h=o.offset+h,this.styles[f][h]=a},_deleteStyleDeclaration:function(f,h){var a=this._styleMap[f];f=a.line,h=a.offset+h,delete this.styles[f][h]},_getLineStyle:function(f){var h=this._styleMap[f];return!!this.styles[h.line]},_setLineStyle:function(f){var h=this._styleMap[f];this.styles[h.line]={}},_wrapText:function(f,h){var a=[],o;for(this.isWrapping=!0,o=0;o<f.length;o++)a=a.concat(this._wrapLine(f[o],o,h));return this.isWrapping=!1,a},_measureWord:function(f,h,a){var o=0,i,l=!0;a=a||0;for(var p=0,c=f.length;p<c;p++){var g=this._getGraphemeBox(f[p],h,p+a,i,l);o+=g.kernedWidth,i=f[p]}return o},_wrapLine:function(f,h,a,M){var i=0,l=this.splitByGrapheme,p=[],c=[],g=l?n.util.string.graphemeSplit(f):f.split(this._wordJoiners),m="",C=0,S=l?"":" ",x=0,w=0,_=0,E=!0,I=this._getWidthOfCharSpacing(),M=M||0;g.length===0&&g.push([]),a-=M;for(var z=0;z<g.length;z++)m=l?g[z]:n.util.string.graphemeSplit(g[z]),x=this._measureWord(m,h,C),C+=m.length,i+=w+x-I,i>a&&!E?(p.push(c),c=[],i=x,E=!0):i+=I,!E&&!l&&c.push(S),c=c.concat(m),w=l?0:this._measureWord([S],h,C),C++,E=!1,x>_&&(_=x);return z&&p.push(c),_+M>this.dynamicMinWidth&&(this.dynamicMinWidth=_-I+M),p},isEndOfWrapping:function(f){return!this._styleMap[f+1]||this._styleMap[f+1].line!==this._styleMap[f].line},missingNewlineOffset:function(f,h){return this.splitByGrapheme&&!h?this.isEndOfWrapping(f)?1:0:1},_splitTextIntoLines:function(f){for(var h=n.Text.prototype._splitTextIntoLines.call(this,f),a=this._wrapText(h.lines,this.width),o=new Array(a.length),i=0;i<a.length;i++)o[i]=a[i].join("");return h.lines=o,h.graphemeLines=a,h},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var f={};for(var h in this._styleMap)this._textLines[h]&&(f[this._styleMap[h].line]=1);for(var h in this.styles)f[h]||delete this.styles[h]},toObject:function(f){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(f))}}),n.Textbox.fromObject=function(f,h){var a=n.util.stylesFromArray(f.styles,f.text),o=Object.assign({},f,{styles:a});return delete o.path,n.Object._fromObject("Textbox",o,function(i){f.path?n.Object._fromObject("Path",f.path,function(l){i.set("path",l),h(i)},"path"):h(i)},"text")}}(e),function(){var u=t.controlsUtils,n=u.scaleSkewCursorStyleHandler,f=u.scaleCursorStyleHandler,h=u.scalingEqually,a=u.scalingYOrSkewingX,o=u.scalingXOrSkewingY,i=u.scaleOrSkewActionName,l=t.Object.prototype.controls;if(l.ml=new t.Control({x:-.5,y:0,cursorStyleHandler:n,actionHandler:o,getActionName:i}),l.mr=new t.Control({x:.5,y:0,cursorStyleHandler:n,actionHandler:o,getActionName:i}),l.mb=new t.Control({x:0,y:.5,cursorStyleHandler:n,actionHandler:a,getActionName:i}),l.mt=new t.Control({x:0,y:-.5,cursorStyleHandler:n,actionHandler:a,getActionName:i}),l.tl=new t.Control({x:-.5,y:-.5,cursorStyleHandler:f,actionHandler:h}),l.tr=new t.Control({x:.5,y:-.5,cursorStyleHandler:f,actionHandler:h}),l.bl=new t.Control({x:-.5,y:.5,cursorStyleHandler:f,actionHandler:h}),l.br=new t.Control({x:.5,y:.5,cursorStyleHandler:f,actionHandler:h}),l.mtr=new t.Control({x:0,y:-.5,actionHandler:u.rotationWithSnapping,cursorStyleHandler:u.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),t.Textbox){var p=t.Textbox.prototype.controls={};p.mtr=l.mtr,p.tr=l.tr,p.br=l.br,p.tl=l.tl,p.bl=l.bl,p.mt=l.mt,p.mb=l.mb,p.mr=new t.Control({x:.5,y:0,actionHandler:u.changeWidth,cursorStyleHandler:n,actionName:"resizing"}),p.ml=new t.Control({x:-.5,y:0,actionHandler:u.changeWidth,cursorStyleHandler:n,actionName:"resizing"})}}()})(dn);const Zy=e=>{switch(e){case"normal":return"Colorless";case"electric":return"Lightning";default:return e.charAt(0).toUpperCase()+e.slice(1)}},e0=e=>{switch(e){case"basic":return"Basic";case"stage-1":return"Stage 1";case"stage-2":return"Stage 2";default:return"Basic"}},hf=(e,t)=>{const r=Zy(e);return`assets/backgrounds/SS_${e0(t).replace(" ","")}_${r}.png`},t0={charizard:{name:"Charizard",hp:"220",type:"fire",stage:"stage-2",evolvesFrom:"Charmeleon",category:"Flame",pokedexNumber:"6",height:{feet:"5",inches:"7"},weight:"199.5",abilityName:"Fire Aura",abilityText:"Once during your turn, you may attach a Fire Energy card from your hand to 1 of your Pokmon.",attacks:[{name:"Fire Spin",damage:"120",energyCost:[{type:"fire",amount:3}],text:"Discard 2 Energy attached to this Pokmon."},{name:"Inferno Wing",damage:"220",energyCost:[{type:"fire",amount:4},{type:"normal",amount:1}],text:"This Pokmon does 30 damage to itself."}],weakness:"water",resistance:"fighting",retreatCost:3},blastoise:{name:"Blastoise",hp:"210",type:"water",stage:"stage-2",evolvesFrom:"Wartortle",category:"Shellfish",pokedexNumber:"9",height:{feet:"5",inches:"3"},weight:"188.5",abilityName:"Deluge",abilityText:"As often as you like during your turn, you may attach a Water Energy card from your hand to 1 of your Pokmon.",attacks:[{name:"Hydro Pump",damage:"130",energyCost:[{type:"water",amount:3}],text:"This attack does 30 more damage for each Water Energy attached to this Pokmon beyond 3."},{name:"",damage:"",energyCost:[],text:""}],weakness:"electric",resistance:"fire",retreatCost:3},dualTypeExample:{name:"Charizard GX",hp:"250",type:"fire",secondType:"dark",isDualType:!0,maskUrl:"assets/masks/mask1.png",stage:"stage-2",evolvesFrom:"Charmeleon",category:"Flame",pokedexNumber:"6",height:{feet:"5",inches:"7"},weight:"199.5",abilityName:"Burning Road",abilityText:"When you attach a Fire Energy card from your hand to this Pokmon, you may search your deck for up to 2 Fire Energy cards and attach them to this Pokmon. Then, shuffle your deck.",attacks:[{name:"Crimson Storm",damage:"200",energyCost:[{type:"fire",amount:3},{type:"dark",amount:1}],text:"Discard 3 Energy from this Pokmon."},{name:"Raging Out-GX",damage:"300",energyCost:[{type:"fire",amount:3},{type:"dark",amount:2}],text:"You can't use more than 1 GX attack in a game."}],weakness:"water",resistance:"fighting",retreatCost:3,holographic:!0}},df=e=>{const t=[];return t.push({id:"baseCard",type:"image",src:hf(e.type,e.stage),selectable:!1,evented:!1,zIndex:0}),e.isDualType&&e.secondType&&t.push({id:"secondType",type:"image",src:hf(e.secondType,e.stage),mask:e.maskUrl||"",selectable:!1,evented:!1,zIndex:1}),t.push({id:"cardFrame",type:"image",src:r0(e.type,e.rarity),selectable:!1,evented:!1,zIndex:10}),t.push({id:"pokemonImage",type:"image",src:e.pokemonImageUrl||null,left:373.5,top:260,selectable:!0,evented:!0,zIndex:5}),e.stage!=="basic"&&e.prevolveImageUrl&&t.push({id:"prevolveImage",type:"image",src:e.prevolveImageUrl,left:90,top:115,scaleX:.2,scaleY:.2,selectable:!0,evented:!0,zIndex:6}),t},r0=(e,t)=>`assets/frames/${e}_${t}.png`,pf={default:"assets/maskPreviews/default.png",horizontal:"assets/maskPreviews/horizontal.png",vertical:"assets/maskPreviews/vertical.png",wave:"assets/maskPreviews/wave.png",circle:"assets/maskPreviews/circle.png",flame:"assets/maskPreviews/flame.png",zigzag:"assets/maskPreviews/zigzag.png"},Pr=e=>pf[e]||pf.default,n0=(e,t)=>!t||t===""?{clipPath:new dn.fabric.Polygon({points:[{x:0,y:0},{x:e.width,y:0},{x:0,y:e.height}],absolutePositioned:!0})}:new Promise(r=>{dn.fabric.Image.fromURL(t,s=>{s.scaleToWidth(e.width),s.scaleToHeight(e.height),r({clipPath:s,clipTo:null})})}),i0=()=>[{id:"",name:"Default Diagonal",previewUrl:Pr("default")},{id:"img/masks/mask1.png",name:"Horizontal Split",previewUrl:Pr("horizontal")},{id:"img/masks/mask2.png",name:"Vertical Split",previewUrl:Pr("vertical")},{id:"img/masks/mask3.png",name:"Wave Pattern",previewUrl:Pr("wave")},{id:"img/masks/mask4.png",name:"Circle Blend",previewUrl:Pr("circle")},{id:"img/masks/mask5.png",name:"Flame Pattern",previewUrl:Pr("flame")},{id:"img/masks/mask6.png",name:"Zig-Zag",previewUrl:Pr("zigzag")}],a0=(e,t,r,s)=>{const d=e.getContext("2d"),v=e.width,y=e.height;if(d.fillStyle=r,d.fillRect(0,0,v,y),!t||t===""){d.fillStyle=s,d.beginPath(),d.moveTo(0,0),d.lineTo(v,0),d.lineTo(0,y),d.closePath(),d.fill();return}const u=new Image;u.onload=()=>{d.fillStyle=s,d.globalCompositeOperation="destination-in",d.drawImage(u,0,0,v,y),d.globalCompositeOperation="source-over"},u.src=t},o0=()=>{const e=ae.useRef(null),t=ae.useRef(null),r=Tr(),{layers:s,setLayers:d,selectedLayerId:v,setSelectedLayerId:y}=xu();return ae.useEffect(()=>{t.current=new dn.fabric.Canvas(e.current,{width:747,height:1038,preserveObjectStacking:!0,selection:!1,backgroundColor:"#f5f5f5"});const u=df(r);return d(u),t.current.on("selection:created",n=>{n.selected&&n.selected[0]&&y(n.selected[0].id)}),t.current.on("selection:cleared",()=>{y(null)}),()=>{t.current.dispose()}},[]),ae.useEffect(()=>{if(!t.current)return;t.current.clear(),df(r).forEach(async n=>{let f;switch(n.type){case"image":if(!n.src)return;await new Promise(h=>{dn.fabric.Image.fromURL(n.src,a=>{a.id=n.id,a.selectable=n.selectable,a.evented=n.evented,n.mask?n0(a,n.mask).then(o=>{Object.assign(a,o),t.current.add(a),h()}):(t.current.add(a),h())})});break;case"text":f=new dn.fabric.Text(n.text||"",{id:n.id,left:n.left||0,top:n.top||0,fontFamily:n.fontFamily||"Arial",fontSize:n.fontSize||20,fill:n.fill||"#000",selectable:n.selectable,evented:n.evented}),t.current.add(f);break;default:console.warn(`Unknown layer type: ${n.type}`)}}),t.current.discardActiveObject(),t.current.renderAll()},[r,s]),R.jsx("div",{className:"canvas-container",children:R.jsx("canvas",{ref:e})})},bp=(e,t="pokemon-card")=>{if(!e){console.error("Canvas is not available for export");return}const r=t.trim()?`${t.trim().replace(/[^\w\-. ]/g,"")}.png`:"pokemon-card.png",s=e.toDataURL({format:"png",quality:1,multiplier:2}),d=document.createElement("a");d.download=r,d.href=s,document.body.appendChild(d),d.click(),document.body.removeChild(d)},s0=async(e,t="pokemon-card")=>{try{const r=await ih(()=>import("./html2canvas.esm-e0a7d97b.js"),[]).then(u=>u.default),s=t.trim()?`${t.trim().replace(/[^\w\-. ]/g,"")}.png`:"pokemon-card.png",v=(await r(e,{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:null})).toDataURL("image/png"),y=document.createElement("a");y.download=s,y.href=v,document.body.appendChild(y),y.click(),document.body.removeChild(y)}catch(r){console.error("Error exporting card with masks:",r);const s=document.querySelector("canvas.upper-canvas");s&&bp(s.__fabric,t)}},l0=(e,t=3,r=3)=>{if(!e){console.error("Canvas is not available for export");return}const s=747,d=1038,v=30,y=s*t+v*(t+1),u=d*r+v*(r+1),n=document.createElement("canvas");n.width=y,n.height=u;const f=n.getContext("2d");f.fillStyle="#ffffff",f.fillRect(0,0,y,u);const h=e.toDataURL({format:"png",multiplier:1}),a=new Image;a.onload=()=>{for(let l=0;l<r;l++)for(let p=0;p<t;p++){const c=v+p*(s+v),g=v+l*(d+v);f.drawImage(a,c,g,s,d)}const o=n.toDataURL("image/png"),i=document.createElement("a");i.download="pokemon-card-sheet.png",i.href=o,document.body.appendChild(i),i.click(),document.body.removeChild(i)},a.src=h};var _p={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},gf=ge.createContext&&ge.createContext(_p),gr=globalThis&&globalThis.__assign||function(){return gr=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++){t=arguments[r];for(var d in t)Object.prototype.hasOwnProperty.call(t,d)&&(e[d]=t[d])}return e},gr.apply(this,arguments)},u0=globalThis&&globalThis.__rest||function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,s=Object.getOwnPropertySymbols(e);d<s.length;d++)t.indexOf(s[d])<0&&Object.prototype.propertyIsEnumerable.call(e,s[d])&&(r[s[d]]=e[s[d]]);return r};function Tp(e){return e&&e.map(function(t,r){return ge.createElement(t.tag,gr({key:r},t.attr),Tp(t.child))})}function Rt(e){return function(t){return ge.createElement(c0,gr({attr:gr({},e.attr)},t),Tp(e.child))}}function c0(e){var t=function(r){var s=e.attr,d=e.size,v=e.title,y=u0(e,["attr","size","title"]),u=d||r.size||"1em",n;return r.className&&(n=r.className),e.className&&(n=(n?n+" ":"")+e.className),ge.createElement("svg",gr({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,s,y,{className:n,style:gr(gr({color:e.color||r.color},r.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),v&&ge.createElement("title",null,v),e.children)};return gf!==void 0?ge.createElement(gf.Consumer,null,function(r){return t(r)}):t(_p)}function f0(e){return Rt({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M413.1 222.5l22.2 22.2c9.4 9.4 9.4 24.6 0 33.9L241 473c-9.4 9.4-24.6 9.4-33.9 0L12.7 278.6c-9.4-9.4-9.4-24.6 0-33.9l22.2-22.2c9.5-9.5 25-9.3 34.3.4L184 343.4V56c0-13.3 10.7-24 24-24h32c13.3 0 24 10.7 24 24v287.4l114.8-120.5c9.3-9.8 24.8-10 34.3-.4z"}}]})(e)}function h0(e){return Rt({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6 0-33.9L207 39c9.4-9.4 24.6-9.4 33.9 0l194.3 194.3c9.4 9.4 9.4 24.6 0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z"}}]})(e)}function d0(e){return Rt({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z"}}]})(e)}function p0(e){return Rt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"}}]})(e)}function g0(e){return Rt({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M320 400c-75.85 0-137.25-58.71-142.9-133.11L72.2 185.82c-13.79 17.3-26.48 35.59-36.72 55.59a32.35 32.35 0 0 0 0 29.19C89.71 376.41 197.07 448 320 448c26.91 0 52.87-4 77.89-10.46L346 397.39a144.13 144.13 0 0 1-26 2.61zm313.82 58.1l-110.55-85.44a331.25 331.25 0 0 0 81.25-102.07 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64a308.15 308.15 0 0 0-147.32 37.7L45.46 3.37A16 16 0 0 0 23 6.18L3.37 31.45A16 16 0 0 0 6.18 53.9l588.36 454.73a16 16 0 0 0 22.46-2.81l19.64-25.27a16 16 0 0 0-2.82-22.45zm-183.72-142l-39.3-30.38A94.75 94.75 0 0 0 416 256a94.76 94.76 0 0 0-121.31-92.21A47.65 47.65 0 0 1 304 192a46.64 46.64 0 0 1-1.54 10l-73.61-56.89A142.31 142.31 0 0 1 320 112a143.92 143.92 0 0 1 144 144c0 21.63-5.29 41.79-13.9 60.11z"}}]})(e)}function v0(e){return Rt({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"}}]})(e)}function m0(e){return Rt({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M423.5 0C339.5.3 272 69.5 272 153.5V224H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48h-48v-71.1c0-39.6 31.7-72.5 71.3-72.9 40-.4 72.7 32.1 72.7 72v80c0 13.3 10.7 24 24 24h32c13.3 0 24-10.7 24-24v-80C576 68 507.5-.3 423.5 0z"}}]})(e)}function y0(e){return Rt({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z"}}]})(e)}function C0(e){return Rt({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"}}]})(e)}function S0(e){return Rt({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M352 320c-22.608 0-43.387 7.819-59.79 20.895l-102.486-64.054a96.551 96.551 0 0 0 0-41.683l102.486-64.054C308.613 184.181 329.392 192 352 192c53.019 0 96-42.981 96-96S405.019 0 352 0s-96 42.981-96 96c0 7.158.79 14.13 2.276 20.841L155.79 180.895C139.387 167.819 118.608 160 96 160c-53.019 0-96 42.981-96 96s42.981 96 96 96c22.608 0 43.387-7.819 59.79-20.895l102.486 64.054A96.301 96.301 0 0 0 256 416c0 53.019 42.981 96 96 96s96-42.981 96-96-42.981-96-96-96z"}}]})(e)}function x0(e){return Rt({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"}}]})(e)}const w0=()=>{ae.useRef(null);const{name:e,resetCard:t,isDualType:r}=Tr(),s=()=>e.trim()?`${e.trim().toLowerCase().replace(/\s+/g,"-")}`:"pokemon-card",d=()=>{const f=document.querySelector("canvas.upper-canvas");if(r){const h=document.getElementById("card-container");h?s0(h,s()):alert("Card element not found!")}else f&&f.__fabric?bp(f.__fabric,s()):alert("Canvas not available for export!")},v=()=>{const f=document.querySelector("canvas.upper-canvas");f&&f.__fabric?l0(f.__fabric,3,3):alert("Canvas not available for export!")},y=()=>{alert("Save as template functionality would be implemented here")},u=()=>{window.confirm("Are you sure you want to reset the card? All unsaved changes will be lost.")&&t()},n=()=>{alert("Share functionality would be implemented here")};return R.jsxs("div",{className:"action-bar",children:[R.jsxs("button",{className:"action-button primary",onClick:d,title:"Download Card",children:[R.jsx(p0,{})," Download"]}),R.jsxs("button",{className:"action-button",onClick:v,title:"Export as Sheet",children:[R.jsx(d0,{})," Print Sheet"]}),R.jsxs("button",{className:"action-button",onClick:y,title:"Save as Template",children:[R.jsx(C0,{})," Save Template"]}),R.jsxs("button",{className:"action-button",onClick:n,title:"Share Card",children:[R.jsx(S0,{})," Share"]}),R.jsxs("button",{className:"action-button danger",onClick:u,title:"Reset Card",children:[R.jsx(x0,{})," Reset"]})]})};const b0=()=>{const{name:e,setName:t,hp:r,setHP:s,stage:d,setStage:v,evolvesFrom:y,setEvolvesFrom:u,category:n,setCategory:f,pokedexNumber:h,setPokedexNumber:a,height:o,setHeight:i,weight:l,setWeight:p,holographic:c,toggleHolographic:g}=Tr();return R.jsxs("div",{className:"card-properties",children:[R.jsx("h3",{children:"Card Properties"}),R.jsxs("div",{className:"form-group",children:[R.jsx("label",{htmlFor:"card-name",children:"Name:"}),R.jsx("input",{id:"card-name",type:"text",value:e,onChange:m=>t(m.target.value),placeholder:"Pokmon name",maxLength:20})]}),R.jsxs("div",{className:"form-group",children:[R.jsx("label",{htmlFor:"card-hp",children:"HP:"}),R.jsx("input",{id:"card-hp",type:"number",value:r,onChange:m=>s(m.target.value),placeholder:"10-340",min:10,max:340,step:10})]}),R.jsxs("div",{className:"form-group",children:[R.jsx("label",{htmlFor:"card-stage",children:"Stage:"}),R.jsxs("select",{id:"card-stage",value:d,onChange:m=>v(m.target.value),children:[R.jsx("option",{value:"basic",children:"Basic"}),R.jsx("option",{value:"stage-1",children:"Stage 1"}),R.jsx("option",{value:"stage-2",children:"Stage 2"})]})]}),d!=="basic"&&R.jsxs("div",{className:"form-group",children:[R.jsx("label",{htmlFor:"card-evolves-from",children:"Evolves from:"}),R.jsx("input",{id:"card-evolves-from",type:"text",value:y,onChange:m=>u(m.target.value),placeholder:"Pre-evolution name"})]}),R.jsxs("div",{className:"form-group",children:[R.jsx("label",{htmlFor:"card-category",children:"Category:"}),R.jsx("input",{id:"card-category",type:"text",value:n,onChange:m=>f(m.target.value),placeholder:"E.g., Flame Pokmon"})]}),R.jsxs("div",{className:"form-group",children:[R.jsx("label",{htmlFor:"card-pokedex",children:"Pokdex #:"}),R.jsx("input",{id:"card-pokedex",type:"number",value:h,onChange:m=>a(m.target.value),placeholder:"Pokdex number"})]}),R.jsxs("div",{className:"form-row",children:[R.jsxs("div",{className:"form-group half",children:[R.jsx("label",{children:"Height:"}),R.jsxs("div",{className:"height-inputs",children:[R.jsx("input",{type:"number",value:o.feet,onChange:m=>i(m.target.value,o.inches),placeholder:"Feet",min:0}),R.jsx("span",{children:"'"}),R.jsx("input",{type:"number",value:o.inches,onChange:m=>i(o.feet,m.target.value),placeholder:"Inches",min:0,max:11}),R.jsx("span",{children:'"'})]})]}),R.jsxs("div",{className:"form-group half",children:[R.jsx("label",{htmlFor:"card-weight",children:"Weight:"}),R.jsxs("div",{className:"weight-input",children:[R.jsx("input",{id:"card-weight",type:"number",value:l,onChange:m=>p(m.target.value),placeholder:"Weight",min:0}),R.jsx("span",{children:"lbs."})]})]})]}),R.jsx("div",{className:"form-group checkbox",children:R.jsxs("label",{htmlFor:"card-holographic",children:[R.jsx("input",{id:"card-holographic",type:"checkbox",checked:c,onChange:()=>g()}),"Holographic Effect"]})})]})},_0=[{id:"",name:"Water",iconUrl:"assets/types/water.png",color:"#6390F0"},{id:"fire",name:"Fire",iconUrl:"assets/types/fire.png",color:"#EE8130"},{id:"grass",name:"Grass",iconUrl:"assets/types/grass.png",color:"#7AC74C"},{id:"electric",name:"Electric",iconUrl:"assets/types/electric.png",color:"#F7D02C"},{id:"psychic",name:"Psychic",iconUrl:"assets/types/psychic.png",color:"#F95587"},{id:"fighting",name:"Fighting",iconUrl:"assets/types/fighting.png",color:"#C22E28"},{id:"dark",name:"Dark",iconUrl:"assets/types/dark.png",color:"#705746"},{id:"metal",name:"Metal",iconUrl:"assets/types/metal.png",color:"#B7B7CE"},{id:"normal",name:"Normal",iconUrl:"assets/types/normal.png",color:"#A8A77A"},{id:"fairy",name:"Fairy",iconUrl:"assets/types/fairy.png",color:"#D685AD"}],T0=()=>_0;const Ep=({mode:e="primary"})=>{const t=T0(),{type:r,secondType:s,isDualType:d,setType:v,setSecondType:y}=Tr(),u=e==="primary"?r:s,n=f=>{e==="primary"?v(f):y(f)};return e==="secondary"&&!d?null:R.jsxs("div",{className:"type-selector",children:[R.jsx("h3",{children:e==="primary"?"Primary Type":"Secondary Type"}),R.jsx("div",{className:"type-grid",children:t.map(f=>R.jsx("div",{className:`type-item ${f.id===u?"selected":""}`,onClick:()=>n(f.id),children:R.jsx("img",{src:f.iconUrl,alt:f.name,title:f.name})},f.id))})]})};const E0=()=>{const{isDualType:e,toggleDualType:t,secondType:r}=Tr(),s=()=>{t()};return R.jsxs("div",{className:"dual-type-toggle",children:[R.jsx("h3",{children:"Dual Type"}),R.jsxs("div",{className:"toggle-container",children:[R.jsxs("label",{className:"toggle-switch",children:[R.jsx("input",{type:"checkbox",checked:e,onChange:s}),R.jsx("span",{className:"toggle-slider"})]}),R.jsx("span",{className:"toggle-label",children:e?"Enabled":"Disabled"})]}),e&&!r&&R.jsx("p",{className:"info-message",children:"Select a secondary type below"}),e&&R.jsx("div",{className:"secondary-type-selector",children:R.jsx(Ep,{mode:"secondary"})})]})};const O0=()=>{var a,o;const[e,t]=ae.useState([]),[r,s]=ae.useState(null),d=ae.useRef(null),{type:v,secondType:y,maskUrl:u,setMaskUrl:n}=Tr();ae.useEffect(()=>{t(i0())},[]);const f=i=>({water:"#6390F0",fire:"#EE8130",grass:"#7AC74C",electric:"#F7D02C",psychic:"#F95587",fighting:"#C22E28",dark:"#705746",metal:"#B7B7CE",normal:"#A8A77A",fairy:"#D685AD",dragon:"#6F35FC",poison:"#A33EA1",ground:"#E2BF65",rock:"#B6A136",ghost:"#735797",ice:"#96D9D6",flying:"#A98FF3",bug:"#A6B91A"})[i]||"#888888";ae.useEffect(()=>{var p;if(!d.current||r===null)return;const i=d.current,l=r!==null?(p=e[r])==null?void 0:p.id:u;a0(i,l,f(v),f(y))},[r,v,y,u,e]);const h=i=>{var l;n(((l=e[i])==null?void 0:l.id)||"")};return R.jsxs("div",{className:"mask-selector",children:[R.jsx("h3",{children:"Type Mask"}),R.jsxs("div",{className:"mask-preview",children:[R.jsx("canvas",{ref:d,width:120,height:160,className:"mask-preview-canvas"}),R.jsx("p",{className:"mask-name",children:r!==null?(a=e[r])==null?void 0:a.name:((o=e.find(i=>i.id===u))==null?void 0:o.name)||"Default Mask"})]}),R.jsx("div",{className:"mask-grid",children:e.map((i,l)=>R.jsx("div",{className:`mask-item ${i.id===u?"selected":""}`,onClick:()=>h(l),onMouseEnter:()=>s(l),onMouseLeave:()=>s(null),children:R.jsx("img",{src:i.previewUrl,alt:i.name,title:i.name,width:60,height:80})},l))})]})};function Cl(e,t){return Cl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},Cl(e,t)}function Op(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Cl(e,t)}function fe(){return fe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},fe.apply(null,arguments)}function xi(e){"@babel/helpers - typeof";return xi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xi(e)}function P0(e,t){if(xi(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(xi(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function D0(e){var t=P0(e,"string");return xi(t)=="symbol"?t:t+""}function k0(e,t,r){return(t=D0(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),r.push.apply(r,s)}return r}function mf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vf(Object(r),!0).forEach(function(s){k0(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vf(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function nt(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var yf=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),ps=function(){return Math.random().toString(36).substring(7).split("").join(".")},Cf={INIT:"@@redux/INIT"+ps(),REPLACE:"@@redux/REPLACE"+ps(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+ps()}};function I0(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Pp(e,t,r){var s;if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(nt(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(nt(1));return r(Pp)(e,t)}if(typeof e!="function")throw new Error(nt(2));var d=e,v=t,y=[],u=y,n=!1;function f(){u===y&&(u=y.slice())}function h(){if(n)throw new Error(nt(3));return v}function a(p){if(typeof p!="function")throw new Error(nt(4));if(n)throw new Error(nt(5));var c=!0;return f(),u.push(p),function(){if(c){if(n)throw new Error(nt(6));c=!1,f();var m=u.indexOf(p);u.splice(m,1),y=null}}}function o(p){if(!I0(p))throw new Error(nt(7));if(typeof p.type>"u")throw new Error(nt(8));if(n)throw new Error(nt(9));try{n=!0,v=d(v,p)}finally{n=!1}for(var c=y=u,g=0;g<c.length;g++){var m=c[g];m()}return p}function i(p){if(typeof p!="function")throw new Error(nt(10));d=p,o({type:Cf.REPLACE})}function l(){var p,c=a;return p={subscribe:function(m){if(typeof m!="object"||m===null)throw new Error(nt(11));function C(){m.next&&m.next(h())}C();var S=c(C);return{unsubscribe:S}}},p[yf]=function(){return this},p}return o({type:Cf.INIT}),s={dispatch:o,subscribe:a,getState:h,replaceReducer:i},s[yf]=l,s}function Sf(e,t){return function(){return t(e.apply(this,arguments))}}function xf(e,t){if(typeof e=="function")return Sf(e,t);if(typeof e!="object"||e===null)throw new Error(nt(16));var r={};for(var s in e){var d=e[s];typeof d=="function"&&(r[s]=Sf(d,t))}return r}function Dp(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.length===0?function(s){return s}:t.length===1?t[0]:t.reduce(function(s,d){return function(){return s(d.apply(void 0,arguments))}})}function A0(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(s){return function(){var d=s.apply(void 0,arguments),v=function(){throw new Error(nt(15))},y={getState:d.getState,dispatch:function(){return v.apply(void 0,arguments)}},u=t.map(function(n){return n(y)});return v=Dp.apply(void 0,u)(d.dispatch),mf(mf({},d),{},{dispatch:v})}}}var kp=ge.createContext(null);function M0(e){e()}var Ip=M0,F0=function(t){return Ip=t},L0=function(){return Ip};function R0(){var e=L0(),t=null,r=null;return{clear:function(){t=null,r=null},notify:function(){e(function(){for(var d=t;d;)d.callback(),d=d.next})},get:function(){for(var d=[],v=t;v;)d.push(v),v=v.next;return d},subscribe:function(d){var v=!0,y=r={callback:d,next:null,prev:r};return y.prev?y.prev.next=y:t=y,function(){!v||t===null||(v=!1,y.next?y.next.prev=y.prev:r=y.prev,y.prev?y.prev.next=y.next:t=y.next)}}}}var wf={notify:function(){},get:function(){return[]}};function Ap(e,t){var r,s=wf;function d(a){return n(),s.subscribe(a)}function v(){s.notify()}function y(){h.onStateChange&&h.onStateChange()}function u(){return!!r}function n(){r||(r=t?t.addNestedSub(y):e.subscribe(y),s=R0())}function f(){r&&(r(),r=void 0,s.clear(),s=wf)}var h={addNestedSub:d,notifyNestedSubs:v,handleChangeWrapper:y,isSubscribed:u,trySubscribe:n,tryUnsubscribe:f,getListeners:function(){return s}};return h}var Mp=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?ae.useLayoutEffect:ae.useEffect;function B0(e){var t=e.store,r=e.context,s=e.children,d=ae.useMemo(function(){var u=Ap(t);return{store:t,subscription:u}},[t]),v=ae.useMemo(function(){return t.getState()},[t]);Mp(function(){var u=d.subscription;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),v!==t.getState()&&u.notifyNestedSubs(),function(){u.tryUnsubscribe(),u.onStateChange=null}},[d,v]);var y=r||kp;return ge.createElement(y.Provider,{value:d},s)}function Ya(e,t){if(e==null)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;r[s]=e[s]}return r}var Fp={exports:{}},xe={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var We=typeof Symbol=="function"&&Symbol.for,wu=We?Symbol.for("react.element"):60103,bu=We?Symbol.for("react.portal"):60106,xo=We?Symbol.for("react.fragment"):60107,wo=We?Symbol.for("react.strict_mode"):60108,bo=We?Symbol.for("react.profiler"):60114,_o=We?Symbol.for("react.provider"):60109,To=We?Symbol.for("react.context"):60110,_u=We?Symbol.for("react.async_mode"):60111,Eo=We?Symbol.for("react.concurrent_mode"):60111,Oo=We?Symbol.for("react.forward_ref"):60112,Po=We?Symbol.for("react.suspense"):60113,N0=We?Symbol.for("react.suspense_list"):60120,Do=We?Symbol.for("react.memo"):60115,ko=We?Symbol.for("react.lazy"):60116,j0=We?Symbol.for("react.block"):60121,z0=We?Symbol.for("react.fundamental"):60117,W0=We?Symbol.for("react.responder"):60118,U0=We?Symbol.for("react.scope"):60119;function yt(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case wu:switch(e=e.type,e){case _u:case Eo:case xo:case bo:case wo:case Po:return e;default:switch(e=e&&e.$$typeof,e){case To:case Oo:case ko:case Do:case _o:return e;default:return t}}case bu:return t}}}function Lp(e){return yt(e)===Eo}xe.AsyncMode=_u;xe.ConcurrentMode=Eo;xe.ContextConsumer=To;xe.ContextProvider=_o;xe.Element=wu;xe.ForwardRef=Oo;xe.Fragment=xo;xe.Lazy=ko;xe.Memo=Do;xe.Portal=bu;xe.Profiler=bo;xe.StrictMode=wo;xe.Suspense=Po;xe.isAsyncMode=function(e){return Lp(e)||yt(e)===_u};xe.isConcurrentMode=Lp;xe.isContextConsumer=function(e){return yt(e)===To};xe.isContextProvider=function(e){return yt(e)===_o};xe.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===wu};xe.isForwardRef=function(e){return yt(e)===Oo};xe.isFragment=function(e){return yt(e)===xo};xe.isLazy=function(e){return yt(e)===ko};xe.isMemo=function(e){return yt(e)===Do};xe.isPortal=function(e){return yt(e)===bu};xe.isProfiler=function(e){return yt(e)===bo};xe.isStrictMode=function(e){return yt(e)===wo};xe.isSuspense=function(e){return yt(e)===Po};xe.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===xo||e===Eo||e===bo||e===wo||e===Po||e===N0||typeof e=="object"&&e!==null&&(e.$$typeof===ko||e.$$typeof===Do||e.$$typeof===_o||e.$$typeof===To||e.$$typeof===Oo||e.$$typeof===z0||e.$$typeof===W0||e.$$typeof===U0||e.$$typeof===j0)};xe.typeOf=yt;Fp.exports=xe;var H0=Fp.exports,Tu=H0,G0={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},V0={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},X0={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Rp={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Eu={};Eu[Tu.ForwardRef]=X0;Eu[Tu.Memo]=Rp;function bf(e){return Tu.isMemo(e)?Rp:Eu[e.$$typeof]||G0}var Y0=Object.defineProperty,$0=Object.getOwnPropertyNames,_f=Object.getOwnPropertySymbols,q0=Object.getOwnPropertyDescriptor,K0=Object.getPrototypeOf,Tf=Object.prototype;function Bp(e,t,r){if(typeof t!="string"){if(Tf){var s=K0(t);s&&s!==Tf&&Bp(e,s,r)}var d=$0(t);_f&&(d=d.concat(_f(t)));for(var v=bf(e),y=bf(t),u=0;u<d.length;++u){var n=d[u];if(!V0[n]&&!(r&&r[n])&&!(y&&y[n])&&!(v&&v[n])){var f=q0(t,n);try{Y0(e,n,f)}catch{}}}}return e}var Q0=Bp;const Ef=ro(Q0);var Np={exports:{}},we={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Io=60103,Ao=60106,Ai=60107,Mi=60108,Fi=60114,Li=60109,Ri=60110,Bi=60112,Ni=60113,Ou=60120,ji=60115,zi=60116,jp=60121,zp=60122,Wp=60117,Up=60129,Hp=60131;if(typeof Symbol=="function"&&Symbol.for){var Ue=Symbol.for;Io=Ue("react.element"),Ao=Ue("react.portal"),Ai=Ue("react.fragment"),Mi=Ue("react.strict_mode"),Fi=Ue("react.profiler"),Li=Ue("react.provider"),Ri=Ue("react.context"),Bi=Ue("react.forward_ref"),Ni=Ue("react.suspense"),Ou=Ue("react.suspense_list"),ji=Ue("react.memo"),zi=Ue("react.lazy"),jp=Ue("react.block"),zp=Ue("react.server.block"),Wp=Ue("react.fundamental"),Up=Ue("react.debug_trace_mode"),Hp=Ue("react.legacy_hidden")}function Bt(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Io:switch(e=e.type,e){case Ai:case Fi:case Mi:case Ni:case Ou:return e;default:switch(e=e&&e.$$typeof,e){case Ri:case Bi:case zi:case ji:case Li:return e;default:return t}}case Ao:return t}}}var J0=Li,Z0=Io,eC=Bi,tC=Ai,rC=zi,nC=ji,iC=Ao,aC=Fi,oC=Mi,sC=Ni;we.ContextConsumer=Ri;we.ContextProvider=J0;we.Element=Z0;we.ForwardRef=eC;we.Fragment=tC;we.Lazy=rC;we.Memo=nC;we.Portal=iC;we.Profiler=aC;we.StrictMode=oC;we.Suspense=sC;we.isAsyncMode=function(){return!1};we.isConcurrentMode=function(){return!1};we.isContextConsumer=function(e){return Bt(e)===Ri};we.isContextProvider=function(e){return Bt(e)===Li};we.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Io};we.isForwardRef=function(e){return Bt(e)===Bi};we.isFragment=function(e){return Bt(e)===Ai};we.isLazy=function(e){return Bt(e)===zi};we.isMemo=function(e){return Bt(e)===ji};we.isPortal=function(e){return Bt(e)===Ao};we.isProfiler=function(e){return Bt(e)===Fi};we.isStrictMode=function(e){return Bt(e)===Mi};we.isSuspense=function(e){return Bt(e)===Ni};we.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Ai||e===Fi||e===Up||e===Mi||e===Ni||e===Ou||e===Hp||typeof e=="object"&&e!==null&&(e.$$typeof===zi||e.$$typeof===ji||e.$$typeof===Li||e.$$typeof===Ri||e.$$typeof===Bi||e.$$typeof===Wp||e.$$typeof===jp||e[0]===zp)};we.typeOf=Bt;Np.exports=we;var lC=Np.exports,uC=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],cC=["reactReduxForwardedRef"],fC=[],hC=[null,null];function dC(e,t){var r=e[1];return[t.payload,r+1]}function Of(e,t,r){Mp(function(){return e.apply(void 0,t)},r)}function pC(e,t,r,s,d,v,y){e.current=s,t.current=d,r.current=!1,v.current&&(v.current=null,y())}function gC(e,t,r,s,d,v,y,u,n,f){if(e){var h=!1,a=null,o=function(){if(!h){var p=t.getState(),c,g;try{c=s(p,d.current)}catch(m){g=m,a=m}g||(a=null),c===v.current?y.current||n():(v.current=c,u.current=c,y.current=!0,f({type:"STORE_UPDATED",payload:{error:g}}))}};r.onStateChange=o,r.trySubscribe(),o();var i=function(){if(h=!0,r.tryUnsubscribe(),r.onStateChange=null,a)throw a};return i}}var vC=function(){return[null,0]};function mC(e,t){t===void 0&&(t={});var r=t,s=r.getDisplayName,d=s===void 0?function(C){return"ConnectAdvanced("+C+")"}:s,v=r.methodName,y=v===void 0?"connectAdvanced":v,u=r.renderCountProp,n=u===void 0?void 0:u,f=r.shouldHandleStateChanges,h=f===void 0?!0:f,a=r.storeKey,o=a===void 0?"store":a;r.withRef;var i=r.forwardRef,l=i===void 0?!1:i,p=r.context,c=p===void 0?kp:p,g=Ya(r,uC),m=c;return function(S){var x=S.displayName||S.name||"Component",w=d(x),_=fe({},g,{getDisplayName:d,methodName:y,renderCountProp:n,shouldHandleStateChanges:h,storeKey:o,displayName:w,wrappedComponentName:x,WrappedComponent:S}),E=g.pure;function I(q){return e(q.dispatch,_)}var M=E?ae.useMemo:function(q){return q()};function z(q){var J=ae.useMemo(function(){var te=q.reactReduxForwardedRef,he=Ya(q,cC);return[q.context,te,he]},[q]),ie=J[0],se=J[1],U=J[2],b=ae.useMemo(function(){return ie&&ie.Consumer&&lC.isContextConsumer(ge.createElement(ie.Consumer,null))?ie:m},[ie,m]),O=ae.useContext(b),k=!!q.store&&!!q.store.getState&&!!q.store.dispatch;O&&O.store;var D=k?q.store:O.store,B=ae.useMemo(function(){return I(D)},[D]),P=ae.useMemo(function(){if(!h)return hC;var te=Ap(D,k?null:O.subscription),he=te.notifyNestedSubs.bind(te);return[te,he]},[D,k,O]),T=P[0],A=P[1],F=ae.useMemo(function(){return k?O:fe({},O,{subscription:T})},[k,O,T]),H=ae.useReducer(dC,fC,vC),N=H[0],Y=N[0],K=H[1];if(Y&&Y.error)throw Y.error;var ne=ae.useRef(),j=ae.useRef(U),L=ae.useRef(),G=ae.useRef(!1),V=M(function(){return L.current&&U===j.current?L.current:B(D.getState(),U)},[D,Y,U]);Of(pC,[j,ne,G,U,V,L,A]),Of(gC,[h,D,T,B,j,ne,G,L,A,K],[D,T,B]);var W=ae.useMemo(function(){return ge.createElement(S,fe({},V,{ref:se}))},[se,S,V]),$=ae.useMemo(function(){return h?ge.createElement(b.Provider,{value:F},W):W},[b,W,F]);return $}var Q=E?ge.memo(z):z;if(Q.WrappedComponent=S,Q.displayName=z.displayName=w,l){var ee=ge.forwardRef(function(J,ie){return ge.createElement(Q,fe({},J,{reactReduxForwardedRef:ie}))});return ee.displayName=w,ee.WrappedComponent=S,Ef(ee,S)}return Ef(Q,S)}}function Pf(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function gs(e,t){if(Pf(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(var d=0;d<r.length;d++)if(!Object.prototype.hasOwnProperty.call(t,r[d])||!Pf(e[r[d]],t[r[d]]))return!1;return!0}function yC(e,t){var r={},s=function(y){var u=e[y];typeof u=="function"&&(r[y]=function(){return t(u.apply(void 0,arguments))})};for(var d in e)s(d);return r}function Pu(e){return function(r,s){var d=e(r,s);function v(){return d}return v.dependsOnOwnProps=!1,v}}function Df(e){return e.dependsOnOwnProps!==null&&e.dependsOnOwnProps!==void 0?!!e.dependsOnOwnProps:e.length!==1}function Gp(e,t){return function(s,d){d.displayName;var v=function(u,n){return v.dependsOnOwnProps?v.mapToProps(u,n):v.mapToProps(u)};return v.dependsOnOwnProps=!0,v.mapToProps=function(u,n){v.mapToProps=e,v.dependsOnOwnProps=Df(e);var f=v(u,n);return typeof f=="function"&&(v.mapToProps=f,v.dependsOnOwnProps=Df(f),f=v(u,n)),f},v}}function CC(e){return typeof e=="function"?Gp(e):void 0}function SC(e){return e?void 0:Pu(function(t){return{dispatch:t}})}function xC(e){return e&&typeof e=="object"?Pu(function(t){return yC(e,t)}):void 0}const wC=[CC,SC,xC];function bC(e){return typeof e=="function"?Gp(e):void 0}function _C(e){return e?void 0:Pu(function(){return{}})}const TC=[bC,_C];function EC(e,t,r){return fe({},r,e,t)}function OC(e){return function(r,s){s.displayName;var d=s.pure,v=s.areMergedPropsEqual,y=!1,u;return function(f,h,a){var o=e(f,h,a);return y?(!d||!v(o,u))&&(u=o):(y=!0,u=o),u}}}function PC(e){return typeof e=="function"?OC(e):void 0}function DC(e){return e?void 0:function(){return EC}}const kC=[PC,DC];var IC=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function AC(e,t,r,s){return function(v,y){return r(e(v,y),t(s,y),y)}}function MC(e,t,r,s,d){var v=d.areStatesEqual,y=d.areOwnPropsEqual,u=d.areStatePropsEqual,n=!1,f,h,a,o,i;function l(C,S){return f=C,h=S,a=e(f,h),o=t(s,h),i=r(a,o,h),n=!0,i}function p(){return a=e(f,h),t.dependsOnOwnProps&&(o=t(s,h)),i=r(a,o,h),i}function c(){return e.dependsOnOwnProps&&(a=e(f,h)),t.dependsOnOwnProps&&(o=t(s,h)),i=r(a,o,h),i}function g(){var C=e(f,h),S=!u(C,a);return a=C,S&&(i=r(a,o,h)),i}function m(C,S){var x=!y(S,h),w=!v(C,f,S,h);return f=C,h=S,x&&w?p():x?c():w?g():i}return function(S,x){return n?m(S,x):l(S,x)}}function FC(e,t){var r=t.initMapStateToProps,s=t.initMapDispatchToProps,d=t.initMergeProps,v=Ya(t,IC),y=r(e,v),u=s(e,v),n=d(e,v),f=v.pure?MC:AC;return f(y,u,n,e,v)}var LC=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function vs(e,t,r){for(var s=t.length-1;s>=0;s--){var d=t[s](e);if(d)return d}return function(v,y){throw new Error("Invalid value of type "+typeof e+" for "+r+" argument when connecting component "+y.wrappedComponentName+".")}}function RC(e,t){return e===t}function BC(e){var t=e===void 0?{}:e,r=t.connectHOC,s=r===void 0?mC:r,d=t.mapStateToPropsFactories,v=d===void 0?TC:d,y=t.mapDispatchToPropsFactories,u=y===void 0?wC:y,n=t.mergePropsFactories,f=n===void 0?kC:n,h=t.selectorFactory,a=h===void 0?FC:h;return function(i,l,p,c){c===void 0&&(c={});var g=c,m=g.pure,C=m===void 0?!0:m,S=g.areStatesEqual,x=S===void 0?RC:S,w=g.areOwnPropsEqual,_=w===void 0?gs:w,E=g.areStatePropsEqual,I=E===void 0?gs:E,M=g.areMergedPropsEqual,z=M===void 0?gs:M,Q=Ya(g,LC),ee=vs(i,v,"mapStateToProps"),q=vs(l,u,"mapDispatchToProps"),J=vs(p,f,"mergeProps");return s(a,fe({methodName:"connect",getDisplayName:function(se){return"Connect("+se+")"},shouldHandleStateChanges:!!i,initMapStateToProps:ee,initMapDispatchToProps:q,initMergeProps:J,pure:C,areStatesEqual:x,areOwnPropsEqual:_,areStatePropsEqual:I,areMergedPropsEqual:z},Q))}}const Vp=BC();F0(Su.unstable_batchedUpdates);function NC(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function Xp(e,t){var r=ae.useState(function(){return{inputs:t,result:e()}})[0],s=ae.useRef(!0),d=ae.useRef(r),v=s.current||!!(t&&d.current.inputs&&NC(t,d.current.inputs)),y=v?d.current:{inputs:t,result:e()};return ae.useEffect(function(){s.current=!1,d.current=y},[y]),y.result}function jC(e,t){return Xp(function(){return e},t)}var me=Xp,ue=jC,zC=!0,ms="Invariant failed";function WC(e,t){if(!e){if(zC)throw new Error(ms);var r=typeof t=="function"?t():t,s=r?"".concat(ms,": ").concat(r):ms;throw new Error(s)}}var At=function(t){var r=t.top,s=t.right,d=t.bottom,v=t.left,y=s-v,u=d-r,n={top:r,right:s,bottom:d,left:v,width:y,height:u,x:v,y:r,center:{x:(s+v)/2,y:(d+r)/2}};return n},Du=function(t,r){return{top:t.top-r.top,left:t.left-r.left,bottom:t.bottom+r.bottom,right:t.right+r.right}},kf=function(t,r){return{top:t.top+r.top,left:t.left+r.left,bottom:t.bottom-r.bottom,right:t.right-r.right}},UC=function(t,r){return{top:t.top+r.y,left:t.left+r.x,bottom:t.bottom+r.y,right:t.right+r.x}},ys={top:0,right:0,bottom:0,left:0},ku=function(t){var r=t.borderBox,s=t.margin,d=s===void 0?ys:s,v=t.border,y=v===void 0?ys:v,u=t.padding,n=u===void 0?ys:u,f=At(Du(r,d)),h=At(kf(r,y)),a=At(kf(h,n));return{marginBox:f,borderBox:At(r),paddingBox:h,contentBox:a,margin:d,border:y,padding:n}},Ct=function(t){var r=t.slice(0,-2),s=t.slice(-2);if(s!=="px")return 0;var d=Number(r);return isNaN(d)&&WC(!1),d},HC=function(){return{x:window.pageXOffset,y:window.pageYOffset}},$a=function(t,r){var s=t.borderBox,d=t.border,v=t.margin,y=t.padding,u=UC(s,r);return ku({borderBox:u,border:d,margin:v,padding:y})},qa=function(t,r){return r===void 0&&(r=HC()),$a(t,r)},Yp=function(t,r){var s={top:Ct(r.marginTop),right:Ct(r.marginRight),bottom:Ct(r.marginBottom),left:Ct(r.marginLeft)},d={top:Ct(r.paddingTop),right:Ct(r.paddingRight),bottom:Ct(r.paddingBottom),left:Ct(r.paddingLeft)},v={top:Ct(r.borderTopWidth),right:Ct(r.borderRightWidth),bottom:Ct(r.borderBottomWidth),left:Ct(r.borderLeftWidth)};return ku({borderBox:t,margin:s,padding:d,border:v})},$p=function(t){var r=t.getBoundingClientRect(),s=window.getComputedStyle(t);return Yp(r,s)},If=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function GC(e,t){return!!(e===t||If(e)&&If(t))}function VC(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!GC(e[r],t[r]))return!1;return!0}function je(e,t){t===void 0&&(t=VC);var r,s=[],d,v=!1;function y(){for(var u=[],n=0;n<arguments.length;n++)u[n]=arguments[n];return v&&r===this&&t(u,s)||(d=e.apply(this,u),v=!0,r=this,s=u),d}return y}var XC=function(t){var r=[],s=null,d=function(){for(var y=arguments.length,u=new Array(y),n=0;n<y;n++)u[n]=arguments[n];r=u,!s&&(s=requestAnimationFrame(function(){s=null,t.apply(void 0,r)}))};return d.cancel=function(){s&&(cancelAnimationFrame(s),s=null)},d};const wi=XC;function qp(e,t){}qp.bind(null,"warn");qp.bind(null,"error");function vr(){}function YC(e,t){return fe({},e,{},t)}function bt(e,t,r){var s=t.map(function(d){var v=YC(r,d.options);return e.addEventListener(d.eventName,d.fn,v),function(){e.removeEventListener(d.eventName,d.fn,v)}});return function(){s.forEach(function(v){v()})}}var $C="Invariant failed";function Ka(e){this.message=e}Ka.prototype.toString=function(){return this.message};function re(e,t){if(!e)throw new Ka($C)}var qC=function(e){Op(t,e);function t(){for(var s,d=arguments.length,v=new Array(d),y=0;y<d;y++)v[y]=arguments[y];return s=e.call.apply(e,[this].concat(v))||this,s.callbacks=null,s.unbind=vr,s.onWindowError=function(u){var n=s.getCallbacks();n.isDragging()&&n.tryAbort();var f=u.error;f instanceof Ka&&u.preventDefault()},s.getCallbacks=function(){if(!s.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return s.callbacks},s.setCallbacks=function(u){s.callbacks=u},s}var r=t.prototype;return r.componentDidMount=function(){this.unbind=bt(window,[{eventName:"error",fn:this.onWindowError}])},r.componentDidCatch=function(d){if(d instanceof Ka){this.setState({});return}throw d},r.componentWillUnmount=function(){this.unbind()},r.render=function(){return this.props.children(this.setCallbacks)},t}(ge.Component),KC=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,Qa=function(t){return t+1},QC=function(t){return`
  You have lifted an item in position `+Qa(t.source.index)+`
`},Kp=function(t,r){var s=t.droppableId===r.droppableId,d=Qa(t.index),v=Qa(r.index);return s?`
      You have moved the item from position `+d+`
      to position `+v+`
    `:`
    You have moved the item from position `+d+`
    in list `+t.droppableId+`
    to list `+r.droppableId+`
    in position `+v+`
  `},Qp=function(t,r,s){var d=r.droppableId===s.droppableId;return d?`
      The item `+t+`
      has been combined with `+s.draggableId:`
      The item `+t+`
      in list `+r.droppableId+`
      has been combined with `+s.draggableId+`
      in list `+s.droppableId+`
    `},JC=function(t){var r=t.destination;if(r)return Kp(t.source,r);var s=t.combine;return s?Qp(t.draggableId,t.source,s):"You are over an area that cannot be dropped on"},Af=function(t){return`
  The item has returned to its starting position
  of `+Qa(t.index)+`
`},ZC=function(t){if(t.reason==="CANCEL")return`
      Movement cancelled.
      `+Af(t.source)+`
    `;var r=t.destination,s=t.combine;return r?`
      You have dropped the item.
      `+Kp(t.source,r)+`
    `:s?`
      You have dropped the item.
      `+Qp(t.draggableId,t.source,s)+`
    `:`
    The item has been dropped while not over a drop area.
    `+Af(t.source)+`
  `},wa={dragHandleUsageInstructions:KC,onDragStart:QC,onDragUpdate:JC,onDragEnd:ZC},ze={x:0,y:0},Ge=function(t,r){return{x:t.x+r.x,y:t.y+r.y}},ft=function(t,r){return{x:t.x-r.x,y:t.y-r.y}},mr=function(t,r){return t.x===r.x&&t.y===r.y},Pn=function(t){return{x:t.x!==0?-t.x:0,y:t.y!==0?-t.y:0}},Hr=function(t,r,s){var d;return s===void 0&&(s=0),d={},d[t]=r,d[t==="x"?"y":"x"]=s,d},bi=function(t,r){return Math.sqrt(Math.pow(r.x-t.x,2)+Math.pow(r.y-t.y,2))},Mf=function(t,r){return Math.min.apply(Math,r.map(function(s){return bi(t,s)}))},Jp=function(t){return function(r){return{x:t(r.x),y:t(r.y)}}},eS=function(e,t){var r=At({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return r.width<=0||r.height<=0?null:r},Wi=function(t,r){return{top:t.top+r.y,left:t.left+r.x,bottom:t.bottom+r.y,right:t.right+r.x}},Ff=function(t){return[{x:t.left,y:t.top},{x:t.right,y:t.top},{x:t.left,y:t.bottom},{x:t.right,y:t.bottom}]},tS={top:0,right:0,bottom:0,left:0},rS=function(t,r){return r?Wi(t,r.scroll.diff.displacement):t},nS=function(t,r,s){if(s&&s.increasedBy){var d;return fe({},t,(d={},d[r.end]=t[r.end]+s.increasedBy[r.line],d))}return t},iS=function(t,r){return r&&r.shouldClipSubject?eS(r.pageMarginBox,t):At(t)},wn=function(e){var t=e.page,r=e.withPlaceholder,s=e.axis,d=e.frame,v=rS(t.marginBox,d),y=nS(v,s,r),u=iS(y,d);return{page:t,withPlaceholder:r,active:u}},Iu=function(e,t){e.frame||re(!1);var r=e.frame,s=ft(t,r.scroll.initial),d=Pn(s),v=fe({},r,{scroll:{initial:r.scroll.initial,current:t,diff:{value:s,displacement:d},max:r.scroll.max}}),y=wn({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:v}),u=fe({},e,{frame:v,subject:y});return u};function Ja(e){return Object.values?Object.values(e):Object.keys(e).map(function(t){return e[t]})}function Au(e,t){if(e.findIndex)return e.findIndex(t);for(var r=0;r<e.length;r++)if(t(e[r]))return r;return-1}function Er(e,t){if(e.find)return e.find(t);var r=Au(e,t);if(r!==-1)return e[r]}function Zp(e){return Array.prototype.slice.call(e)}var eg=je(function(e){return e.reduce(function(t,r){return t[r.descriptor.id]=r,t},{})}),tg=je(function(e){return e.reduce(function(t,r){return t[r.descriptor.id]=r,t},{})}),Mo=je(function(e){return Ja(e)}),aS=je(function(e){return Ja(e)}),Dn=je(function(e,t){var r=aS(t).filter(function(s){return e===s.descriptor.droppableId}).sort(function(s,d){return s.descriptor.index-d.descriptor.index});return r});function Mu(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function Fo(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var Lo=je(function(e,t){return t.filter(function(r){return r.descriptor.id!==e.descriptor.id})}),oS=function(e){var t=e.isMovingForward,r=e.draggable,s=e.destination,d=e.insideDestination,v=e.previousImpact;if(!s.isCombineEnabled)return null;var y=Mu(v);if(!y)return null;function u(p){var c={type:"COMBINE",combine:{draggableId:p,droppableId:s.descriptor.id}};return fe({},v,{at:c})}var n=v.displaced.all,f=n.length?n[0]:null;if(t)return f?u(f):null;var h=Lo(r,d);if(!f){if(!h.length)return null;var a=h[h.length-1];return u(a.descriptor.id)}var o=Au(h,function(p){return p.descriptor.id===f});o===-1&&re(!1);var i=o-1;if(i<0)return null;var l=h[i];return u(l.descriptor.id)},kn=function(e,t){return e.descriptor.droppableId===t.descriptor.id},rg={point:ze,value:0},_i={invisible:{},visible:{},all:[]},sS={displaced:_i,displacedBy:rg,at:null},Tt=function(e,t){return function(r){return e<=r&&r<=t}},ng=function(e){var t=Tt(e.top,e.bottom),r=Tt(e.left,e.right);return function(s){var d=t(s.top)&&t(s.bottom)&&r(s.left)&&r(s.right);if(d)return!0;var v=t(s.top)||t(s.bottom),y=r(s.left)||r(s.right),u=v&&y;if(u)return!0;var n=s.top<e.top&&s.bottom>e.bottom,f=s.left<e.left&&s.right>e.right,h=n&&f;if(h)return!0;var a=n&&y||f&&v;return a}},lS=function(e){var t=Tt(e.top,e.bottom),r=Tt(e.left,e.right);return function(s){var d=t(s.top)&&t(s.bottom)&&r(s.left)&&r(s.right);return d}},Fu={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},ig={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},uS=function(e){return function(t){var r=Tt(t.top,t.bottom),s=Tt(t.left,t.right);return function(d){return e===Fu?r(d.top)&&r(d.bottom):s(d.left)&&s(d.right)}}},cS=function(t,r){var s=r.frame?r.frame.scroll.diff.displacement:ze;return Wi(t,s)},fS=function(t,r,s){return r.subject.active?s(r.subject.active)(t):!1},hS=function(t,r,s){return s(r)(t)},Lu=function(t){var r=t.target,s=t.destination,d=t.viewport,v=t.withDroppableDisplacement,y=t.isVisibleThroughFrameFn,u=v?cS(r,s):r;return fS(u,s,y)&&hS(u,d,y)},dS=function(t){return Lu(fe({},t,{isVisibleThroughFrameFn:ng}))},ag=function(t){return Lu(fe({},t,{isVisibleThroughFrameFn:lS}))},pS=function(t){return Lu(fe({},t,{isVisibleThroughFrameFn:uS(t.destination.axis)}))},gS=function(t,r,s){if(typeof s=="boolean")return s;if(!r)return!0;var d=r.invisible,v=r.visible;if(d[t])return!1;var y=v[t];return y?y.shouldAnimate:!0};function vS(e,t){var r=e.page.marginBox,s={top:t.point.y,right:0,bottom:0,left:t.point.x};return At(Du(r,s))}function Ti(e){var t=e.afterDragging,r=e.destination,s=e.displacedBy,d=e.viewport,v=e.forceShouldAnimate,y=e.last;return t.reduce(function(n,f){var h=vS(f,s),a=f.descriptor.id;n.all.push(a);var o=dS({target:h,destination:r,viewport:d,withDroppableDisplacement:!0});if(!o)return n.invisible[f.descriptor.id]=!0,n;var i=gS(a,y,v),l={draggableId:a,shouldAnimate:i};return n.visible[a]=l,n},{all:[],visible:{},invisible:{}})}function mS(e,t){if(!e.length)return 0;var r=e[e.length-1].descriptor.index;return t.inHomeList?r:r+1}function Lf(e){var t=e.insideDestination,r=e.inHomeList,s=e.displacedBy,d=e.destination,v=mS(t,{inHomeList:r});return{displaced:_i,displacedBy:s,at:{type:"REORDER",destination:{droppableId:d.descriptor.id,index:v}}}}function Za(e){var t=e.draggable,r=e.insideDestination,s=e.destination,d=e.viewport,v=e.displacedBy,y=e.last,u=e.index,n=e.forceShouldAnimate,f=kn(t,s);if(u==null)return Lf({insideDestination:r,inHomeList:f,displacedBy:v,destination:s});var h=Er(r,function(p){return p.descriptor.index===u});if(!h)return Lf({insideDestination:r,inHomeList:f,displacedBy:v,destination:s});var a=Lo(t,r),o=r.indexOf(h),i=a.slice(o),l=Ti({afterDragging:i,destination:s,displacedBy:v,last:y,viewport:d.frame,forceShouldAnimate:n});return{displaced:l,displacedBy:v,at:{type:"REORDER",destination:{droppableId:s.descriptor.id,index:u}}}}function xr(e,t){return!!t.effected[e]}var yS=function(e){var t=e.isMovingForward,r=e.destination,s=e.draggables,d=e.combine,v=e.afterCritical;if(!r.isCombineEnabled)return null;var y=d.draggableId,u=s[y],n=u.descriptor.index,f=xr(y,v);return f?t?n:n-1:t?n+1:n},CS=function(e){var t=e.isMovingForward,r=e.isInHomeList,s=e.insideDestination,d=e.location;if(!s.length)return null;var v=d.index,y=t?v+1:v-1,u=s[0].descriptor.index,n=s[s.length-1].descriptor.index,f=r?n:n+1;return y<u||y>f?null:y},SS=function(e){var t=e.isMovingForward,r=e.isInHomeList,s=e.draggable,d=e.draggables,v=e.destination,y=e.insideDestination,u=e.previousImpact,n=e.viewport,f=e.afterCritical,h=u.at;if(h||re(!1),h.type==="REORDER"){var a=CS({isMovingForward:t,isInHomeList:r,location:h.destination,insideDestination:y});return a==null?null:Za({draggable:s,insideDestination:y,destination:v,viewport:n,last:u.displaced,displacedBy:u.displacedBy,index:a})}var o=yS({isMovingForward:t,destination:v,displaced:u.displaced,draggables:d,combine:h.combine,afterCritical:f});return o==null?null:Za({draggable:s,insideDestination:y,destination:v,viewport:n,last:u.displaced,displacedBy:u.displacedBy,index:o})},xS=function(e){var t=e.displaced,r=e.afterCritical,s=e.combineWith,d=e.displacedBy,v=!!(t.visible[s]||t.invisible[s]);return xr(s,r)?v?ze:Pn(d.point):v?d.point:ze},wS=function(e){var t=e.afterCritical,r=e.impact,s=e.draggables,d=Fo(r);d||re(!1);var v=d.draggableId,y=s[v].page.borderBox.center,u=xS({displaced:r.displaced,afterCritical:t,combineWith:v,displacedBy:r.displacedBy});return Ge(y,u)},og=function(t,r){return r.margin[t.start]+r.borderBox[t.size]/2},bS=function(t,r){return r.margin[t.end]+r.borderBox[t.size]/2},Ru=function(t,r,s){return r[t.crossAxisStart]+s.margin[t.crossAxisStart]+s.borderBox[t.crossAxisSize]/2},Rf=function(t){var r=t.axis,s=t.moveRelativeTo,d=t.isMoving;return Hr(r.line,s.marginBox[r.end]+og(r,d),Ru(r,s.marginBox,d))},Bf=function(t){var r=t.axis,s=t.moveRelativeTo,d=t.isMoving;return Hr(r.line,s.marginBox[r.start]-bS(r,d),Ru(r,s.marginBox,d))},_S=function(t){var r=t.axis,s=t.moveInto,d=t.isMoving;return Hr(r.line,s.contentBox[r.start]+og(r,d),Ru(r,s.contentBox,d))},TS=function(e){var t=e.impact,r=e.draggable,s=e.draggables,d=e.droppable,v=e.afterCritical,y=Dn(d.descriptor.id,s),u=r.page,n=d.axis;if(!y.length)return _S({axis:n,moveInto:d.page,isMoving:u});var f=t.displaced,h=t.displacedBy,a=f.all[0];if(a){var o=s[a];if(xr(a,v))return Bf({axis:n,moveRelativeTo:o.page,isMoving:u});var i=$a(o.page,h.point);return Bf({axis:n,moveRelativeTo:i,isMoving:u})}var l=y[y.length-1];if(l.descriptor.id===r.descriptor.id)return u.borderBox.center;if(xr(l.descriptor.id,v)){var p=$a(l.page,Pn(v.displacedBy.point));return Rf({axis:n,moveRelativeTo:p,isMoving:u})}return Rf({axis:n,moveRelativeTo:l.page,isMoving:u})},Sl=function(e,t){var r=e.frame;return r?Ge(t,r.scroll.diff.displacement):t},ES=function(t){var r=t.impact,s=t.draggable,d=t.droppable,v=t.draggables,y=t.afterCritical,u=s.page.borderBox.center,n=r.at;return!d||!n?u:n.type==="REORDER"?TS({impact:r,draggable:s,draggables:v,droppable:d,afterCritical:y}):wS({impact:r,draggables:v,afterCritical:y})},Ro=function(e){var t=ES(e),r=e.droppable,s=r?Sl(r,t):t;return s},sg=function(e,t){var r=ft(t,e.scroll.initial),s=Pn(r),d=At({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),v={frame:d,scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:r,displacement:s}}};return v};function Nf(e,t){return e.map(function(r){return t[r]})}function OS(e,t){for(var r=0;r<t.length;r++){var s=t[r].visible[e];if(s)return s}return null}var PS=function(e){var t=e.impact,r=e.viewport,s=e.destination,d=e.draggables,v=e.maxScrollChange,y=sg(r,Ge(r.scroll.current,v)),u=s.frame?Iu(s,Ge(s.frame.scroll.current,v)):s,n=t.displaced,f=Ti({afterDragging:Nf(n.all,d),destination:s,displacedBy:t.displacedBy,viewport:y.frame,last:n,forceShouldAnimate:!1}),h=Ti({afterDragging:Nf(n.all,d),destination:u,displacedBy:t.displacedBy,viewport:r.frame,last:n,forceShouldAnimate:!1}),a={},o={},i=[n,f,h];n.all.forEach(function(p){var c=OS(p,i);if(c){o[p]=c;return}a[p]=!0});var l=fe({},t,{displaced:{all:n.all,invisible:a,visible:o}});return l},DS=function(e,t){return Ge(e.scroll.diff.displacement,t)},Bu=function(e){var t=e.pageBorderBoxCenter,r=e.draggable,s=e.viewport,d=DS(s,t),v=ft(d,r.page.borderBox.center);return Ge(r.client.borderBox.center,v)},lg=function(e){var t=e.draggable,r=e.destination,s=e.newPageBorderBoxCenter,d=e.viewport,v=e.withDroppableDisplacement,y=e.onlyOnMainAxis,u=y===void 0?!1:y,n=ft(s,t.page.borderBox.center),f=Wi(t.page.borderBox,n),h={target:f,destination:r,withDroppableDisplacement:v,viewport:d};return u?pS(h):ag(h)},kS=function(e){var t=e.isMovingForward,r=e.draggable,s=e.destination,d=e.draggables,v=e.previousImpact,y=e.viewport,u=e.previousPageBorderBoxCenter,n=e.previousClientSelection,f=e.afterCritical;if(!s.isEnabled)return null;var h=Dn(s.descriptor.id,d),a=kn(r,s),o=oS({isMovingForward:t,draggable:r,destination:s,insideDestination:h,previousImpact:v})||SS({isMovingForward:t,isInHomeList:a,draggable:r,draggables:d,destination:s,insideDestination:h,previousImpact:v,viewport:y,afterCritical:f});if(!o)return null;var i=Ro({impact:o,draggable:r,droppable:s,draggables:d,afterCritical:f}),l=lg({draggable:r,destination:s,newPageBorderBoxCenter:i,viewport:y.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});if(l){var p=Bu({pageBorderBoxCenter:i,draggable:r,viewport:y});return{clientSelection:p,impact:o,scrollJumpRequest:null}}var c=ft(i,u),g=PS({impact:o,viewport:y,destination:s,draggables:d,maxScrollChange:c});return{clientSelection:n,impact:g,scrollJumpRequest:c}},Je=function(t){var r=t.subject.active;return r||re(!1),r},IS=function(e){var t=e.isMovingForward,r=e.pageBorderBoxCenter,s=e.source,d=e.droppables,v=e.viewport,y=s.subject.active;if(!y)return null;var u=s.axis,n=Tt(y[u.start],y[u.end]),f=Mo(d).filter(function(a){return a!==s}).filter(function(a){return a.isEnabled}).filter(function(a){return!!a.subject.active}).filter(function(a){return ng(v.frame)(Je(a))}).filter(function(a){var o=Je(a);return t?y[u.crossAxisEnd]<o[u.crossAxisEnd]:o[u.crossAxisStart]<y[u.crossAxisStart]}).filter(function(a){var o=Je(a),i=Tt(o[u.start],o[u.end]);return n(o[u.start])||n(o[u.end])||i(y[u.start])||i(y[u.end])}).sort(function(a,o){var i=Je(a)[u.crossAxisStart],l=Je(o)[u.crossAxisStart];return t?i-l:l-i}).filter(function(a,o,i){return Je(a)[u.crossAxisStart]===Je(i[0])[u.crossAxisStart]});if(!f.length)return null;if(f.length===1)return f[0];var h=f.filter(function(a){var o=Tt(Je(a)[u.start],Je(a)[u.end]);return o(r[u.line])});return h.length===1?h[0]:h.length>1?h.sort(function(a,o){return Je(a)[u.start]-Je(o)[u.start]})[0]:f.sort(function(a,o){var i=Mf(r,Ff(Je(a))),l=Mf(r,Ff(Je(o)));return i!==l?i-l:Je(a)[u.start]-Je(o)[u.start]})[0]},jf=function(t,r){var s=t.page.borderBox.center;return xr(t.descriptor.id,r)?ft(s,r.displacedBy.point):s},AS=function(t,r){var s=t.page.borderBox;return xr(t.descriptor.id,r)?Wi(s,Pn(r.displacedBy.point)):s},MS=function(e){var t=e.pageBorderBoxCenter,r=e.viewport,s=e.destination,d=e.insideDestination,v=e.afterCritical,y=d.filter(function(u){return ag({target:AS(u,v),destination:s,viewport:r.frame,withDroppableDisplacement:!0})}).sort(function(u,n){var f=bi(t,Sl(s,jf(u,v))),h=bi(t,Sl(s,jf(n,v)));return f<h?-1:h<f?1:u.descriptor.index-n.descriptor.index});return y[0]||null},Ui=je(function(t,r){var s=r[t.line];return{value:s,point:Hr(t.line,s)}}),FS=function(t,r,s){var d=t.axis;if(t.descriptor.mode==="virtual")return Hr(d.line,r[d.line]);var v=t.subject.page.contentBox[d.size],y=Dn(t.descriptor.id,s),u=y.reduce(function(h,a){return h+a.client.marginBox[d.size]},0),n=u+r[d.line],f=n-v;return f<=0?null:Hr(d.line,f)},ug=function(t,r){return fe({},t,{scroll:fe({},t.scroll,{max:r})})},cg=function(t,r,s){var d=t.frame;kn(r,t)&&re(!1),t.subject.withPlaceholder&&re(!1);var v=Ui(t.axis,r.displaceBy).point,y=FS(t,v,s),u={placeholderSize:v,increasedBy:y,oldFrameMaxScroll:t.frame?t.frame.scroll.max:null};if(!d){var n=wn({page:t.subject.page,withPlaceholder:u,axis:t.axis,frame:t.frame});return fe({},t,{subject:n})}var f=y?Ge(d.scroll.max,y):d.scroll.max,h=ug(d,f),a=wn({page:t.subject.page,withPlaceholder:u,axis:t.axis,frame:h});return fe({},t,{subject:a,frame:h})},LS=function(t){var r=t.subject.withPlaceholder;r||re(!1);var s=t.frame;if(!s){var d=wn({page:t.subject.page,axis:t.axis,frame:null,withPlaceholder:null});return fe({},t,{subject:d})}var v=r.oldFrameMaxScroll;v||re(!1);var y=ug(s,v),u=wn({page:t.subject.page,axis:t.axis,frame:y,withPlaceholder:null});return fe({},t,{subject:u,frame:y})},RS=function(e){var t=e.previousPageBorderBoxCenter,r=e.moveRelativeTo,s=e.insideDestination,d=e.draggable,v=e.draggables,y=e.destination,u=e.viewport,n=e.afterCritical;if(!r){if(s.length)return null;var f={displaced:_i,displacedBy:rg,at:{type:"REORDER",destination:{droppableId:y.descriptor.id,index:0}}},h=Ro({impact:f,draggable:d,droppable:y,draggables:v,afterCritical:n}),a=kn(d,y)?y:cg(y,d,v),o=lg({draggable:d,destination:a,newPageBorderBoxCenter:h,viewport:u.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});return o?f:null}var i=t[y.axis.line]<=r.page.borderBox.center[y.axis.line],l=function(){var c=r.descriptor.index;return r.descriptor.id===d.descriptor.id||i?c:c+1}(),p=Ui(y.axis,d.displaceBy);return Za({draggable:d,insideDestination:s,destination:y,viewport:u,displacedBy:p,last:_i,index:l})},BS=function(e){var t=e.isMovingForward,r=e.previousPageBorderBoxCenter,s=e.draggable,d=e.isOver,v=e.draggables,y=e.droppables,u=e.viewport,n=e.afterCritical,f=IS({isMovingForward:t,pageBorderBoxCenter:r,source:d,droppables:y,viewport:u});if(!f)return null;var h=Dn(f.descriptor.id,v),a=MS({pageBorderBoxCenter:r,viewport:u,destination:f,insideDestination:h,afterCritical:n}),o=RS({previousPageBorderBoxCenter:r,destination:f,draggable:s,draggables:v,moveRelativeTo:a,insideDestination:h,viewport:u,afterCritical:n});if(!o)return null;var i=Ro({impact:o,draggable:s,droppable:f,draggables:v,afterCritical:n}),l=Bu({pageBorderBoxCenter:i,draggable:s,viewport:u});return{clientSelection:l,impact:o,scrollJumpRequest:null}},dt=function(e){var t=e.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null},NS=function(t,r){var s=dt(t);return s?r[s]:null},jS=function(e){var t=e.state,r=e.type,s=NS(t.impact,t.dimensions.droppables),d=!!s,v=t.dimensions.droppables[t.critical.droppable.id],y=s||v,u=y.axis.direction,n=u==="vertical"&&(r==="MOVE_UP"||r==="MOVE_DOWN")||u==="horizontal"&&(r==="MOVE_LEFT"||r==="MOVE_RIGHT");if(n&&!d)return null;var f=r==="MOVE_DOWN"||r==="MOVE_RIGHT",h=t.dimensions.draggables[t.critical.draggable.id],a=t.current.page.borderBoxCenter,o=t.dimensions,i=o.draggables,l=o.droppables;return n?kS({isMovingForward:f,previousPageBorderBoxCenter:a,draggable:h,destination:y,draggables:i,viewport:t.viewport,previousClientSelection:t.current.client.selection,previousImpact:t.impact,afterCritical:t.afterCritical}):BS({isMovingForward:f,previousPageBorderBoxCenter:a,draggable:h,isOver:y,draggables:i,droppables:l,viewport:t.viewport,afterCritical:t.afterCritical})};function Ar(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function fg(e){var t=Tt(e.top,e.bottom),r=Tt(e.left,e.right);return function(d){return t(d.y)&&r(d.x)}}function zS(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function WS(e){var t=e.pageBorderBox,r=e.draggable,s=e.candidates,d=r.page.borderBox.center,v=s.map(function(y){var u=y.axis,n=Hr(y.axis.line,t.center[u.line],y.page.borderBox.center[u.crossAxisLine]);return{id:y.descriptor.id,distance:bi(d,n)}}).sort(function(y,u){return u.distance-y.distance});return v[0]?v[0].id:null}function US(e){var t=e.pageBorderBox,r=e.draggable,s=e.droppables,d=Mo(s).filter(function(v){if(!v.isEnabled)return!1;var y=v.subject.active;if(!y||!zS(t,y))return!1;if(fg(y)(t.center))return!0;var u=v.axis,n=y.center[u.crossAxisLine],f=t[u.crossAxisStart],h=t[u.crossAxisEnd],a=Tt(y[u.crossAxisStart],y[u.crossAxisEnd]),o=a(f),i=a(h);return!o&&!i?!0:o?f<n:h>n});return d.length?d.length===1?d[0].descriptor.id:WS({pageBorderBox:t,draggable:r,candidates:d}):null}var hg=function(t,r){return At(Wi(t,r))},HS=function(e,t){var r=e.frame;return r?hg(t,r.scroll.diff.value):t};function dg(e){var t=e.displaced,r=e.id;return!!(t.visible[r]||t.invisible[r])}function GS(e){var t=e.draggable,r=e.closest,s=e.inHomeList;return r?s&&r.descriptor.index>t.descriptor.index?r.descriptor.index-1:r.descriptor.index:null}var VS=function(e){var t=e.pageBorderBoxWithDroppableScroll,r=e.draggable,s=e.destination,d=e.insideDestination,v=e.last,y=e.viewport,u=e.afterCritical,n=s.axis,f=Ui(s.axis,r.displaceBy),h=f.value,a=t[n.start],o=t[n.end],i=Lo(r,d),l=Er(i,function(c){var g=c.descriptor.id,m=c.page.borderBox.center[n.line],C=xr(g,u),S=dg({displaced:v,id:g});return C?S?o<=m:a<m-h:S?o<=m+h:a<m}),p=GS({draggable:r,closest:l,inHomeList:kn(r,s)});return Za({draggable:r,insideDestination:d,destination:s,viewport:y,last:v,displacedBy:f,index:p})},XS=4,YS=function(e){var t=e.draggable,r=e.pageBorderBoxWithDroppableScroll,s=e.previousImpact,d=e.destination,v=e.insideDestination,y=e.afterCritical;if(!d.isCombineEnabled)return null;var u=d.axis,n=Ui(d.axis,t.displaceBy),f=n.value,h=r[u.start],a=r[u.end],o=Lo(t,v),i=Er(o,function(p){var c=p.descriptor.id,g=p.page.borderBox,m=g[u.size],C=m/XS,S=xr(c,y),x=dg({displaced:s.displaced,id:c});return S?x?a>g[u.start]+C&&a<g[u.end]-C:h>g[u.start]-f+C&&h<g[u.end]-f-C:x?a>g[u.start]+f+C&&a<g[u.end]+f-C:h>g[u.start]+C&&h<g[u.end]-C});if(!i)return null;var l={displacedBy:n,displaced:s.displaced,at:{type:"COMBINE",combine:{draggableId:i.descriptor.id,droppableId:d.descriptor.id}}};return l},pg=function(e){var t=e.pageOffset,r=e.draggable,s=e.draggables,d=e.droppables,v=e.previousImpact,y=e.viewport,u=e.afterCritical,n=hg(r.page.borderBox,t),f=US({pageBorderBox:n,draggable:r,droppables:d});if(!f)return sS;var h=d[f],a=Dn(h.descriptor.id,s),o=HS(h,n);return YS({pageBorderBoxWithDroppableScroll:o,draggable:r,previousImpact:v,destination:h,insideDestination:a,afterCritical:u})||VS({pageBorderBoxWithDroppableScroll:o,draggable:r,destination:h,insideDestination:a,last:v.displaced,viewport:y,afterCritical:u})},Nu=function(e,t){var r;return fe({},e,(r={},r[t.descriptor.id]=t,r))},$S=function(t){var r=t.previousImpact,s=t.impact,d=t.droppables,v=dt(r),y=dt(s);if(!v||v===y)return d;var u=d[v];if(!u.subject.withPlaceholder)return d;var n=LS(u);return Nu(d,n)},qS=function(e){var t=e.draggable,r=e.draggables,s=e.droppables,d=e.previousImpact,v=e.impact,y=$S({previousImpact:d,impact:v,droppables:s}),u=dt(v);if(!u)return y;var n=s[u];if(kn(t,n)||n.subject.withPlaceholder)return y;var f=cg(n,t,r);return Nu(y,f)},ri=function(e){var t=e.state,r=e.clientSelection,s=e.dimensions,d=e.viewport,v=e.impact,y=e.scrollJumpRequest,u=d||t.viewport,n=s||t.dimensions,f=r||t.current.client.selection,h=ft(f,t.initial.client.selection),a={offset:h,selection:f,borderBoxCenter:Ge(t.initial.client.borderBoxCenter,h)},o={selection:Ge(a.selection,u.scroll.current),borderBoxCenter:Ge(a.borderBoxCenter,u.scroll.current),offset:Ge(a.offset,u.scroll.diff.value)},i={client:a,page:o};if(t.phase==="COLLECTING")return fe({phase:"COLLECTING"},t,{dimensions:n,viewport:u,current:i});var l=n.draggables[t.critical.draggable.id],p=v||pg({pageOffset:o.offset,draggable:l,draggables:n.draggables,droppables:n.droppables,previousImpact:t.impact,viewport:u,afterCritical:t.afterCritical}),c=qS({draggable:l,impact:p,previousImpact:t.impact,draggables:n.draggables,droppables:n.droppables}),g=fe({},t,{current:i,dimensions:{draggables:n.draggables,droppables:c},impact:p,viewport:u,scrollJumpRequest:y||null,forceShouldAnimate:y?!1:null});return g};function KS(e,t){return e.map(function(r){return t[r]})}var gg=function(e){var t=e.impact,r=e.viewport,s=e.draggables,d=e.destination,v=e.forceShouldAnimate,y=t.displaced,u=KS(y.all,s),n=Ti({afterDragging:u,destination:d,displacedBy:t.displacedBy,viewport:r.frame,forceShouldAnimate:v,last:y});return fe({},t,{displaced:n})},vg=function(e){var t=e.impact,r=e.draggable,s=e.droppable,d=e.draggables,v=e.viewport,y=e.afterCritical,u=Ro({impact:t,draggable:r,draggables:d,droppable:s,afterCritical:y});return Bu({pageBorderBoxCenter:u,draggable:r,viewport:v})},mg=function(e){var t=e.state,r=e.dimensions,s=e.viewport;t.movementMode!=="SNAP"&&re(!1);var d=t.impact,v=s||t.viewport,y=r||t.dimensions,u=y.draggables,n=y.droppables,f=u[t.critical.draggable.id],h=dt(d);h||re(!1);var a=n[h],o=gg({impact:d,viewport:v,destination:a,draggables:u}),i=vg({impact:o,draggable:f,droppable:a,draggables:u,viewport:v,afterCritical:t.afterCritical});return ri({impact:o,clientSelection:i,state:t,dimensions:y,viewport:v})},QS=function(e){return{index:e.index,droppableId:e.droppableId}},yg=function(e){var t=e.draggable,r=e.home,s=e.draggables,d=e.viewport,v=Ui(r.axis,t.displaceBy),y=Dn(r.descriptor.id,s),u=y.indexOf(t);u===-1&&re(!1);var n=y.slice(u+1),f=n.reduce(function(i,l){return i[l.descriptor.id]=!0,i},{}),h={inVirtualList:r.descriptor.mode==="virtual",displacedBy:v,effected:f},a=Ti({afterDragging:n,destination:r,displacedBy:v,last:null,viewport:d.frame,forceShouldAnimate:!1}),o={displaced:a,displacedBy:v,at:{type:"REORDER",destination:QS(t.descriptor)}};return{impact:o,afterCritical:h}},JS=function(e,t){return{draggables:e.draggables,droppables:Nu(e.droppables,t)}},ZS=function(e){var t=e.draggable,r=e.offset,s=e.initialWindowScroll,d=$a(t.client,r),v=qa(d,s),y=fe({},t,{placeholder:fe({},t.placeholder,{client:d}),client:d,page:v});return y},e1=function(e){var t=e.frame;return t||re(!1),t},t1=function(e){var t=e.additions,r=e.updatedDroppables,s=e.viewport,d=s.scroll.diff.value;return t.map(function(v){var y=v.descriptor.droppableId,u=r[y],n=e1(u),f=n.scroll.diff.value,h=Ge(d,f),a=ZS({draggable:v,offset:h,initialWindowScroll:s.scroll.initial});return a})},r1=function(e){var t=e.state,r=e.published,s=r.modified.map(function(C){var S=t.dimensions.droppables[C.droppableId],x=Iu(S,C.scroll);return x}),d=fe({},t.dimensions.droppables,{},eg(s)),v=tg(t1({additions:r.additions,updatedDroppables:d,viewport:t.viewport})),y=fe({},t.dimensions.draggables,{},v);r.removals.forEach(function(C){delete y[C]});var u={droppables:d,draggables:y},n=dt(t.impact),f=n?u.droppables[n]:null,h=u.draggables[t.critical.draggable.id],a=u.droppables[t.critical.droppable.id],o=yg({draggable:h,home:a,draggables:y,viewport:t.viewport}),i=o.impact,l=o.afterCritical,p=f&&f.isCombineEnabled?t.impact:i,c=pg({pageOffset:t.current.page.offset,draggable:u.draggables[t.critical.draggable.id],draggables:u.draggables,droppables:u.droppables,previousImpact:p,viewport:t.viewport,afterCritical:l}),g=fe({phase:"DRAGGING"},t,{phase:"DRAGGING",impact:c,onLiftImpact:i,dimensions:u,afterCritical:l,forceShouldAnimate:!1});if(t.phase==="COLLECTING")return g;var m=fe({phase:"DROP_PENDING"},g,{phase:"DROP_PENDING",reason:t.reason,isWaiting:!1});return m},xl=function(t){return t.movementMode==="SNAP"},Cs=function(t,r,s){var d=JS(t.dimensions,r);return!xl(t)||s?ri({state:t,dimensions:d}):mg({state:t,dimensions:d})};function Ss(e){return e.isDragging&&e.movementMode==="SNAP"?fe({phase:"DRAGGING"},e,{scrollJumpRequest:null}):e}var zf={phase:"IDLE",completed:null,shouldFlush:!1},n1=function(e,t){if(e===void 0&&(e=zf),t.type==="FLUSH")return fe({},zf,{shouldFlush:!0});if(t.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&re(!1);var r=t.payload,s=r.critical,d=r.clientSelection,v=r.viewport,y=r.dimensions,u=r.movementMode,n=y.draggables[s.draggable.id],f=y.droppables[s.droppable.id],h={selection:d,borderBoxCenter:n.client.borderBox.center,offset:ze},a={client:h,page:{selection:Ge(h.selection,v.scroll.initial),borderBoxCenter:Ge(h.selection,v.scroll.initial),offset:Ge(h.selection,v.scroll.diff.value)}},o=Mo(y.droppables).every(function(K){return!K.isFixedOnPage}),i=yg({draggable:n,home:f,draggables:y.draggables,viewport:v}),l=i.impact,p=i.afterCritical,c={phase:"DRAGGING",isDragging:!0,critical:s,movementMode:u,dimensions:y,initial:a,current:a,isWindowScrollAllowed:o,impact:l,afterCritical:p,onLiftImpact:l,viewport:v,scrollJumpRequest:null,forceShouldAnimate:null};return c}if(t.type==="COLLECTION_STARTING"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&re(!1);var g=fe({phase:"COLLECTING"},e,{phase:"COLLECTING"});return g}if(t.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||re(!1),r1({state:e,published:t.payload});if(t.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;Ar(e)||re(!1);var m=t.payload.client;return mr(m,e.current.client.selection)?e:ri({state:e,clientSelection:m,impact:xl(e)?e.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return Ss(e);Ar(e)||re(!1);var C=t.payload,S=C.id,x=C.newScroll,w=e.dimensions.droppables[S];if(!w)return e;var _=Iu(w,x);return Cs(e,_,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;Ar(e)||re(!1);var E=t.payload,I=E.id,M=E.isEnabled,z=e.dimensions.droppables[I];z||re(!1),z.isEnabled===M&&re(!1);var Q=fe({},z,{isEnabled:M});return Cs(e,Q,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;Ar(e)||re(!1);var ee=t.payload,q=ee.id,J=ee.isCombineEnabled,ie=e.dimensions.droppables[q];ie||re(!1),ie.isCombineEnabled===J&&re(!1);var se=fe({},ie,{isCombineEnabled:J});return Cs(e,se,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;Ar(e)||re(!1),e.isWindowScrollAllowed||re(!1);var U=t.payload.newScroll;if(mr(e.viewport.scroll.current,U))return Ss(e);var b=sg(e.viewport,U);return xl(e)?mg({state:e,viewport:b}):ri({state:e,viewport:b})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!Ar(e))return e;var O=t.payload.maxScroll;if(mr(O,e.viewport.scroll.max))return e;var k=fe({},e.viewport,{scroll:fe({},e.viewport.scroll,{max:O})});return fe({phase:"DRAGGING"},e,{viewport:k})}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&re(!1);var D=jS({state:e,type:t.type});return D?ri({state:e,impact:D.impact,clientSelection:D.clientSelection,scrollJumpRequest:D.scrollJumpRequest}):e}if(t.type==="DROP_PENDING"){var B=t.payload.reason;e.phase!=="COLLECTING"&&re(!1);var P=fe({phase:"DROP_PENDING"},e,{phase:"DROP_PENDING",isWaiting:!0,reason:B});return P}if(t.type==="DROP_ANIMATE"){var T=t.payload,A=T.completed,F=T.dropDuration,H=T.newHomeClientOffset;e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||re(!1);var N={phase:"DROP_ANIMATING",completed:A,dropDuration:F,newHomeClientOffset:H,dimensions:e.dimensions};return N}if(t.type==="DROP_COMPLETE"){var Y=t.payload.completed;return{phase:"IDLE",completed:Y,shouldFlush:!1}}return e},i1=function(t){return{type:"BEFORE_INITIAL_CAPTURE",payload:t}},a1=function(t){return{type:"LIFT",payload:t}},o1=function(t){return{type:"INITIAL_PUBLISH",payload:t}},s1=function(t){return{type:"PUBLISH_WHILE_DRAGGING",payload:t}},l1=function(){return{type:"COLLECTION_STARTING",payload:null}},u1=function(t){return{type:"UPDATE_DROPPABLE_SCROLL",payload:t}},c1=function(t){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:t}},f1=function(t){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:t}},Cg=function(t){return{type:"MOVE",payload:t}},h1=function(t){return{type:"MOVE_BY_WINDOW_SCROLL",payload:t}},d1=function(t){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:t}},p1=function(){return{type:"MOVE_UP",payload:null}},g1=function(){return{type:"MOVE_DOWN",payload:null}},v1=function(){return{type:"MOVE_RIGHT",payload:null}},m1=function(){return{type:"MOVE_LEFT",payload:null}},ju=function(){return{type:"FLUSH",payload:null}},y1=function(t){return{type:"DROP_ANIMATE",payload:t}},zu=function(t){return{type:"DROP_COMPLETE",payload:t}},Sg=function(t){return{type:"DROP",payload:t}},C1=function(t){return{type:"DROP_PENDING",payload:t}},xg=function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}},S1=function(e){return function(t){var r=t.getState,s=t.dispatch;return function(d){return function(v){if(v.type!=="LIFT"){d(v);return}var y=v.payload,u=y.id,n=y.clientSelection,f=y.movementMode,h=r();h.phase==="DROP_ANIMATING"&&s(zu({completed:h.completed})),r().phase!=="IDLE"&&re(!1),s(ju()),s(i1({draggableId:u,movementMode:f}));var a={shouldPublishImmediately:f==="SNAP"},o={draggableId:u,scrollOptions:a},i=e.startPublishing(o),l=i.critical,p=i.dimensions,c=i.viewport;s(o1({critical:l,dimensions:p,clientSelection:n,movementMode:f,viewport:c}))}}}},x1=function(e){return function(){return function(t){return function(r){r.type==="INITIAL_PUBLISH"&&e.dragging(),r.type==="DROP_ANIMATE"&&e.dropping(r.payload.completed.result.reason),(r.type==="FLUSH"||r.type==="DROP_COMPLETE")&&e.resting(),t(r)}}}},Wu={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},Ei={opacity:{drop:0,combining:.7},scale:{drop:.75}},Uu={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},Dr=Uu.outOfTheWay+"s "+Wu.outOfTheWay,ni={fluid:"opacity "+Dr,snap:"transform "+Dr+", opacity "+Dr,drop:function(t){var r=t+"s "+Wu.drop;return"transform "+r+", opacity "+r},outOfTheWay:"transform "+Dr,placeholder:"height "+Dr+", width "+Dr+", margin "+Dr},Wf=function(t){return mr(t,ze)?null:"translate("+t.x+"px, "+t.y+"px)"},wl={moveTo:Wf,drop:function(t,r){var s=Wf(t);return s?r?s+" scale("+Ei.scale.drop+")":s:null}},bl=Uu.minDropTime,wg=Uu.maxDropTime,w1=wg-bl,Uf=1500,b1=.6,_1=function(e){var t=e.current,r=e.destination,s=e.reason,d=bi(t,r);if(d<=0)return bl;if(d>=Uf)return wg;var v=d/Uf,y=bl+w1*v,u=s==="CANCEL"?y*b1:y;return Number(u.toFixed(2))},T1=function(e){var t=e.impact,r=e.draggable,s=e.dimensions,d=e.viewport,v=e.afterCritical,y=s.draggables,u=s.droppables,n=dt(t),f=n?u[n]:null,h=u[r.descriptor.droppableId],a=vg({impact:t,draggable:r,draggables:y,afterCritical:v,droppable:f||h,viewport:d}),o=ft(a,r.client.borderBox.center);return o},E1=function(e){var t=e.draggables,r=e.reason,s=e.lastImpact,d=e.home,v=e.viewport,y=e.onLiftImpact;if(!s.at||r!=="DROP"){var u=gg({draggables:t,impact:y,destination:d,viewport:v,forceShouldAnimate:!0});return{impact:u,didDropInsideDroppable:!1}}if(s.at.type==="REORDER")return{impact:s,didDropInsideDroppable:!0};var n=fe({},s,{displaced:_i});return{impact:n,didDropInsideDroppable:!0}},O1=function(e){var t=e.getState,r=e.dispatch;return function(s){return function(d){if(d.type!=="DROP"){s(d);return}var v=t(),y=d.payload.reason;if(v.phase==="COLLECTING"){r(C1({reason:y}));return}if(v.phase!=="IDLE"){var u=v.phase==="DROP_PENDING"&&v.isWaiting;u&&re(!1),v.phase==="DRAGGING"||v.phase==="DROP_PENDING"||re(!1);var n=v.critical,f=v.dimensions,h=f.draggables[v.critical.draggable.id],a=E1({reason:y,lastImpact:v.impact,afterCritical:v.afterCritical,onLiftImpact:v.onLiftImpact,home:v.dimensions.droppables[v.critical.droppable.id],viewport:v.viewport,draggables:v.dimensions.draggables}),o=a.impact,i=a.didDropInsideDroppable,l=i?Mu(o):null,p=i?Fo(o):null,c={index:n.draggable.index,droppableId:n.droppable.id},g={draggableId:h.descriptor.id,type:h.descriptor.type,source:c,reason:y,mode:v.movementMode,destination:l,combine:p},m=T1({impact:o,draggable:h,dimensions:f,viewport:v.viewport,afterCritical:v.afterCritical}),C={critical:v.critical,afterCritical:v.afterCritical,result:g,impact:o},S=!mr(v.current.client.offset,m)||!!g.combine;if(!S){r(zu({completed:C}));return}var x=_1({current:v.current.client.offset,destination:m,reason:y}),w={newHomeClientOffset:m,dropDuration:x,completed:C};r(y1(w))}}}},bg=function(){return{x:window.pageXOffset,y:window.pageYOffset}};function P1(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(r){r.target!==window&&r.target!==window.document||e()}}}function D1(e){var t=e.onWindowScroll;function r(){t(bg())}var s=wi(r),d=P1(s),v=vr;function y(){return v!==vr}function u(){y()&&re(!1),v=bt(window,[d])}function n(){y()||re(!1),s.cancel(),v(),v=vr}return{start:u,stop:n,isActive:y}}var k1=function(t){return t.type==="DROP_COMPLETE"||t.type==="DROP_ANIMATE"||t.type==="FLUSH"},I1=function(e){var t=D1({onWindowScroll:function(s){e.dispatch(h1({newScroll:s}))}});return function(r){return function(s){!t.isActive()&&s.type==="INITIAL_PUBLISH"&&t.start(),t.isActive()&&k1(s)&&t.stop(),r(s)}}},A1=function(e){var t=!1,r=!1,s=setTimeout(function(){r=!0}),d=function(y){t||r||(t=!0,e(y),clearTimeout(s))};return d.wasCalled=function(){return t},d},M1=function(){var e=[],t=function(v){var y=Au(e,function(f){return f.timerId===v});y===-1&&re(!1);var u=e.splice(y,1),n=u[0];n.callback()},r=function(v){var y=setTimeout(function(){return t(y)}),u={timerId:y,callback:v};e.push(u)},s=function(){if(e.length){var v=[].concat(e);e.length=0,v.forEach(function(y){clearTimeout(y.timerId),y.callback()})}};return{add:r,flush:s}},F1=function(t,r){return t==null&&r==null?!0:t==null||r==null?!1:t.droppableId===r.droppableId&&t.index===r.index},L1=function(t,r){return t==null&&r==null?!0:t==null||r==null?!1:t.draggableId===r.draggableId&&t.droppableId===r.droppableId},R1=function(t,r){if(t===r)return!0;var s=t.draggable.id===r.draggable.id&&t.draggable.droppableId===r.draggable.droppableId&&t.draggable.type===r.draggable.type&&t.draggable.index===r.draggable.index,d=t.droppable.id===r.droppable.id&&t.droppable.type===r.droppable.type;return s&&d},zn=function(t,r){r()},oa=function(t,r){return{draggableId:t.draggable.id,type:t.droppable.type,source:{droppableId:t.droppable.id,index:t.draggable.index},mode:r}},xs=function(t,r,s,d){if(!t){s(d(r));return}var v=A1(s),y={announce:v};t(r,y),v.wasCalled()||s(d(r))},B1=function(e,t){var r=M1(),s=null,d=function(o,i){s&&re(!1),zn("onBeforeCapture",function(){var l=e().onBeforeCapture;if(l){var p={draggableId:o,mode:i};l(p)}})},v=function(o,i){s&&re(!1),zn("onBeforeDragStart",function(){var l=e().onBeforeDragStart;l&&l(oa(o,i))})},y=function(o,i){s&&re(!1);var l=oa(o,i);s={mode:i,lastCritical:o,lastLocation:l.source,lastCombine:null},r.add(function(){zn("onDragStart",function(){return xs(e().onDragStart,l,t,wa.onDragStart)})})},u=function(o,i){var l=Mu(i),p=Fo(i);s||re(!1);var c=!R1(o,s.lastCritical);c&&(s.lastCritical=o);var g=!F1(s.lastLocation,l);g&&(s.lastLocation=l);var m=!L1(s.lastCombine,p);if(m&&(s.lastCombine=p),!(!c&&!g&&!m)){var C=fe({},oa(o,s.mode),{combine:p,destination:l});r.add(function(){zn("onDragUpdate",function(){return xs(e().onDragUpdate,C,t,wa.onDragUpdate)})})}},n=function(){s||re(!1),r.flush()},f=function(o){s||re(!1),s=null,zn("onDragEnd",function(){return xs(e().onDragEnd,o,t,wa.onDragEnd)})},h=function(){if(s){var o=fe({},oa(s.lastCritical,s.mode),{combine:null,destination:null,reason:"CANCEL"});f(o)}};return{beforeCapture:d,beforeStart:v,start:y,update:u,flush:n,drop:f,abort:h}},N1=function(e,t){var r=B1(e,t);return function(s){return function(d){return function(v){if(v.type==="BEFORE_INITIAL_CAPTURE"){r.beforeCapture(v.payload.draggableId,v.payload.movementMode);return}if(v.type==="INITIAL_PUBLISH"){var y=v.payload.critical;r.beforeStart(y,v.payload.movementMode),d(v),r.start(y,v.payload.movementMode);return}if(v.type==="DROP_COMPLETE"){var u=v.payload.completed.result;r.flush(),d(v),r.drop(u);return}if(d(v),v.type==="FLUSH"){r.abort();return}var n=s.getState();n.phase==="DRAGGING"&&r.update(n.critical,n.impact)}}}},j1=function(e){return function(t){return function(r){if(r.type!=="DROP_ANIMATION_FINISHED"){t(r);return}var s=e.getState();s.phase!=="DROP_ANIMATING"&&re(!1),e.dispatch(zu({completed:s.completed}))}}},z1=function(e){var t=null,r=null;function s(){r&&(cancelAnimationFrame(r),r=null),t&&(t(),t=null)}return function(d){return function(v){if((v.type==="FLUSH"||v.type==="DROP_COMPLETE"||v.type==="DROP_ANIMATION_FINISHED")&&s(),d(v),v.type==="DROP_ANIMATE"){var y={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){var n=e.getState();n.phase==="DROP_ANIMATING"&&e.dispatch(xg())}};r=requestAnimationFrame(function(){r=null,t=bt(window,[y])})}}}},W1=function(e){return function(){return function(t){return function(r){(r.type==="DROP_COMPLETE"||r.type==="FLUSH"||r.type==="DROP_ANIMATE")&&e.stopPublishing(),t(r)}}}},U1=function(e){var t=!1;return function(){return function(r){return function(s){if(s.type==="INITIAL_PUBLISH"){t=!0,e.tryRecordFocus(s.payload.critical.draggable.id),r(s),e.tryRestoreFocusRecorded();return}if(r(s),!!t){if(s.type==="FLUSH"){t=!1,e.tryRestoreFocusRecorded();return}if(s.type==="DROP_COMPLETE"){t=!1;var d=s.payload.completed.result;d.combine&&e.tryShiftRecord(d.draggableId,d.combine.draggableId),e.tryRestoreFocusRecorded()}}}}}},H1=function(t){return t.type==="DROP_COMPLETE"||t.type==="DROP_ANIMATE"||t.type==="FLUSH"},G1=function(e){return function(t){return function(r){return function(s){if(H1(s)){e.stop(),r(s);return}if(s.type==="INITIAL_PUBLISH"){r(s);var d=t.getState();d.phase!=="DRAGGING"&&re(!1),e.start(d);return}r(s),e.scroll(t.getState())}}}},V1=function(e){return function(t){return function(r){if(t(r),r.type==="PUBLISH_WHILE_DRAGGING"){var s=e.getState();s.phase==="DROP_PENDING"&&(s.isWaiting||e.dispatch(Sg({reason:s.reason})))}}}},X1=Dp,Y1=function(e){var t=e.dimensionMarshal,r=e.focusMarshal,s=e.styleMarshal,d=e.getResponders,v=e.announce,y=e.autoScroller;return Pp(n1,X1(A0(x1(s),W1(t),S1(t),O1,j1,z1,V1,G1(y),I1,U1(r),N1(d,v))))},ws=function(){return{additions:{},removals:{},modified:{}}};function $1(e){var t=e.registry,r=e.callbacks,s=ws(),d=null,v=function(){d||(r.collectionStarting(),d=requestAnimationFrame(function(){d=null;var h=s,a=h.additions,o=h.removals,i=h.modified,l=Object.keys(a).map(function(g){return t.draggable.getById(g).getDimension(ze)}).sort(function(g,m){return g.descriptor.index-m.descriptor.index}),p=Object.keys(i).map(function(g){var m=t.droppable.getById(g),C=m.callbacks.getScrollWhileDragging();return{droppableId:g,scroll:C}}),c={additions:l,removals:Object.keys(o),modified:p};s=ws(),r.publish(c)}))},y=function(h){var a=h.descriptor.id;s.additions[a]=h,s.modified[h.descriptor.droppableId]=!0,s.removals[a]&&delete s.removals[a],v()},u=function(h){var a=h.descriptor;s.removals[a.id]=!0,s.modified[a.droppableId]=!0,s.additions[a.id]&&delete s.additions[a.id],v()},n=function(){d&&(cancelAnimationFrame(d),d=null,s=ws())};return{add:y,remove:u,stop:n}}var _g=function(e){var t=e.scrollHeight,r=e.scrollWidth,s=e.height,d=e.width,v=ft({x:r,y:t},{x:d,y:s}),y={x:Math.max(0,v.x),y:Math.max(0,v.y)};return y},Tg=function(){var e=document.documentElement;return e||re(!1),e},Eg=function(){var e=Tg(),t=_g({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight});return t},q1=function(){var e=bg(),t=Eg(),r=e.y,s=e.x,d=Tg(),v=d.clientWidth,y=d.clientHeight,u=s+v,n=r+y,f=At({top:r,left:s,right:u,bottom:n}),h={frame:f,scroll:{initial:e,current:e,max:t,diff:{value:ze,displacement:ze}}};return h},K1=function(e){var t=e.critical,r=e.scrollOptions,s=e.registry,d=q1(),v=d.scroll.current,y=t.droppable,u=s.droppable.getAllByType(y.type).map(function(a){return a.callbacks.getDimensionAndWatchScroll(v,r)}),n=s.draggable.getAllByType(t.draggable.type).map(function(a){return a.getDimension(v)}),f={draggables:tg(n),droppables:eg(u)},h={dimensions:f,critical:t,viewport:d};return h};function Hf(e,t,r){if(r.descriptor.id===t.id||r.descriptor.type!==t.type)return!1;var s=e.droppable.getById(r.descriptor.droppableId);return s.descriptor.mode==="virtual"}var Q1=function(e,t){var r=null,s=$1({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),d=function(i,l){e.droppable.exists(i)||re(!1),r&&t.updateDroppableIsEnabled({id:i,isEnabled:l})},v=function(i,l){r&&(e.droppable.exists(i)||re(!1),t.updateDroppableIsCombineEnabled({id:i,isCombineEnabled:l}))},y=function(i,l){r&&(e.droppable.exists(i)||re(!1),t.updateDroppableScroll({id:i,newScroll:l}))},u=function(i,l){r&&e.droppable.getById(i).callbacks.scroll(l)},n=function(){if(r){s.stop();var i=r.critical.droppable;e.droppable.getAllByType(i.type).forEach(function(l){return l.callbacks.dragStopped()}),r.unsubscribe(),r=null}},f=function(i){r||re(!1);var l=r.critical.draggable;i.type==="ADDITION"&&Hf(e,l,i.value)&&s.add(i.value),i.type==="REMOVAL"&&Hf(e,l,i.value)&&s.remove(i.value)},h=function(i){r&&re(!1);var l=e.draggable.getById(i.draggableId),p=e.droppable.getById(l.descriptor.droppableId),c={draggable:l.descriptor,droppable:p.descriptor},g=e.subscribe(f);return r={critical:c,unsubscribe:g},K1({critical:c,registry:e,scrollOptions:i.scrollOptions})},a={updateDroppableIsEnabled:d,updateDroppableIsCombineEnabled:v,scrollDroppable:u,updateDroppableScroll:y,startPublishing:h,stopPublishing:n};return a},Og=function(e,t){return e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===t?!1:e.completed.result.reason==="DROP"},J1=function(e){window.scrollBy(e.x,e.y)},Z1=je(function(e){return Mo(e).filter(function(t){return!(!t.isEnabled||!t.frame)})}),ex=function(t,r){var s=Er(Z1(r),function(d){return d.frame||re(!1),fg(d.frame.pageMarginBox)(t)});return s},tx=function(e){var t=e.center,r=e.destination,s=e.droppables;if(r){var d=s[r];return d.frame?d:null}var v=ex(t,s);return v},yr={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:function(t){return Math.pow(t,2)},durationDampening:{stopDampeningAt:1200,accelerateAt:360}},rx=function(e,t){var r=e[t.size]*yr.startFromPercentage,s=e[t.size]*yr.maxScrollAtPercentage,d={startScrollingFrom:r,maxScrollValueAt:s};return d},Pg=function(e){var t=e.startOfRange,r=e.endOfRange,s=e.current,d=r-t;if(d===0)return 0;var v=s-t,y=v/d;return y},Hu=1,nx=function(e,t){if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return yr.maxPixelScroll;if(e===t.startScrollingFrom)return Hu;var r=Pg({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),s=1-r,d=yr.maxPixelScroll*yr.ease(s);return Math.ceil(d)},Gf=yr.durationDampening.accelerateAt,Vf=yr.durationDampening.stopDampeningAt,ix=function(e,t){var r=t,s=Vf,d=Date.now(),v=d-r;if(v>=Vf)return e;if(v<Gf)return Hu;var y=Pg({startOfRange:Gf,endOfRange:s,current:v}),u=e*yr.ease(y);return Math.ceil(u)},Xf=function(e){var t=e.distanceToEdge,r=e.thresholds,s=e.dragStartTime,d=e.shouldUseTimeDampening,v=nx(t,r);return v===0?0:d?Math.max(ix(v,s),Hu):v},Yf=function(e){var t=e.container,r=e.distanceToEdges,s=e.dragStartTime,d=e.axis,v=e.shouldUseTimeDampening,y=rx(t,d),u=r[d.end]<r[d.start];return u?Xf({distanceToEdge:r[d.end],thresholds:y,dragStartTime:s,shouldUseTimeDampening:v}):-1*Xf({distanceToEdge:r[d.start],thresholds:y,dragStartTime:s,shouldUseTimeDampening:v})},ax=function(e){var t=e.container,r=e.subject,s=e.proposedScroll,d=r.height>t.height,v=r.width>t.width;return!v&&!d?s:v&&d?null:{x:v?0:s.x,y:d?0:s.y}},ox=Jp(function(e){return e===0?0:e}),Dg=function(e){var t=e.dragStartTime,r=e.container,s=e.subject,d=e.center,v=e.shouldUseTimeDampening,y={top:d.y-r.top,right:r.right-d.x,bottom:r.bottom-d.y,left:d.x-r.left},u=Yf({container:r,distanceToEdges:y,dragStartTime:t,axis:Fu,shouldUseTimeDampening:v}),n=Yf({container:r,distanceToEdges:y,dragStartTime:t,axis:ig,shouldUseTimeDampening:v}),f=ox({x:n,y:u});if(mr(f,ze))return null;var h=ax({container:r,subject:s,proposedScroll:f});return h?mr(h,ze)?null:h:null},sx=Jp(function(e){return e===0?0:e>0?1:-1}),Gu=function(){var e=function(r,s){return r<0?r:r>s?r-s:0};return function(t){var r=t.current,s=t.max,d=t.change,v=Ge(r,d),y={x:e(v.x,s.x),y:e(v.y,s.y)};return mr(y,ze)?null:y}}(),kg=function(t){var r=t.max,s=t.current,d=t.change,v={x:Math.max(s.x,r.x),y:Math.max(s.y,r.y)},y=sx(d),u=Gu({max:v,current:s,change:y});return!u||y.x!==0&&u.x===0||y.y!==0&&u.y===0},Vu=function(t,r){return kg({current:t.scroll.current,max:t.scroll.max,change:r})},lx=function(t,r){if(!Vu(t,r))return null;var s=t.scroll.max,d=t.scroll.current;return Gu({current:d,max:s,change:r})},Xu=function(t,r){var s=t.frame;return s?kg({current:s.scroll.current,max:s.scroll.max,change:r}):!1},ux=function(t,r){var s=t.frame;return!s||!Xu(t,r)?null:Gu({current:s.scroll.current,max:s.scroll.max,change:r})},cx=function(e){var t=e.viewport,r=e.subject,s=e.center,d=e.dragStartTime,v=e.shouldUseTimeDampening,y=Dg({dragStartTime:d,container:t.frame,subject:r,center:s,shouldUseTimeDampening:v});return y&&Vu(t,y)?y:null},fx=function(e){var t=e.droppable,r=e.subject,s=e.center,d=e.dragStartTime,v=e.shouldUseTimeDampening,y=t.frame;if(!y)return null;var u=Dg({dragStartTime:d,container:y.pageMarginBox,subject:r,center:s,shouldUseTimeDampening:v});return u&&Xu(t,u)?u:null},$f=function(e){var t=e.state,r=e.dragStartTime,s=e.shouldUseTimeDampening,d=e.scrollWindow,v=e.scrollDroppable,y=t.current.page.borderBoxCenter,u=t.dimensions.draggables[t.critical.draggable.id],n=u.page.marginBox;if(t.isWindowScrollAllowed){var f=t.viewport,h=cx({dragStartTime:r,viewport:f,subject:n,center:y,shouldUseTimeDampening:s});if(h){d(h);return}}var a=tx({center:y,destination:dt(t.impact),droppables:t.dimensions.droppables});if(a){var o=fx({dragStartTime:r,droppable:a,subject:n,center:y,shouldUseTimeDampening:s});o&&v(a.descriptor.id,o)}},hx=function(e){var t=e.scrollWindow,r=e.scrollDroppable,s=wi(t),d=wi(r),v=null,y=function(h){v||re(!1);var a=v,o=a.shouldUseTimeDampening,i=a.dragStartTime;$f({state:h,scrollWindow:s,scrollDroppable:d,dragStartTime:i,shouldUseTimeDampening:o})},u=function(h){v&&re(!1);var a=Date.now(),o=!1,i=function(){o=!0};$f({state:h,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:i,scrollDroppable:i}),v={dragStartTime:a,shouldUseTimeDampening:o},o&&y(h)},n=function(){v&&(s.cancel(),d.cancel(),v=null)};return{start:u,stop:n,scroll:y}},dx=function(e){var t=e.move,r=e.scrollDroppable,s=e.scrollWindow,d=function(f,h){var a=Ge(f.current.client.selection,h);t({client:a})},v=function(f,h){if(!Xu(f,h))return h;var a=ux(f,h);if(!a)return r(f.descriptor.id,h),null;var o=ft(h,a);r(f.descriptor.id,o);var i=ft(h,o);return i},y=function(f,h,a){if(!f||!Vu(h,a))return a;var o=lx(h,a);if(!o)return s(a),null;var i=ft(a,o);s(i);var l=ft(a,i);return l},u=function(f){var h=f.scrollJumpRequest;if(h){var a=dt(f.impact);a||re(!1);var o=v(f.dimensions.droppables[a],h);if(o){var i=f.viewport,l=y(f.isWindowScrollAllowed,i,o);l&&d(f,l)}}};return u},px=function(e){var t=e.scrollDroppable,r=e.scrollWindow,s=e.move,d=hx({scrollWindow:r,scrollDroppable:t}),v=dx({move:s,scrollWindow:r,scrollDroppable:t}),y=function(f){if(f.phase==="DRAGGING"){if(f.movementMode==="FLUID"){d.scroll(f);return}f.scrollJumpRequest&&v(f)}},u={scroll:y,start:d.start,stop:d.stop};return u},bn="data-rbd",_n=function(){var e=bn+"-drag-handle";return{base:e,draggableId:e+"-draggable-id",contextId:e+"-context-id"}}(),_l=function(){var e=bn+"-draggable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),gx=function(){var e=bn+"-droppable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),qf={contextId:bn+"-scroll-container-context-id"},vx=function(t){return function(r){return"["+r+'="'+t+'"]'}},Wn=function(t,r){return t.map(function(s){var d=s.styles[r];return d?s.selector+" { "+d+" }":""}).join(" ")},mx="pointer-events: none;",yx=function(e){var t=vx(e),r=function(){var u=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t(_n.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:u,dragging:mx,dropAnimating:u}}}(),s=function(){var u=`
      transition: `+ni.outOfTheWay+`;
    `;return{selector:t(_l.contextId),styles:{dragging:u,dropAnimating:u,userCancel:u}}}(),d={selector:t(gx.contextId),styles:{always:"overflow-anchor: none;"}},v={selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}},y=[s,r,d,v];return{always:Wn(y,"always"),resting:Wn(y,"resting"),dragging:Wn(y,"dragging"),dropAnimating:Wn(y,"dropAnimating"),userCancel:Wn(y,"userCancel")}},pt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?ae.useLayoutEffect:ae.useEffect,bs=function(){var t=document.querySelector("head");return t||re(!1),t},Kf=function(t){var r=document.createElement("style");return t&&r.setAttribute("nonce",t),r.type="text/css",r};function Cx(e,t){var r=me(function(){return yx(e)},[e]),s=ae.useRef(null),d=ae.useRef(null),v=ue(je(function(a){var o=d.current;o||re(!1),o.textContent=a}),[]),y=ue(function(a){var o=s.current;o||re(!1),o.textContent=a},[]);pt(function(){!s.current&&!d.current||re(!1);var a=Kf(t),o=Kf(t);return s.current=a,d.current=o,a.setAttribute(bn+"-always",e),o.setAttribute(bn+"-dynamic",e),bs().appendChild(a),bs().appendChild(o),y(r.always),v(r.resting),function(){var i=function(p){var c=p.current;c||re(!1),bs().removeChild(c),p.current=null};i(s),i(d)}},[t,y,v,r.always,r.resting,e]);var u=ue(function(){return v(r.dragging)},[v,r.dragging]),n=ue(function(a){if(a==="DROP"){v(r.dropAnimating);return}v(r.userCancel)},[v,r.dropAnimating,r.userCancel]),f=ue(function(){d.current&&v(r.resting)},[v,r.resting]),h=me(function(){return{dragging:u,dropping:n,resting:f}},[u,n,f]);return h}var Ig=function(e){return e&&e.ownerDocument?e.ownerDocument.defaultView:window};function Bo(e){return e instanceof Ig(e).HTMLElement}function Sx(e,t){var r="["+_n.contextId+'="'+e+'"]',s=Zp(document.querySelectorAll(r));if(!s.length)return null;var d=Er(s,function(v){return v.getAttribute(_n.draggableId)===t});return!d||!Bo(d)?null:d}function xx(e){var t=ae.useRef({}),r=ae.useRef(null),s=ae.useRef(null),d=ae.useRef(!1),v=ue(function(o,i){var l={id:o,focus:i};return t.current[o]=l,function(){var c=t.current,g=c[o];g!==l&&delete c[o]}},[]),y=ue(function(o){var i=Sx(e,o);i&&i!==document.activeElement&&i.focus()},[e]),u=ue(function(o,i){r.current===o&&(r.current=i)},[]),n=ue(function(){s.current||d.current&&(s.current=requestAnimationFrame(function(){s.current=null;var o=r.current;o&&y(o)}))},[y]),f=ue(function(o){r.current=null;var i=document.activeElement;i&&i.getAttribute(_n.draggableId)===o&&(r.current=o)},[]);pt(function(){return d.current=!0,function(){d.current=!1;var o=s.current;o&&cancelAnimationFrame(o)}},[]);var h=me(function(){return{register:v,tryRecordFocus:f,tryRestoreFocusRecorded:n,tryShiftRecord:u}},[v,f,n,u]);return h}function wx(){var e={draggables:{},droppables:{}},t=[];function r(a){return t.push(a),function(){var i=t.indexOf(a);i!==-1&&t.splice(i,1)}}function s(a){t.length&&t.forEach(function(o){return o(a)})}function d(a){return e.draggables[a]||null}function v(a){var o=d(a);return o||re(!1),o}var y={register:function(o){e.draggables[o.descriptor.id]=o,s({type:"ADDITION",value:o})},update:function(o,i){var l=e.draggables[i.descriptor.id];l&&l.uniqueId===o.uniqueId&&(delete e.draggables[i.descriptor.id],e.draggables[o.descriptor.id]=o)},unregister:function(o){var i=o.descriptor.id,l=d(i);l&&o.uniqueId===l.uniqueId&&(delete e.draggables[i],s({type:"REMOVAL",value:o}))},getById:v,findById:d,exists:function(o){return!!d(o)},getAllByType:function(o){return Ja(e.draggables).filter(function(i){return i.descriptor.type===o})}};function u(a){return e.droppables[a]||null}function n(a){var o=u(a);return o||re(!1),o}var f={register:function(o){e.droppables[o.descriptor.id]=o},unregister:function(o){var i=u(o.descriptor.id);i&&o.uniqueId===i.uniqueId&&delete e.droppables[o.descriptor.id]},getById:n,findById:u,exists:function(o){return!!u(o)},getAllByType:function(o){return Ja(e.droppables).filter(function(i){return i.descriptor.type===o})}};function h(){e.draggables={},e.droppables={},t.length=0}return{draggable:y,droppable:f,subscribe:r,clean:h}}function bx(){var e=me(wx,[]);return ae.useEffect(function(){return function(){requestAnimationFrame(e.clean)}},[e]),e}var Yu=ge.createContext(null),eo=function(){var e=document.body;return e||re(!1),e},_x={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},Tx=function(t){return"rbd-announcement-"+t};function Ex(e){var t=me(function(){return Tx(e)},[e]),r=ae.useRef(null);ae.useEffect(function(){var v=document.createElement("div");return r.current=v,v.id=t,v.setAttribute("aria-live","assertive"),v.setAttribute("aria-atomic","true"),fe(v.style,_x),eo().appendChild(v),function(){setTimeout(function(){var n=eo();n.contains(v)&&n.removeChild(v),v===r.current&&(r.current=null)})}},[t]);var s=ue(function(d){var v=r.current;if(v){v.textContent=d;return}},[]);return s}var Ox=0,Px={separator:"::"};function $u(e,t){return t===void 0&&(t=Px),me(function(){return""+e+t.separator+Ox++},[t.separator,e])}function Dx(e){var t=e.contextId,r=e.uniqueId;return"rbd-hidden-text-"+t+"-"+r}function kx(e){var t=e.contextId,r=e.text,s=$u("hidden-text",{separator:"-"}),d=me(function(){return Dx({contextId:t,uniqueId:s})},[s,t]);return ae.useEffect(function(){var y=document.createElement("div");return y.id=d,y.textContent=r,y.style.display="none",eo().appendChild(y),function(){var n=eo();n.contains(y)&&n.removeChild(y)}},[d,r]),d}var No=ge.createContext(null);function Ag(e){var t=ae.useRef(e);return ae.useEffect(function(){t.current=e}),t}function Ix(){var e=null;function t(){return!!e}function r(y){return y===e}function s(y){e&&re(!1);var u={abandon:y};return e=u,u}function d(){e||re(!1),e=null}function v(){e&&(e.abandon(),d())}return{isClaimed:t,isActive:r,claim:s,release:d,tryAbandon:v}}var Ax=9,Mx=13,qu=27,Mg=32,Fx=33,Lx=34,Rx=35,Bx=36,Nx=37,jx=38,zx=39,Wx=40,sa,Ux=(sa={},sa[Mx]=!0,sa[Ax]=!0,sa),Fg=function(e){Ux[e.keyCode]&&e.preventDefault()},jo=function(){var e="visibilitychange";if(typeof document>"u")return e;var t=[e,"ms"+e,"webkit"+e,"moz"+e,"o"+e],r=Er(t,function(s){return"on"+s in document});return r||e}(),Lg=0,Qf=5;function Hx(e,t){return Math.abs(t.x-e.x)>=Qf||Math.abs(t.y-e.y)>=Qf}var Jf={type:"IDLE"};function Gx(e){var t=e.cancel,r=e.completed,s=e.getPhase,d=e.setPhase;return[{eventName:"mousemove",fn:function(y){var u=y.button,n=y.clientX,f=y.clientY;if(u===Lg){var h={x:n,y:f},a=s();if(a.type==="DRAGGING"){y.preventDefault(),a.actions.move(h);return}a.type!=="PENDING"&&re(!1);var o=a.point;if(Hx(o,h)){y.preventDefault();var i=a.actions.fluidLift(h);d({type:"DRAGGING",actions:i})}}}},{eventName:"mouseup",fn:function(y){var u=s();if(u.type!=="DRAGGING"){t();return}y.preventDefault(),u.actions.drop({shouldBlockNextClick:!0}),r()}},{eventName:"mousedown",fn:function(y){s().type==="DRAGGING"&&y.preventDefault(),t()}},{eventName:"keydown",fn:function(y){var u=s();if(u.type==="PENDING"){t();return}if(y.keyCode===qu){y.preventDefault(),t();return}Fg(y)}},{eventName:"resize",fn:t},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){s().type==="PENDING"&&t()}},{eventName:"webkitmouseforcedown",fn:function(y){var u=s();if(u.type==="IDLE"&&re(!1),u.actions.shouldRespectForcePress()){t();return}y.preventDefault()}},{eventName:jo,fn:t}]}function Vx(e){var t=ae.useRef(Jf),r=ae.useRef(vr),s=me(function(){return{eventName:"mousedown",fn:function(a){if(!a.defaultPrevented&&a.button===Lg&&!(a.ctrlKey||a.metaKey||a.shiftKey||a.altKey)){var o=e.findClosestDraggableId(a);if(o){var i=e.tryGetLock(o,y,{sourceEvent:a});if(i){a.preventDefault();var l={x:a.clientX,y:a.clientY};r.current(),f(i,l)}}}}}},[e]),d=me(function(){return{eventName:"webkitmouseforcewillbegin",fn:function(a){if(!a.defaultPrevented){var o=e.findClosestDraggableId(a);if(o){var i=e.findOptionsForDraggable(o);i&&(i.shouldRespectForcePress||e.canGetLock(o)&&a.preventDefault())}}}}},[e]),v=ue(function(){var a={passive:!1,capture:!0};r.current=bt(window,[d,s],a)},[d,s]),y=ue(function(){var h=t.current;h.type!=="IDLE"&&(t.current=Jf,r.current(),v())},[v]),u=ue(function(){var h=t.current;y(),h.type==="DRAGGING"&&h.actions.cancel({shouldBlockNextClick:!0}),h.type==="PENDING"&&h.actions.abort()},[y]),n=ue(function(){var a={capture:!0,passive:!1},o=Gx({cancel:u,completed:y,getPhase:function(){return t.current},setPhase:function(l){t.current=l}});r.current=bt(window,o,a)},[u,y]),f=ue(function(a,o){t.current.type!=="IDLE"&&re(!1),t.current={type:"PENDING",point:o,actions:a},n()},[n]);pt(function(){return v(),function(){r.current()}},[v])}var Yr;function Xx(){}var Yx=(Yr={},Yr[Lx]=!0,Yr[Fx]=!0,Yr[Bx]=!0,Yr[Rx]=!0,Yr);function $x(e,t){function r(){t(),e.cancel()}function s(){t(),e.drop()}return[{eventName:"keydown",fn:function(v){if(v.keyCode===qu){v.preventDefault(),r();return}if(v.keyCode===Mg){v.preventDefault(),s();return}if(v.keyCode===Wx){v.preventDefault(),e.moveDown();return}if(v.keyCode===jx){v.preventDefault(),e.moveUp();return}if(v.keyCode===zx){v.preventDefault(),e.moveRight();return}if(v.keyCode===Nx){v.preventDefault(),e.moveLeft();return}if(Yx[v.keyCode]){v.preventDefault();return}Fg(v)}},{eventName:"mousedown",fn:r},{eventName:"mouseup",fn:r},{eventName:"click",fn:r},{eventName:"touchstart",fn:r},{eventName:"resize",fn:r},{eventName:"wheel",fn:r,options:{passive:!0}},{eventName:jo,fn:r}]}function qx(e){var t=ae.useRef(Xx),r=me(function(){return{eventName:"keydown",fn:function(v){if(v.defaultPrevented||v.keyCode!==Mg)return;var y=e.findClosestDraggableId(v);if(!y)return;var u=e.tryGetLock(y,h,{sourceEvent:v});if(!u)return;v.preventDefault();var n=!0,f=u.snapLift();t.current();function h(){n||re(!1),n=!1,t.current(),s()}t.current=bt(window,$x(f,h),{capture:!0,passive:!1})}}},[e]),s=ue(function(){var v={passive:!1,capture:!0};t.current=bt(window,[r],v)},[r]);pt(function(){return s(),function(){t.current()}},[s])}var _s={type:"IDLE"},Kx=120,Qx=.15;function Jx(e){var t=e.cancel,r=e.getPhase;return[{eventName:"orientationchange",fn:t},{eventName:"resize",fn:t},{eventName:"contextmenu",fn:function(d){d.preventDefault()}},{eventName:"keydown",fn:function(d){if(r().type!=="DRAGGING"){t();return}d.keyCode===qu&&d.preventDefault(),t()}},{eventName:jo,fn:t}]}function Zx(e){var t=e.cancel,r=e.completed,s=e.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(v){var y=s();if(y.type!=="DRAGGING"){t();return}y.hasMoved=!0;var u=v.touches[0],n=u.clientX,f=u.clientY,h={x:n,y:f};v.preventDefault(),y.actions.move(h)}},{eventName:"touchend",fn:function(v){var y=s();if(y.type!=="DRAGGING"){t();return}v.preventDefault(),y.actions.drop({shouldBlockNextClick:!0}),r()}},{eventName:"touchcancel",fn:function(v){if(s().type!=="DRAGGING"){t();return}v.preventDefault(),t()}},{eventName:"touchforcechange",fn:function(v){var y=s();y.type==="IDLE"&&re(!1);var u=v.touches[0];if(u){var n=u.force>=Qx;if(n){var f=y.actions.shouldRespectForcePress();if(y.type==="PENDING"){f&&t();return}if(f){if(y.hasMoved){v.preventDefault();return}t();return}v.preventDefault()}}}},{eventName:jo,fn:t}]}function ew(e){var t=ae.useRef(_s),r=ae.useRef(vr),s=ue(function(){return t.current},[]),d=ue(function(i){t.current=i},[]),v=me(function(){return{eventName:"touchstart",fn:function(i){if(!i.defaultPrevented){var l=e.findClosestDraggableId(i);if(l){var p=e.tryGetLock(l,u,{sourceEvent:i});if(p){var c=i.touches[0],g=c.clientX,m=c.clientY,C={x:g,y:m};r.current(),a(p,C)}}}}}},[e]),y=ue(function(){var i={capture:!0,passive:!1};r.current=bt(window,[v],i)},[v]),u=ue(function(){var o=t.current;o.type!=="IDLE"&&(o.type==="PENDING"&&clearTimeout(o.longPressTimerId),d(_s),r.current(),y())},[y,d]),n=ue(function(){var o=t.current;u(),o.type==="DRAGGING"&&o.actions.cancel({shouldBlockNextClick:!0}),o.type==="PENDING"&&o.actions.abort()},[u]),f=ue(function(){var i={capture:!0,passive:!1},l={cancel:n,completed:u,getPhase:s},p=bt(window,Zx(l),i),c=bt(window,Jx(l),i);r.current=function(){p(),c()}},[n,s,u]),h=ue(function(){var i=s();i.type!=="PENDING"&&re(!1);var l=i.actions.fluidLift(i.point);d({type:"DRAGGING",actions:l,hasMoved:!1})},[s,d]),a=ue(function(i,l){s().type!=="IDLE"&&re(!1);var p=setTimeout(h,Kx);d({type:"PENDING",point:l,actions:i,longPressTimerId:p}),f()},[f,s,d,h]);pt(function(){return y(),function(){r.current();var l=s();l.type==="PENDING"&&(clearTimeout(l.longPressTimerId),d(_s))}},[s,y,d]),pt(function(){var i=bt(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}]);return i},[])}var tw={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function Rg(e,t){if(t==null)return!1;var r=!!tw[t.tagName.toLowerCase()];if(r)return!0;var s=t.getAttribute("contenteditable");return s==="true"||s===""?!0:t===e?!1:Rg(e,t.parentElement)}function rw(e,t){var r=t.target;return Bo(r)?Rg(e,r):!1}var nw=function(e){return At(e.getBoundingClientRect()).center};function iw(e){return e instanceof Ig(e).Element}var aw=function(){var e="matches";if(typeof document>"u")return e;var t=[e,"msMatchesSelector","webkitMatchesSelector"],r=Er(t,function(s){return s in Element.prototype});return r||e}();function Bg(e,t){return e==null?null:e[aw](t)?e:Bg(e.parentElement,t)}function ow(e,t){return e.closest?e.closest(t):Bg(e,t)}function sw(e){return"["+_n.contextId+'="'+e+'"]'}function lw(e,t){var r=t.target;if(!iw(r))return null;var s=sw(e),d=ow(r,s);return!d||!Bo(d)?null:d}function uw(e,t){var r=lw(e,t);return r?r.getAttribute(_n.draggableId):null}function cw(e,t){var r="["+_l.contextId+'="'+e+'"]',s=Zp(document.querySelectorAll(r)),d=Er(s,function(v){return v.getAttribute(_l.id)===t});return!d||!Bo(d)?null:d}function fw(e){e.preventDefault()}function la(e){var t=e.expected,r=e.phase,s=e.isLockActive;return e.shouldWarn,!(!s()||t!==r)}function Ng(e){var t=e.lockAPI,r=e.store,s=e.registry,d=e.draggableId;if(t.isClaimed())return!1;var v=s.draggable.findById(d);return!(!v||!v.options.isEnabled||!Og(r.getState(),d))}function hw(e){var t=e.lockAPI,r=e.contextId,s=e.store,d=e.registry,v=e.draggableId,y=e.forceSensorStop,u=e.sourceEvent,n=Ng({lockAPI:t,store:s,registry:d,draggableId:v});if(!n)return null;var f=d.draggable.getById(v),h=cw(r,f.descriptor.id);if(!h||u&&!f.options.canDragInteractiveElements&&rw(h,u))return null;var a=t.claim(y||vr),o="PRE_DRAG";function i(){return f.options.shouldRespectForcePress}function l(){return t.isActive(a)}function p(w,_){la({expected:w,phase:o,isLockActive:l,shouldWarn:!0})&&s.dispatch(_())}var c=p.bind(null,"DRAGGING");function g(w){function _(){t.release(),o="COMPLETED"}o!=="PRE_DRAG"&&(_(),o!=="PRE_DRAG"&&re(!1)),s.dispatch(a1(w.liftActionArgs)),o="DRAGGING";function E(I,M){if(M===void 0&&(M={shouldBlockNextClick:!1}),w.cleanup(),M.shouldBlockNextClick){var z=bt(window,[{eventName:"click",fn:fw,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(z)}_(),s.dispatch(Sg({reason:I}))}return fe({isActive:function(){return la({expected:"DRAGGING",phase:o,isLockActive:l,shouldWarn:!1})},shouldRespectForcePress:i,drop:function(M){return E("DROP",M)},cancel:function(M){return E("CANCEL",M)}},w.actions)}function m(w){var _=wi(function(I){c(function(){return Cg({client:I})})}),E=g({liftActionArgs:{id:v,clientSelection:w,movementMode:"FLUID"},cleanup:function(){return _.cancel()},actions:{move:_}});return fe({},E,{move:_})}function C(){var w={moveUp:function(){return c(p1)},moveRight:function(){return c(v1)},moveDown:function(){return c(g1)},moveLeft:function(){return c(m1)}};return g({liftActionArgs:{id:v,clientSelection:nw(h),movementMode:"SNAP"},cleanup:vr,actions:w})}function S(){var w=la({expected:"PRE_DRAG",phase:o,isLockActive:l,shouldWarn:!0});w&&t.release()}var x={isActive:function(){return la({expected:"PRE_DRAG",phase:o,isLockActive:l,shouldWarn:!1})},shouldRespectForcePress:i,fluidLift:m,snapLift:C,abort:S};return x}var dw=[Vx,qx,ew];function pw(e){var t=e.contextId,r=e.store,s=e.registry,d=e.customSensors,v=e.enableDefaultSensors,y=[].concat(v?dw:[],d||[]),u=ae.useState(function(){return Ix()})[0],n=ue(function(m,C){m.isDragging&&!C.isDragging&&u.tryAbandon()},[u]);pt(function(){var m=r.getState(),C=r.subscribe(function(){var S=r.getState();n(m,S),m=S});return C},[u,r,n]),pt(function(){return u.tryAbandon},[u.tryAbandon]);for(var f=ue(function(g){return Ng({lockAPI:u,registry:s,store:r,draggableId:g})},[u,s,r]),h=ue(function(g,m,C){return hw({lockAPI:u,registry:s,contextId:t,store:r,draggableId:g,forceSensorStop:m,sourceEvent:C&&C.sourceEvent?C.sourceEvent:null})},[t,u,s,r]),a=ue(function(g){return uw(t,g)},[t]),o=ue(function(g){var m=s.draggable.findById(g);return m?m.options:null},[s.draggable]),i=ue(function(){u.isClaimed()&&(u.tryAbandon(),r.getState().phase!=="IDLE"&&r.dispatch(ju()))},[u,r]),l=ue(u.isClaimed,[u]),p=me(function(){return{canGetLock:f,tryGetLock:h,findClosestDraggableId:a,findOptionsForDraggable:o,tryReleaseLock:i,isLockClaimed:l}},[f,h,a,o,i,l]),c=0;c<y.length;c++)y[c](p)}var gw=function(t){return{onBeforeCapture:t.onBeforeCapture,onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragEnd:t.onDragEnd,onDragUpdate:t.onDragUpdate}};function Un(e){return e.current||re(!1),e.current}function vw(e){var t=e.contextId,r=e.setCallbacks,s=e.sensors,d=e.nonce,v=e.dragHandleUsageInstructions,y=ae.useRef(null),u=Ag(e),n=ue(function(){return gw(u.current)},[u]),f=Ex(t),h=kx({contextId:t,text:v}),a=Cx(t,d),o=ue(function(I){Un(y).dispatch(I)},[]),i=me(function(){return xf({publishWhileDragging:s1,updateDroppableScroll:u1,updateDroppableIsEnabled:c1,updateDroppableIsCombineEnabled:f1,collectionStarting:l1},o)},[o]),l=bx(),p=me(function(){return Q1(l,i)},[l,i]),c=me(function(){return px(fe({scrollWindow:J1,scrollDroppable:p.scrollDroppable},xf({move:Cg},o)))},[p.scrollDroppable,o]),g=xx(t),m=me(function(){return Y1({announce:f,autoScroller:c,dimensionMarshal:p,focusMarshal:g,getResponders:n,styleMarshal:a})},[f,c,p,g,n,a]);y.current=m;var C=ue(function(){var I=Un(y),M=I.getState();M.phase!=="IDLE"&&I.dispatch(ju())},[]),S=ue(function(){var I=Un(y).getState();return I.isDragging||I.phase==="DROP_ANIMATING"},[]),x=me(function(){return{isDragging:S,tryAbort:C}},[S,C]);r(x);var w=ue(function(I){return Og(Un(y).getState(),I)},[]),_=ue(function(){return Ar(Un(y).getState())},[]),E=me(function(){return{marshal:p,focus:g,contextId:t,canLift:w,isMovementAllowed:_,dragHandleUsageInstructionsId:h,registry:l}},[t,p,h,g,w,_,l]);return pw({contextId:t,store:m,registry:l,customSensors:s,enableDefaultSensors:e.enableDefaultSensors!==!1}),ae.useEffect(function(){return C},[C]),ge.createElement(No.Provider,{value:E},ge.createElement(B0,{context:Yu,store:m},e.children))}var mw=0;function yw(){return me(function(){return""+mw++},[])}function Cw(e){var t=yw(),r=e.dragHandleUsageInstructions||wa.dragHandleUsageInstructions;return ge.createElement(qC,null,function(s){return ge.createElement(vw,{nonce:e.nonce,contextId:t,setCallbacks:s,dragHandleUsageInstructions:r,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd},e.children)})}var jg=function(t){return function(r){return t===r}},Sw=jg("scroll"),xw=jg("auto"),Zf=function(t,r){return r(t.overflowX)||r(t.overflowY)},ww=function(t){var r=window.getComputedStyle(t),s={overflowX:r.overflowX,overflowY:r.overflowY};return Zf(s,Sw)||Zf(s,xw)},bw=function(){return!1},_w=function e(t){return t==null?null:t===document.body?bw()?t:null:t===document.documentElement?null:ww(t)?t:e(t.parentElement)},Tl=function(e){return{x:e.scrollLeft,y:e.scrollTop}},Tw=function e(t){if(!t)return!1;var r=window.getComputedStyle(t);return r.position==="fixed"?!0:e(t.parentElement)},Ew=function(e){var t=_w(e),r=Tw(e);return{closestScrollable:t,isFixedOnPage:r}},Ow=function(e){var t=e.descriptor,r=e.isEnabled,s=e.isCombineEnabled,d=e.isFixedOnPage,v=e.direction,y=e.client,u=e.page,n=e.closest,f=function(){if(!n)return null;var i=n.scrollSize,l=n.client,p=_g({scrollHeight:i.scrollHeight,scrollWidth:i.scrollWidth,height:l.paddingBox.height,width:l.paddingBox.width});return{pageMarginBox:n.page.marginBox,frameClient:l,scrollSize:i,shouldClipSubject:n.shouldClipSubject,scroll:{initial:n.scroll,current:n.scroll,max:p,diff:{value:ze,displacement:ze}}}}(),h=v==="vertical"?Fu:ig,a=wn({page:u,withPlaceholder:null,axis:h,frame:f}),o={descriptor:t,isCombineEnabled:s,isFixedOnPage:d,axis:h,isEnabled:r,client:y,page:u,frame:f,subject:a};return o},Pw=function(t,r){var s=$p(t);if(!r||t!==r)return s;var d=s.paddingBox.top-r.scrollTop,v=s.paddingBox.left-r.scrollLeft,y=d+r.scrollHeight,u=v+r.scrollWidth,n={top:d,right:u,bottom:y,left:v},f=Du(n,s.border),h=ku({borderBox:f,margin:s.margin,border:s.border,padding:s.padding});return h},Dw=function(e){var t=e.ref,r=e.descriptor,s=e.env,d=e.windowScroll,v=e.direction,y=e.isDropDisabled,u=e.isCombineEnabled,n=e.shouldClipSubject,f=s.closestScrollable,h=Pw(t,f),a=qa(h,d),o=function(){if(!f)return null;var l=$p(f),p={scrollHeight:f.scrollHeight,scrollWidth:f.scrollWidth};return{client:l,page:qa(l,d),scroll:Tl(f),scrollSize:p,shouldClipSubject:n}}(),i=Ow({descriptor:r,isEnabled:!y,isCombineEnabled:u,isFixedOnPage:s.isFixedOnPage,direction:v,client:h,page:a,closest:o});return i},kw={passive:!1},Iw={passive:!0},eh=function(e){return e.shouldPublishImmediately?kw:Iw};function to(e){var t=ae.useContext(e);return t||re(!1),t}var ua=function(t){return t&&t.env.closestScrollable||null};function Aw(e){var t=ae.useRef(null),r=to(No),s=$u("droppable"),d=r.registry,v=r.marshal,y=Ag(e),u=me(function(){return{id:e.droppableId,type:e.type,mode:e.mode}},[e.droppableId,e.mode,e.type]),n=ae.useRef(u),f=me(function(){return je(function(S,x){t.current||re(!1);var w={x:S,y:x};v.updateDroppableScroll(u.id,w)})},[u.id,v]),h=ue(function(){var S=t.current;return!S||!S.env.closestScrollable?ze:Tl(S.env.closestScrollable)},[]),a=ue(function(){var S=h();f(S.x,S.y)},[h,f]),o=me(function(){return wi(a)},[a]),i=ue(function(){var S=t.current,x=ua(S);S&&x||re(!1);var w=S.scrollOptions;if(w.shouldPublishImmediately){a();return}o()},[o,a]),l=ue(function(S,x){t.current&&re(!1);var w=y.current,_=w.getDroppableRef();_||re(!1);var E=Ew(_),I={ref:_,descriptor:u,env:E,scrollOptions:x};t.current=I;var M=Dw({ref:_,descriptor:u,env:E,windowScroll:S,direction:w.direction,isDropDisabled:w.isDropDisabled,isCombineEnabled:w.isCombineEnabled,shouldClipSubject:!w.ignoreContainerClipping}),z=E.closestScrollable;return z&&(z.setAttribute(qf.contextId,r.contextId),z.addEventListener("scroll",i,eh(I.scrollOptions))),M},[r.contextId,u,i,y]),p=ue(function(){var S=t.current,x=ua(S);return S&&x||re(!1),Tl(x)},[]),c=ue(function(){var S=t.current;S||re(!1);var x=ua(S);t.current=null,x&&(o.cancel(),x.removeAttribute(qf.contextId),x.removeEventListener("scroll",i,eh(S.scrollOptions)))},[i,o]),g=ue(function(S){var x=t.current;x||re(!1);var w=ua(x);w||re(!1),w.scrollTop+=S.y,w.scrollLeft+=S.x},[]),m=me(function(){return{getDimensionAndWatchScroll:l,getScrollWhileDragging:p,dragStopped:c,scroll:g}},[c,l,p,g]),C=me(function(){return{uniqueId:s,descriptor:u,callbacks:m}},[m,u,s]);pt(function(){return n.current=C.descriptor,d.droppable.register(C),function(){t.current&&c(),d.droppable.unregister(C)}},[m,u,c,C,v,d.droppable]),pt(function(){t.current&&v.updateDroppableIsEnabled(n.current.id,!e.isDropDisabled)},[e.isDropDisabled,v]),pt(function(){t.current&&v.updateDroppableIsCombineEnabled(n.current.id,e.isCombineEnabled)},[e.isCombineEnabled,v])}function Ts(){}var th={width:0,height:0,margin:tS},Mw=function(t){var r=t.isAnimatingOpenOnMount,s=t.placeholder,d=t.animate;return r||d==="close"?th:{height:s.client.borderBox.height,width:s.client.borderBox.width,margin:s.client.margin}},Fw=function(t){var r=t.isAnimatingOpenOnMount,s=t.placeholder,d=t.animate,v=Mw({isAnimatingOpenOnMount:r,placeholder:s,animate:d});return{display:s.display,boxSizing:"border-box",width:v.width,height:v.height,marginTop:v.margin.top,marginRight:v.margin.right,marginBottom:v.margin.bottom,marginLeft:v.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:d!=="none"?ni.placeholder:null}};function Lw(e){var t=ae.useRef(null),r=ue(function(){t.current&&(clearTimeout(t.current),t.current=null)},[]),s=e.animate,d=e.onTransitionEnd,v=e.onClose,y=e.contextId,u=ae.useState(e.animate==="open"),n=u[0],f=u[1];ae.useEffect(function(){return n?s!=="open"?(r(),f(!1),Ts):t.current?Ts:(t.current=setTimeout(function(){t.current=null,f(!1)}),r):Ts},[s,n,r]);var h=ue(function(o){o.propertyName==="height"&&(d(),s==="close"&&v())},[s,v,d]),a=Fw({isAnimatingOpenOnMount:n,animate:e.animate,placeholder:e.placeholder});return ge.createElement(e.placeholder.tagName,{style:a,"data-rbd-placeholder-context-id":y,onTransitionEnd:h,ref:e.innerRef})}var Rw=ge.memo(Lw),Ku=ge.createContext(null),Bw=function(e){Op(t,e);function t(){for(var s,d=arguments.length,v=new Array(d),y=0;y<d;y++)v[y]=arguments[y];return s=e.call.apply(e,[this].concat(v))||this,s.state={isVisible:!!s.props.on,data:s.props.on,animate:s.props.shouldAnimate&&s.props.on?"open":"none"},s.onClose=function(){s.state.animate==="close"&&s.setState({isVisible:!1})},s}t.getDerivedStateFromProps=function(d,v){return d.shouldAnimate?d.on?{isVisible:!0,data:d.on,animate:"open"}:v.isVisible?{isVisible:!0,data:v.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!d.on,data:d.on,animate:"none"}};var r=t.prototype;return r.render=function(){if(!this.state.isVisible)return null;var d={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(d)},t}(ge.PureComponent),rh={dragging:5e3,dropAnimating:4500},Nw=function(t,r){return r?ni.drop(r.duration):t?ni.snap:ni.fluid},jw=function(t,r){return t?r?Ei.opacity.drop:Ei.opacity.combining:null},zw=function(t){return t.forceShouldAnimate!=null?t.forceShouldAnimate:t.mode==="SNAP"};function Ww(e){var t=e.dimension,r=t.client,s=e.offset,d=e.combineWith,v=e.dropping,y=!!d,u=zw(e),n=!!v,f=n?wl.drop(s,y):wl.moveTo(s),h={position:"fixed",top:r.marginBox.top,left:r.marginBox.left,boxSizing:"border-box",width:r.borderBox.width,height:r.borderBox.height,transition:Nw(u,v),transform:f,opacity:jw(y,n),zIndex:n?rh.dropAnimating:rh.dragging,pointerEvents:"none"};return h}function Uw(e){return{transform:wl.moveTo(e.offset),transition:e.shouldAnimateDisplacement?null:"none"}}function Hw(e){return e.type==="DRAGGING"?Ww(e):Uw(e)}function Gw(e,t,r){r===void 0&&(r=ze);var s=window.getComputedStyle(t),d=t.getBoundingClientRect(),v=Yp(d,s),y=qa(v,r),u={client:v,tagName:t.tagName.toLowerCase(),display:s.display},n={x:v.marginBox.width,y:v.marginBox.height},f={descriptor:e,placeholder:u,displaceBy:n,client:v,page:y};return f}function Vw(e){var t=$u("draggable"),r=e.descriptor,s=e.registry,d=e.getDraggableRef,v=e.canDragInteractiveElements,y=e.shouldRespectForcePress,u=e.isEnabled,n=me(function(){return{canDragInteractiveElements:v,shouldRespectForcePress:y,isEnabled:u}},[v,u,y]),f=ue(function(i){var l=d();return l||re(!1),Gw(r,l,i)},[r,d]),h=me(function(){return{uniqueId:t,descriptor:r,options:n,getDimension:f}},[r,f,n,t]),a=ae.useRef(h),o=ae.useRef(!0);pt(function(){return s.draggable.register(a.current),function(){return s.draggable.unregister(a.current)}},[s.draggable]),pt(function(){if(o.current){o.current=!1;return}var i=a.current;a.current=h,s.draggable.update(h,i)},[h,s.draggable])}function Xw(e){e.preventDefault()}function Yw(e){var t=ae.useRef(null),r=ue(function(I){t.current=I},[]),s=ue(function(){return t.current},[]),d=to(No),v=d.contextId,y=d.dragHandleUsageInstructionsId,u=d.registry,n=to(Ku),f=n.type,h=n.droppableId,a=me(function(){return{id:e.draggableId,index:e.index,type:f,droppableId:h}},[e.draggableId,e.index,f,h]),o=e.children,i=e.draggableId,l=e.isEnabled,p=e.shouldRespectForcePress,c=e.canDragInteractiveElements,g=e.isClone,m=e.mapped,C=e.dropAnimationFinished;if(!g){var S=me(function(){return{descriptor:a,registry:u,getDraggableRef:s,canDragInteractiveElements:c,shouldRespectForcePress:p,isEnabled:l}},[a,u,s,c,p,l]);Vw(S)}var x=me(function(){return l?{tabIndex:0,role:"button","aria-describedby":y,"data-rbd-drag-handle-draggable-id":i,"data-rbd-drag-handle-context-id":v,draggable:!1,onDragStart:Xw}:null},[v,y,i,l]),w=ue(function(I){m.type==="DRAGGING"&&m.dropping&&I.propertyName==="transform"&&C()},[C,m]),_=me(function(){var I=Hw(m),M=m.type==="DRAGGING"&&m.dropping?w:null,z={innerRef:r,draggableProps:{"data-rbd-draggable-context-id":v,"data-rbd-draggable-id":i,style:I,onTransitionEnd:M},dragHandleProps:x};return z},[v,x,i,m,w,r]),E=me(function(){return{draggableId:a.id,type:a.type,source:{index:a.index,droppableId:a.droppableId}}},[a.droppableId,a.id,a.index,a.type]);return o(_,m.snapshot,E)}var zg=function(e,t){return e===t},Wg=function(e){var t=e.combine,r=e.destination;return r?r.droppableId:t?t.droppableId:null},$w=function(t){return t.combine?t.combine.draggableId:null},qw=function(t){return t.at&&t.at.type==="COMBINE"?t.at.combine.draggableId:null};function Kw(){var e=je(function(d,v){return{x:d,y:v}}),t=je(function(d,v,y,u,n){return{isDragging:!0,isClone:v,isDropAnimating:!!n,dropAnimation:n,mode:d,draggingOver:y,combineWith:u,combineTargetFor:null}}),r=je(function(d,v,y,u,n,f,h){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:n,combineWith:f,mode:v,offset:d,dimension:y,forceShouldAnimate:h,snapshot:t(v,u,n,f,null)}}}),s=function(v,y){if(v.isDragging){if(v.critical.draggable.id!==y.draggableId)return null;var u=v.current.client.offset,n=v.dimensions.draggables[y.draggableId],f=dt(v.impact),h=qw(v.impact),a=v.forceShouldAnimate;return r(e(u.x,u.y),v.movementMode,n,y.isClone,f,h,a)}if(v.phase==="DROP_ANIMATING"){var o=v.completed;if(o.result.draggableId!==y.draggableId)return null;var i=y.isClone,l=v.dimensions.draggables[y.draggableId],p=o.result,c=p.mode,g=Wg(p),m=$w(p),C=v.dropDuration,S={duration:C,curve:Wu.drop,moveTo:v.newHomeClientOffset,opacity:m?Ei.opacity.drop:null,scale:m?Ei.scale.drop:null};return{mapped:{type:"DRAGGING",offset:v.newHomeClientOffset,dimension:l,dropping:S,draggingOver:g,combineWith:m,mode:c,forceShouldAnimate:null,snapshot:t(c,i,g,m,S)}}}return null};return s}function Ug(e){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}var Qw={mapped:{type:"SECONDARY",offset:ze,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:Ug(null)}};function Jw(){var e=je(function(y,u){return{x:y,y:u}}),t=je(Ug),r=je(function(y,u,n){return u===void 0&&(u=null),{mapped:{type:"SECONDARY",offset:y,combineTargetFor:u,shouldAnimateDisplacement:n,snapshot:t(u)}}}),s=function(u){return u?r(ze,u,!0):null},d=function(u,n,f,h){var a=f.displaced.visible[u],o=!!(h.inVirtualList&&h.effected[u]),i=Fo(f),l=i&&i.draggableId===u?n:null;if(!a){if(!o)return s(l);if(f.displaced.invisible[u])return null;var p=Pn(h.displacedBy.point),c=e(p.x,p.y);return r(c,l,!0)}if(o)return s(l);var g=f.displacedBy.point,m=e(g.x,g.y);return r(m,l,a.shouldAnimate)},v=function(u,n){if(u.isDragging)return u.critical.draggable.id===n.draggableId?null:d(n.draggableId,u.critical.draggable.id,u.impact,u.afterCritical);if(u.phase==="DROP_ANIMATING"){var f=u.completed;return f.result.draggableId===n.draggableId?null:d(n.draggableId,f.result.draggableId,f.impact,f.afterCritical)}return null};return v}var Zw=function(){var t=Kw(),r=Jw(),s=function(v,y){return t(v,y)||r(v,y)||Qw};return s},eb={dropAnimationFinished:xg},tb=Vp(Zw,eb,null,{context:Yu,pure:!0,areStatePropsEqual:zg})(Yw);function Hg(e){var t=to(Ku),r=t.isUsingCloneFor;return r===e.draggableId&&!e.isClone?null:ge.createElement(tb,e)}function rb(e){var t=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,r=!!e.disableInteractiveElementBlocking,s=!!e.shouldRespectForcePress;return ge.createElement(Hg,fe({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:r,shouldRespectForcePress:s}))}function nb(e){var t=ae.useContext(No);t||re(!1);var r=t.contextId,s=t.isMovementAllowed,d=ae.useRef(null),v=ae.useRef(null),y=e.children,u=e.droppableId,n=e.type,f=e.mode,h=e.direction,a=e.ignoreContainerClipping,o=e.isDropDisabled,i=e.isCombineEnabled,l=e.snapshot,p=e.useClone,c=e.updateViewportMaxScroll,g=e.getContainerForClone,m=ue(function(){return d.current},[]),C=ue(function(z){d.current=z},[]);ue(function(){return v.current},[]);var S=ue(function(z){v.current=z},[]),x=ue(function(){s()&&c({maxScroll:Eg()})},[s,c]);Aw({droppableId:u,type:n,mode:f,direction:h,isDropDisabled:o,isCombineEnabled:i,ignoreContainerClipping:a,getDroppableRef:m});var w=ge.createElement(Bw,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},function(z){var Q=z.onClose,ee=z.data,q=z.animate;return ge.createElement(Rw,{placeholder:ee,onClose:Q,innerRef:S,animate:q,contextId:r,onTransitionEnd:x})}),_=me(function(){return{innerRef:C,placeholder:w,droppableProps:{"data-rbd-droppable-id":u,"data-rbd-droppable-context-id":r}}},[r,u,w,C]),E=p?p.dragging.draggableId:null,I=me(function(){return{droppableId:u,type:n,isUsingCloneFor:E}},[u,E,n]);function M(){if(!p)return null;var z=p.dragging,Q=p.render,ee=ge.createElement(Hg,{draggableId:z.draggableId,index:z.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},function(q,J){return Q(q,J,z)});return wy.createPortal(ee,g())}return ge.createElement(Ku.Provider,{value:I},y(_,l),M())}var Es=function(t,r){return t===r.droppable.type},nh=function(t,r){return r.draggables[t.draggable.id]},ib=function(){var t={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},r=fe({},t,{shouldAnimatePlaceholder:!1}),s=je(function(y){return{draggableId:y.id,type:y.type,source:{index:y.index,droppableId:y.droppableId}}}),d=je(function(y,u,n,f,h,a){var o=h.descriptor.id,i=h.descriptor.droppableId===y;if(i){var l=a?{render:a,dragging:s(h.descriptor)}:null,p={isDraggingOver:n,draggingOverWith:n?o:null,draggingFromThisWith:o,isUsingPlaceholder:!0};return{placeholder:h.placeholder,shouldAnimatePlaceholder:!1,snapshot:p,useClone:l}}if(!u)return r;if(!f)return t;var c={isDraggingOver:n,draggingOverWith:o,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:h.placeholder,shouldAnimatePlaceholder:!0,snapshot:c,useClone:null}}),v=function(u,n){var f=n.droppableId,h=n.type,a=!n.isDropDisabled,o=n.renderClone;if(u.isDragging){var i=u.critical;if(!Es(h,i))return r;var l=nh(i,u.dimensions),p=dt(u.impact)===f;return d(f,a,p,p,l,o)}if(u.phase==="DROP_ANIMATING"){var c=u.completed;if(!Es(h,c.critical))return r;var g=nh(c.critical,u.dimensions);return d(f,a,Wg(c.result)===f,dt(c.impact)===f,g,o)}if(u.phase==="IDLE"&&u.completed&&!u.shouldFlush){var m=u.completed;if(!Es(h,m.critical))return r;var C=dt(m.impact)===f,S=!!(m.impact.at&&m.impact.at.type==="COMBINE"),x=m.critical.droppable.id===f;return C?S?t:r:x?t:r}return r};return v},ab={updateViewportMaxScroll:d1};function ob(){return document.body||re(!1),document.body}var sb={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:ob},Gg=Vp(ib,ab,null,{context:Yu,pure:!0,areStatePropsEqual:zg})(nb);Gg.defaultProps=sb;const lb=()=>{const{layers:e,selectedLayerId:t,setSelectedLayerId:r,toggleLayerVisibility:s,toggleLayerLock:d,moveLayerUp:v,moveLayerDown:y,reorderLayers:u}=xu(),n=f=>{if(!f.destination)return;const h=f.source.index,a=f.destination.index;u(h,a)};return R.jsxs("div",{className:"layer-manager",children:[R.jsx("h3",{children:"Layers"}),R.jsx(Cw,{onDragEnd:n,children:R.jsx(Gg,{droppableId:"layers",children:f=>R.jsxs("ul",{className:"layer-list",...f.droppableProps,ref:f.innerRef,children:[e.map((h,a)=>R.jsx(rb,{draggableId:h.id,index:a,isDragDisabled:!h.selectable,children:o=>R.jsxs("li",{ref:o.innerRef,...o.draggableProps,className:`layer-item ${t===h.id?"selected":""}`,onClick:()=>r(h.id),children:[R.jsx("div",{className:"drag-handle",...o.dragHandleProps,children:""}),R.jsx("button",{className:"visibility-toggle",onClick:i=>{i.stopPropagation(),s(h.id)},children:h.visible!==!1?R.jsx(v0,{}):R.jsx(g0,{})}),R.jsx("span",{className:"layer-name",children:h.name||h.id}),R.jsxs("div",{className:"layer-controls",children:[R.jsx("button",{onClick:i=>{i.stopPropagation(),d(h.id)},children:h.selectable?R.jsx(m0,{}):R.jsx(y0,{})}),R.jsx("button",{onClick:i=>{i.stopPropagation(),v(h.id)},disabled:a>=e.length-1,children:R.jsx(h0,{})}),R.jsx("button",{onClick:i=>{i.stopPropagation(),y(h.id)},disabled:a<=0,children:R.jsx(f0,{})})]})]})},h.id)),f.placeholder]})})})]})};const ub=()=>{const[e,t]=ge.useState("normal"),r=s=>{t(s);const d=new CustomEvent("background-state-change",{detail:{state:s}});document.dispatchEvent(d)};return R.jsxs("div",{className:"background-options",children:[R.jsx("h3",{children:"Background Style"}),R.jsxs("div",{className:"background-mode-selector",children:[R.jsx("button",{className:`mode-button ${e==="normal"?"active":""}`,onClick:()=>r("normal"),children:"Normal"}),R.jsx("button",{className:`mode-button ${e==="rave"?"active":""}`,onClick:()=>r("rave"),children:"Enhanced"}),R.jsx("button",{className:`mode-button ${e==="techno"?"active":""}`,onClick:()=>r("techno"),children:"Techno"})]}),R.jsxs("div",{className:"background-color-theme",children:[R.jsx("label",{htmlFor:"theme-toggle",children:"Dark Theme"}),R.jsxs("div",{className:"toggle-switch small",children:[R.jsx("input",{type:"checkbox",id:"theme-toggle",checked:!0,onChange:()=>alert("Theme switching would be implemented here")}),R.jsx("span",{className:"toggle-slider"})]})]})]})};const cb=()=>{const{loadCardTemplate:e}=Tr(),t=r=>{window.confirm("Loading a template will replace your current card. Continue?")&&e(t0[r])};return R.jsxs("div",{className:"card-templates",children:[R.jsx("h3",{children:"Card Templates"}),R.jsx("p",{className:"templates-description",children:"Start with a pre-configured card template"}),R.jsxs("div",{className:"template-grid",children:[R.jsxs("div",{className:"template-item",onClick:()=>t("charizard"),children:[R.jsx("div",{className:"template-preview fire",children:R.jsx("span",{children:"Fire"})}),R.jsx("p",{children:"Charizard"})]}),R.jsxs("div",{className:"template-item",onClick:()=>t("blastoise"),children:[R.jsx("div",{className:"template-preview water",children:R.jsx("span",{children:"Water"})}),R.jsx("p",{children:"Blastoise"})]}),R.jsxs("div",{className:"template-item",onClick:()=>t("dualTypeExample"),children:[R.jsxs("div",{className:"template-preview dual",children:[R.jsx("div",{className:"dual-left fire"}),R.jsx("div",{className:"dual-right dark"})]}),R.jsx("p",{children:"Dual Type"})]})]}),R.jsx("div",{className:"template-options",children:R.jsx("button",{className:"save-current-template",children:"Save Current as Template"})})]})},fb=()=>{const{isDualType:e,toggleDualType:t}=Tr(),{layers:r}=xu();return R.jsxs("div",{className:"editor-container",children:[R.jsxs($y,{children:[R.jsx(b0,{}),R.jsx(Ep,{}),R.jsx(E0,{isDualType:e,onToggle:t}),e&&R.jsx(O0,{})]}),R.jsxs(qy,{children:[R.jsx(o0,{}),R.jsx(w0,{})]}),R.jsxs(Ky,{children:[R.jsx(lb,{layers:r}),R.jsx(ub,{}),R.jsx(cb,{})]})]})};const hb=()=>R.jsxs("div",{className:"app",children:[R.jsx("div",{id:"threejs-bg"}),R.jsxs("header",{className:"app-header",children:[R.jsx("h1",{children:"Pokmon Card Maker"}),R.jsx("p",{className:"subtitle",children:"Create custom dual-type Pokmon cards"})]}),R.jsx("main",{className:"app-main",children:R.jsx(fb,{})}),R.jsx("footer",{className:"app-footer",children:R.jsxs("p",{children:["Pokmon Card Maker - Enhanced Dual-Type Edition",R.jsx("br",{}),R.jsx("small",{children:"Pokmon and its trademarks are Nintendo, Game Freak, and The Pokmon Company"})]})})]});try{ih(()=>import("./background-80210617.js"),[])}catch(e){console.warn("Background effects not loaded:",e)}const db=mp(document.getElementById("root"));db.render(R.jsx(ge.StrictMode,{children:R.jsx(hb,{})}));
//# sourceMappingURL=index-554827df.js.map
